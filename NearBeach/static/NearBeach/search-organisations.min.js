"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8277],{3914:(t,a,s)=>{s.r(a),s.d(a,{default:()=>d});var e=s(641),r=s(3751);const i={class:"card"},o={class:"card-body"},n={class:"form-group mt-4"},l={key:0,class:"alert alert-warning"},c={class:"row submit-row"},h={class:"col-md-12"},g=["href"],u={name:"SearchOrganisations",components:{ListOrganisations:s(4058).A},props:{organisationResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"}},data(){return{localOrganisationResults:this.organisationResults,searchModel:"",searchTimeout:""}},methods:{getSearchResults(){const t=new FormData;t.set("search",this.searchModel),this.axios.post(`${this.rootUrl}search/organisation/data/`,t).then((t=>{this.localOrganisationResults=t.data})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Getting Search Results",message:`Sorry, we could not get search results. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))}},watch:{searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),(this.searchModel.length>=3||0===this.searchModel.length)&&(this.searchTimeout=setTimeout((()=>{this.getSearchResults()}),500))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},d=(0,s(6262).A)(u,[["render",function(t,a,s,u,d,m){const p=(0,e.g2)("list-organisations");return(0,e.uX)(),(0,e.CE)("div",i,[(0,e.Lk)("div",o,[(0,e.Q3)(" HEADING "),a[2]||(a[2]=(0,e.Lk)("h1",{class:"mb-4"},"Search Organisations",-1)),(0,e.Q3)(" SEARCH FIELD "),(0,e.Lk)("div",n,[a[1]||(a[1]=(0,e.Lk)("label",null,"Search:",-1)),(0,e.bo)((0,e.Lk)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":a[0]||(a[0]=t=>d.searchModel=t)},null,512),[[r.vModelText,d.searchModel]])]),(0,e.Q3)(" LIST OUT SEARCH RESULTS "),a[3]||(a[3]=(0,e.Lk)("hr",null,null,-1)),(0,e.bF)(p,{"organisation-results":d.localOrganisationResults},null,8,["organisation-results"]),(0,e.Q3)(" SHOW IF NO RESULTS "),0===d.localOrganisationResults.length?((0,e.uX)(),(0,e.CE)("div",l," There are no organisations with the search parameters used. Please try again. ")):(0,e.Q3)("v-if",!0),a[4]||(a[4]=(0,e.Lk)("hr",null,null,-1)),(0,e.Lk)("div",c,[(0,e.Lk)("div",h,[(0,e.Lk)("a",{href:`${s.rootUrl}new_organisation/`,class:"btn btn-primary save-changes"}," Add new Organisation ",8,g)])])])])}]])},4058:(t,a,s)=>{s.d(a,{A:()=>p});var e=s(641),r=s(33);const i=["src"],o={class:"organisation-name"},n=["href"],l={class:"organisation-link"},c=["href"],h={class:"organisation-email"},g=["href"];var u=s(2124),d=s(3980);const m={name:"ListOrganisations",components:{CarbonEmail:d.G2,CarbonLink:d.wX},props:{organisationResults:{type:Array,default:()=>[]}},computed:{...(0,u.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},methods:{getProfilePicture(t){const a=t.fields.organisation_profile_picture;return""===a||null===a?`${this.staticUrl}NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${a}`}}},p=(0,s(6262).A)(m,[["render",function(t,a,s,u,d,m){const p=(0,e.g2)("carbon-link"),f=(0,e.g2)("carbon-email");return(0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.organisationResults,(s=>((0,e.uX)(),(0,e.CE)("div",{key:s.id,class:"organisation-details"},[(0,e.Lk)("img",{src:m.getProfilePicture(s),alt:"Stakeholder Logo",class:"organisation-image"},null,8,i),(0,e.Lk)("div",o,[(0,e.Lk)("a",{href:`${t.rootUrl}organisation_information/${s.pk}/`},(0,r.toDisplayString)(s.fields.organisation_name),9,n)]),(0,e.Lk)("div",l,[(0,e.bF)(p),a[0]||(a[0]=(0,e.eW)(" Website: ")),(0,e.Lk)("a",{href:s.fields.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,r.toDisplayString)(s.fields.organisation_website),9,c)]),(0,e.Lk)("div",h,[(0,e.bF)(f),a[1]||(a[1]=(0,e.eW)(" Email: ")),(0,e.Lk)("a",{href:`mailto:${s.fields.organisation_email}`},(0,r.toDisplayString)(s.fields.organisation_email),9,g)])])))),128)}]])},6262:(t,a)=>{a.A=(t,a)=>{const s=t.__vccOpts||t;for(const[t,e]of a)s[t]=e;return s}}}]);