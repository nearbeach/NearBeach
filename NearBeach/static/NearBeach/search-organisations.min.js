"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8277],{6262:(a,t)=>{t.A=(a,t)=>{const s=a.__vccOpts||a;for(const[a,e]of t)s[a]=e;return s}},4058:(a,t,s)=>{s.d(t,{A:()=>p});var e=s(641),r=s(33);const i=["src"],o={class:"organisation-name"},n=["href"],l={class:"organisation-link"},c=["href"],h={class:"organisation-email"},u=["href"];var g=s(2124),d=s(3980);const m={name:"ListOrganisations",components:{CarbonEmail:d.G2,CarbonLink:d.wX},props:{organisationResults:{type:Array,default:()=>[]}},computed:{...(0,g.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},methods:{getProfilePicture(a){const t=a.fields.organisation_profile_picture;return""===t||null===t?`${this.staticUrl}NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${t}`}}},p=(0,s(6262).A)(m,[["render",function(a,t,s,g,d,m){const p=(0,e.g2)("carbon-link"),f=(0,e.g2)("carbon-email");return(0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.organisationResults,(s=>((0,e.uX)(),(0,e.CE)("div",{key:s.id,class:"organisation-details"},[(0,e.Lk)("img",{src:m.getProfilePicture(s),alt:"Stakeholder Logo",class:"organisation-image"},null,8,i),(0,e.Lk)("div",o,[(0,e.Lk)("a",{href:`${a.rootUrl}organisation_information/${s.pk}/`},(0,r.toDisplayString)(s.fields.organisation_name),9,n)]),(0,e.Lk)("div",l,[(0,e.bF)(p),t[0]||(t[0]=(0,e.eW)(" Website: ")),(0,e.Lk)("a",{href:s.fields.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,r.toDisplayString)(s.fields.organisation_website),9,c)]),(0,e.Lk)("div",h,[(0,e.bF)(f),t[1]||(t[1]=(0,e.eW)(" Email: ")),(0,e.Lk)("a",{href:`mailto:${s.fields.organisation_email}`},(0,r.toDisplayString)(s.fields.organisation_email),9,u)])])))),128)}]])},3094:(a,t,s)=>{s.r(t),s.d(t,{default:()=>d});var e=s(641),r=s(3751);const i={class:"card"},o={class:"card-body"},n={class:"form-group mt-4"},l={key:0,class:"alert alert-warning"},c={class:"row submit-row"},h={class:"col-md-12"},u=["href"],g={name:"SearchOrganisations",components:{ListOrganisations:s(4058).A},props:{organisationResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"}},data(){return{localOrganisationResults:this.organisationResults,searchModel:"",searchTimeout:""}},methods:{getSearchResults(){const a=new FormData;a.set("search",this.searchModel),this.axios.post(`${this.rootUrl}search/organisation/data/`,a).then((a=>{this.localOrganisationResults=a.data})).catch((a=>{this.$store.dispatch("newToast",{header:"Error Getting Search Results",message:`Sorry, we could not get search results. Error -> ${a}`,extra_classes:"bg-danger",delay:0})}))}},watch:{searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchModel.length>=3&&(this.searchTimeout=setTimeout((()=>{this.getSearchResults()}),500))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},d=(0,s(6262).A)(g,[["render",function(a,t,s,g,d,m){const p=(0,e.g2)("list-organisations");return(0,e.uX)(),(0,e.CE)("div",i,[(0,e.Lk)("div",o,[(0,e.Q3)(" HEADING "),t[2]||(t[2]=(0,e.Lk)("h1",{class:"mb-4"},"Search Organisations",-1)),(0,e.Q3)(" SEARCH FIELD "),(0,e.Lk)("div",n,[t[1]||(t[1]=(0,e.Lk)("label",null,"Search:",-1)),(0,e.bo)((0,e.Lk)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=a=>d.searchModel=a)},null,512),[[r.vModelText,d.searchModel]])]),(0,e.Q3)(" LIST OUT SEARCH RESULTS "),t[3]||(t[3]=(0,e.Lk)("hr",null,null,-1)),(0,e.bF)(p,{"organisation-results":d.localOrganisationResults},null,8,["organisation-results"]),(0,e.Q3)(" SHOW IF NO RESULTS "),0===d.localOrganisationResults.length?((0,e.uX)(),(0,e.CE)("div",l," There are no organisations with the search parameters used. Please try again. ")):(0,e.Q3)("v-if",!0),t[4]||(t[4]=(0,e.Lk)("hr",null,null,-1)),(0,e.Lk)("div",c,[(0,e.Lk)("div",h,[(0,e.Lk)("a",{href:`${s.rootUrl}new_organisation/`,class:"btn btn-primary save-changes"}," Add new Organisation ",8,u)])])])])}]])}}]);