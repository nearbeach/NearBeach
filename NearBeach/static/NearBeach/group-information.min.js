"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6373],{5443:(e,t,o)=>{o.r(t),o.d(t,{default:()=>U});var r=o(641),a=o(3751);const s={class:"card"},l={class:"card-body"},u=["href"],n={class:"row"},p={class:"col-md-8"},d={class:"form-group"},i={class:"form-group"},c={class:"row submit-row"},m={class:"col-md-12"};var h=o(3913),g=o(1080),b=o(9336);const f={class:"modal fade",id:"confirmGroupDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmGroupDelete","aria-hidden":"true"},k={class:"modal-dialog"},G={class:"modal-content"},y={class:"modal-footer"},v={name:"ConfirmGroupDelete",computed:{...(0,o(2124).L8)({rootUrl:"getRootUrl"})},props:{groupId:{type:Number,default:0}},methods:{closeModal(){document.getElementById("confirmGroupDeleteButton").click()},deleteGroup(){0!==this.groupId?this.axios.post(`${this.rootUrl}group_information/${this.groupId}/delete/`).then((()=>{window.location=`${this.rootUrl}search/group/`})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Deleting Group",message:`Sorry could not delete the group. Error -> ${e}`,extra_classes:"bg-danger",delay:0})})):this.$store.dispatch("newToast",{header:"Group ID not valid",message:"Sorry, current group ID is not valid",extra_classes:"bg-danger",delay:0})}}};var L=o(6262);const _=(0,L.A)(v,[["render",function(e,t,o,a,s,l){return(0,r.uX)(),(0,r.CE)("div",f,[(0,r.Lk)("div",k,[(0,r.Lk)("div",G,[t[2]||(t[2]=(0,r.Lk)("div",{class:"modal-header"},[(0,r.Lk)("h5",{class:"modal-title",id:"confirmGroupDelete"}," Please confirm Group Deletion "),(0,r.Q3)(" TASK INFORMATION "),(0,r.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmGroupDeleteButton"})],-1)),t[3]||(t[3]=(0,r.Lk)("div",{class:"modal-body"}," Please confirm you would like to delete this group. This is permanent. ",-1)),(0,r.Lk)("div",y,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.deleteGroup&&l.deleteGroup(...e))}," Yes ")])])])])}]]);var w=o(9581);const M={name:"GroupInformation",components:{ConfirmGroupDelete:_,NConfigProvider:h.A,NSelect:g.A},props:{groupResults:{type:Array,default:()=>[]},parentGroupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},data(){return{groupNameModel:this.groupResults[0].fields.group_name,parentGroupFixList:[],parentGroupModel:this.groupResults[0].fields.parent_group}},methods:{useNBTheme:w.p,confirmDelete(){new b.aF(document.getElementById("confirmGroupDeleteModal")).show()},updateGroup(){const e=new FormData;e.set("group_name",this.groupNameModel),null!==this.parentGroupModel&&""!==this.parentGroupModel&&e.set("parent_group",this.parentGroupModel),this.$store.dispatch("newToast",{header:"Updated Group",message:"Updated Group. Please wait.",extra_classes:"bg-warning text-dark",delay:0,unique_type:"update_group_leader"}),this.axios.post(`${this.rootUrl}group_information/${this.groupResults[0].pk}/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Updated Group",message:"Successfully Update Group",extra_classes:"bg-success",delay:0,unique_type:"update_group_leader"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Group",message:`We had an issue updating group. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"update_group_leader"})}))}},mounted(){const e=this.parentGroupResults.map((e=>({group_name:e.fields.group_name,label:e.fields.group_name,value:e.pk})));this.parentGroupFixList=e,this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl}),this.$store.commit({type:"updateTitle",title:this.groupNameModel})}},U=(0,L.A)(M,[["render",function(e,t,o,h,g,b){const f=(0,r.g2)("n-select"),k=(0,r.g2)("confirm-group-delete"),G=(0,r.g2)("n-config-provider");return(0,r.uX)(),(0,r.Wv)(G,{theme:b.useNBTheme(o.theme)},{default:(0,r.k6)((()=>[(0,r.Lk)("div",s,[(0,r.Lk)("div",l,[t[7]||(t[7]=(0,r.Lk)("h1",{class:"mb-4"},"Group Information",-1)),(0,r.Lk)("a",{href:`${this.rootUrl}search/group/`},"Back to group list",8,u),t[8]||(t[8]=(0,r.Lk)("hr",null,null,-1)),(0,r.Lk)("div",n,[t[6]||(t[6]=(0,r.Lk)("div",{class:"col-md-4"},[(0,r.Lk)("strong",null,"Group Information"),(0,r.Lk)("p",{class:"text-instruction"}," Please edit the group information here. Please note - groups have to be unique! ")],-1)),(0,r.Lk)("div",p,[(0,r.Lk)("div",d,[t[4]||(t[4]=(0,r.Lk)("label",null,"Group Name",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>g.groupNameModel=e),class:"form-control"},null,512),[[a.vModelText,g.groupNameModel]])]),(0,r.Lk)("div",i,[t[5]||(t[5]=(0,r.Lk)("label",null,"Parent Group",-1)),(0,r.bF)(f,{value:g.parentGroupModel,"onUpdate:value":t[1]||(t[1]=e=>g.parentGroupModel=e),filterable:"",options:g.parentGroupFixList,clearable:""},null,8,["value","options"])])])]),(0,r.Q3)(" Submit Button "),t[9]||(t[9]=(0,r.Lk)("hr",null,null,-1)),(0,r.Lk)("div",c,[(0,r.Lk)("div",m,[1!==parseInt(o.groupResults[0].pk)?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>b.confirmDelete&&b.confirmDelete(...e))}," Delete Group ")):(0,r.Q3)("v-if",!0),(0,r.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[3]||(t[3]=(...e)=>b.updateGroup&&b.updateGroup(...e))}," Update Group ")])])])]),(0,r.bF)(k,{"group-id":o.groupResults[0].pk},null,8,["group-id"])])),_:1},8,["theme"])}]])},9581:(e,t,o)=>{o.d(t,{p:()=>s});var r=o(953),a=o(166);function s(e){return"dark"===(0,r.BA)(e)?a.a:null}}}]);