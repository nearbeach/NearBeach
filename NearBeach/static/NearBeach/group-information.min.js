"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6373],{5751:(e,t,o)=>{o.r(t),o.d(t,{default:()=>A});var r=o(641),a=o(3751);const s={class:"card"},l={class:"card-body"},u=(0,r.Lk)("h1",null,"Group Information",-1),n=["href"],d=(0,r.Lk)("hr",null,null,-1),p={class:"row"},i=(0,r.Lk)("div",{class:"col-md-4"},[(0,r.Lk)("strong",null,"Group Information"),(0,r.Lk)("p",{class:"text-instruction"}," Please edit the group information here. Please note - groups have to be unique! ")],-1),c={class:"col-md-8"},m={class:"form-group"},g=(0,r.Lk)("label",null,"Group Name",-1),h={class:"form-group"},k=(0,r.Lk)("label",null,"Parent Group",-1),b=(0,r.Lk)("hr",null,null,-1),f={class:"row submit-row"},G={class:"col-md-12"};var v=o(3913),y=o(1080),L=o(9336);const _={class:"modal fade",id:"confirmGroupDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmGroupDelete","aria-hidden":"true"},w={class:"modal-dialog"},U={class:"modal-content"},D=(0,r.Lk)("div",{class:"modal-header"},[(0,r.Lk)("h5",{class:"modal-title",id:"confirmGroupDelete"}," Please confirm Group Deletion "),(0,r.Q3)(" TASK INFORMATION "),(0,r.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmGroupDeleteButton"})],-1),M=(0,r.Lk)("div",{class:"modal-body"}," Please confirm you would like to delete this group. This is permanent. ",-1),x={class:"modal-footer"},$={name:"ConfirmGroupDelete",computed:{...(0,o(2124).L8)({rootUrl:"getRootUrl"})},props:{groupId:{type:Number,default:0}},methods:{closeModal(){document.getElementById("confirmGroupDeleteButton").click()},deleteGroup(){0!==this.groupId?this.axios.post(`${this.rootUrl}group_information/${this.groupId}/delete/`).then((()=>{window.location=`${this.rootUrl}search/group/`})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Deleting Group",message:`Sorry could not delete the group. Error -> ${e}`,extra_classes:"bg-danger",delay:0})})):this.$store.dispatch("newToast",{header:"Group ID not valid",message:"Sorry, current group ID is not valid",extra_classes:"bg-danger",delay:0})}}};var I=o(6262);const C=(0,I.A)($,[["render",function(e,t,o,a,s,l){return(0,r.uX)(),(0,r.CE)("div",_,[(0,r.Lk)("div",w,[(0,r.Lk)("div",U,[D,M,(0,r.Lk)("div",x,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.deleteGroup&&l.deleteGroup(...e))}," Yes ")])])])])}]]);var T=o(9827);const N={name:"GroupInformation",components:{ConfirmGroupDelete:C,NConfigProvider:v.A,NSelect:y.A},props:{groupResults:{type:Array,default:()=>[]},parentGroupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},data(){return{groupNameModel:this.groupResults[0].fields.group_name,parentGroupFixList:[],parentGroupModel:this.groupResults[0].fields.parent_group}},mixins:[T.A],methods:{confirmDelete(){new L.aF(document.getElementById("confirmGroupDeleteModal")).show()},updateGroup(){const e=new FormData;e.set("group_name",this.groupNameModel),null!==this.parentGroupModel&&""!==this.parentGroupModel&&e.set("parent_group",this.parentGroupModel),this.$store.dispatch("newToast",{header:"Updated Group",message:"Updated Group. Please wait.",extra_classes:"bg-warning text-dark",delay:0,unique_type:"update_group_leader"}),this.axios.post(`${this.rootUrl}group_information/${this.groupResults[0].pk}/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Updated Group",message:"Successfully Update Group",extra_classes:"bg-success",delay:0,unique_type:"update_group_leader"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Group",message:`We had an issue updating group. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"update_group_leader"})}))}},mounted(){const e=this.parentGroupResults.map((e=>({group_name:e.fields.group_name,label:e.fields.group_name,value:e.pk})));this.parentGroupFixList=e,this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},A=(0,I.A)(N,[["render",function(e,t,o,v,y,L){const _=(0,r.g2)("n-select"),w=(0,r.g2)("confirm-group-delete"),U=(0,r.g2)("n-config-provider");return(0,r.uX)(),(0,r.Wv)(U,{theme:e.getTheme(o.theme)},{default:(0,r.k6)((()=>[(0,r.Lk)("div",s,[(0,r.Lk)("div",l,[u,(0,r.Lk)("a",{href:`${this.rootUrl}search/group/`,class:"mt-4"},"Back to group list",8,n),d,(0,r.Lk)("div",p,[i,(0,r.Lk)("div",c,[(0,r.Lk)("div",m,[g,(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>y.groupNameModel=e),class:"form-control"},null,512),[[a.vModelText,y.groupNameModel]])]),(0,r.Lk)("div",h,[k,(0,r.bF)(_,{value:y.parentGroupModel,"onUpdate:value":t[1]||(t[1]=e=>y.parentGroupModel=e),filterable:"",options:y.parentGroupFixList,clearable:""},null,8,["value","options"])])])]),(0,r.Q3)(" Submit Button "),b,(0,r.Lk)("div",f,[(0,r.Lk)("div",G,[1!==parseInt(o.groupResults[0].pk)?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>L.confirmDelete&&L.confirmDelete(...e))}," Delete Group ")):(0,r.Q3)("v-if",!0),(0,r.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[3]||(t[3]=(...e)=>L.updateGroup&&L.updateGroup(...e))}," Update Group ")])])])]),(0,r.bF)(w,{"group-id":o.groupResults[0].pk},null,8,["group-id"])])),_:1},8,["theme"])}]])},9827:(e,t,o)=>{o.d(t,{A:()=>a});var r=o(7413);const a={data:()=>({darkTheme:r.a}),methods:{getTheme:e=>"dark"===e?r.a:null}}}}]);