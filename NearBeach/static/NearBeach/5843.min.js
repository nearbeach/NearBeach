"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5843],{5843:(t,e,s)=>{s.d(e,{Z:()=>ft});var o=s(6252),i=s(3577);const a={class:"text-instructions"},r={key:0,class:"alert alert-dark"},l={key:1,class:"group-card-list"},n={class:"group-card--details"},d={key:0,class:"group-card--remove"},c=(0,o._)("div",{class:"spacer"},null,-1),u={class:"row submit-row"},p={class:"col-md-12"},h=(0,o._)("hr",null,null,-1),g={class:"text-instructions"},m={key:2,class:"alert alert-dark"},_={key:3,class:"user-card-list"},b=["src"],v={class:"user-card--details"},U={class:"user-card--name"},w={class:"user-card--email"},L={key:0,class:"user-card--remove"},y=(0,o._)("div",{class:"spacer"},null,-1),G={class:"row submit-row"},k={class:"col-md-12"};var D=s(3058),j=s(5808),f=s(6542),S=s(9669),x=s.n(S),$=s(3138);const A={class:"modal fade",id:"addGroupModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},I={class:"modal-dialog modal-lg"},M={class:"modal-content"},C={class:"modal-header"},W=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addGroupCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),T={class:"modal-body"},F={key:0,class:"row"},q={class:"col-md-4"},E=(0,o._)("strong",null,"Add Groups",-1),O={class:"text-instructions"},Z={class:"text-instructions"},B={class:"col-md-8"},N={key:1,class:"row"},P=(0,o._)("div",{class:"col-md-6"},[(0,o._)("strong",null,"Sorry - no results"),(0,o._)("p",{class:"text-instructions"}," This could be because "),(0,o._)("ul",{class:"text-instructions"},[(0,o._)("li",null,"There are no more groups left to add")])],-1),z={class:"col-md-6 no-search"},R=["src"],J={class:"modal-footer"},H=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),K=["disabled"];var Y=s(1317),Q=s(989);const V=s(9669),X={name:"AddGroupWizard",components:{Icon:f.JO,NSelect:Y.Z},inject:["nextTick"],computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",potentialGroupList:"getPotentialGroupList",rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},watch:{potentialGroupList(t){void 0!==t&&(this.groupFixList=t.map((t=>({value:t.group_id,label:t.group_name}))))}},mixins:[D.Z,j.Z],data:()=>({groupFixList:[],groupModel:[]}),methods:{addGroup(){const t=new FormData;this.groupModel.forEach((e=>{t.append("group_list",e)})),V.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_group/`,t).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list}),document.getElementById("addGroupCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}}};var tt=s(3744);const et=(0,tt.Z)(X,[["render",function(t,e,s,a,r,l){const n=(0,o.up)("Icon"),d=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",A,[(0,o._)("div",I,[(0,o._)("div",M,[(0,o._)("div",C,[(0,o._)("h2",null,[(0,o.Wm)(n,{icon:t.icons.groupPresentation},null,8,["icon"]),(0,o.Uk)(" Add Group Wizard ")]),W]),(0,o._)("div",T,[r.groupFixList.length>0?((0,o.wg)(),(0,o.iD)("div",F,[(0,o._)("div",q,[E,(0,o._)("p",O," Use the following multiple select to select which groups you want to add to this "+(0,i.toDisplayString)(t.destination)+". ",1),(0,o._)("p",Z," Please note: A user's group has to be added to the "+(0,i.toDisplayString)(t.destination)+" before the user can be added. ",1)]),(0,o._)("div",B,[(0,o.Wm)(d,{options:r.groupFixList,value:r.groupModel,"onUpdate:value":e[0]||(e[0]=t=>r.groupModel=t),multiple:""},null,8,["options","value"])])])):((0,o.wg)(),(0,o.iD)("div",N,[P,(0,o._)("div",z,[(0,o._)("img",{src:`${t.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,R)])]))]),(0,o._)("div",J,[H,(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:0==r.groupModel.length,onClick:e[1]||(e[1]=(...t)=>l.addGroup&&l.addGroup(...t))}," Add Group(s) ",8,K)])])])])}]]),st={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ot={class:"modal-dialog modal-lg"},it={class:"modal-content"},at={class:"modal-header"},rt=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),lt={class:"modal-body"},nt={key:0,class:"row"},dt={class:"col-md-4"},ct=(0,o._)("strong",null,"Add Users",-1),ut={class:"text-instructions"},pt={class:"text-instructions"},ht={class:"col-md-8"},gt={key:1,class:"row"},mt={class:"col-md-6"},_t=(0,o._)("strong",null,"Sorry - no results",-1),bt=(0,o._)("p",{class:"text-instructions"}," This could be because ",-1),vt={class:"text-instructions"},Ut=(0,o._)("li",null,"There are no more users left to add",-1),wt={class:"col-md-6 no-search"},Lt=["src"],yt={class:"modal-footer"},Gt=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),kt=["disabled"],Dt={name:"AddUserWizard",components:{Icon:f.JO,NSelect:Y.Z},inject:["nextTick"],mixins:[D.Z,j.Z],computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",potentialUserList:"getPotentialUserList",rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),watch:{potentialUserList(t){void 0!==t&&(this.userFixList=t.map((t=>({value:t.id,label:`${t.username}: ${t.first_name} ${t.last_name}`}))))}},methods:{addUser(){const t=new FormData;this.userModel.forEach((e=>{t.append("user_list",e)})),x().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_user/`,t).then((t=>{document.getElementById("addUserCloseButton").click(),this.userModel=[],this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.showErrorModal(t,this.destination)}))}}},jt={name:"GroupsAndUsersModule",components:{AddGroupWizard:et,AddUserWizard:(0,tt.Z)(Dt,[["render",function(t,e,s,a,r,l){const n=(0,o.up)("Icon"),d=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",st,[(0,o._)("div",ot,[(0,o._)("div",it,[(0,o._)("div",at,[(0,o._)("h2",null,[(0,o.Wm)(n,{icon:t.icons.userIcon},null,8,["icon"]),(0,o.Uk)(" Add User Wizard ")]),rt]),(0,o._)("div",lt,[r.userFixList.length>0?((0,o.wg)(),(0,o.iD)("div",nt,[(0,o._)("div",dt,[ct,(0,o._)("p",ut," Use the following multiple select to select which users you want to add to this "+(0,i.toDisplayString)(t.destination)+". ",1),(0,o._)("p",pt," Please note: A user's group has to be added to the "+(0,i.toDisplayString)(t.destination)+" before the user can be added. ",1)]),(0,o._)("div",ht,[(0,o.Wm)(d,{options:r.userFixList,value:r.userModel,"onUpdate:value":e[0]||(e[0]=t=>r.userModel=t),multiple:""},null,8,["options","value"])])])):((0,o.wg)(),(0,o.iD)("div",gt,[(0,o._)("div",mt,[_t,bt,(0,o._)("ul",vt,[Ut,(0,o._)("li",null," The user you are after is in a group not current added to this "+(0,i.toDisplayString)(t.destination),1)])]),(0,o._)("div",wt,[(0,o._)("img",{src:`${t.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,Lt)])]))]),(0,o._)("div",yt,[Gt,(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:0===r.userModel.length,onClick:e[1]||(e[1]=(...t)=>l.addUser&&l.addUser(...t))}," Add User(s) ",8,kt)])])])])}]]),Icon:f.JO},inject:["nextTick"],computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",objectGroupList:"getObjectGroupList",objectUserList:"getObjectUserList",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},mixins:[D.Z,j.Z],methods:{addNewGroup(){new $.u_(document.getElementById("addGroupModal")).show()},addNewUser(){new $.u_(document.getElementById("addUserModal")).show()},getGroupAndUserData(){x().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_and_user_data/`).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.showErrorModal(t,"Fetching Group and Users data")}))},profilePicture(t){return null!==t&&""!==t?`${this.rootUrl}private/${t}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`},removeGroup(t){this.$store.commit("updateGroupsAndUsers",{objectGroupList:this.objectGroupList.filter((e=>e.group_id!==t))});const e=new FormData;e.set("group_id",t),x().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_group/`,e).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.showErrorModal(t,this.destination)}))},removeUser(t){this.$store.commit("updateGroupsAndUsers",{objectUserList:this.objectUserList.filter((e=>e.username!==t))});const e=new FormData;e.set("username",t),x().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_user/`,e).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.showErrorModal(t,this.destination)}))}},mounted(){this.nextTick((()=>{0!==this.locationId?this.getGroupAndUserData():setTimeout((()=>{this.getGroupAndUserData()}),100)}))}},ft=(0,tt.Z)(jt,[["render",function(t,e,s,D,j,f){const S=(0,o.up)("Icon"),x=(0,o.up)("add-group-wizard"),$=(0,o.up)("add-user-wizard");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.kq)(" GROUPS "),(0,o._)("h2",null,[(0,o.Wm)(S,{icon:t.icons.groupPresentation},null,8,["icon"]),(0,o.Uk)(" Groups")]),(0,o._)("p",a," The following list are all the Groups connected to this "+(0,i.toDisplayString)(t.destination)+". Users will have to be included in these groups to be added to this "+(0,i.toDisplayString)(t.destination),1),0==t.objectGroupList.length?((0,o.wg)(),(0,o.iD)("div",r," Sorry - there are no groups active. ")):((0,o.wg)(),(0,o.iD)("div",l,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.objectGroupList,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.group_id,class:"group-card"},[(0,o._)("div",n,(0,i.toDisplayString)(e.group_name),1),t.userLevel>=3?((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(S,{icon:t.icons.trashCan,onClick:t=>f.removeGroup(e.group_id)},null,8,["icon","onClick"])])):(0,o.kq)("v-if",!0)])))),128))])),c,(0,o.kq)(" ADD GROUP "),(0,o.kq)(" TO DO - limit it to certain users "),(0,o._)("div",u,[(0,o._)("div",p,[t.userLevel>1?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>f.addNewGroup&&f.addNewGroup(...t))},"Add Group to "+(0,i.toDisplayString)(t.destination),1)):(0,o.kq)("v-if",!0)])]),h,(0,o.kq)(" USERS "),(0,o._)("h2",null,[(0,o.Wm)(S,{icon:t.icons.userIcon},null,8,["icon"]),(0,o.Uk)(" Users")]),(0,o._)("p",g," The following are a list of users who are connected to this "+(0,i.toDisplayString)(t.destination)+". Please note - users have to be a part of the groups list above. ",1),0==t.objectUserList.length?((0,o.wg)(),(0,o.iD)("div",m," Sorry - there are no current users active. ")):((0,o.wg)(),(0,o.iD)("div",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.objectUserList,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.username,class:"user-card"},[(0,o._)("img",{src:f.profilePicture(e.profile_picture),alt:"default profile",class:"user-card--profile"},null,8,b),(0,o._)("div",v,[(0,o._)("div",U,(0,i.toDisplayString)(e.first_name)+" "+(0,i.toDisplayString)(e.last_name),1),(0,o._)("div",w,(0,i.toDisplayString)(e.email),1)]),t.userLevel>=3?((0,o.wg)(),(0,o.iD)("div",L,[(0,o.Wm)(S,{icon:t.icons.trashCan,onClick:t=>f.removeUser(e.username)},null,8,["icon","onClick"])])):(0,o.kq)("v-if",!0)])))),128))])),y,(0,o.kq)(" TO DO - limit it to certain users "),(0,o._)("div",G,[(0,o._)("div",k,[t.userLevel>1?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[1]||(e[1]=(...t)=>f.addNewUser&&f.addNewUser(...t))},"Add User to "+(0,i.toDisplayString)(t.destination),1)):(0,o.kq)("v-if",!0)])]),(0,o.kq)(" MODALS "),(0,o.Wm)(x),(0,o.Wm)($)])}]])}}]);