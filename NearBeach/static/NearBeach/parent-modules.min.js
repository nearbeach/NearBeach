"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8067],{2915:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Zn});var i=s(641);const n={class:"card"},a={class:"card-body"},l={class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},o={key:0,class:"nav-item",role:"presentation"},r=[(0,i.Lk)("button",{class:"nav-link active",id:"group-and-user-tab","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Groups and Users ",-1)],d={key:1,class:"nav-item",role:"presentation"},c=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-item-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-items",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Item ",-1)],u={key:2,class:"nav-item",role:"presentation"},m=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-link-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Links ",-1)],p={key:3,class:"nav-item",role:"presentation"},k=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-item-link-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-item-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Links ",-1)],b=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"documents-tab","data-bs-toggle":"tab","data-bs-target":"#documents",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Documents ")],-1),h={key:4,class:"nav-item",role:"presentation"},L=[(0,i.Lk)("button",{class:"nav-link",id:"object-link-tabs","data-bs-toggle":"tab","data-bs-target":"#object-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Linked Objects ",-1)],g={key:5,class:"nav-item",role:"presentation"},v=[(0,i.Lk)("button",{class:"nav-link",id:"customer-tab","data-bs-toggle":"tab","data-bs-target":"#customers",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Customers ",-1)],_=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"sprints-tab","data-bs-toggle":"tab","data-bs-target":"#sprints",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Sprints ")],-1),y=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"misc-tab","data-bs-toggle":"tab","data-bs-target":"#misc",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Misc ")],-1),f=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#notes",type:"button",role:"tab","aria-controls":"home","aria-select":"false"}," Notes ")],-1),S={key:6,class:"nav-item",role:"presentation"},j=[(0,i.Lk)("button",{class:"nav-link",id:"admin-tab","data-bs-toggle":"tab","data-bs-target":"#admin",type:"button",role:"tab","aria-controls":"home","aria-select":"false"}," Admin ",-1)],C=(0,i.Lk)("hr",null,null,-1),I={class:"tab-content",id:"misc_module_content"},w={key:0,class:"tab-pane fade show active",id:"group-and-users",role:"tabpanel","aria-labelledby":"contact-tab"},R={key:1,class:"tab-pane fade",id:"requirement-items",role:"tabpanel","aria-labelledby":"home-tab"},E={key:2,class:"tab-pane fade",id:"requirement-links",role:"tabpanel","aria-labelledby":"profile-tab"},M={key:3,class:"tab-pane fade",id:"requirement-item-links",role:"tabpanel","aria-labelledby":"profile-tab"},T={class:"tab-pane fade",id:"documents",role:"tabpanel","aria-labelledby":"contact-tab"},$={class:"tab-pane fade",id:"object-links",role:"tabpanel","aria-labelledby":"contact-tab"},D={class:"tab-pane fade",id:"customers",role:"tabpanel","aria-labelledby":"contact-tab"},U={class:"tab-pane fade",id:"sprints",role:"tabpanel","aria-labelledby":"tabpanel"},q={class:"tab-pane fade",id:"misc",role:"tabpanel","aria-labelledby":"contact-tab"},O={class:"tab-pane fade",id:"notes",role:"tabpanel","aria-labelledby":"contact-tab"},F={key:4,class:"tab-pane fade bg-danger",id:"admin",role:"tabpanel","aria-labelledby":"contact-tab"};var x=s(1500);const N=(0,i.Lk)("h2",null," Requirement Items ",-1),Q=(0,i.Lk)("p",{class:"text-instructions"}," Requirements should be broken down into smaller components called Requirement Items. ",-1),A={key:0,class:"requirement-item-spacer"},X=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Items for this requirement. ",-1)],B={key:1},P={key:2},W={key:3,class:"row submit-row"},z={class:"col-md-12"};var K=s(9336),H=s(3751);const G={class:"modal fade",id:"newItemModal",tabindex:"-1","aria-labelledby":"requirementItemModal","aria-hidden":"true"},V={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},J={class:"modal-content"},Y=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h2",null," New Requirement Item Wizard "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementItemCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})])],-1),Z={class:"modal-body"},ee={class:"row"},te=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Description"),(0,i.Lk)("p",{class:"text-instructions"}," Place in a detailed description of this requirement item. This particular item can be then connected to Project or Tasks. ")],-1),se={class:"col-md-8"},ie={for:"id_requirement_item_title"},ne=(0,i.Lk)("br",null,null,-1),ae=(0,i.Lk)("br",null,null,-1),le=(0,i.Lk)("hr",null,null,-1),oe={class:"row"},re=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("h2",null,"Status"),(0,i.Lk)("p",{class:"text-instructions"}," Set the Requirement Status and Type here. ")],-1),de={class:"col-md-4"},ce={class:"form-group"},ue={class:"col-md-4"},me={class:"form-group"},pe={class:"modal-footer"},ke=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var be=s(1080),he=s(8838),Le=s(9639),ge=s(3855),ve=s(404),_e=s(2124);const ye={name:"NewRequirementItemWizard",setup:()=>({v$:(0,Le.Ay)()}),components:{editor:he.A,NSelect:be.A,ValidationRendering:ve.A},emits:["new_item_added"],data:()=>({requirementItemScopeModel:"",requirementItemTitleModel:"",statusItemFixList:[],statusItemModel:"",typeItemFixList:[],typeItemModel:""}),computed:{...(0,_e.L8)({contentCss:"getContentCss",locationId:"getLocationId",rootUrl:"getRootUrl",skin:"getSkin"})},validations:{requirementItemScopeModel:{required:ge.mw,maxLength:(0,ge.Ru)(63e4)},requirementItemTitleModel:{required:ge.mw},statusItemModel:{required:ge.mw},typeItemModel:{required:ge.mw}},methods:{saveItem(){if(this.v$.$touch(),this.v$.$invalid)return;const e=new FormData;e.set("requirement_item_title",this.requirementItemTitleModel),e.set("requirement_item_scope",this.requirementItemScopeModel),e.set("requirement_item_status",this.statusItemModel),e.set("requirement_item_type",this.typeItemModel),this.axios.post(`${this.rootUrl}new_requirement_item/save/${this.locationId}/`,e).then((e=>{this.requirementItemScopeModel="",this.requirementItemTitleModel="",this.statusItemModel="",this.typeItemModel="",this.$emit("new_item_added",e.data),document.getElementById("requirementItemCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to save item",message:`Failed to save item. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateStatusList(){this.axios.post(`${this.rootUrl}requirement_information/data/list_of_item_status_values/`).then((e=>{this.statusItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_status})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Status List",message:`There was an error updating the status list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateTypeList(){this.axios.post(`${this.rootUrl}requirement_information/data/list_of_item_type_values/`).then((e=>{this.typeItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_type})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Type List",message:`There was an error updating the type list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateStatusList(),this.updateTypeList()}))}};var fe=s(6262);const Se=(0,fe.A)(ye,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("validation-rendering"),r=(0,i.g2)("editor"),d=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",G,[(0,i.Lk)("div",V,[(0,i.Lk)("div",J,[Y,(0,i.Lk)("div",Z,[(0,i.Lk)("div",ee,[te,(0,i.Lk)("div",se,[(0,i.Lk)("label",ie,[(0,i.eW)("Requirement Item Title: "),(0,i.bF)(o,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,i.bo)((0,i.Lk)("input",{id:"id_requirement_item_title",class:"form-control",name:"requirement_item_title",type:"text",required:"true",maxlength:"255","onUpdate:modelValue":t[0]||(t[0]=e=>a.requirementItemTitleModel=e)},null,512),[[H.vModelText,a.requirementItemTitleModel]]),ne,(0,i.Lk)("label",null,[(0,i.eW)(" Requirement Item Scope: "),(0,i.bF)(o,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),ae,(0,i.bF)(r,{"license-key":"gpl",init:{license_key:"gpl",height:500,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`,relative_urls:!1},modelValue:a.requirementItemScopeModel,"onUpdate:modelValue":t[1]||(t[1]=e=>a.requirementItemScopeModel=e)},null,8,["init","modelValue"])])]),(0,i.Q3)(" Status "),le,(0,i.Lk)("div",oe,[re,(0,i.Lk)("div",de,[(0,i.Lk)("div",ce,[(0,i.Lk)("label",null,[(0,i.eW)("Requirement Status "),(0,i.bF)(o,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,i.bF)(d,{options:a.statusItemFixList,label:"status",value:a.statusItemModel,"onUpdate:value":t[2]||(t[2]=e=>a.statusItemModel=e)},null,8,["options","value"])])]),(0,i.Lk)("div",ue,[(0,i.Lk)("div",me,[(0,i.Lk)("label",null,[(0,i.eW)("Requirement Type "),(0,i.bF)(o,{"error-list":n.v$.typeItemModel.$errors},null,8,["error-list"])]),(0,i.bF)(d,{options:a.typeItemFixList,label:"type",value:a.typeItemModel,"onUpdate:value":t[3]||(t[3]=e=>a.typeItemModel=e)},null,8,["options","value"])])])])]),(0,i.Q3)(" FOOTERS "),(0,i.Lk)("div",pe,[ke,(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>l.saveItem&&l.saveItem(...e))}," Save Requirement Item ")])])])])}]]),je={name:"RequirementItemsModule",components:{RenderObjectCard:s(302).A,NewRequirementItemWizard:Se},data:()=>({requirementItemVariables:{header:"Requirement Items",prefix:"RI-",id:"requirement_item_id",title:"requirement_item_title",status:"requirement_item_status_text",end_date:""},itemResults:[],itemStatusList:[],itemTypeList:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{createNewItem(){new K.aF(document.getElementById("newItemModal")).show()},newItemAdded(e){this.itemResults=e},updateItemResults(){this.axios.post("data/items/").then((e=>{this.itemResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Item Results",message:`We are having issues updating item results: Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.updateItemResults()}},Ce=(0,fe.A)(je,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("render-object-card"),r=(0,i.g2)("new-requirement-item-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[N,Q,(0,i.Q3)(" TABLE OF REQUIREMENT ITEMS "),0===a.itemResults.length?((0,i.uX)(),(0,i.CE)("div",A,X)):((0,i.uX)(),(0,i.CE)("div",B,[(0,i.bF)(o,{"import-variables":a.requirementItemVariables,"search-results":a.itemResults,destination:"requirement_item"},null,8,["import-variables","search-results"])])),(0,i.Q3)(" Submit Button "),(0,i.Q3)(" TO DO - limit it to certain users "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",P)):(0,i.Q3)("v-if",!0),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",W,[(0,i.Lk)("div",z,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.createNewItem&&l.createNewItem(...e)),class:"btn btn-primary save-changes"}," Create new Requirement Item ")])])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" NEW REQUIREMENT ITEM MODAL "),(0,i.bF)(r,{"item-status-list":a.itemStatusList,"item-type-list":a.itemTypeList,"location-id":e.locationId,onNew_item_added:t[1]||(t[1]=e=>l.newItemAdded(e))},null,8,["item-status-list","item-type-list","location-id"])])}]]),Ie=(0,i.Lk)("h2",null," Requirement Item Links ",-1),we=(0,i.Lk)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1),Re={key:0},Ee=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)],Me={key:1},Te={key:2},$e={key:3,class:"row submit-row"},De={class:"col-md-12"};var Ue=s(33);const qe={class:"modal fade",id:"newRequirementLinkModal",tabindex:"-1","aria-labelledby":"requirementLinkModal","aria-hidden":"true"},Oe={class:"modal-dialog modal-lg"},Fe={class:"modal-content"},xe=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h2",null," New Requirement Link Wizard "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})])],-1),Ne={class:"modal-body"},Qe={class:"row"},Ae=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Object Selector"),(0,i.Lk)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1),Xe={class:"col-md-8"},Be={class:"form-group"},Pe=(0,i.Lk)("label",null,"Object Selection",-1),We=(0,i.Lk)("hr",null,null,-1),ze={class:"row"},Ke=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Select Links"),(0,i.Lk)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1),He={class:"col-md-8"},Ge={key:0,id:"link_wizard_results"},Ve=["src"],Je={key:1,class:"alert alert-warning"},Ye={key:2,class:"form-group"},Ze=(0,i.Lk)("label",null,"Search Terms",-1),et=(0,i.Lk)("br",null,null,-1),tt={key:3,class:"table"},st=(0,i.Lk)("td",null,"Status",-1),it={class:"form-check"},nt=["value","id"],at=["for"],lt=(0,i.Lk)("div",{class:"spacer"},null,-1),ot={class:"small-text"},rt={class:"modal-footer"},dt=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),ct=["disabled"],ut={name:"NewRequirementLinkWizard",components:{NSelect:be.A},emits:["update_module"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,_e.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},data:()=>({isSearching:!1,linkModel:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Task",label:"Task"}],searchTermModel:""}),methods:{saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),this.axios.post(`${this.rootUrl}${this.destination}_information/${this.locationId}/add_link/`,e).then((e=>{this.$emit("update_module",e.data),document.getElementById("requirementLinkCloseButton").click(),this.objectModel=null}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${this.objectModel.toLowerCase()}/link_list/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((()=>{this.$store.dispatch("newToast",{header:"Error retrieving links",message:"We are currently having issues obtaining data",delay:0,extra_classes:"bg-danger"})}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>{let t="";return t=void 0!==e.fields.project_description?e.fields.project_description.toLowerCase():e.fields.task_short_description.toLowerCase(),t.includes(this.searchTermModel.toLowerCase())})):this.objectFilteredResults=this.objectResults}}},mt=(0,fe.A)(ut,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",qe,[(0,i.Lk)("div",Oe,[(0,i.Lk)("div",Fe,[xe,(0,i.Lk)("div",Ne,[(0,i.Q3)(" CHOOSING A OBJECT TYPE "),(0,i.Lk)("div",Qe,[Ae,(0,i.Lk)("div",Xe,[(0,i.Lk)("div",Be,[Pe,(0,i.bF)(o,{options:a.objectSelection,value:a.objectModel,"onUpdate:value":t[0]||(t[0]=e=>a.objectModel=e),class:"object-selection"},null,8,["options","value"])])])]),We,(0,i.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,i.Lk)("div",ze,[Ke,(0,i.Lk)("div",He,[(0,i.Q3)(" LOADING PLACEHOLDER "),a.isSearching||null==a.objectModel?((0,i.uX)(),(0,i.CE)("div",Ge,[(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,Ve)])):(0,i.Q3)("v-if",!0),0===a.objectResults.length&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",Je," Sorry - there are no results. ")):(0,i.Q3)("v-if",!0),(0,i.Q3)(" SEARCH RESULTS "),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",Ye,[Ze,(0,i.bo)((0,i.Lk)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>a.searchTermModel=e),type:"text"},null,512),[[H.vModelText,a.searchTermModel]])])):(0,i.Q3)("v-if",!0),et,(0,i.Q3)(" TABLE CONTAINING RESULTS "),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("table",tt,[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,(0,Ue.toDisplayString)(a.objectModel)+" Description",1),st])]),(0,i.Q3)(" PROJECTS "),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.objectFilteredResults,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,[(0,i.Lk)("div",it,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.id,id:`checkbox_${a.objectModel.toLowerCase()}_${e.id}`,"onUpdate:modelValue":t[2]||(t[2]=e=>a.linkModel=e)},null,8,nt),[[H.vModelCheckbox,a.linkModel]]),(0,i.Lk)("label",{class:"form-check-label",for:`checkbox_${a.objectModel.toLowerCase()}_${e.id}`},(0,Ue.toDisplayString)(e.description),9,at)]),lt,(0,i.Lk)("p",ot,(0,Ue.toDisplayString)(a.objectModel)+" "+(0,Ue.toDisplayString)(e.id),1)]),(0,i.Lk)("td",null,(0,Ue.toDisplayString)(e.status),1)])))),128))])])):(0,i.Q3)("v-if",!0)])])]),(0,i.Lk)("div",rt,[dt,(0,i.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0==a.linkModel.length,onClick:t[3]||(t[3]=(...e)=>l.saveLinks&&l.saveLinks(...e))}," Save changes ",8,ct)])])])])}]]),pt={class:"modal fade",id:"confirmLinkDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmLinkDelete","aria-hidden":"true"},kt={class:"modal-dialog"},bt={class:"modal-content"},ht=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"confirmLinkDelete"}," Please confirm Link Deletion "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmLinkDeleteButton"})],-1),Lt=(0,i.Lk)("div",{class:"modal-body"}," Are you sure you want to delete the link? ",-1),gt={class:"modal-footer"},vt={name:"ConfirmLinkDelete",emits:["update_link_results"],props:{},computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",objectLink:"getObjectLink",rootUrl:"getRootUrl"})},methods:{deleteLink(){const e=new FormData;e.set("link_id",this.objectLink.object_id),e.set("link_connection",this.objectLink.object_type===this.destination?"meta_object":this.objectLink.object_type),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_link/`,e).then((()=>{this.$emit("update_link_results",{})})),this.closeModal()},closeModal(){document.getElementById("confirmLinkDeleteButton").click()}}},_t=(0,fe.A)(vt,[["render",function(e,t,s,n,a,l){return(0,i.uX)(),(0,i.CE)("div",pt,[(0,i.Lk)("div",kt,[(0,i.Lk)("div",bt,[ht,Lt,(0,i.Lk)("div",gt,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.deleteLink&&l.deleteLink(...e))}," Yes ")])])])])}]]);var yt=s(1390);const ft={name:"RequirementItemLinksModule",components:{ConfirmLinkDelete:_t,NewRequirementLinkWizard:mt,SubObjectLinks:yt.A},data:()=>({itemLinkProject:[],itemLinkTask:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{updateLinkResults(){this.axios.post(`${this.rootUrl}object_data/requirement_item/${this.locationId}/object_link_list/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},newRequirementItemLink(){new K.aF(document.getElementById("newRequirementLinkModal")).show()}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},St=(0,fe.A)(ft,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("sub-object-links"),r=(0,i.g2)("new-requirement-link-wizard"),d=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[Ie,we,(0,i.Q3)(" ITEM LINKS "),a.itemLinkProject.length+a.itemLinkTask.length===0?((0,i.uX)(),(0,i.CE)("div",Re,Ee)):((0,i.uX)(),(0,i.CE)("div",Me,[(0,i.Q3)(" Project Links "),(0,i.bF)(o,{title:"Project Links","link-results":a.itemLinkProject,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(o,{title:"Task Links","link-results":a.itemLinkTask,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",Te)):(0,i.Q3)("v-if",!0),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",$e,[(0,i.Lk)("div",De,[(0,i.Lk)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.newRequirementItemLink&&l.newRequirementItemLink(...e))},"Create new Link")])])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" LINKING MODAL "),(0,i.Q3)(" need to build something that resets the requirement links when adding links "),(0,i.bF)(r,{"location-id":e.locationId,destination:e.destination,onUpdate_module:t[3]||(t[3]=e=>l.updateLinkResults(e))},null,8,["location-id","destination"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(d,{onUpdate_link_results:t[4]||(t[4]=e=>l.updateLinkResults(e))})])}]]),jt=(0,i.Lk)("h2",null," Requirement Links ",-1),Ct=(0,i.Lk)("p",{class:"text-instructions"}," The following are links to other projects/tasks. You can link a Requirement to these other objects to symbolise a connection between the two. ",-1),It={key:0,class:"requirement-item-spacer"},wt=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)],Rt={key:1},Et={key:2,class:"row submit-row"},Mt={class:"col-md-12"},Tt=(0,i.Lk)("hr",null,null,-1),$t=(0,i.Lk)("h2",null," Requirement Item Links ",-1),Dt=(0,i.Lk)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1),Ut={key:3},qt=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)],Ot={key:4},Ft={name:"RequirementLinksModule",components:{ConfirmLinkDelete:_t,SubObjectLinks:yt.A,NewRequirementLinkWizard:mt},data:()=>({itemLinkProject:[],itemLinkTask:[],linkProject:[],linkTask:[],linkModel:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{newRequirementLink(){new K.aF(document.getElementById("newRequirementLinkModal")).show()},updateLinkResults(){this.axios.post(`${this.rootUrl}object_data/requirement/${this.locationId}/object_link_list/`).then((e=>{this.linkProject=e.data.filter((e=>"project"===e.object_type)),this.linkTask=e.data.filter((e=>"task"===e.object_type))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})})),this.axios.post(`${this.rootUrl}requirement_information/${this.locationId}/data/item_links/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1}))),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},xt=(0,fe.A)(Ft,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("sub-object-links"),r=(0,i.g2)("new-requirement-link-wizard"),d=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[jt,Ct,(0,i.Q3)(" REQUIREMENT LINKS "),a.linkProject.length+a.linkTask.length===0?((0,i.uX)(),(0,i.CE)("div",It,wt)):((0,i.uX)(),(0,i.CE)("div",Rt,[(0,i.Q3)(" Project Links "),(0,i.bF)(o,{title:"Project Links","link-results":a.linkProject,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(o,{title:"Task Links","link-results":a.linkTask,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",Et,[(0,i.Lk)("div",Mt,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.newRequirementLink&&l.newRequirementLink(...e))},"Create new Link")):(0,i.Q3)("v-if",!0)])])):(0,i.Q3)("v-if",!0),Tt,$t,Dt,(0,i.Q3)(" ITEM LINKS "),a.itemLinkProject.length+a.itemLinkTask.length===0?((0,i.uX)(),(0,i.CE)("div",Ut,qt)):((0,i.uX)(),(0,i.CE)("div",Ot,[(0,i.Q3)(" Project Links "),(0,i.bF)(o,{title:"Project Links","link-results":a.itemLinkProject,"can-delete":!1},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(o,{title:"Task Links","link-results":a.itemLinkTask,"can-delete":!1},null,8,["link-results"])])),(0,i.Q3)(" LINKING MODAL "),(0,i.bF)(r,{"location-id":e.locationId,destination:"requirement",onUpdate_module:l.updateLinkResults},null,8,["location-id","onUpdate_module"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(d,{onUpdate_link_results:l.updateLinkResults},null,8,["onUpdate_link_results"])])}]]);var Nt=s(2806);const Qt={class:"text-instructions"},At={key:0,class:"requirement-item-spacer"},Xt=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)],Bt={key:1},Pt={key:2},Wt={class:"row submit-row"},zt={class:"col-md-12"},Kt={class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"linkModal","aria-hidden":"true"},Ht={class:"modal-dialog modal-lg"},Gt={class:"modal-content"},Vt={class:"modal-header"},Jt=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"linkCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1),Yt={class:"modal-body"},Zt={class:"row"},es={class:"col-md-4"},ts=(0,i.Lk)("strong",null,"Object Selector",-1),ss={class:"text-instructions"},is={class:"col-md-8"},ns={key:1,class:"alert alert-success"},as=(0,i.Lk)("hr",null,null,-1),ls={class:"row"},os=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Relationship"),(0,i.Lk)("p",{class:"text-instructions"},' Please select an appropriate relation for the objects. Default is "Relates" ')],-1),rs={class:"col-md-8"},ds=(0,i.Lk)("label",{for:"object-relation"},"Current object",-1),cs=(0,i.Lk)("hr",null,null,-1),us={class:"row"},ms={class:"col-md-4"},ps=(0,i.Lk)("strong",null,"Select Links",-1),ks={class:"text-instructions"},bs={class:"col-md-8"},hs={key:0,id:"link_wizard_results"},Ls=["src"],gs={key:1,class:"alert alert-warning"},vs={key:2,class:"wizard-results"},_s={class:"wizard-results--card--tick"},ys=["value","id"],fs={class:"wizard-results--card--content"},Ss={class:"text-instructions"},js={class:"text-instructions"},Cs={class:"modal-footer"},Is=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),ws=["disabled"],Rs={name:"NewLinkWizard",components:{NSelect:be.A},emits:["update_link_results"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,_e.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},data:()=>({isSearching:!1,objectModel:null,objectRelation:[{value:"relates",label:"Relates To"}],objectRelationModel:"relates",objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Requirement_Item",label:"Requirement_Item"},{value:"Task",label:"Task"}],linkModel:[]}),methods:{handleRelationship(){if("Requirement"===this.objectModel||"Requirement_Item"===this.objectModel)return this.objectRelation=[{value:"parent_object_of",label:"Is Parent Object Of"}],void(this.objectRelationModel="parent_object_of");this.objectRelation=[{value:"relates",label:"Relates To"},{value:"blocked_by",label:"Is Blocked By"},{value:"blocking",label:"Is Currently Blocking"},{value:"sub_object_of",label:"Is Sub Object Of"},{value:"parent_object_of",label:"Is Parent Object Of"},{value:"has_duplicate",label:"Has Duplicate Object Of"},{value:"duplicate_object",label:"Is Duplicate Object Of"}],this.objectRelationModel="relates"},saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),e.set("object_relation",this.objectRelationModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_link/`,e).then((()=>{this.$emit("update_link_results",{}),this.objectModel=null,document.getElementById("linkCloseButton").click()}))}},watch:{objectModel(){this.linkModel=[],this.handleRelationship(),null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${this.objectModel.toLowerCase()}/link_list/`).then((e=>{this.objectResults=e.data,this.isSearching=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Searching",message:`We got an error searching. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))):this.isSearching=!1}},mounted(){this.handleRelationship()}},Es={name:"ObjectLinks",components:{ConfirmLinkDelete:_t,NewLinkWizard:(0,fe.A)(Rs,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Kt,[(0,i.Lk)("div",Ht,[(0,i.Lk)("div",Gt,[(0,i.Lk)("div",Vt,[(0,i.Lk)("h2",null," New "+(0,Ue.toDisplayString)(s.destination)+" Link Wizard ",1),Jt]),(0,i.Lk)("div",Yt,[(0,i.Q3)(" CHOOSING A OBJECT TYPE "),(0,i.Lk)("div",Zt,[(0,i.Lk)("div",es,[ts,(0,i.Lk)("p",ss," Please select which object you would like to link to this "+(0,Ue.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",is,[a.isSearching?((0,i.uX)(),(0,i.CE)("div",ns," Searching for "+(0,Ue.toDisplayString)(a.objectModel)+"s ",1)):((0,i.uX)(),(0,i.Wv)(o,{key:0,options:a.objectSelection,value:a.objectModel,"onUpdate:value":t[0]||(t[0]=e=>a.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),as,(0,i.Q3)(" CHOOSE RELATIONSHIP TYPE "),(0,i.Lk)("div",ls,[os,(0,i.Lk)("div",rs,[ds,(0,i.bF)(o,{id:"object-relation",options:a.objectRelation,value:a.objectRelationModel,"onUpdate:value":t[1]||(t[1]=e=>a.objectRelationModel=e),class:"object-selection",disabled:null===a.objectModel},null,8,["options","value","disabled"])])]),cs,(0,i.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,i.Lk)("div",us,[(0,i.Lk)("div",ms,[ps,(0,i.Lk)("p",ks," Please select which of the objects you want to connect to this "+(0,Ue.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",bs,[(0,i.Q3)(" LOADING PLACEHOLDER "),a.isSearching||null==a.objectModel?((0,i.uX)(),(0,i.CE)("div",hs,[(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,Ls)])):(0,i.Q3)("v-if",!0),0===a.objectResults.length&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",gs," Sorry - there are no results. ")):(0,i.Q3)("v-if",!0),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",vs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.objectResults,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"wizard-results--card",key:e.id},[(0,i.Lk)("div",_s,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",name:"link-option",value:e.id,id:`checkbox_${a.objectModel.toLowerCase()}_${e.pk}`,"onUpdate:modelValue":t[2]||(t[2]=e=>a.linkModel=e)},null,8,ys),[[H.vModelCheckbox,a.linkModel]])]),(0,i.Lk)("div",fs,[(0,i.Lk)("div",Ss,(0,Ue.toDisplayString)(a.objectModel)+" "+(0,Ue.toDisplayString)(e.id),1),(0,i.Lk)("div",null,[(0,i.Lk)("strong",null,(0,Ue.toDisplayString)(e.description),1)]),(0,i.Lk)("div",null,[(0,i.eW)(" Status: "),(0,i.Lk)("span",js,(0,Ue.toDisplayString)(e.status),1)])])])))),128))])):(0,i.Q3)("v-if",!0)])])]),(0,i.Lk)("div",Cs,[Is,(0,i.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===a.linkModel.length,onClick:t[3]||(t[3]=(...e)=>l.saveLinks&&l.saveLinks(...e))}," Save changes ",8,ws)])])])])}]]),SubObjectLinks:yt.A},data:()=>({hasDuplicateObjectOf:[],isBlockedBy:[],isCurrentlyBlocking:[],isDuplicateObjectOf:[],isParentOf:[],isSubObjectOf:[],kanbanCard:[],linkResults:[],relatesTo:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{isLinkedObject(e){let t=!1;return null!==e.fields.project&&(t=!0),null!==e.fields.task&&(t=!0),null!==e.fields.requirement&&(t=!0),t},newLink(){new K.aF(document.getElementById("newLinkModal")).show()},updateLinkResults(){this.linkResults=[],this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/object_link_list/`).then((e=>{this.linkResults=e.data,this.relatesTo=e.data.filter((e=>"Relate"===e.link_relationship||null===e.link_relationship)),this.isBlockedBy=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Block"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s})),this.kanbanCard=e.data.filter((e=>"Card"===e.link_relationship)),this.isCurrentlyBlocking=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Block"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.isSubObjectOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s})),this.isParentOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.hasDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.isDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s}))})).catch((e=>{this.$store.dispatch("newToast",{heading:"Object Links failed to get data",message:`Failed to get data - Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},Ms=(0,fe.A)(Es,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("sub-object-links"),r=(0,i.g2)("new-link-wizard"),d=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,(0,Ue.toDisplayString)(e.destination)+" Links ",1),(0,i.Lk)("p",Qt," The following are links to other objects like projects/tasks/requirements. You can link a "+(0,Ue.toDisplayString)(e.destination)+" to these other objects to symbolise a connection between the two. ",1),(0,i.Q3)(" OBJECT LINKS "),0===a.linkResults.length?((0,i.uX)(),(0,i.CE)("div",At,Xt)):((0,i.uX)(),(0,i.CE)("div",Bt,[(0,i.Q3)(" Relates To "),(0,i.bF)(o,{title:"Relates To","link-results":a.relatesTo,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Kanban Cards "),(0,i.bF)(o,{title:"Kanban Cards","link-results":a.kanbanCard,"can-delete":!1},null,8,["link-results"]),(0,i.Q3)(" Is Blocked By "),(0,i.bF)(o,{title:"Is Blocked By","link-results":a.isBlockedBy,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Currently Blocking "),(0,i.bF)(o,{title:"Is Currently Blocking","link-results":a.isCurrentlyBlocking,onUpdate_link_results:t[2]||(t[2]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Sub Object Of "),(0,i.bF)(o,{title:"Is Subobject Of","link-results":a.isSubObjectOf,onUpdate_link_results:t[3]||(t[3]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Parent Object Of "),(0,i.bF)(o,{title:"Is Parent Object Of","link-results":a.isParentOf,onUpdate_link_results:t[4]||(t[4]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Has Duplicate Object Of "),(0,i.bF)(o,{title:"Has Duplicate Object Of","link-results":a.hasDuplicateObjectOf,onUpdate_link_results:t[5]||(t[5]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Duplicate Object Of "),(0,i.bF)(o,{title:"Is Duplicate Object Of","link-results":a.isDuplicateObjectOf,onUpdate_link_results:t[6]||(t[6]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",Pt)):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Wt,[(0,i.Lk)("div",zt,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[7]||(t[7]=(...e)=>l.newLink&&l.newLink(...e))},"Create new Link")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" MODAL FOR NEW OBJECT LINKS "),(0,i.bF)(r,{destination:e.destination,"location-id":e.locationId,onUpdate_link_results:l.updateLinkResults},null,8,["destination","location-id","onUpdate_link_results"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(d,{onUpdate_link_results:l.updateLinkResults},null,8,["onUpdate_link_results"])])}]]),Ts=(0,i.Lk)("h2",null," Customers ",-1),$s={class:"text-instructions"},Ds={key:0},Us=[(0,i.Lk)("div",{class:"customers-module-spacer"},[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no customers. Please add them by clicking on the button below ")],-1)],qs={key:1},Os=(0,i.Lk)("hr",null,null,-1),Fs={class:"row submit-row"},xs={class:"col-md-12"};var Ns=s(3233);const Qs={class:"modal fade",id:"addCustomerModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},As={class:"modal-dialog modal-lg"},Xs={class:"modal-content"},Bs=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h2",null," Add Customers Wizard "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addCustomerCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})])],-1),Ps={class:"modal-body"},Ws={key:0,class:"row"},zs={class:"col-md-4"},Ks=(0,i.Lk)("strong",null,"Select Customer",-1),Hs={class:"text-instructions"},Gs={class:"col-md-8"},Vs={key:1,class:"row"},Js=(0,i.Lk)("div",{class:"col-md-6"},[(0,i.Lk)("strong",null,"Sorry - no results"),(0,i.Lk)("p",{class:"text-instructions"}," This could be because "),(0,i.Lk)("ul",{class:"text-instructions"},[(0,i.Lk)("li",null,"There are no more customers left to add"),(0,i.Lk)("li",null," There are no customers for this organisation ")])],-1),Ys={class:"col-md-6 no-search"},Zs=["src"],ei={class:"modal-footer"},ti=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),si=["diabled"],ii={name:"AddCustomerWizard",components:{NSelect:be.A},emits:["update_customer_results"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0},excludeCustomers:{type:Array,default:()=>[]}},computed:{...(0,_e.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},data:()=>({customerModel:"",customerList:[],customerFixList:[]}),methods:{addCustomer(){const e=new FormData;e.set("customer",this.customerModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_customer/`,e).then((e=>{this.$emit("update_customer_results",e.data),this.customerModel="",document.getElementById("addCustomerCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Adding Customer",message:`We had an issue adding customers. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getCustomerList(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list_all/`).then((e=>{this.customerList=e.data,this.updateCustomerFixList()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Customer List",message:`We had an issue getting customer list. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateCustomerFixList(){if(0===this.customerList.length)return;const e=[];this.excludeCustomers.forEach((t=>{e.push(t.pk)})),this.customerFixList=this.customerList.filter((t=>!e.includes(t.pk))).map((e=>({value:e.pk,label:`${e.fields.customer_first_name} ${e.fields.customer_last_name}`})))}},mounted(){!["requirement_item"].indexOf(this.locationId)<0||this.$nextTick((()=>{this.getCustomerList()}))},watch:{excludeCustomers(){this.updateCustomerFixList()}}},ni={name:"CustomersModule",components:{AddCustomerWizard:(0,fe.A)(ii,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Qs,[(0,i.Lk)("div",As,[(0,i.Lk)("div",Xs,[Bs,(0,i.Lk)("div",Ps,[a.customerFixList.length>0?((0,i.uX)(),(0,i.CE)("div",Ws,[(0,i.Lk)("div",zs,[Ks,(0,i.Lk)("p",Hs," Search for a customer who has not been added to this "+(0,Ue.toDisplayString)(s.destination)+". If the search is blank there are either no customers that match that search, or all customer have already been added to the "+(0,Ue.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",Gs,[(0,i.bF)(o,{options:a.customerFixList,label:"customerName",value:a.customerModel,"onUpdate:value":t[0]||(t[0]=e=>a.customerModel=e)},null,8,["options","value"])])])):((0,i.uX)(),(0,i.CE)("div",Vs,[Js,(0,i.Lk)("div",Ys,[(0,i.Lk)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,Zs)])]))]),(0,i.Lk)("div",ei,[ti,(0,i.Lk)("button",{type:"button",class:"btn btn-primary",diabled:""==a.customerModel,onClick:t[1]||(t[1]=(...e)=>l.addCustomer&&l.addCustomer(...e))}," Save changes ",8,si)])])])])}]]),CustomersListModule:Ns.A},data:()=>({customerResults:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addNewCustomer(){new K.aF(document.getElementById("addCustomerModal")).show()},loadCustomerResults(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list/`).then((e=>{this.customerResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Loading Customer Results",message:`We had an issue loading customer results. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},removeCustomer(e){this.customerResults=this.customerResults.filter((t=>t.pk!==e))},updateCustomerResults(e){this.customerResults=e}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.loadCustomerResults()}))}},ai=(0,fe.A)(ni,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("customers-list-module"),r=(0,i.g2)("add-customer-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[Ts,(0,i.Lk)("p",$s," Below are a list of customers who are stakeholders to this "+(0,Ue.toDisplayString)(e.destination)+". ",1),(0,i.Q3)(" CUSTOMER RESULTS CARDS "),0==a.customerResults.length?((0,i.uX)(),(0,i.CE)("div",Ds,Us)):((0,i.uX)(),(0,i.CE)("div",qs,[(0,i.bF)(o,{"customer-results":a.customerResults,onRemove_customer:t[0]||(t[0]=e=>l.removeCustomer(e))},null,8,["customer-results"])])),(0,i.Q3)(" ADD CUSTOMER BUTTON "),Os,(0,i.Lk)("div",Fs,[(0,i.Lk)("div",xs,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>l.addNewCustomer&&l.addNewCustomer(...e))}," Add Customer ")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" MODALS "),(0,i.bF)(r,{"location-id":e.locationId,destination:e.destination,"exclude-customers":a.customerResults,onUpdate_customer_results:t[2]||(t[2]=e=>l.updateCustomerResults(e))},null,8,["location-id","destination","exclude-customers"])])}]]),li=(0,i.Lk)("hr",null,null,-1);var oi=s(1367),ri=s(384),di=s(9142);const ci={name:"MiscModule",components:{AddTagWizard:oi.A,ListPublicLinks:ri.A,ListTagsModule:di.A},computed:{...(0,_e.L8)({destination:"getDestination"})}},ui=(0,fe.A)(ci,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("list-tags-module"),r=(0,i.g2)("add-tag-wizard"),d=(0,i.g2)("list-public-links");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(o),(0,i.bF)(r),li,(0,i.bF)(d)],64)}]]);var mi=s(5738),pi=s(1614),ki=s(6191),bi=s(310),hi=s(7954),Li=s(9981);const gi=(0,i.Lk)("h2",null,"List Sprints",-1),vi=(0,i.Lk)("p",{class:"text-instructions"}," Lists out all the sprints associated with this particular object. ",-1),_i={key:0},yi={key:0,class:"alert alert-info"},fi={key:1,class:"row submit-row"},Si={class:"col-md-12"},ji={key:2,class:"mt-4"},Ci={class:"modal fade",id:"createNewSprintModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"createNewSprint","aria-hidden":"true"},Ii={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},wi={class:"modal-content"},Ri=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"}," Please confirm Link Deletion "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"createNewSprintButton"})],-1),Ei={class:"modal-body"},Mi={class:"row"},Ti=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Sprint Information"),(0,i.Lk)("p",{class:"text-instructions"}," Please use an appropriate name, start date, and finish date. ")],-1),$i={class:"col-md-8"},Di={class:"form-group"},Ui=(0,i.Lk)("label",null,"Sprint Name",-1),qi=(0,i.Lk)("div",{class:"spacer"},null,-1),Oi={class:"row"},Fi={class:"col-md-6"},xi={class:"form-group"},Ni=(0,i.Lk)("label",null,"Start Date",-1),Qi={class:"col-md-6"},Ai={class:"form-group"},Xi=(0,i.Lk)("label",null,"End Date",-1),Bi={class:"modal-footer"},Pi={name:"NewSprintWizard",components:{NDatePicker:s(8105).A},props:{sprintResultsLength:{type:Number,default:0}},computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},data:()=>({sprintEndDate:0,sprintNameModel:"",sprintStartDate:0}),watch:{sprintResultsLength(){this.updateSprintNameModel()}},methods:{createNewSprint(){this.$store.dispatch("newToast",{header:"Creating New Toast",message:"Please wait - we are creating the new toast. It will automatically navigate you to the new sprint information page",extra_classes:"bg-warning text-dark",delay:0,unique_type:"create_sprint"});const e=new Date(this.sprintStartDate),t=new Date(this.sprintEndDate),s=new FormData;s.set("sprint_name",this.sprintNameModel),s.set("sprint_start_date",e.toISOString()),s.set("sprint_end_date",t.toISOString()),this.axios.post(`${this.rootUrl}new_sprint/${this.destination}/${this.locationId}/save/`,s).then((e=>{window.location=`${this.rootUrl}sprint_information/${e.data.id}/`})).catch((e=>{this.$store.dispatch("newToast",{header:"Error creating new sprint",message:`Could not create new sprint. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"create_sprint"})}))},updateSprintNameModel(){const e=this.sprintResultsLength+1,t=(new Date).toLocaleDateString("en-au",{year:"numeric",month:"short",day:"numeric"});this.sprintNameModel=`${this.destination}-${this.locationId} - Sprint ${e} - ${t}`}},mounted(){this.sprintStartDate=(new Date).getTime(),this.sprintEndDate=this.sprintStartDate+6048e5,this.$nextTick((()=>{this.updateSprintNameModel()}))}},Wi=(0,fe.A)(Pi,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-date-picker");return(0,i.uX)(),(0,i.CE)("div",Ci,[(0,i.Lk)("div",Ii,[(0,i.Lk)("div",wi,[Ri,(0,i.Lk)("div",Ei,[(0,i.Lk)("div",Mi,[Ti,(0,i.Lk)("div",$i,[(0,i.Lk)("div",Di,[Ui,(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.sprintNameModel=e)},null,512),[[H.vModelText,a.sprintNameModel]])]),qi,(0,i.Lk)("div",Oi,[(0,i.Lk)("div",Fi,[(0,i.Lk)("div",xi,[Ni,(0,i.bF)(o,{value:a.sprintStartDate,"onUpdate:value":t[1]||(t[1]=e=>a.sprintStartDate=e),type:"date"},null,8,["value"])])]),(0,i.Lk)("div",Qi,[(0,i.Lk)("div",Ai,[Xi,(0,i.bF)(o,{value:a.sprintEndDate,"onUpdate:value":t[2]||(t[2]=e=>a.sprintEndDate=e),type:"date"},null,8,["value"])])])])])])]),(0,i.Lk)("div",Bi,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=(...t)=>e.closeModal&&e.closeModal(...t))}," Cancel "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>l.createNewSprint&&l.createNewSprint(...e))}," Create New Sprint ")])])])])}]]),zi={class:"col-md-10 object-link--details"},Ki=["href"],Hi={class:"object-link--link"},Gi={class:"object-link--title"},Vi={class:"object-link--link"},Ji={class:"object-link--link"},Yi={class:"col-md-2 object-link--status"},Zi=(0,i.Lk)("span",null,"Sprint Status: ",-1),en={key:0,class:"object-link--remove"};var tn=s(3980),sn=s(6285),nn=s(953);const an={name:"RenderSprintCard",components:{CarbonTrashCan:tn.dA},props:{canDelete:{type:Boolean,default:!0},sprintResults:{type:Array,default:()=>[]}},computed:{...(0,_e.L8)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},emits:["confirm_remove_sprint"],methods:{useNiceDate:function(e){const t=(0,nn.BA)(e);return""===t||null==t?"":sn.c9.fromISO(t).toLocaleString(sn.c9.DATE_MED_WITH_WEEKDAY)},confirmRemoveSprintFunction(e){this.$emit("confirm_remove_sprint",e)}}},ln=(0,fe.A)(an,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("carbon-trash-can");return(0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.sprintResults,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.sprint_id,class:"row object-link"},[(0,i.Q3)(" Sprint ID + Sprint Name "),(0,i.Lk)("div",zi,[(0,i.Lk)("a",{href:`${this.rootUrl}sprint_information/${t.sprint_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",Hi,"Sprint- "+(0,Ue.toDisplayString)(t.sprint_id),1),(0,i.Lk)("div",Gi,(0,Ue.toDisplayString)(t.sprint_name),1),(0,i.Lk)("div",Vi," Story Point Progression: "+(0,Ue.toDisplayString)(t.completed_story_points)+" out of "+(0,Ue.toDisplayString)(t.total_story_points),1),(0,i.Lk)("div",Ji," Dates: "+(0,Ue.toDisplayString)(l.useNiceDate(t.sprint_start_date))+" till "+(0,Ue.toDisplayString)(l.useNiceDate(t.sprint_end_date)),1)],8,Ki)]),(0,i.Q3)(" Sprint Status "),(0,i.Lk)("div",Yi,[Zi,(0,i.Lk)("span",null,(0,Ue.toDisplayString)(t.sprint_status),1)]),(0,i.Q3)(" Object Delete "),e.userLevel>=2&&!0===s.canDelete?((0,i.uX)(),(0,i.CE)("div",en,[(0,i.bF)(o,{onClick:e=>l.confirmRemoveSprintFunction(t)},null,8,["onClick"])])):(0,i.Q3)("v-if",!0)])))),128)}]]),on={name:"ChildSprints",components:{RenderSprintCard:ln,NewSprintWizard:Wi},data:()=>({allowedObjects:["project","requirement"],sprintResults:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{closeModal(){document.getElementById("createNewSprintButton").click()},getSprints(){const e=`${this.rootUrl}object_data/${this.destination}/${this.locationId}/sprint_list/child/`;this.axios.post(e).then((e=>{this.sprintResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Sprint List",message:`Sorry, could not get child sprints. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},openCreateModal(){new K.aF(document.getElementById("createNewSprintModal")).show()}},mounted(){this.$nextTick((()=>{this.allowedObjects.includes(this.destination)&&this.getSprints()}))}},rn=(0,fe.A)(on,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("render-sprint-card"),r=(0,i.g2)("new-sprint-wizard");return(0,i.uX)(),(0,i.CE)(i.FK,null,[gi,vi,a.allowedObjects.includes(e.destination)?((0,i.uX)(),(0,i.CE)("div",_i,[0===a.sprintResults.length?((0,i.uX)(),(0,i.CE)("div",yi," Currently there are no current sprints. ")):(0,i.Q3)("v-if",!0),(0,i.Q3)(" CURRENT SPRINTS"),(0,i.bF)(o,{"sprint-results":a.sprintResults,"can-delete":!1},null,8,["sprint-results"]),(0,i.Q3)(" BUTTONS"),e.userLevel>=2?((0,i.uX)(),(0,i.CE)("div",fi,[(0,i.Lk)("div",Si,[(0,i.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>l.openCreateModal&&l.openCreateModal(...e))}," Create New Sprint ")])])):(0,i.Q3)("v-if",!0),"project"===e.destination?((0,i.uX)(),(0,i.CE)("hr",ji)):(0,i.Q3)("v-if",!0)])):(0,i.Q3)("v-if",!0),a.allowedObjects.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(r,{key:1,"sprint-results-length":a.sprintResults.length},null,8,["sprint-results-length"])):(0,i.Q3)("v-if",!0)],64)}]]),dn=(0,i.Lk)("h2",null,"AssignedSprints",-1),cn=(0,i.Lk)("p",{class:"text-instructions"}," Lists all sprints that contains this object. ",-1),un={key:0},mn={key:1},pn={key:2,class:"alert alert-info"},kn={class:"row submit-row"},bn={class:"col-md-12"},hn={class:"modal fade",id:"addSprintWizardModal",tabindex:"-1","aria-labelledby":"addSprintWizard","aria-hidden":"true"},Ln={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},gn={class:"modal-content"},vn=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"addSprintWizard"},"Add Object to Sprint"),(0,i.Lk)("button",{id:"addSprintWizardButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_n={class:"modal-body"},yn={class:"row"},fn=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Sprint Wizard"),(0,i.Lk)("p",{class:"text-instructions"}," Please select the appropriate sprint to add this current object too. ")],-1),Sn={class:"col-md-8"},jn={class:"form-group"},Cn=(0,i.Lk)("label",null,"Sprint",-1),In=(0,i.Lk)("div",{class:"spacer"},null,-1),wn={class:"col-md-12 mb-4"},Rn=(0,i.Lk)("strong",null,"Sprint Name: ",-1),En=(0,i.Lk)("br",null,null,-1),Mn=(0,i.Lk)("strong",null,"Sprint Start Date: ",-1),Tn={class:"modal-footer"},$n=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Dn=["disabled"];var Un=s(246);const qn={name:"AddSprintWizard",components:{NSelect:be.A},emits:["update_sprint_list"],data:()=>({selectedSprintObject:{},sprintModel:void 0,sprintOptions:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},watch:{sprintModel(e){this.selectedSprintObject=this.sprintOptions.filter((t=>parseInt(t.value)===parseInt(e)))}},methods:{useNiceDatetime:Un.y,addSprint(){this.$store.dispatch("newToast",{header:"Adding object to sprint",message:"Adding current object to sprint, please wait.",extra_classes:"bg-warning text-dark",delay:0,unique_type:"add_sprint_wizard"});const e=new FormData;e.set("sprint_id",this.sprintModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_sprint/${this.sprintModel}/`,e).then((e=>{this.$emit("update_sprint_list",e.data),document.getElementById("addSprintWizardButton").click(),this.$store.dispatch("newToast",{header:"Added to Sprint",message:"Successfully added current object to Sprint",extra_classes:"bg-success",unique_type:"add_sprint_wizard"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error adding current object to sprint",message:`Error adding the current object to sprint. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"add_sprint_wizard"})}))},getSprintOptions(){this.axios.post(`${this.rootUrl}object_data/sprint_list/`).then((e=>{this.sprintOptions=e.data.map((e=>({value:e.sprint_id,label:e.sprint_name,sprint_start_date:e.sprint_start_date,sprint_end_date:e.sprint_end_date})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error fetching Potential Sprint List",message:`Can not retrieve sprint list. ${e}`,extra_classes:"bg-warning text-dark",delay:0})}))}},mounted(){this.$nextTick((()=>{this.getSprintOptions()}))}},On=(0,fe.A)(qn,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",hn,[(0,i.Lk)("div",Ln,[(0,i.Lk)("div",gn,[vn,(0,i.Lk)("div",_n,[(0,i.Lk)("div",yn,[fn,(0,i.Lk)("div",Sn,[(0,i.Lk)("div",jn,[Cn,(0,i.bF)(o,{value:a.sprintModel,"onUpdate:value":t[0]||(t[0]=e=>a.sprintModel=e),options:a.sprintOptions,filterable:"",placeholder:"Please select a sprint from the list"},null,8,["value","options"])]),In,((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.selectedSprintObject,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.value,class:"row"},[(0,i.Lk)("div",wn,[Rn,(0,i.eW)((0,Ue.toDisplayString)(e.label),1),En,Mn,(0,i.eW)((0,Ue.toDisplayString)(l.useNiceDatetime(e.sprint_start_date)),1)])])))),128))])])]),(0,i.Lk)("div",Tn,[$n,(0,i.Lk)("button",{disabled:void 0===a.sprintModel,onClick:t[1]||(t[1]=(...e)=>l.addSprint&&l.addSprint(...e)),type:"button",class:"btn btn-primary"}," Add to Sprint ",8,Dn)])])])])}]]),Fn={class:"modal fade",id:"confirmSprintRemoveModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmSprintRemoveLabel","aria-hidden":"true"},xn={class:"modal-dialog"},Nn={class:"modal-content"},Qn=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"confirmSprintRemoveLabel"}," Please confirm the sprint removal "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmSprintRemovalButton"})],-1),An=(0,i.Lk)("div",{class:"modal-body"}," Are you sure you want to remove the sprint from the current object. ",-1),Xn={class:"modal-footer"},Bn={name:"ConfirmRemoveSprint",emits:["update_sprint_list"],props:{confirmRemoveSprint:{type:Object,default:()=>({sprint_name:"",sprint_id:0})}},computed:{...(0,_e.L8)({destination:"getDestination",documentRemoveKey:"getDocumentRemoveKey",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{removeSprint(){const e=this.confirmRemoveSprint.sprint_id,t=new FormData;t.set("sprint_id",e),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_sprint/${e}/`,t).then((e=>{this.$emit("update_sprint_list",e.data),document.getElementById("confirmSprintRemovalButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Removing Sprint",message:`Sorry, we could not remove the sprint from the current object. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},closeModal(){document.getElementById("confirmSprintRemovalButton").click()}}},Pn={name:"AssignedSprints",components:{ConfirmRemoveSprint:(0,fe.A)(Bn,[["render",function(e,t,s,n,a,l){return(0,i.uX)(),(0,i.CE)("div",Fn,[(0,i.Lk)("div",xn,[(0,i.Lk)("div",Nn,[Qn,An,(0,i.Lk)("div",Xn,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.removeSprint&&l.removeSprint(...e))}," Yes ")])])])])}]]),RenderSprintCard:ln,AddSprintWizard:On},data:()=>({allowedObjects:["requirement_item","project","task"],confirmRemoveSprint:{sprint_id:0,sprint_name:""},currentImportVariables:{header:"List of Current Sprints",prefix:"sprint",id:"sprint_id",title:"sprint_name",status:"sprint_status"},currentSprints:[],finishedImportVariables:{header:"List of Finished Sprints",prefix:"sprint",id:"sprint_id",title:"sprint_name",status:"sprint_status"},finishedSprints:[]}),computed:{...(0,_e.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{addToSprint(){new K.aF(document.getElementById("addSprintWizardModal")).show()},confirmRemoveSprintFunction(e){this.confirmRemoveSprint=e,new K.aF(document.getElementById("confirmSprintRemoveModal")).show()},getAssignedSprints(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/sprint_list/assigned/`).then((e=>{this.updateSprintList(e.data)})).catch((e=>{this.$store.dispatch("newToast",{headers:"Error fetching assigned sprints",message:`Could not get the data. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateSprintList(e){this.currentSprints=e.filter((e=>"Finished"!==e.sprint_status)),this.finishedSprints=e.filter((e=>"Finished"===e.sprint_status))}},mounted(){this.$nextTick((()=>{this.allowedObjects.includes(this.destination)&&this.getAssignedSprints()}))}},Wn={name:"ListSprints",components:{AssignedSprints:(0,fe.A)(Pn,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("render-sprint-card"),r=(0,i.g2)("add-sprint-wizard"),d=(0,i.g2)("confirm-remove-sprint");return(0,i.uX)(),(0,i.CE)(i.FK,null,[dn,cn,a.currentSprints.length>0?((0,i.uX)(),(0,i.CE)("h3",un," Current ")):(0,i.Q3)("v-if",!0),(0,i.bF)(o,{"sprint-results":a.currentSprints,onConfirm_remove_sprint:t[0]||(t[0]=e=>l.confirmRemoveSprintFunction(e))},null,8,["sprint-results"]),a.finishedSprints.length>0?((0,i.uX)(),(0,i.CE)("h3",mn," Finished ")):(0,i.Q3)("v-if",!0),(0,i.bF)(o,{"sprint-results":a.finishedSprints,onConfirm_remove_sprint:t[1]||(t[1]=e=>l.confirmRemoveSprintFunction(e))},null,8,["sprint-results"]),a.currentSprints.length+a.finishedSprints.length===0?((0,i.uX)(),(0,i.CE)("div",pn," Currently this object has not been assigned to any sprints. ")):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",kn,[(0,i.Lk)("div",bn,[e.userLevel>=2?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.addToSprint&&l.addToSprint(...e))}," Add Object To Sprint ")):(0,i.Q3)("v-if",!0)])]),(0,i.bF)(r,{onUpdate_sprint_list:t[3]||(t[3]=e=>l.updateSprintList(e))}),(0,i.bF)(d,{"confirm-remove-sprint":a.confirmRemoveSprint,onUpdate_sprint_list:t[4]||(t[4]=e=>l.updateSprintList(e))},null,8,["confirm-remove-sprint"])],64)}]]),ChildSprints:rn},data:()=>({assignedSprintAllowedDestination:["requirement_item","project","task"],childSprintsAllowedDestination:["requirement","project"]}),computed:{...(0,_e.L8)({destination:"getDestination"})}},zn=(0,fe.A)(Wn,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("child-sprints"),r=(0,i.g2)("assigned-sprints");return(0,i.uX)(),(0,i.CE)(i.FK,null,[a.childSprintsAllowedDestination.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(o,{key:0})):(0,i.Q3)("v-if",!0),a.assignedSprintAllowedDestination.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(r,{key:1})):(0,i.Q3)("v-if",!0)],64)}]]);var Kn=s(2899),Hn=s(2787),Gn=s(6434),Vn=s(9581),Jn=s(4077);const Yn={name:"ParentModules",components:{DeleteObject:s(4325).A,ConfirmPublicLinkDelete:Jn.A,ConfirmNoteDelete:Gn.A,AddFolderWizard:Li.A,ConfirmFileDeleteVue:bi.A,AddLinkWizard:ki.A,ConfirmFolderDelete:hi.A,CustomersModule:ai,DocumentsModule:Nt.A,EditHistoryNoteWizard:Kn.A,GroupsAndUsersModule:x.A,ListSprints:zn,NewHistoryNoteWizard:Hn.A,NotesModule:mi.A,ObjectLinks:Ms,RequirementItemLinksModule:St,RequirementItemsModule:Ce,RequirementLinksModule:xt,UploadDocumentWizard:pi.A,MiscModule:ui},props:{destination:{type:String,default:""},isReadOnly:{type:Boolean,default:!1},locationId:{type:Number,default:0},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userExtraPermissions:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},data:()=>({}),methods:{useNBTheme:Vn.p},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.isReadOnly?this.$store.commit({type:"updateUserLevel",userLevel:1}):(this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel}),this.$store.commit({type:"updateUserExtraPermissions",userExtraPermissions:this.userExtraPermissions}))}},Zn=(0,fe.A)(Yn,[["render",function(e,t,s,x,N,Q){const A=(0,i.g2)("groups-and-users-module"),X=(0,i.g2)("requirement-items-module"),B=(0,i.g2)("requirement-links-module"),P=(0,i.g2)("requirement-item-links-module"),W=(0,i.g2)("documents-module"),z=(0,i.g2)("upload-document-wizard"),K=(0,i.g2)("add-folder-wizard"),H=(0,i.g2)("add-link-wizard"),G=(0,i.g2)("confirm-file-delete-vue"),V=(0,i.g2)("confirm-folder-delete"),J=(0,i.g2)("object-links"),Y=(0,i.g2)("customers-module"),Z=(0,i.g2)("list-sprints"),ee=(0,i.g2)("misc-module"),te=(0,i.g2)("confirm-public-link-delete"),se=(0,i.g2)("notes-module"),ie=(0,i.g2)("edit-history-note-wizard"),ne=(0,i.g2)("new-history-note-wizard"),ae=(0,i.g2)("confirm-note-delete"),le=(0,i.g2)("delete-object"),oe=(0,i.g2)("n-config-provider");return(0,i.uX)(),(0,i.Wv)(oe,{theme:Q.useNBTheme(s.theme)},{default:(0,i.k6)((()=>[(0,i.Lk)("div",n,[(0,i.Lk)("div",a,[(0,i.Lk)("ul",l,[(0,i.Q3)(" GROUPS AND USERS "),(0,i.Q3)(" Don't need to show to requirement items - as permissions are gained from parent requirement "),"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",o,r)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT ITEMS "),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("li",d,c)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT LINKS "),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("li",u,m)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT ITEM LINKS "),"requirement_item"===s.destination?((0,i.uX)(),(0,i.CE)("li",p,k)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" DOCUMENTS "),b,(0,i.Q3)(" LINKED OBJECTS "),"requirement"!==s.destination&&"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",h,L)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" CUSTOMERS "),(0,i.Q3)(" Customers are not needed by requirement items as the parent requirements take care of this "),"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",g,v)):(0,i.Q3)("v-if",!0),(0,i.Q3)(" SPRINTS "),_,(0,i.Q3)(" MISC "),y,(0,i.Q3)(" Notes "),f,(0,i.Q3)(" ADMIN "),4===s.userLevel?((0,i.uX)(),(0,i.CE)("li",S,j)):(0,i.Q3)("v-if",!0)]),C,(0,i.Lk)("div",I,["requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("div",w,[(0,i.bF)(A)])):(0,i.Q3)("v-if",!0),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("div",R,[(0,i.bF)(X)])):(0,i.Q3)("v-if",!0),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("div",E,[(0,i.bF)(B)])):"requirement_item"===s.destination?((0,i.uX)(),(0,i.CE)("div",M,[(0,i.bF)(P)])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",T,[(0,i.bF)(W),(0,i.bF)(z),(0,i.bF)(K,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"]),(0,i.bF)(H,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"]),(0,i.bF)(G),(0,i.bF)(V)]),(0,i.Lk)("div",$,[(0,i.bF)(J)]),(0,i.Lk)("div",D,[(0,i.bF)(Y)]),(0,i.Lk)("div",U,[(0,i.bF)(Z)]),(0,i.Lk)("div",q,[(0,i.bF)(ee),(0,i.bF)(te)]),(0,i.Lk)("div",O,[(0,i.bF)(se),(0,i.Q3)(" Modals for Notes section "),(0,i.bF)(ie),(0,i.bF)(ne,{"location-id":s.locationId,destination:s.destination},null,8,["location-id","destination"]),(0,i.bF)(ae)]),4===s.userLevel?((0,i.uX)(),(0,i.CE)("div",F,[(0,i.bF)(le)])):(0,i.Q3)("v-if",!0)])])])])),_:1},8,["theme"])}]])},1390:(e,t,s)=>{s.d(t,{A:()=>L});var i=s(641),n=s(33);const a={key:0},l={class:"col-md-10 object-link--details"},o=["href"],r={class:"object-link--link"},d={class:"object-link--title"},c={class:"col-md-2 object-link--status"},u=(0,i.Lk)("span",null,"Object Status: ",-1),m={key:0,class:"object-link--remove"},p={key:1,class:"spacer-extra"};var k=s(2124),b=s(9336);const h={name:"SubObjectLinks",components:{CarbonTrashCan:s(3980).dA},emits:["update_link_results"],props:{canDelete:{type:Boolean,default:!0},linkResults:{type:Array,default:()=>[]},title:{type:String,default:"Relates"}},computed:{...(0,k.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{confirmRemoveLink(e){this.$store.commit("updateObjectLink",{objectLink:e}),new b.aF(document.getElementById("confirmLinkDeleteModal")).show()}}},L=(0,s(6262).A)(h,[["render",function(e,t,s,k,b,h){const L=(0,i.g2)("carbon-trash-can");return(0,i.uX)(),(0,i.CE)(i.FK,null,[s.linkResults.length>0?((0,i.uX)(),(0,i.CE)("h3",a,(0,n.toDisplayString)(s.title),1)):(0,i.Q3)("v-if",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.linkResults,(t=>((0,i.uX)(),(0,i.CE)("div",{key:t.pk,class:"row object-link"},[(0,i.Q3)(" Object ID + Title "),(0,i.Lk)("div",l,[(0,i.Lk)("a",{href:`${this.rootUrl}${t.object_type}_information/${t.object_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",r,(0,n.toDisplayString)(t.object_type)+" - "+(0,n.toDisplayString)(t.object_id),1),(0,i.Lk)("div",d,(0,n.toDisplayString)(t.object_title),1)],8,o)]),(0,i.Q3)(" Object Status "),(0,i.Lk)("div",c,[u,(0,i.Lk)("span",null,(0,n.toDisplayString)(t.object_status),1)]),(0,i.Q3)(" Object Delete "),e.userLevel>=2&&!0===s.canDelete?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.bF)(L,{onClick:e=>h.confirmRemoveLink(t)},null,8,["onClick"])])):(0,i.Q3)("v-if",!0)])))),128)),s.linkResults.length>0?((0,i.uX)(),(0,i.CE)("div",p)):(0,i.Q3)("v-if",!0)],64)}]])}}]);