"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8067],{6044:(e,t,s)=>{s.d(t,{A:()=>k});var i=s(641),n=s(33);const a={id:"confirmLinkDeleteModal",class:"modal fade",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmLinkDelete","aria-hidden":"true"},l={class:"modal-dialog"},o={class:"modal-content"},r={class:"modal-body"},d={class:"row"},c={key:0,class:"row mt-2"},u={class:"modal-footer"};var m=s(2124);const p={name:"ConfirmLinkDelete",props:{showMigrateButton:{type:Boolean,default:!0}},emits:["update_link_results"],computed:{...(0,m.L8)({destination:"getDestination",locationId:"getLocationId",objectLink:"getObjectLink",rootUrl:"getRootUrl"})},methods:{closeModal(){document.getElementById("confirmLinkDeleteButton").click()},formatId(e,t){switch(e){case"project":return`Pro${t}`;case"requirement":return`Req${t}`;case"requirement_item":return`Item${t}`;case"task":return`Task${t}`;default:return`${e.slice(0,3)}${t}`}},processLink(e){const t=new FormData;t.set("link_id",this.objectLink.object_id),t.set("link_connection",this.objectLink.object_type===this.destination?"meta_object":this.objectLink.object_type),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${e}_link/`,t).then((()=>{this.$emit("update_link_results",{})})),this.closeModal()}}},k=(0,s(6262).A)(p,[["render",function(e,t,s,m,p,k){return(0,i.uX)(),(0,i.CE)("div",a,[(0,i.Lk)("div",l,[(0,i.Lk)("div",o,[t[7]||(t[7]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{id:"confirmLinkDelete",class:"modal-title"}," Please confirm Link Deletion "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{id:"confirmLinkDeleteButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,i.Lk)("div",r,[t[6]||(t[6]=(0,i.Lk)("div",{class:"row"},[(0,i.Lk)("p",null,"Are you sure you want to delete the link?")],-1)),(0,i.Lk)("div",d,[(0,i.Lk)("p",null,[(0,i.Lk)("strong",null,(0,n.toDisplayString)(k.formatId(e.objectLink.object_type,e.objectLink.object_id)),1),t[3]||(t[3]=(0,i.Lk)("br",null,null,-1)),t[4]||(t[4]=(0,i.Lk)("strong",null,"Title: ",-1)),(0,i.eW)((0,n.toDisplayString)(e.objectLink.object_title),1)])]),"block"===e.objectLink.link_relationship.toLowerCase()?((0,i.uX)(),(0,i.CE)("div",c,t[5]||(t[5]=[(0,i.Lk)("p",{class:"mb-0"},' Alternatively, for any Blocked links we can migrate them to the "Related" status. ',-1)]))):(0,i.Q3)("v-if",!0)]),(0,i.Lk)("div",u,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary me-auto",onClick:t[0]||(t[0]=(...e)=>k.closeModal&&k.closeModal(...e))}," Cancel "),"block"===e.objectLink.link_relationship.toLowerCase()&&s.showMigrateButton?((0,i.uX)(),(0,i.CE)("button",{key:0,type:"button",class:"btn btn-info",onClick:t[1]||(t[1]=e=>k.processLink("migrate"))},"Migrate Link")):(0,i.Q3)("v-if",!0),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=e=>k.processLink("remove"))}," Delete Link ")])])])])}]])},7896:(e,t,s)=>{s.d(t,{A:()=>b});var i=s(641),n=s(33);const a={key:0},l={class:"col-md-10 object-link--details"},o=["href"],r={class:"object-link--link"},d={class:"object-link--title"},c={class:"col-md-2 object-link--status"},u={key:0,class:"object-link--remove"},m={key:1,class:"spacer-extra"};var p=s(2124),k=s(9336);const h={name:"SubObjectLinks",components:{CarbonTrashCan:s(3980).dA},props:{canDelete:{type:Boolean,default:!0},linkResults:{type:Array,default:()=>[]},title:{type:String,default:"Relates"}},emits:["update_link_results"],computed:{...(0,p.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{confirmRemoveLink(e){this.$store.commit("updateObjectLink",{objectLink:e}),new k.aF(document.getElementById("confirmLinkDeleteModal")).show()}}},b=(0,s(6262).A)(h,[["render",function(e,t,s,p,k,h){const b=(0,i.g2)("carbon-trash-can");return(0,i.uX)(),(0,i.CE)(i.FK,null,[s.linkResults.length>0?((0,i.uX)(),(0,i.CE)("h3",a,(0,n.toDisplayString)(s.title),1)):(0,i.Q3)("v-if",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.linkResults,(a=>((0,i.uX)(),(0,i.CE)("div",{key:a.pk,class:"row object-link"},[(0,i.Q3)(" Object ID + Title "),(0,i.Lk)("div",l,[(0,i.Lk)("a",{href:`${e.rootUrl}${a.object_type}_information/${a.object_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",r,(0,n.toDisplayString)(a.object_type)+" - "+(0,n.toDisplayString)(a.object_id),1),(0,i.Lk)("div",d,(0,n.toDisplayString)(a.object_title),1)],8,o)]),(0,i.Q3)(" Object Status "),(0,i.Lk)("div",c,[t[0]||(t[0]=(0,i.Lk)("span",null,"Object Status: ",-1)),(0,i.Lk)("span",null,(0,n.toDisplayString)(a.object_status),1)]),(0,i.Q3)(" Object Delete "),e.userLevel>=2&&!0===s.canDelete?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(b,{onClick:e=>h.confirmRemoveLink(a)},null,8,["onClick"])])):(0,i.Q3)("v-if",!0)])))),128)),s.linkResults.length>0?((0,i.uX)(),(0,i.CE)("div",m)):(0,i.Q3)("v-if",!0)],64)}]])},9115:(e,t,s)=>{s.r(t),s.d(t,{default:()=>wi});var i=s(641);const n={class:"card"},a={class:"card-body"},l={id:"misc_module_tabs",class:"nav nav-tabs",role:"tablist"},o={key:0,class:"nav-item",role:"presentation"},r={key:1,class:"nav-item",role:"presentation"},d={key:2,class:"nav-item",role:"presentation"},c={key:3,class:"nav-item",role:"presentation"},u={key:4,class:"nav-item",role:"presentation"},m={key:5,class:"nav-item",role:"presentation"},p={key:6,class:"nav-item",role:"presentation"},k={id:"misc_module_content",class:"tab-content"},h={key:0,id:"group-and-users",class:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"contact-tab"},b={key:1,id:"requirement-items",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"home-tab"},L={key:2,id:"requirement-links",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"profile-tab"},g={key:3,id:"requirement-item-links",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"profile-tab"},v={id:"documents",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"contact-tab"},y={id:"object-links",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"contact-tab"},_={id:"customers",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"contact-tab"},f={id:"sprints",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"tabpanel"},S={id:"misc",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"contact-tab"},j={id:"notes",class:"tab-pane fade",role:"tabpanel","aria-labelledby":"contact-tab"},C={key:4,id:"admin",class:"tab-pane fade bg-danger",role:"tabpanel","aria-labelledby":"contact-tab"};var w=s(9845);const I={key:0,class:"requirement-item-spacer"},R={key:1},E={key:2},M={key:3,class:"row submit-row"},T={class:"col-md-12"};var $=s(9336),D=s(3751);const O={id:"newItemModal",class:"modal fade",tabindex:"-1","aria-labelledby":"requirementItemModal","aria-hidden":"true"},q={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},x={class:"modal-content"},U={class:"modal-body"},F={class:"row"},N={class:"col-md-8"},Q={for:"id_requirement_item_title"},A={class:"row"},P={class:"col-md-4"},X={class:"form-group"},B={class:"col-md-4"},W={class:"form-group"},z={class:"modal-footer"};var K=s(1080),H=s(8838),V=s(9639),G=s(3855),J=s(1430),Y=s(2124);const Z={name:"NewRequirementItemWizard",components:{editor:H.A,NSelect:K.A,ValidationRendering:J.A},emits:["new_item_added"],setup:()=>({v$:(0,V.Ay)()}),data:()=>({requirementItemScopeModel:"",requirementItemTitleModel:"",statusItemFixList:[],statusItemModel:"",typeItemFixList:[],typeItemModel:""}),computed:{...(0,Y.L8)({contentCss:"getContentCss",locationId:"getLocationId",rootUrl:"getRootUrl",skin:"getSkin"})},validations:{requirementItemScopeModel:{required:G.mw,maxLength:(0,G.Ru)(63e4)},requirementItemTitleModel:{required:G.mw},statusItemModel:{required:G.mw},typeItemModel:{required:G.mw}},mounted(){this.$nextTick((()=>{this.updateStatusList(),this.updateTypeList()}))},methods:{saveItem(){if(this.v$.$touch(),this.v$.$invalid)return;const e=new FormData;e.set("requirement_item_title",this.requirementItemTitleModel),e.set("requirement_item_scope",this.requirementItemScopeModel),e.set("requirement_item_status",this.statusItemModel),e.set("requirement_item_type",this.typeItemModel),this.axios.post(`${this.rootUrl}new_requirement_item/save/${this.locationId}/`,e).then((e=>{this.requirementItemScopeModel="",this.requirementItemTitleModel="",this.statusItemModel="",this.typeItemModel="",this.$emit("new_item_added",e.data),document.getElementById("requirementItemCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to save item",message:`Failed to save item. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateStatusList(){this.axios.post(`${this.rootUrl}requirement_information/data/list_of_item_status_values/`).then((e=>{this.statusItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_status})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Status List",message:`There was an error updating the status list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateTypeList(){this.axios.post(`${this.rootUrl}requirement_information/data/list_of_item_type_values/`).then((e=>{this.typeItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_type})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Type List",message:`There was an error updating the type list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}};var ee=s(6262);const te=(0,ee.A)(Z,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("validation-rendering"),r=(0,i.g2)("editor"),d=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",O,[(0,i.Lk)("div",q,[(0,i.Lk)("div",x,[t[15]||(t[15]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h2",null," New Requirement Item Wizard "),(0,i.Lk)("button",{id:"requirementItemCloseButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[(0,i.Lk)("span",{"aria-hidden":"true"})])],-1)),(0,i.Lk)("div",U,[(0,i.Lk)("div",F,[t[9]||(t[9]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Description"),(0,i.Lk)("p",{class:"text-instructions"}," Place in a detailed description of this requirement item. This particular item can be then connected to Project or Tasks. ")],-1)),(0,i.Lk)("div",N,[(0,i.Lk)("label",Q,[t[5]||(t[5]=(0,i.eW)("Requirement Item Title: ")),(0,i.bF)(o,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,i.bo)((0,i.Lk)("input",{id:"id_requirement_item_title","onUpdate:modelValue":t[0]||(t[0]=e=>a.requirementItemTitleModel=e),class:"form-control",name:"requirement_item_title",type:"text",required:"true",maxlength:"255"},null,512),[[D.vModelText,a.requirementItemTitleModel]]),t[7]||(t[7]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("label",null,[t[6]||(t[6]=(0,i.eW)(" Requirement Item Scope: ")),(0,i.bF)(o,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),t[8]||(t[8]=(0,i.Lk)("br",null,null,-1)),(0,i.bF)(r,{modelValue:a.requirementItemScopeModel,"onUpdate:modelValue":t[1]||(t[1]=e=>a.requirementItemScopeModel=e),"license-key":"gpl",init:{license_key:"gpl",height:500,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${e.skin}`,content_css:`${e.contentCss}`,relative_urls:!1}},null,8,["modelValue","init"])])]),(0,i.Q3)(" Status "),t[13]||(t[13]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("div",A,[t[12]||(t[12]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("h2",null,"Status"),(0,i.Lk)("p",{class:"text-instructions"}," Set the Requirement Status and Type here. ")],-1)),(0,i.Lk)("div",P,[(0,i.Lk)("div",X,[(0,i.Lk)("label",null,[t[10]||(t[10]=(0,i.eW)("Requirement Status ")),(0,i.bF)(o,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,i.bF)(d,{value:a.statusItemModel,"onUpdate:value":t[2]||(t[2]=e=>a.statusItemModel=e),options:a.statusItemFixList,label:"status"},null,8,["value","options"])])]),(0,i.Lk)("div",B,[(0,i.Lk)("div",W,[(0,i.Lk)("label",null,[t[11]||(t[11]=(0,i.eW)("Requirement Type ")),(0,i.bF)(o,{"error-list":n.v$.typeItemModel.$errors},null,8,["error-list"])]),(0,i.bF)(d,{value:a.typeItemModel,"onUpdate:value":t[3]||(t[3]=e=>a.typeItemModel=e),options:a.typeItemFixList,label:"type"},null,8,["value","options"])])])])]),(0,i.Q3)(" FOOTERS "),(0,i.Lk)("div",z,[t[14]||(t[14]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>l.saveItem&&l.saveItem(...e))}," Save Requirement Item ")])])])])}]]),se={name:"RequirementItemsModule",components:{RenderObjectCard:s(6336).A,NewRequirementItemWizard:te},data:()=>({requirementItemVariables:{header:"Requirement Items",prefix:"RI-",id:"requirement_item_id",title:"requirement_item_title",status:"requirement_item_status_text",end_date:""},itemResults:[],itemStatusList:[],itemTypeList:[]}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mounted(){this.updateItemResults()},methods:{createNewItem(){new $.aF(document.getElementById("newItemModal")).show()},newItemAdded(e){this.itemResults=e},updateItemResults(){this.axios.post("data/items/").then((e=>{this.itemResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Item Results",message:`We are having issues updating item results: Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}},ie=(0,ee.A)(se,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("render-object-card"),r=(0,i.g2)("new-requirement-item-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[t[3]||(t[3]=(0,i.Lk)("h2",null," Requirement Items ",-1)),t[4]||(t[4]=(0,i.Lk)("p",{class:"text-instructions"}," Requirements should be broken down into smaller components called Requirement Items. ",-1)),(0,i.Q3)(" TABLE OF REQUIREMENT ITEMS "),0===a.itemResults.length?((0,i.uX)(),(0,i.CE)("div",I,t[2]||(t[2]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Items for this requirement. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",R,[(0,i.bF)(o,{"import-variables":a.requirementItemVariables,"search-results":a.itemResults,destination:"requirement_item"},null,8,["import-variables","search-results"])])),(0,i.Q3)(" Submit Button "),(0,i.Q3)(" TO DO - limit it to certain users "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",E)):(0,i.Q3)("v-if",!0),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",M,[(0,i.Lk)("div",T,[(0,i.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>l.createNewItem&&l.createNewItem(...e))}," Create new Requirement Item ")])])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" NEW REQUIREMENT ITEM MODAL "),(0,i.bF)(r,{"item-status-list":a.itemStatusList,"item-type-list":a.itemTypeList,"location-id":e.locationId,onNew_item_added:t[1]||(t[1]=e=>l.newItemAdded(e))},null,8,["item-status-list","item-type-list","location-id"])])}]]),ne={key:0},ae={key:1},le={key:2},oe={key:3,class:"row submit-row"},re={class:"col-md-12"};var de=s(33);const ce={id:"newRequirementLinkModal",class:"modal fade",tabindex:"-1","aria-labelledby":"requirementLinkModal","aria-hidden":"true"},ue={class:"modal-dialog modal-lg"},me={class:"modal-content"},pe={class:"modal-body"},ke={class:"row"},he={class:"col-md-8"},be={class:"form-group"},Le={class:"col-md-8"},ge={key:0,class:"alert alert-warning"},ve={key:1,class:"form-group"},ye={key:2,class:"wizard-results"},_e={class:"wizard-results--card--tick"},fe=["id","value"],Se={class:"wizard-results--card--content"},je={class:"text-instructions"},Ce={class:"text-instructions"},we={key:0,"aria-label":"Pagination for New Link Wizard"},Ie={class:"pagination justify-content-center"},Re=["onClick"],Ee={key:1,class:"page-link"},Me={class:"modal-footer"},Te=["disabled"];var $e=s(3781);const De={name:"NewRequirementLinkWizard",components:{NSelect:K.A},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},emits:["update_module"],data:()=>({currentPage:1,isSearching:!1,linkModel:[],numberOfPages:1,objectModel:null,objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Task",label:"Task"}],searchModel:"",searchTimeout:"",styleHeight:"height: 90px"}),computed:{...(0,Y.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},watch:{objectModel(){this.getObjects()},searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),(this.searchModel.length>=3||0===this.searchModel.length)&&(this.searchTimeout=setTimeout((()=>{this.getObjects()}),500))}},methods:{getSetOfPages:$e.k,changePage(e){this.currentPage=e,this.getObjects()},getClasses(e){return parseInt(e)===this.currentPage?"page-item active":"page-item"},getObjects(){if(this.linkModel=[],null===this.objectModel)return void(this.isSearching=!1);const e=new FormData;e.append("array_of_objects",this.objectModel.toLowerCase()),e.set("destination_page",this.currentPage),e.set("exclude_destination",this.destination),e.set("exclude_location_id",this.locationId),e.set("search",this.searchModel),this.isSearching=!0,this.axios.post(`${this.rootUrl}search/data/`,e).then((e=>{this.objectResults=e.data[this.objectModel.toLowerCase()],this.numberOfPages=e.data[`${this.objectModel.toLowerCase()}_number_of_pages`],this.currentPage=e.data[`${this.objectModel.toLowerCase()}_current_page`],this.setOfPages=(0,$e.k)(this.currentPage,this.numberOfPages),this.isSearching=!1,this.styleHeight="",this.$nextTick((()=>{const e=document.getElementById("select_links");null!=e&&(this.styleHeight=`height: ${e.clientHeight}px`)}))})).catch((()=>{this.$store.dispatch("newToast",{header:"Error retrieving links",message:"We are currently having issues obtaining data",delay:0,extra_classes:"bg-danger"})}))},saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),this.axios.post(`${this.rootUrl}${this.destination}_information/${this.locationId}/add_link/`,e).then((e=>{this.$emit("update_module",e.data),document.getElementById("requirementLinkCloseButton").click(),this.objectModel=null,this.styleHeight="height: 90px"}))}}},Oe=(0,ee.A)(De,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",ce,[(0,i.Lk)("div",ue,[(0,i.Lk)("div",me,[t[12]||(t[12]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h2",null," New Requirement Link Wizard "),(0,i.Lk)("button",{id:"requirementLinkCloseButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[(0,i.Lk)("span",{"aria-hidden":"true"})])],-1)),(0,i.Lk)("div",pe,[(0,i.Q3)(" CHOOSING A OBJECT TYPE "),(0,i.Lk)("div",ke,[t[5]||(t[5]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Object Selector"),(0,i.Lk)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1)),(0,i.Lk)("div",he,[(0,i.Lk)("div",be,[t[4]||(t[4]=(0,i.Lk)("label",null,"Object Selection",-1)),(0,i.bF)(o,{value:a.objectModel,"onUpdate:value":t[0]||(t[0]=e=>a.objectModel=e),options:a.objectSelection,class:"object-selection"},null,8,["value","options"])])])]),t[10]||(t[10]=(0,i.Lk)("hr",null,null,-1)),(0,i.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,i.Lk)("div",{id:"select_links",class:"row",style:(0,de.normalizeStyle)(a.styleHeight)},[t[9]||(t[9]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Select Links"),(0,i.Lk)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1)),(0,i.Lk)("div",Le,[0===a.objectResults.length&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",ge," Sorry - there are no results. ")):(0,i.Q3)("v-if",!0),(0,i.Q3)(" SEARCH RESULTS "),null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",ve,[t[6]||(t[6]=(0,i.Lk)("label",null,"Filter",-1)),(0,i.bo)((0,i.Lk)("input",{id:"search_terms","onUpdate:modelValue":t[1]||(t[1]=e=>a.searchModel=e),class:"form-control",type:"text"},null,512),[[D.vModelText,a.searchModel]])])):(0,i.Q3)("v-if",!0),t[8]||(t[8]=(0,i.Lk)("br",null,null,-1)),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",ye,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.objectResults,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"wizard-results--card"},[(0,i.Lk)("div",_e,[(0,i.bo)((0,i.Lk)("input",{id:`checkbox_${a.objectModel.toLowerCase()}_${e.pk}`,"onUpdate:modelValue":t[2]||(t[2]=e=>a.linkModel=e),class:"form-check-input",type:"checkbox",name:"link-option",value:e.id},null,8,fe),[[D.vModelCheckbox,a.linkModel]])]),(0,i.Lk)("div",Se,[(0,i.Lk)("div",je,(0,de.toDisplayString)(a.objectModel)+" "+(0,de.toDisplayString)(e.id),1),(0,i.Lk)("div",null,[(0,i.Lk)("strong",null,(0,de.toDisplayString)(e.title),1)]),(0,i.Lk)("div",null,[t[7]||(t[7]=(0,i.eW)(" Status: ")),(0,i.Lk)("span",Ce,(0,de.toDisplayString)(e.status),1)])])])))),128)),e.setOfPages.length>1?((0,i.uX)(),(0,i.CE)("nav",we,[(0,i.Lk)("ul",Ie,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.setOfPages,(e=>((0,i.uX)(),(0,i.CE)("li",{key:e.destinationPage,class:(0,de.normalizeClass)(l.getClasses(e.destinationPage))},[parseInt(e.destinationPage)!==parseInt(a.currentPage)?((0,i.uX)(),(0,i.CE)("a",{key:0,class:"page-link",href:"javascript:void(0)",onClick:t=>l.changePage(e.destinationPage)},(0,de.toDisplayString)(e.text),9,Re)):((0,i.uX)(),(0,i.CE)("span",Ee,(0,de.toDisplayString)(e.text),1))],2)))),128))])])):(0,i.Q3)("v-if",!0)])):(0,i.Q3)("v-if",!0)])],4)]),(0,i.Lk)("div",Me,[t[11]||(t[11]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===a.linkModel.length,onClick:t[3]||(t[3]=(...e)=>l.saveLinks&&l.saveLinks(...e))}," Save changes ",8,Te)])])])])}]]);var qe=s(6044),xe=s(7896);const Ue={name:"RequirementItemLinksModule",components:{ConfirmLinkDelete:qe.A,NewRequirementLinkWizard:Oe,SubObjectLinks:xe.A},data:()=>({itemLinkProject:[],itemLinkTask:[]}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))},methods:{updateLinkResults(){this.axios.post(`${this.rootUrl}object_data/requirement_item/${this.locationId}/object_link_list/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},newRequirementItemLink(){new $.aF(document.getElementById("newRequirementLinkModal")).show()}}},Fe=(0,ee.A)(Ue,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("sub-object-links"),r=(0,i.g2)("new-requirement-link-wizard"),d=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[t[6]||(t[6]=(0,i.Lk)("h2",null," Requirement Item Links ",-1)),t[7]||(t[7]=(0,i.Lk)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1)),(0,i.Q3)(" ITEM LINKS "),a.itemLinkProject.length+a.itemLinkTask.length===0?((0,i.uX)(),(0,i.CE)("div",ne,t[5]||(t[5]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",ae,[(0,i.Q3)(" Project Links "),(0,i.bF)(o,{title:"Project Links","link-results":a.itemLinkProject,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(o,{title:"Task Links","link-results":a.itemLinkTask,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",le)):(0,i.Q3)("v-if",!0),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",oe,[(0,i.Lk)("div",re,[(0,i.Lk)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.newRequirementItemLink&&l.newRequirementItemLink(...e))},"Create new Link")])])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" LINKING MODAL "),(0,i.Q3)(" need to build something that resets the requirement links when adding links "),(0,i.bF)(r,{"location-id":e.locationId,destination:e.destination,onUpdate_module:t[3]||(t[3]=e=>l.updateLinkResults(e))},null,8,["location-id","destination"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(d,{onUpdate_link_results:t[4]||(t[4]=e=>l.updateLinkResults(e))})])}]]),Ne={key:0,class:"requirement-item-spacer"},Qe={key:1},Ae={key:2,class:"row submit-row"},Pe={class:"col-md-12"},Xe={key:3},Be={key:4},We={name:"RequirementLinksModule",components:{ConfirmLinkDelete:qe.A,SubObjectLinks:xe.A,NewRequirementLinkWizard:Oe},data:()=>({itemLinkProject:[],itemLinkTask:[],linkProject:[],linkTask:[],linkModel:[]}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))},methods:{newRequirementLink(){new $.aF(document.getElementById("newRequirementLinkModal")).show()},updateLinkResults(){this.axios.post(`${this.rootUrl}object_data/requirement/${this.locationId}/object_link_list/`).then((e=>{this.linkProject=e.data.filter((e=>"project"===e.object_type)),this.linkTask=e.data.filter((e=>"task"===e.object_type))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})})),this.axios.post(`${this.rootUrl}requirement_information/${this.locationId}/data/item_links/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1}))),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}},ze=(0,ee.A)(We,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("sub-object-links"),r=(0,i.g2)("new-requirement-link-wizard"),d=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[t[5]||(t[5]=(0,i.Lk)("h2",null," Requirement Links ",-1)),t[6]||(t[6]=(0,i.Lk)("p",{class:"text-instructions"}," The following are links to other projects/tasks. You can link a Requirement to these other objects to symbolise a connection between the two. ",-1)),(0,i.Q3)(" REQUIREMENT LINKS "),a.linkProject.length+a.linkTask.length===0?((0,i.uX)(),(0,i.CE)("div",Ne,t[3]||(t[3]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",Qe,[(0,i.Q3)(" Project Links "),(0,i.bF)(o,{title:"Project Links","link-results":a.linkProject,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(o,{title:"Task Links","link-results":a.linkTask,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",Ae,[(0,i.Lk)("div",Pe,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.newRequirementLink&&l.newRequirementLink(...e))},"Create new Link")):(0,i.Q3)("v-if",!0)])])):(0,i.Q3)("v-if",!0),t[7]||(t[7]=(0,i.Lk)("hr",null,null,-1)),t[8]||(t[8]=(0,i.Lk)("h2",null," Requirement Item Links ",-1)),t[9]||(t[9]=(0,i.Lk)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1)),(0,i.Q3)(" ITEM LINKS "),a.itemLinkProject.length+a.itemLinkTask.length===0?((0,i.uX)(),(0,i.CE)("div",Xe,t[4]||(t[4]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",Be,[(0,i.Q3)(" Project Links "),(0,i.bF)(o,{title:"Project Links","link-results":a.itemLinkProject,"can-delete":!1},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(o,{title:"Task Links","link-results":a.itemLinkTask,"can-delete":!1},null,8,["link-results"])])),(0,i.Q3)(" LINKING MODAL "),(0,i.bF)(r,{"location-id":e.locationId,destination:"requirement",onUpdate_module:l.updateLinkResults},null,8,["location-id","onUpdate_module"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(d,{onUpdate_link_results:l.updateLinkResults},null,8,["onUpdate_link_results"])])}]]);var Ke=s(5114);const He={class:"text-instructions"},Ve={key:0,class:"requirement-item-spacer"},Ge={key:1},Je={key:2},Ye={class:"row submit-row"},Ze={class:"col-md-12"},et={id:"newLinkModal",class:"modal fade",tabindex:"-1","aria-labelledby":"linkModal","aria-hidden":"true"},tt={class:"modal-dialog modal-lg"},st={class:"modal-content"},it={class:"modal-header"},nt={class:"modal-body"},at={class:"row"},lt={class:"col-md-4"},ot={class:"text-instructions"},rt={class:"col-md-8"},dt={key:1,class:"alert alert-success"},ct={class:"row"},ut={class:"col-md-8"},mt={class:"col-md-4"},pt={class:"text-instructions"},kt={class:"col-md-8"},ht={key:0,class:"row"},bt={class:"form-group"},Lt={key:1,class:"alert alert-warning"},gt={key:2,class:"wizard-results"},vt={class:"wizard-results--card--tick"},yt=["id","value"],_t={class:"wizard-results--card--content"},ft={class:"text-instructions"},St={class:"text-instructions"},jt={key:0,"aria-label":"Pagination for New Link Wizard"},Ct={class:"pagination justify-content-center"},wt=["onClick"],It={key:1,class:"page-link"},Rt={class:"modal-footer"},Et=["disabled"],Mt={name:"NewLinkWizard",components:{NSelect:K.A},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},emits:["update_link_results"],data:()=>({currentPage:1,isSearching:!1,objectModel:null,objectRelation:[{value:"relates",label:"Relates To"}],objectRelationModel:"relates",objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Requirement_Item",label:"Requirement_Item"},{value:"Task",label:"Task"}],linkModel:[],numberOfPages:1,searchModel:"",searchTimeout:"",setOfPages:[],styleHeight:"height: 90px"}),computed:{...(0,Y.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},watch:{objectModel(){this.currentPage=1,this.getObjects()},searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),(this.searchModel.length>=3||0===this.searchModel.length)&&(this.searchTimeout=setTimeout((()=>{this.changePage(1)}),500))}},mounted(){this.handleRelationship()},methods:{getSetOfPages:$e.k,changePage(e){this.currentPage=e,this.getObjects()},getClasses(e){return parseInt(e)===this.currentPage?"page-item active":"page-item"},getObjects(){if(this.linkModel=[],this.handleRelationship(),null===this.objectModel)return void(this.isSearching=!1);const e=new FormData;e.append("array_of_objects",this.objectModel.toLowerCase()),e.set("destination_page",this.currentPage),e.set("exclude_destination",this.destination),e.set("exclude_location_id",this.locationId),e.set("search",this.searchModel),this.isSearching=!0,this.axios.post(`${this.rootUrl}search/data/`,e).then((e=>{this.objectResults=e.data[this.objectModel.toLowerCase()],this.numberOfPages=e.data[`${this.objectModel.toLowerCase()}_number_of_pages`],this.currentPage=e.data[`${this.objectModel.toLowerCase()}_current_page`],this.setOfPages=(0,$e.k)(this.currentPage,this.numberOfPages),this.isSearching=!1,this.styleHeight="",this.$nextTick((()=>{const e=document.getElementById("select_links");void 0!==e&&(this.styleHeight=`height: ${e.clientHeight}px`)}))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Searching",message:`We got an error searching. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},handleRelationship(){if("Requirement"===this.objectModel||"Requirement_Item"===this.objectModel)return this.objectRelation=[{value:"parent_object_of",label:"Is Parent Object Of"}],void(this.objectRelationModel="parent_object_of");this.objectRelation=[{value:"relates",label:"Relates To"},{value:"blocked_by",label:"Is Blocked By"},{value:"blocking",label:"Is Currently Blocking"},{value:"sub_object_of",label:"Is Sub Object Of"},{value:"parent_object_of",label:"Is Parent Object Of"},{value:"has_duplicate",label:"Has Duplicate Object Of"},{value:"duplicate_object",label:"Is Duplicate Object Of"}],this.objectRelationModel="relates"},saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),e.set("object_relation",this.objectRelationModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_link/`,e).then((()=>{this.$emit("update_link_results",{}),this.objectModel=null,document.getElementById("linkCloseButton").click(),this.styleHeight="height: 90px"}))}}},Tt=(0,ee.A)(Mt,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",et,[(0,i.Lk)("div",tt,[(0,i.Lk)("div",st,[(0,i.Lk)("div",it,[(0,i.Lk)("h2",null," New "+(0,de.toDisplayString)(s.destination)+" Link Wizard ",1),t[5]||(t[5]=(0,i.Lk)("button",{id:"linkCloseButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,i.Lk)("div",nt,[(0,i.Q3)(" CHOOSING A OBJECT TYPE "),(0,i.Lk)("div",at,[(0,i.Lk)("div",lt,[t[6]||(t[6]=(0,i.Lk)("strong",null,"Object Selector",-1)),(0,i.Lk)("p",ot," Please select which object you would like to link to this "+(0,de.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",rt,[a.isSearching?((0,i.uX)(),(0,i.CE)("div",dt," Searching for "+(0,de.toDisplayString)(a.objectModel)+"s ",1)):((0,i.uX)(),(0,i.Wv)(o,{key:0,value:a.objectModel,"onUpdate:value":t[0]||(t[0]=e=>a.objectModel=e),options:a.objectSelection,class:"object-selection"},null,8,["value","options"]))])]),t[12]||(t[12]=(0,i.Lk)("hr",null,null,-1)),(0,i.Q3)(" CHOOSE RELATIONSHIP TYPE "),(0,i.Lk)("div",ct,[t[8]||(t[8]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Relationship"),(0,i.Lk)("p",{class:"text-instructions"},' Please select an appropriate relation for the objects. Default is "Relates" ')],-1)),(0,i.Lk)("div",ut,[t[7]||(t[7]=(0,i.Lk)("label",{for:"object-relation"},"Current object",-1)),(0,i.bF)(o,{id:"object-relation",value:a.objectRelationModel,"onUpdate:value":t[1]||(t[1]=e=>a.objectRelationModel=e),options:a.objectRelation,class:"object-selection",disabled:null===a.objectModel},null,8,["value","options","disabled"])])]),t[13]||(t[13]=(0,i.Lk)("hr",null,null,-1)),(0,i.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,i.Lk)("div",{id:"select_links",class:"row",style:(0,de.normalizeStyle)(a.styleHeight)},[(0,i.Lk)("div",mt,[t[9]||(t[9]=(0,i.Lk)("strong",null,"Select Links",-1)),(0,i.Lk)("p",pt," Please select which of the objects you want to connect to this "+(0,de.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",kt,[""!==a.objectModel&&null!==a.objectModel?((0,i.uX)(),(0,i.CE)("div",ht,[(0,i.Lk)("div",bt,[t[10]||(t[10]=(0,i.Lk)("label",null,"Search",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.searchModel=e),type:"text",class:"form-control"},null,512),[[D.vModelText,a.searchModel]])])])):(0,i.Q3)("v-if",!0),0===a.objectResults.length&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",Lt," Sorry - there are no results. ")):(0,i.Q3)("v-if",!0),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",gt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.objectResults,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"wizard-results--card"},[(0,i.Lk)("div",vt,[(0,i.bo)((0,i.Lk)("input",{id:`checkbox_${a.objectModel.toLowerCase()}_${e.pk}`,"onUpdate:modelValue":t[3]||(t[3]=e=>a.linkModel=e),class:"form-check-input",type:"checkbox",name:"link-option",value:e.id},null,8,yt),[[D.vModelCheckbox,a.linkModel]])]),(0,i.Lk)("div",_t,[(0,i.Lk)("div",ft,(0,de.toDisplayString)(a.objectModel)+" "+(0,de.toDisplayString)(e.id),1),(0,i.Lk)("div",null,[(0,i.Lk)("strong",null,(0,de.toDisplayString)(e.title),1)]),(0,i.Lk)("div",null,[t[11]||(t[11]=(0,i.eW)(" Status: ")),(0,i.Lk)("span",St,(0,de.toDisplayString)(e.status),1)])])])))),128)),a.setOfPages.length>=1?((0,i.uX)(),(0,i.CE)("nav",jt,[(0,i.Lk)("ul",Ct,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.setOfPages,(e=>((0,i.uX)(),(0,i.CE)("li",{key:e.destinationPage,class:(0,de.normalizeClass)(l.getClasses(e.destinationPage))},[parseInt(e.destinationPage)!==parseInt(a.currentPage)?((0,i.uX)(),(0,i.CE)("a",{key:0,class:"page-link",href:"javascript:void(0)",onClick:t=>l.changePage(e.destinationPage)},(0,de.toDisplayString)(e.text),9,wt)):((0,i.uX)(),(0,i.CE)("span",It,(0,de.toDisplayString)(e.text),1))],2)))),128))])])):(0,i.Q3)("v-if",!0)])):(0,i.Q3)("v-if",!0)])],4)]),(0,i.Lk)("div",Rt,[t[14]||(t[14]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===a.linkModel.length,onClick:t[4]||(t[4]=(...e)=>l.saveLinks&&l.saveLinks(...e))}," Save changes ",8,Et)])])])])}]]),$t={name:"ObjectLinks",components:{ConfirmLinkDelete:qe.A,NewLinkWizard:Tt,SubObjectLinks:xe.A},data:()=>({hasDuplicateObjectOf:[],isBlockedBy:[],isCurrentlyBlocking:[],isDuplicateObjectOf:[],isParentOf:[],isSubObjectOf:[],kanbanCard:[],linkResults:[],relatesTo:[]}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))},methods:{isLinkedObject(e){let t=!1;return null!==e.fields.project&&(t=!0),null!==e.fields.task&&(t=!0),null!==e.fields.requirement&&(t=!0),t},newLink(){new $.aF(document.getElementById("newLinkModal")).show()},updateLinkResults(){this.linkResults=[],this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/object_link_list/`).then((e=>{this.linkResults=e.data,this.relatesTo=e.data.filter((e=>"Relate"===e.link_relationship||null===e.link_relationship)),this.isBlockedBy=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Block"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s})),this.kanbanCard=e.data.filter((e=>"Card"===e.link_relationship)),this.isCurrentlyBlocking=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Block"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.isSubObjectOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s})),this.isParentOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.hasDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.isDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s}))})).catch((e=>{this.$store.dispatch("newToast",{heading:"Object Links failed to get data",message:`Failed to get data - Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}},Dt=(0,ee.A)($t,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("sub-object-links"),r=(0,i.g2)("new-link-wizard"),d=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,(0,de.toDisplayString)(e.destination)+" Links ",1),(0,i.Lk)("p",He," The following are links to other objects like projects/tasks/requirements. You can link a "+(0,de.toDisplayString)(e.destination)+" to these other objects to symbolise a connection between the two. ",1),(0,i.Q3)(" OBJECT LINKS "),0===a.linkResults.length?((0,i.uX)(),(0,i.CE)("div",Ve,t[8]||(t[8]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",Ge,[(0,i.Q3)(" Relates To "),(0,i.bF)(o,{title:"Relates To","link-results":a.relatesTo,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Kanban Cards "),(0,i.bF)(o,{title:"Kanban Cards","link-results":a.kanbanCard,"can-delete":!1},null,8,["link-results"]),(0,i.Q3)(" Is Blocked By "),(0,i.bF)(o,{title:"Is Blocked By","link-results":a.isBlockedBy,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Currently Blocking "),(0,i.bF)(o,{title:"Is Currently Blocking","link-results":a.isCurrentlyBlocking,onUpdate_link_results:t[2]||(t[2]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Sub Object Of "),(0,i.bF)(o,{title:"Is Subobject Of","link-results":a.isSubObjectOf,onUpdate_link_results:t[3]||(t[3]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Parent Object Of "),(0,i.bF)(o,{title:"Is Parent Object Of","link-results":a.isParentOf,onUpdate_link_results:t[4]||(t[4]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Has Duplicate Object Of "),(0,i.bF)(o,{title:"Has Duplicate Object Of","link-results":a.hasDuplicateObjectOf,onUpdate_link_results:t[5]||(t[5]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Duplicate Object Of "),(0,i.bF)(o,{title:"Is Duplicate Object Of","link-results":a.isDuplicateObjectOf,onUpdate_link_results:t[6]||(t[6]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",Je)):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Ye,[(0,i.Lk)("div",Ze,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[7]||(t[7]=(...e)=>l.newLink&&l.newLink(...e))},"Create new Link")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" MODAL FOR NEW OBJECT LINKS "),(0,i.bF)(r,{destination:e.destination,"location-id":e.locationId,onUpdate_link_results:l.updateLinkResults},null,8,["destination","location-id","onUpdate_link_results"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(d,{onUpdate_link_results:l.updateLinkResults},null,8,["onUpdate_link_results"])])}]]),Ot={class:"text-instructions"},qt={key:0},xt={key:1},Ut={class:"row submit-row"},Ft={class:"col-md-12"};var Nt=s(3133);const Qt={id:"addCustomerModal",class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},At={class:"modal-dialog modal-lg"},Pt={class:"modal-content"},Xt={class:"modal-body"},Bt={key:0,class:"row"},Wt={class:"col-md-4"},zt={class:"text-instructions"},Kt={class:"col-md-8"},Ht={key:1,class:"row"},Vt={class:"col-md-6 no-search"},Gt=["src"],Jt={class:"modal-footer"},Yt=["diabled"],Zt={name:"AddCustomerWizard",components:{NSelect:K.A},props:{destination:{type:String,default:""},locationId:{type:Number,default:0},excludeCustomers:{type:Array,default:()=>[]}},emits:["update_customer_results"],data:()=>({customerModel:"",customerList:[],customerFixList:[]}),computed:{...(0,Y.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},watch:{excludeCustomers(){this.updateCustomerFixList()}},mounted(){!["requirement_item"].indexOf(this.locationId)<0||this.$nextTick((()=>{this.getCustomerList()}))},methods:{addCustomer(){const e=new FormData;e.set("customer",this.customerModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_customer/`,e).then((e=>{this.$emit("update_customer_results",e.data),this.customerModel="",document.getElementById("addCustomerCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Adding Customer",message:`We had an issue adding customers. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getCustomerList(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list_all/`).then((e=>{this.customerList=e.data,this.updateCustomerFixList()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Customer List",message:`We had an issue getting customer list. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateCustomerFixList(){if(0===this.customerList.length)return;const e=[];this.excludeCustomers.forEach((t=>{e.push(t.pk)})),this.customerFixList=this.customerList.filter((t=>!e.includes(t.pk))).map((e=>({value:e.pk,label:`${e.fields.customer_first_name} ${e.fields.customer_last_name}`})))}}},es={name:"CustomersModule",components:{AddCustomerWizard:(0,ee.A)(Zt,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Qt,[(0,i.Lk)("div",At,[(0,i.Lk)("div",Pt,[t[5]||(t[5]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h2",null," Add Customers Wizard "),(0,i.Lk)("button",{id:"addCustomerCloseButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},[(0,i.Lk)("span",{"aria-hidden":"true"})])],-1)),(0,i.Lk)("div",Xt,[a.customerFixList.length>0?((0,i.uX)(),(0,i.CE)("div",Bt,[(0,i.Lk)("div",Wt,[t[2]||(t[2]=(0,i.Lk)("strong",null,"Select Customer",-1)),(0,i.Lk)("p",zt," Search for a customer who has not been added to this "+(0,de.toDisplayString)(s.destination)+". If the search is blank there are either no customers that match that search, or all customer have already been added to the "+(0,de.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",Kt,[(0,i.bF)(o,{value:a.customerModel,"onUpdate:value":t[0]||(t[0]=e=>a.customerModel=e),options:a.customerFixList,label:"customerName"},null,8,["value","options"])])])):((0,i.uX)(),(0,i.CE)("div",Ht,[t[3]||(t[3]=(0,i.Lk)("div",{class:"col-md-6"},[(0,i.Lk)("strong",null,"Sorry - no results"),(0,i.Lk)("p",{class:"text-instructions"}," This could be because "),(0,i.Lk)("ul",{class:"text-instructions"},[(0,i.Lk)("li",null,"There are no more customers left to add"),(0,i.Lk)("li",null," There are no customers for this organisation ")])],-1)),(0,i.Lk)("div",Vt,[(0,i.Lk)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,Gt)])]))]),(0,i.Lk)("div",Jt,[t[4]||(t[4]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",diabled:""==a.customerModel,onClick:t[1]||(t[1]=(...e)=>l.addCustomer&&l.addCustomer(...e))}," Save changes ",8,Yt)])])])])}]]),CustomersListModule:Nt.A},data:()=>({customerResults:[]}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.loadCustomerResults()}))},methods:{addNewCustomer(){new $.aF(document.getElementById("addCustomerModal")).show()},loadCustomerResults(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list/`).then((e=>{this.customerResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Loading Customer Results",message:`We had an issue loading customer results. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},removeCustomer(e){this.customerResults=this.customerResults.filter((t=>t.pk!==e))},updateCustomerResults(e){this.customerResults=e}}},ts=(0,ee.A)(es,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("customers-list-module"),r=(0,i.g2)("add-customer-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[t[4]||(t[4]=(0,i.Lk)("h2",null," Customers ",-1)),(0,i.Lk)("p",Ot," Below are a list of customers who are stakeholders to this "+(0,de.toDisplayString)(e.destination)+". ",1),(0,i.Q3)(" CUSTOMER RESULTS CARDS "),0==a.customerResults.length?((0,i.uX)(),(0,i.CE)("div",qt,t[3]||(t[3]=[(0,i.Lk)("div",{class:"customers-module-spacer"},[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no customers. Please add them by clicking on the button below ")],-1)]))):((0,i.uX)(),(0,i.CE)("div",xt,[(0,i.bF)(o,{"customer-results":a.customerResults,onRemove_customer:t[0]||(t[0]=e=>l.removeCustomer(e))},null,8,["customer-results"])])),(0,i.Q3)(" ADD CUSTOMER BUTTON "),t[5]||(t[5]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("div",Ut,[(0,i.Lk)("div",Ft,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>l.addNewCustomer&&l.addNewCustomer(...e))}," Add Customer ")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" MODALS "),(0,i.bF)(r,{"location-id":e.locationId,destination:e.destination,"exclude-customers":a.customerResults,onUpdate_customer_results:t[2]||(t[2]=e=>l.updateCustomerResults(e))},null,8,["location-id","destination","exclude-customers"])])}]]);var ss=s(968),is=s(4917),ns=s(848);const as={name:"MiscModule",components:{AddTagWizard:ss.A,ListPublicLinks:is.A,ListTagsModule:ns.A},computed:{...(0,Y.L8)({destination:"getDestination"})}},ls=(0,ee.A)(as,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("list-tags-module"),r=(0,i.g2)("add-tag-wizard"),d=(0,i.g2)("list-public-links");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(o),(0,i.bF)(r),t[0]||(t[0]=(0,i.Lk)("hr",null,null,-1)),(0,i.bF)(d)],64)}]]);var os=s(5889),rs=s(5281),ds=s(6525),cs=s(3847),us=s(1431),ms=s(2770);const ps={key:0},ks={key:0,class:"alert alert-info"},hs={key:1,class:"row submit-row"},bs={class:"col-md-12"},Ls={key:2,class:"mt-4"},gs={id:"createNewSprintModal",class:"modal fade",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"createNewSprint","aria-hidden":"true"},vs={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},ys={class:"modal-content"},_s={class:"modal-body"},fs={class:"row"},Ss={class:"col-md-8"},js={class:"form-group"},Cs={class:"row"},ws={class:"col-md-6"},Is={class:"form-group"},Rs={class:"col-md-6"},Es={class:"form-group"},Ms={class:"modal-footer"},Ts={name:"NewSprintWizard",components:{NDatePicker:s(3728).A},props:{sprintResultsLength:{type:Number,default:0}},data:()=>({sprintEndDate:0,sprintNameModel:"",sprintStartDate:0}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},watch:{sprintResultsLength(){this.updateSprintNameModel()}},mounted(){this.sprintStartDate=(new Date).getTime(),this.sprintEndDate=this.sprintStartDate+6048e5,this.$nextTick((()=>{this.updateSprintNameModel()}))},methods:{closeModal(){document.getElementById("createNewSprintButton").click()},createNewSprint(){this.$store.dispatch("newToast",{header:"Creating New Toast",message:"Please wait - we are creating the new toast. It will automatically navigate you to the new sprint information page",extra_classes:"bg-warning text-dark",delay:0,unique_type:"create_sprint"});const e=new Date(this.sprintStartDate),t=new Date(this.sprintEndDate),s=new FormData;s.set("sprint_name",this.sprintNameModel),s.set("sprint_start_date",e.toISOString()),s.set("sprint_end_date",t.toISOString()),this.axios.post(`${this.rootUrl}new_sprint/${this.destination}/${this.locationId}/save/`,s).then((e=>{window.location=`${this.rootUrl}sprint_information/${e.data.id}/`})).catch((e=>{this.$store.dispatch("newToast",{header:"Error creating new sprint",message:`Could not create new sprint. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"create_sprint"})}))},updateSprintNameModel(){const e=this.sprintResultsLength+1,t=(new Date).toLocaleDateString("en-au",{year:"numeric",month:"short",day:"numeric"});this.sprintNameModel=`${this.destination}-${this.locationId} - Sprint ${e} - ${t}`}}},$s=(0,ee.A)(Ts,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-date-picker");return(0,i.uX)(),(0,i.CE)("div",gs,[(0,i.Lk)("div",vs,[(0,i.Lk)("div",ys,[t[10]||(t[10]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"}," Please confirm Link Deletion "),(0,i.Lk)("button",{id:"createNewSprintButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,i.Lk)("div",_s,[(0,i.Lk)("div",fs,[t[9]||(t[9]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Sprint Information"),(0,i.Lk)("p",{class:"text-instructions"}," Please use an appropriate name, start date, and finish date. ")],-1)),(0,i.Lk)("div",Ss,[(0,i.Lk)("div",js,[t[5]||(t[5]=(0,i.Lk)("label",null,"Sprint Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.sprintNameModel=e),class:"form-control",type:"text"},null,512),[[D.vModelText,a.sprintNameModel]])]),t[8]||(t[8]=(0,i.Lk)("div",{class:"spacer"},null,-1)),(0,i.Lk)("div",Cs,[(0,i.Lk)("div",ws,[(0,i.Lk)("div",Is,[t[6]||(t[6]=(0,i.Lk)("label",null,"Start Date",-1)),(0,i.bF)(o,{value:a.sprintStartDate,"onUpdate:value":t[1]||(t[1]=e=>a.sprintStartDate=e),type:"date"},null,8,["value"])])]),(0,i.Lk)("div",Rs,[(0,i.Lk)("div",Es,[t[7]||(t[7]=(0,i.Lk)("label",null,"End Date",-1)),(0,i.bF)(o,{value:a.sprintEndDate,"onUpdate:value":t[2]||(t[2]=e=>a.sprintEndDate=e),type:"date"},null,8,["value"])])])])])])]),(0,i.Lk)("div",Ms,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=(...e)=>l.closeModal&&l.closeModal(...e))}," Cancel "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>l.createNewSprint&&l.createNewSprint(...e))}," Create New Sprint ")])])])])}]]),Ds={class:"col-md-10 object-link--details"},Os=["href"],qs={class:"object-link--link"},xs={class:"object-link--title"},Us={class:"object-link--link"},Fs={class:"object-link--link"},Ns={class:"col-md-2 object-link--status"},Qs={key:0,class:"object-link--remove"};var As=s(3980),Ps=s(6285),Xs=s(953);const Bs={name:"RenderSprintCard",components:{CarbonTrashCan:As.dA},props:{canDelete:{type:Boolean,default:!0},sprintResults:{type:Array,default:()=>[]}},emits:["confirm_remove_sprint"],computed:{...(0,Y.L8)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{useNiceDate:function(e){const t=(0,Xs.BA)(e);return""===t||null==t?"":Ps.c9.fromISO(t).toLocaleString(Ps.c9.DATE_MED_WITH_WEEKDAY)},confirmRemoveSprintFunction(e){this.$emit("confirm_remove_sprint",e)}}},Ws=(0,ee.A)(Bs,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("carbon-trash-can");return(0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.sprintResults,(n=>((0,i.uX)(),(0,i.CE)("div",{key:n.sprint_id,class:"row object-link"},[(0,i.Q3)(" Sprint ID + Sprint Name "),(0,i.Lk)("div",Ds,[(0,i.Lk)("a",{href:`${e.rootUrl}sprint_information/${n.sprint_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",qs,"Sprint- "+(0,de.toDisplayString)(n.sprint_id),1),(0,i.Lk)("div",xs,(0,de.toDisplayString)(n.sprint_name),1),(0,i.Lk)("div",Us," Story Point Progression: "+(0,de.toDisplayString)(n.completed_story_points)+" out of "+(0,de.toDisplayString)(n.total_story_points),1),(0,i.Lk)("div",Fs," Dates: "+(0,de.toDisplayString)(l.useNiceDate(n.sprint_start_date))+" till "+(0,de.toDisplayString)(l.useNiceDate(n.sprint_end_date)),1)],8,Os)]),(0,i.Q3)(" Sprint Status "),(0,i.Lk)("div",Ns,[t[0]||(t[0]=(0,i.Lk)("span",null,"Sprint Status: ",-1)),(0,i.Lk)("span",null,(0,de.toDisplayString)(n.sprint_status),1)]),(0,i.Q3)(" Object Delete "),e.userLevel>=2&&!0===s.canDelete?((0,i.uX)(),(0,i.CE)("div",Qs,[(0,i.bF)(o,{onClick:e=>l.confirmRemoveSprintFunction(n)},null,8,["onClick"])])):(0,i.Q3)("v-if",!0)])))),128)}]]),zs={name:"ChildSprints",components:{RenderSprintCard:Ws,NewSprintWizard:$s},data:()=>({allowedObjects:["project","requirement"],sprintResults:[]}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mounted(){this.$nextTick((()=>{this.allowedObjects.includes(this.destination)&&this.getSprints()}))},methods:{closeModal(){document.getElementById("createNewSprintButton").click()},getSprints(){const e=`${this.rootUrl}object_data/${this.destination}/${this.locationId}/sprint_list/child/`;this.axios.post(e).then((e=>{this.sprintResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Sprint List",message:`Sorry, could not get child sprints. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},openCreateModal(){new $.aF(document.getElementById("createNewSprintModal")).show()}}},Ks=(0,ee.A)(zs,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("render-sprint-card"),r=(0,i.g2)("new-sprint-wizard");return(0,i.uX)(),(0,i.CE)(i.FK,null,[t[1]||(t[1]=(0,i.Lk)("h2",null,"List Sprints",-1)),t[2]||(t[2]=(0,i.Lk)("p",{class:"text-instructions"}," Lists out all the sprints associated with this particular object. ",-1)),a.allowedObjects.includes(e.destination)?((0,i.uX)(),(0,i.CE)("div",ps,[0===a.sprintResults.length?((0,i.uX)(),(0,i.CE)("div",ks," Currently there are no current sprints. ")):(0,i.Q3)("v-if",!0),(0,i.Q3)(" CURRENT SPRINTS"),(0,i.bF)(o,{"sprint-results":a.sprintResults,"can-delete":!1},null,8,["sprint-results"]),(0,i.Q3)(" BUTTONS"),e.userLevel>=2?((0,i.uX)(),(0,i.CE)("div",hs,[(0,i.Lk)("div",bs,[(0,i.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>l.openCreateModal&&l.openCreateModal(...e))}," Create New Sprint ")])])):(0,i.Q3)("v-if",!0),"project"===e.destination?((0,i.uX)(),(0,i.CE)("hr",Ls)):(0,i.Q3)("v-if",!0)])):(0,i.Q3)("v-if",!0),a.allowedObjects.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(r,{key:1,"sprint-results-length":a.sprintResults.length},null,8,["sprint-results-length"])):(0,i.Q3)("v-if",!0)],64)}]]),Hs={key:0},Vs={key:1},Gs={key:2,class:"alert alert-info"},Js={class:"row submit-row"},Ys={class:"col-md-12"},Zs={id:"addSprintWizardModal",class:"modal fade",tabindex:"-1","aria-labelledby":"addSprintWizard","aria-hidden":"true"},ei={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},ti={class:"modal-content"},si={class:"modal-body"},ii={class:"row"},ni={class:"col-md-8"},ai={class:"form-group"},li={class:"col-md-12 mb-4"},oi={class:"modal-footer"},ri=["disabled"];var di=s(246);const ci={name:"AddSprintWizard",components:{NSelect:K.A},emits:["update_sprint_list"],data:()=>({selectedSprintObject:{},sprintModel:void 0,sprintOptions:[]}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},watch:{sprintModel(e){this.selectedSprintObject=this.sprintOptions.filter((t=>parseInt(t.value)===parseInt(e)))}},mounted(){this.$nextTick((()=>{this.getSprintOptions()}))},methods:{useNiceDatetime:di.y,addSprint(){this.$store.dispatch("newToast",{header:"Adding object to sprint",message:"Adding current object to sprint, please wait.",extra_classes:"bg-warning text-dark",delay:0,unique_type:"add_sprint_wizard"});const e=new FormData;e.set("sprint_id",this.sprintModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_sprint/${this.sprintModel}/`,e).then((e=>{this.$emit("update_sprint_list",e.data),document.getElementById("addSprintWizardButton").click(),this.$store.dispatch("newToast",{header:"Added to Sprint",message:"Successfully added current object to Sprint",extra_classes:"bg-success",unique_type:"add_sprint_wizard"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error adding current object to sprint",message:`Error adding the current object to sprint. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"add_sprint_wizard"})}))},getSprintOptions(){this.axios.post(`${this.rootUrl}object_data/sprint_list/`).then((e=>{this.sprintOptions=e.data.map((e=>({value:e.sprint_id,label:e.sprint_name,sprint_start_date:e.sprint_start_date,sprint_end_date:e.sprint_end_date})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error fetching Potential Sprint List",message:`Can not retrieve sprint list. ${e}`,extra_classes:"bg-warning text-dark",delay:0})}))}}},ui=(0,ee.A)(ci,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Zs,[(0,i.Lk)("div",ei,[(0,i.Lk)("div",ti,[t[9]||(t[9]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{id:"addSprintWizard",class:"modal-title"},"Add Object to Sprint"),(0,i.Lk)("button",{id:"addSprintWizardButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,i.Lk)("div",si,[(0,i.Lk)("div",ii,[t[7]||(t[7]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Sprint Wizard"),(0,i.Lk)("p",{class:"text-instructions"}," Please select the appropriate sprint to add this current object too. ")],-1)),(0,i.Lk)("div",ni,[(0,i.Lk)("div",ai,[t[2]||(t[2]=(0,i.Lk)("label",null,"Sprint",-1)),(0,i.bF)(o,{value:a.sprintModel,"onUpdate:value":t[0]||(t[0]=e=>a.sprintModel=e),options:a.sprintOptions,filterable:"",placeholder:"Please select a sprint from the list"},null,8,["value","options"])]),t[6]||(t[6]=(0,i.Lk)("div",{class:"spacer"},null,-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.selectedSprintObject,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.value,class:"row"},[(0,i.Lk)("div",li,[t[3]||(t[3]=(0,i.Lk)("strong",null,"Sprint Name: ",-1)),(0,i.eW)((0,de.toDisplayString)(e.label),1),t[4]||(t[4]=(0,i.Lk)("br",null,null,-1)),t[5]||(t[5]=(0,i.Lk)("strong",null,"Sprint Start Date: ",-1)),(0,i.eW)((0,de.toDisplayString)(l.useNiceDatetime(e.sprint_start_date)),1)])])))),128))])])]),(0,i.Lk)("div",oi,[t[8]||(t[8]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{disabled:void 0===a.sprintModel,type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.addSprint&&l.addSprint(...e))}," Add to Sprint ",8,ri)])])])])}]]),mi={id:"confirmSprintRemoveModal",class:"modal fade",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmSprintRemoveLabel","aria-hidden":"true"},pi={class:"modal-dialog"},ki={class:"modal-content"},hi={class:"modal-footer"},bi={name:"ConfirmRemoveSprint",props:{confirmRemoveSprint:{type:Object,default:()=>({sprint_name:"",sprint_id:0})}},emits:["update_sprint_list"],computed:{...(0,Y.L8)({destination:"getDestination",documentRemoveKey:"getDocumentRemoveKey",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{removeSprint(){const e=this.confirmRemoveSprint.sprint_id,t=new FormData;t.set("sprint_id",e),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_sprint/${e}/`,t).then((e=>{this.$emit("update_sprint_list",e.data),document.getElementById("confirmSprintRemovalButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Removing Sprint",message:`Sorry, we could not remove the sprint from the current object. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},closeModal(){document.getElementById("confirmSprintRemovalButton").click()}}},Li={name:"AssignedSprints",components:{ConfirmRemoveSprint:(0,ee.A)(bi,[["render",function(e,t,s,n,a,l){return(0,i.uX)(),(0,i.CE)("div",mi,[(0,i.Lk)("div",pi,[(0,i.Lk)("div",ki,[t[2]||(t[2]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{id:"confirmSprintRemoveLabel",class:"modal-title"}," Please confirm the sprint removal "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{id:"confirmSprintRemovalButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t[3]||(t[3]=(0,i.Lk)("div",{class:"modal-body"}," Are you sure you want to remove the sprint from the current object. ",-1)),(0,i.Lk)("div",hi,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.removeSprint&&l.removeSprint(...e))}," Yes ")])])])])}]]),RenderSprintCard:Ws,AddSprintWizard:ui},data:()=>({allowedObjects:["requirement_item","project","task"],confirmRemoveSprint:{sprint_id:0,sprint_name:""},currentImportVariables:{header:"List of Current Sprints",prefix:"sprint",id:"sprint_id",title:"sprint_name",status:"sprint_status"},currentSprints:[],finishedImportVariables:{header:"List of Finished Sprints",prefix:"sprint",id:"sprint_id",title:"sprint_name",status:"sprint_status"},finishedSprints:[]}),computed:{...(0,Y.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mounted(){this.$nextTick((()=>{this.allowedObjects.includes(this.destination)&&this.getAssignedSprints()}))},methods:{addToSprint(){new $.aF(document.getElementById("addSprintWizardModal")).show()},confirmRemoveSprintFunction(e){this.confirmRemoveSprint=e,new $.aF(document.getElementById("confirmSprintRemoveModal")).show()},getAssignedSprints(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/sprint_list/assigned/`).then((e=>{this.updateSprintList(e.data)})).catch((e=>{this.$store.dispatch("newToast",{headers:"Error fetching assigned sprints",message:`Could not get the data. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateSprintList(e){this.currentSprints=e.filter((e=>"Finished"!==e.sprint_status)),this.finishedSprints=e.filter((e=>"Finished"===e.sprint_status))}}},gi={name:"ListSprints",components:{AssignedSprints:(0,ee.A)(Li,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("render-sprint-card"),r=(0,i.g2)("add-sprint-wizard"),d=(0,i.g2)("confirm-remove-sprint");return(0,i.uX)(),(0,i.CE)(i.FK,null,[t[5]||(t[5]=(0,i.Lk)("h2",null,"AssignedSprints",-1)),t[6]||(t[6]=(0,i.Lk)("p",{class:"text-instructions"}," Lists all sprints that contains this object. ",-1)),a.currentSprints.length>0?((0,i.uX)(),(0,i.CE)("h3",Hs," Current ")):(0,i.Q3)("v-if",!0),(0,i.bF)(o,{"sprint-results":a.currentSprints,onConfirm_remove_sprint:t[0]||(t[0]=e=>l.confirmRemoveSprintFunction(e))},null,8,["sprint-results"]),a.finishedSprints.length>0?((0,i.uX)(),(0,i.CE)("h3",Vs," Finished ")):(0,i.Q3)("v-if",!0),(0,i.bF)(o,{"sprint-results":a.finishedSprints,onConfirm_remove_sprint:t[1]||(t[1]=e=>l.confirmRemoveSprintFunction(e))},null,8,["sprint-results"]),a.currentSprints.length+a.finishedSprints.length===0?((0,i.uX)(),(0,i.CE)("div",Gs," Currently this object has not been assigned to any sprints. ")):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Js,[(0,i.Lk)("div",Ys,[e.userLevel>=2?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.addToSprint&&l.addToSprint(...e))}," Add Object To Sprint ")):(0,i.Q3)("v-if",!0)])]),(0,i.bF)(r,{onUpdate_sprint_list:t[3]||(t[3]=e=>l.updateSprintList(e))}),(0,i.bF)(d,{"confirm-remove-sprint":a.confirmRemoveSprint,onUpdate_sprint_list:t[4]||(t[4]=e=>l.updateSprintList(e))},null,8,["confirm-remove-sprint"])],64)}]]),ChildSprints:Ks},data:()=>({assignedSprintAllowedDestination:["requirement_item","project","task"],childSprintsAllowedDestination:["requirement","project"]}),computed:{...(0,Y.L8)({destination:"getDestination"})}},vi=(0,ee.A)(gi,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("child-sprints"),r=(0,i.g2)("assigned-sprints");return(0,i.uX)(),(0,i.CE)(i.FK,null,[a.childSprintsAllowedDestination.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(o,{key:0})):(0,i.Q3)("v-if",!0),a.assignedSprintAllowedDestination.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(r,{key:1})):(0,i.Q3)("v-if",!0)],64)}]]);var yi=s(6127),_i=s(775),fi=s(4370),Si=s(9581),ji=s(5287);const Ci={name:"ParentModules",components:{DeleteObject:s(1108).A,ConfirmPublicLinkDelete:ji.A,ConfirmNoteDelete:fi.A,AddFolderWizard:ms.A,ConfirmFileDeleteVue:cs.A,AddLinkWizard:ds.A,ConfirmFolderDelete:us.A,CustomersModule:ts,DocumentsModule:Ke.A,EditHistoryNoteWizard:yi.A,GroupsAndUsersModule:w.A,ListSprints:vi,NewHistoryNoteWizard:_i.A,NotesModule:os.A,ObjectLinks:Dt,RequirementItemLinksModule:Fe,RequirementItemsModule:ie,RequirementLinksModule:ze,UploadDocumentWizard:rs.A,MiscModule:ls},props:{destination:{type:String,default:""},isReadOnly:{type:Boolean,default:!1},locationId:{type:Number,default:0},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userExtraPermissions:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},data:()=>({}),async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.isReadOnly?this.$store.commit({type:"updateUserLevel",userLevel:1}):(this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel}),this.$store.commit({type:"updateUserExtraPermissions",userExtraPermissions:this.userExtraPermissions}))},methods:{useNBTheme:Si.p}},wi=(0,ee.A)(Ci,[["render",function(e,t,s,w,I,R){const E=(0,i.g2)("groups-and-users-module"),M=(0,i.g2)("requirement-items-module"),T=(0,i.g2)("requirement-links-module"),$=(0,i.g2)("requirement-item-links-module"),D=(0,i.g2)("documents-module"),O=(0,i.g2)("upload-document-wizard"),q=(0,i.g2)("add-folder-wizard"),x=(0,i.g2)("add-link-wizard"),U=(0,i.g2)("confirm-file-delete-vue"),F=(0,i.g2)("confirm-folder-delete"),N=(0,i.g2)("object-links"),Q=(0,i.g2)("customers-module"),A=(0,i.g2)("list-sprints"),P=(0,i.g2)("misc-module"),X=(0,i.g2)("confirm-public-link-delete"),B=(0,i.g2)("notes-module"),W=(0,i.g2)("edit-history-note-wizard"),z=(0,i.g2)("new-history-note-wizard"),K=(0,i.g2)("confirm-note-delete"),H=(0,i.g2)("delete-object"),V=(0,i.g2)("n-config-provider");return(0,i.uX)(),(0,i.Wv)(V,{theme:R.useNBTheme(s.theme)},{default:(0,i.k6)((()=>[(0,i.Lk)("div",n,[(0,i.Lk)("div",a,[(0,i.Lk)("ul",l,[(0,i.Q3)(" GROUPS AND USERS "),(0,i.Q3)(" Don't need to show to requirement items - as permissions are gained from parent requirement "),"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",o,t[0]||(t[0]=[(0,i.Lk)("button",{id:"group-and-user-tab",class:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Groups and Users ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT ITEMS "),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("li",r,t[1]||(t[1]=[(0,i.Lk)("button",{id:"requirement-item-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#requirement-items",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Item ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT LINKS "),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("li",d,t[2]||(t[2]=[(0,i.Lk)("button",{id:"requirement-link-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#requirement-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Links ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT ITEM LINKS "),"requirement_item"===s.destination?((0,i.uX)(),(0,i.CE)("li",c,t[3]||(t[3]=[(0,i.Lk)("button",{id:"requirement-item-link-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#requirement-item-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Links ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" DOCUMENTS "),t[7]||(t[7]=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{id:"documents-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#documents",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Documents ")],-1)),(0,i.Q3)(" LINKED OBJECTS "),"requirement"!==s.destination&&"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",u,t[4]||(t[4]=[(0,i.Lk)("button",{id:"object-link-tabs",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#object-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Linked Objects ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" CUSTOMERS "),(0,i.Q3)(" Customers are not needed by requirement items as the parent requirements take care of this "),"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",m,t[5]||(t[5]=[(0,i.Lk)("button",{id:"customer-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#customers",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Customers ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" SPRINTS "),t[8]||(t[8]=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{id:"sprints-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#sprints",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Sprints ")],-1)),(0,i.Q3)(" MISC "),t[9]||(t[9]=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{id:"misc-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#misc",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Misc ")],-1)),(0,i.Q3)(" Notes "),t[10]||(t[10]=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{id:"notes-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#notes",type:"button",role:"tab","aria-controls":"home","aria-select":"false"}," Notes ")],-1)),(0,i.Q3)(" ADMIN "),4===s.userLevel?((0,i.uX)(),(0,i.CE)("li",p,t[6]||(t[6]=[(0,i.Lk)("button",{id:"admin-tab",class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#admin",type:"button",role:"tab","aria-controls":"home","aria-select":"false"}," Admin ",-1)]))):(0,i.Q3)("v-if",!0)]),t[11]||(t[11]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("div",k,["requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bF)(E)])):(0,i.Q3)("v-if",!0),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(M)])):(0,i.Q3)("v-if",!0),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("div",L,[(0,i.bF)(T)])):"requirement_item"===s.destination?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)($)])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",v,[(0,i.bF)(D),(0,i.bF)(O),(0,i.bF)(q,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"]),(0,i.bF)(x,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"]),(0,i.bF)(U),(0,i.bF)(F)]),(0,i.Lk)("div",y,[(0,i.bF)(N)]),(0,i.Lk)("div",_,[(0,i.bF)(Q)]),(0,i.Lk)("div",f,[(0,i.bF)(A)]),(0,i.Lk)("div",S,[(0,i.bF)(P),(0,i.bF)(X)]),(0,i.Lk)("div",j,[(0,i.bF)(B),(0,i.Q3)(" Modals for Notes section "),(0,i.bF)(W),(0,i.bF)(z,{"location-id":s.locationId,destination:s.destination},null,8,["location-id","destination"]),(0,i.bF)(K)]),4===s.userLevel?((0,i.uX)(),(0,i.CE)("div",C,[(0,i.bF)(H)])):(0,i.Q3)("v-if",!0)])])])])),_:1},8,["theme"])}]])}}]);