"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8067],{3536:(e,t,s)=>{s.r(t),s.d(t,{default:()=>on});var i=s(641);const n={class:"card"},a={class:"card-body"},l={class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},o={key:0,class:"nav-item",role:"presentation"},r={key:1,class:"nav-item",role:"presentation"},d={key:2,class:"nav-item",role:"presentation"},c={key:3,class:"nav-item",role:"presentation"},u={key:4,class:"nav-item",role:"presentation"},m={key:5,class:"nav-item",role:"presentation"},p={class:"tab-content",id:"misc_module_content"},h={key:0,class:"tab-pane fade show active",id:"group-and-users",role:"tabpanel","aria-labelledby":"contact-tab"},k={key:1,class:"tab-pane fade",id:"requirement-items",role:"tabpanel","aria-labelledby":"home-tab"},b={key:2,class:"tab-pane fade",id:"requirement-links",role:"tabpanel","aria-labelledby":"profile-tab"},g={key:3,class:"tab-pane fade",id:"requirement-item-links",role:"tabpanel","aria-labelledby":"profile-tab"},L={class:"tab-pane fade",id:"documents",role:"tabpanel","aria-labelledby":"contact-tab"},v={class:"tab-pane fade",id:"object-links",role:"tabpanel","aria-labelledby":"contact-tab"},_={class:"tab-pane fade",id:"customers",role:"tabpanel","aria-labelledby":"contact-tab"},y={class:"tab-pane fade",id:"sprints",role:"tabpanel","aria-labelledby":"tabpanel"},f={class:"tab-pane fade",id:"misc",role:"tabpanel","aria-labelledby":"contact-tab"},S={class:"tab-pane fade",id:"notes",role:"tabpanel","aria-labelledby":"contact-tab"};var I=s(7582);const w={key:0,class:"requirement-item-spacer"},C={key:1},j={key:2},E={key:3,class:"row submit-row"},R={class:"col-md-12"};var $=s(9336),M=s(2321),T=s(3751);const x={class:"modal fade",id:"newItemModal",tabindex:"-1","aria-labelledby":"requirementItemModal","aria-hidden":"true"},D={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},F={class:"modal-content"},U={class:"modal-header"},q={class:"modal-body"},O={class:"row"},A={class:"col-md-8"},N={for:"id_requirement_item_title"},Q={class:"row"},B={class:"col-md-4"},X={class:"form-group"},P={class:"col-md-4"},W={class:"form-group"},z={class:"modal-footer"};var K=s(1080),H=s(8838),G=s(2243),V=s(9639),J=s(3855),Y=s(404),Z=s(2124);const ee={name:"NewRequirementItemWizard",setup:()=>({v$:(0,V.Ay)()}),components:{editor:H.A,Icon:M.In,NSelect:K.A,ValidationRendering:Y.A},emits:["new_item_added"],mixins:[G.A],data:()=>({requirementItemScopeModel:"",requirementItemTitleModel:"",statusItemFixList:[],statusItemModel:"",typeItemFixList:[],typeItemModel:""}),computed:{...(0,Z.L8)({contentCss:"getContentCss",locationId:"getLocationId",rootUrl:"getRootUrl",skin:"getSkin"})},validations:{requirementItemScopeModel:{required:J.mw,maxLength:(0,J.Ru)(63e4)},requirementItemTitleModel:{required:J.mw},statusItemModel:{required:J.mw},typeItemModel:{required:J.mw}},methods:{saveItem(){if(this.v$.$touch(),this.v$.$invalid)return;const e=new FormData;e.set("requirement_item_title",this.requirementItemTitleModel),e.set("requirement_item_scope",this.requirementItemScopeModel),e.set("requirement_item_status",this.statusItemModel),e.set("requirement_item_type",this.typeItemModel),this.axios.post(`${this.rootUrl}new_requirement_item/save/${this.locationId}/`,e).then((e=>{this.requirementItemScopeModel="",this.requirementItemTitleModel="",this.statusItemModel="",this.typeItemModel="",this.$emit("new_item_added",e.data),document.getElementById("requirementItemCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to save item",message:`Failed to save item. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateStatusList(){this.axios.post(`${this.rootUrl}requirement_information/data/list_of_item_status_values/`).then((e=>{this.statusItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_status})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Status List",message:`There was an error updating the status list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateTypeList(){this.axios.post(`${this.rootUrl}requirement_information/data/list_of_item_type_values/`).then((e=>{this.typeItemFixList=e.data.map((e=>({value:e.pk,label:e.fields.requirement_item_type})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Type List",message:`There was an error updating the type list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateStatusList(),this.updateTypeList()}))}};var te=s(6262);const se=(0,te.A)(ee,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("validation-rendering"),d=(0,i.g2)("editor"),c=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",x,[(0,i.Lk)("div",D,[(0,i.Lk)("div",F,[(0,i.Lk)("div",U,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.clipboardIcon},null,8,["icon"]),t[5]||(t[5]=(0,i.eW)(" New Requirement Item Wizard "))]),t[6]||(t[6]=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementItemCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,i.Lk)("div",q,[(0,i.Lk)("div",O,[t[11]||(t[11]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Description"),(0,i.Lk)("p",{class:"text-instructions"}," Place in a detailed description of this requirement item. This particular item can be then connected to Project or Tasks. ")],-1)),(0,i.Lk)("div",A,[(0,i.Lk)("label",N,[t[7]||(t[7]=(0,i.eW)("Requirement Item Title: ")),(0,i.bF)(r,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,i.bo)((0,i.Lk)("input",{id:"id_requirement_item_title",class:"form-control",name:"requirement_item_title",type:"text",required:"true",maxlength:"255","onUpdate:modelValue":t[0]||(t[0]=e=>a.requirementItemTitleModel=e)},null,512),[[T.vModelText,a.requirementItemTitleModel]]),t[9]||(t[9]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("label",null,[t[8]||(t[8]=(0,i.eW)(" Requirement Item Scope: ")),(0,i.bF)(r,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),t[10]||(t[10]=(0,i.Lk)("br",null,null,-1)),(0,i.bF)(d,{init:{license_key:"gpl",height:500,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:a.requirementItemScopeModel,"onUpdate:modelValue":t[1]||(t[1]=e=>a.requirementItemScopeModel=e)},null,8,["init","modelValue"])])]),(0,i.Q3)(" Status "),t[15]||(t[15]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("div",Q,[t[14]||(t[14]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("h2",null,"Status"),(0,i.Lk)("p",{class:"text-instructions"}," Set the Requirement Status and Type here. ")],-1)),(0,i.Lk)("div",B,[(0,i.Lk)("div",X,[(0,i.Lk)("label",null,[t[12]||(t[12]=(0,i.eW)("Requirement Status ")),(0,i.bF)(r,{"error-list":n.v$.requirementItemTitleModel.$errors},null,8,["error-list"])]),(0,i.bF)(c,{options:a.statusItemFixList,label:"status",value:a.statusItemModel,"onUpdate:value":t[2]||(t[2]=e=>a.statusItemModel=e)},null,8,["options","value"])])]),(0,i.Lk)("div",P,[(0,i.Lk)("div",W,[(0,i.Lk)("label",null,[t[13]||(t[13]=(0,i.eW)("Requirement Type ")),(0,i.bF)(r,{"error-list":n.v$.typeItemModel.$errors},null,8,["error-list"])]),(0,i.bF)(c,{options:a.typeItemFixList,label:"type",value:a.typeItemModel,"onUpdate:value":t[3]||(t[3]=e=>a.typeItemModel=e)},null,8,["options","value"])])])])]),(0,i.Q3)(" FOOTERS "),(0,i.Lk)("div",z,[t[16]||(t[16]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>l.saveItem&&l.saveItem(...e))}," Save Requirement Item ")])])])])}]]),ie={name:"RequirementItemsModule",components:{RenderObjectCard:s(469).A,Icon:M.In,NewRequirementItemWizard:se},mixins:[G.A],data:()=>({requirementItemVariables:{header:"Requirement Items",prefix:"RI-",id:"requirement_item_id",title:"requirement_item_title",status:"requirement_item_status_text",end_date:""},itemResults:[],itemStatusList:[],itemTypeList:[]}),computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{createNewItem(){new $.aF(document.getElementById("newItemModal")).show()},newItemAdded(e){this.itemResults=e},updateItemResults(){this.axios.post("data/items/").then((e=>{this.itemResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Item Results",message:`We are having issues updating item results: Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.updateItemResults()}},ne=(0,te.A)(ie,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("render-object-card"),d=(0,i.g2)("new-requirement-item-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.clipboardIcon},null,8,["icon"]),t[2]||(t[2]=(0,i.eW)(" Requirement Items "))]),t[4]||(t[4]=(0,i.Lk)("p",{class:"text-instructions"}," Requirements should be broken down into smaller components called Requirement Items. ",-1)),(0,i.Q3)(" TABLE OF REQUIREMENT ITEMS "),0===a.itemResults.length?((0,i.uX)(),(0,i.CE)("div",w,t[3]||(t[3]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Items for this requirement. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",C,[(0,i.bF)(r,{"import-variables":a.requirementItemVariables,"search-results":a.itemResults,destination:"requirement_item"},null,8,["import-variables","search-results"])])),(0,i.Q3)(" Submit Button "),(0,i.Q3)(" TO DO - limit it to certain users "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",j)):(0,i.Q3)("v-if",!0),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",E,[(0,i.Lk)("div",R,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.createNewItem&&l.createNewItem(...e)),class:"btn btn-primary save-changes"}," Create new Requirement Item ")])])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" NEW REQUIREMENT ITEM MODAL "),(0,i.bF)(d,{"item-status-list":a.itemStatusList,"item-type-list":a.itemTypeList,"location-id":e.locationId,onNew_item_added:t[1]||(t[1]=e=>l.newItemAdded(e))},null,8,["item-status-list","item-type-list","location-id"])])}]]),ae={key:0},le={key:1},oe={key:2},re={key:3,class:"row submit-row"},de={class:"col-md-12"};var ce=s(33);const ue={class:"modal fade",id:"newRequirementLinkModal",tabindex:"-1","aria-labelledby":"requirementLinkModal","aria-hidden":"true"},me={class:"modal-dialog modal-lg"},pe={class:"modal-content"},he={class:"modal-header"},ke={class:"modal-body"},be={class:"row"},ge={class:"col-md-8"},Le={class:"form-group"},ve={class:"row"},_e={class:"col-md-8"},ye={key:0,id:"link_wizard_results"},fe=["src"],Se={key:1,class:"alert alert-warning"},Ie={key:2,class:"form-group"},we={key:3,class:"table"},Ce={class:"form-check"},je=["value","id"],Ee=["for"],Re={class:"small-text"},$e={class:"modal-footer"},Me=["disabled"],Te={name:"NewRequirementLinkWizard",components:{Icon:M.In,NSelect:K.A},emits:["update_module"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,Z.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[G.A],data:()=>({isSearching:!1,linkModel:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Task",label:"Task"}],searchTermModel:""}),methods:{saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),this.axios.post(`${this.rootUrl}${this.destination}_information/${this.locationId}/add_link/`,e).then((e=>{this.$emit("update_module",e.data),document.getElementById("requirementLinkCloseButton").click(),this.objectModel=null}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${this.objectModel.toLowerCase()}/link_list/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((()=>{this.$store.dispatch("newToast",{header:"Error retrieving links",message:"We are currently having issues obtaining data",delay:0,extra_classes:"bg-danger"})}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>{let t="";return t=void 0!==e.fields.project_description?e.fields.project_description.toLowerCase():e.fields.task_short_description.toLowerCase(),t.includes(this.searchTermModel.toLowerCase())})):this.objectFilteredResults=this.objectResults}}},xe=(0,te.A)(Te,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",ue,[(0,i.Lk)("div",me,[(0,i.Lk)("div",pe,[(0,i.Lk)("div",he,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkOut},null,8,["icon"]),t[4]||(t[4]=(0,i.eW)(" New Requirement Link Wizard "))]),t[5]||(t[5]=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"requirementLinkCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,i.Lk)("div",ke,[(0,i.Q3)(" CHOOSING A OBJECT TYPE "),(0,i.Lk)("div",be,[t[7]||(t[7]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Object Selector"),(0,i.Lk)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1)),(0,i.Lk)("div",ge,[(0,i.Lk)("div",Le,[t[6]||(t[6]=(0,i.Lk)("label",null,"Object Selection",-1)),(0,i.bF)(r,{options:a.objectSelection,value:a.objectModel,"onUpdate:value":t[0]||(t[0]=e=>a.objectModel=e),class:"object-selection"},null,8,["options","value"])])])]),t[13]||(t[13]=(0,i.Lk)("hr",null,null,-1)),(0,i.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,i.Lk)("div",ve,[t[12]||(t[12]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Select Links"),(0,i.Lk)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1)),(0,i.Lk)("div",_e,[(0,i.Q3)(" LOADING PLACEHOLDER "),a.isSearching||null==a.objectModel?((0,i.uX)(),(0,i.CE)("div",ye,[(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,fe)])):(0,i.Q3)("v-if",!0),0===a.objectResults.length&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",Se," Sorry - there are no results. ")):(0,i.Q3)("v-if",!0),(0,i.Q3)(" SEARCH RESULTS "),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",Ie,[t[8]||(t[8]=(0,i.Lk)("label",null,"Search Terms",-1)),(0,i.bo)((0,i.Lk)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>a.searchTermModel=e),type:"text"},null,512),[[T.vModelText,a.searchTermModel]])])):(0,i.Q3)("v-if",!0),t[11]||(t[11]=(0,i.Lk)("br",null,null,-1)),(0,i.Q3)(" TABLE CONTAINING RESULTS "),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("table",we,[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,(0,ce.toDisplayString)(a.objectModel)+" Description",1),t[9]||(t[9]=(0,i.Lk)("td",null,"Status",-1))])]),(0,i.Q3)(" PROJECTS "),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.objectFilteredResults,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,[(0,i.Lk)("div",Ce,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",value:e.id,id:`checkbox_${a.objectModel.toLowerCase()}_${e.id}`,"onUpdate:modelValue":t[2]||(t[2]=e=>a.linkModel=e)},null,8,je),[[T.vModelCheckbox,a.linkModel]]),(0,i.Lk)("label",{class:"form-check-label",for:`checkbox_${a.objectModel.toLowerCase()}_${e.id}`},(0,ce.toDisplayString)(e.description),9,Ee)]),t[10]||(t[10]=(0,i.Lk)("div",{class:"spacer"},null,-1)),(0,i.Lk)("p",Re,(0,ce.toDisplayString)(a.objectModel)+" "+(0,ce.toDisplayString)(e.id),1)]),(0,i.Lk)("td",null,(0,ce.toDisplayString)(e.status),1)])))),128))])])):(0,i.Q3)("v-if",!0)])])]),(0,i.Lk)("div",$e,[t[14]||(t[14]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0==a.linkModel.length,onClick:t[3]||(t[3]=(...e)=>l.saveLinks&&l.saveLinks(...e))}," Save changes ",8,Me)])])])])}]]),De={class:"modal fade",id:"confirmLinkDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmLinkDelete","aria-hidden":"true"},Fe={class:"modal-dialog"},Ue={class:"modal-content"},qe={class:"modal-footer"},Oe={name:"ConfirmLinkDelete",emits:["update_link_results"],props:{},computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",objectLink:"getObjectLink",rootUrl:"getRootUrl"})},methods:{deleteLink(){const e=new FormData;e.set("link_id",this.objectLink.object_id),e.set("link_connection",this.objectLink.object_type===this.destination?"meta_object":this.objectLink.object_type),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_link/`,e).then((()=>{this.$emit("update_link_results",{})})),this.closeModal()},closeModal(){document.getElementById("confirmLinkDeleteButton").click()}}},Ae=(0,te.A)(Oe,[["render",function(e,t,s,n,a,l){return(0,i.uX)(),(0,i.CE)("div",De,[(0,i.Lk)("div",Fe,[(0,i.Lk)("div",Ue,[t[2]||(t[2]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"confirmLinkDelete"}," Please confirm Link Deletion "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmLinkDeleteButton"})],-1)),t[3]||(t[3]=(0,i.Lk)("div",{class:"modal-body"}," Are you sure you want to delete the link? ",-1)),(0,i.Lk)("div",qe,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.deleteLink&&l.deleteLink(...e))}," Yes ")])])])])}]]);var Ne=s(8297);const Qe={name:"RequirementItemLinksModule",components:{ConfirmLinkDelete:Ae,Icon:M.In,NewRequirementLinkWizard:xe,SubObjectLinks:Ne.A},mixins:[G.A],data:()=>({itemLinkProject:[],itemLinkTask:[]}),computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{updateLinkResults(){this.axios.post(`${this.rootUrl}object_data/requirement_item/${this.locationId}/object_link_list/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},newRequirementItemLink(){new $.aF(document.getElementById("newRequirementLinkModal")).show()}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},Be=(0,te.A)(Qe,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("sub-object-links"),d=(0,i.g2)("new-requirement-link-wizard"),c=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkIcon2},null,8,["icon"]),t[5]||(t[5]=(0,i.eW)(" Requirement Item Links "))]),t[7]||(t[7]=(0,i.Lk)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1)),(0,i.Q3)(" ITEM LINKS "),a.itemLinkProject.length+a.itemLinkTask.length===0?((0,i.uX)(),(0,i.CE)("div",ae,t[6]||(t[6]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",le,[(0,i.Q3)(" Project Links "),(0,i.bF)(r,{title:"Project Links","link-results":a.itemLinkProject,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(r,{title:"Task Links","link-results":a.itemLinkTask,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",oe)):(0,i.Q3)("v-if",!0),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",re,[(0,i.Lk)("div",de,[(0,i.Lk)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.newRequirementItemLink&&l.newRequirementItemLink(...e))},"Create new Link")])])):(0,i.Q3)("v-if",!0),(0,i.Q3)(" LINKING MODAL "),(0,i.Q3)(" need to build something that resets the requirement links when adding links "),(0,i.bF)(d,{"location-id":e.locationId,destination:e.destination,onUpdate_module:t[3]||(t[3]=e=>l.updateLinkResults(e))},null,8,["location-id","destination"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(c,{onUpdate_link_results:t[4]||(t[4]=e=>l.updateLinkResults(e))})])}]]),Xe={key:0,class:"requirement-item-spacer"},Pe={key:1},We={key:2,class:"row submit-row"},ze={class:"col-md-12"},Ke={key:3},He={key:4},Ge={name:"RequirementLinksModule",components:{ConfirmLinkDelete:Ae,SubObjectLinks:Ne.A,Icon:M.In,NewRequirementLinkWizard:xe},mixins:[G.A],data:()=>({itemLinkProject:[],itemLinkTask:[],linkProject:[],linkTask:[],linkModel:[]}),computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{newRequirementLink(){new $.aF(document.getElementById("newRequirementLinkModal")).show()},updateLinkResults(){this.axios.post(`${this.rootUrl}object_data/requirement/${this.locationId}/object_link_list/`).then((e=>{this.linkProject=e.data.filter((e=>"project"===e.object_type)),this.linkTask=e.data.filter((e=>"task"===e.object_type))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})})),this.axios.post(`${this.rootUrl}requirement_information/${this.locationId}/data/item_links/`).then((e=>{this.itemLinkProject=e.data.filter((e=>"project"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1}))),this.itemLinkTask=e.data.filter((e=>"task"===e.object_type)).map((e=>({link_relationship:null,parent_link:null,object_id:e.object_id,object_title:`Item-${e.requirement_item_id} - ${e.object_title}`,object_status:e.object_status,object_type:e.object_type,reverse_relation:!1})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Link Results",message:`We have had issues updating link results - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},Ve=(0,te.A)(Ge,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("sub-object-links"),d=(0,i.g2)("new-requirement-link-wizard"),c=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkIcon},null,8,["icon"]),t[3]||(t[3]=(0,i.eW)(" Requirement Links "))]),t[7]||(t[7]=(0,i.Lk)("p",{class:"text-instructions"}," The following are links to other projects/tasks. You can link a Requirement to these other objects to symbolise a connection between the two. ",-1)),(0,i.Q3)(" REQUIREMENT LINKS "),a.linkProject.length+a.linkTask.length===0?((0,i.uX)(),(0,i.CE)("div",Xe,t[4]||(t[4]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",Pe,[(0,i.Q3)(" Project Links "),(0,i.bF)(r,{title:"Project Links","link-results":a.linkProject,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(r,{title:"Task Links","link-results":a.linkTask,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",We,[(0,i.Lk)("div",ze,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.newRequirementLink&&l.newRequirementLink(...e))},"Create new Link")):(0,i.Q3)("v-if",!0)])])):(0,i.Q3)("v-if",!0),t[8]||(t[8]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkIcon2},null,8,["icon"]),t[5]||(t[5]=(0,i.eW)(" Requirement Item Links "))]),t[9]||(t[9]=(0,i.Lk)("p",{class:"text-instructions"}," The following are links for the Items to other projects/tasks. ",-1)),(0,i.Q3)(" ITEM LINKS "),a.itemLinkProject.length+a.itemLinkTask.length===0?((0,i.uX)(),(0,i.CE)("div",Ke,t[6]||(t[6]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Item Links. Please navigate to the Item you wish to add a link too. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",He,[(0,i.Q3)(" Project Links "),(0,i.bF)(r,{title:"Project Links","link-results":a.itemLinkProject,"can-delete":!1},null,8,["link-results"]),(0,i.Q3)(" Task Links "),(0,i.bF)(r,{title:"Task Links","link-results":a.itemLinkTask,"can-delete":!1},null,8,["link-results"])])),(0,i.Q3)(" LINKING MODAL "),(0,i.bF)(d,{"location-id":e.locationId,destination:"requirement",onUpdate_module:l.updateLinkResults},null,8,["location-id","onUpdate_module"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(c,{onUpdate_link_results:l.updateLinkResults},null,8,["onUpdate_link_results"])])}]]);var Je=s(2713);const Ye={class:"text-instructions"},Ze={key:0,class:"requirement-item-spacer"},et={key:1},tt={key:2},st={class:"row submit-row"},it={class:"col-md-12"},nt={class:"modal fade",id:"newLinkModal",tabindex:"-1","aria-labelledby":"linkModal","aria-hidden":"true"},at={class:"modal-dialog modal-lg"},lt={class:"modal-content"},ot={class:"modal-header"},rt={class:"modal-body"},dt={class:"row"},ct={class:"col-md-4"},ut={class:"text-instructions"},mt={class:"col-md-8"},pt={key:1,class:"alert alert-success"},ht={class:"row"},kt={class:"col-md-8"},bt={class:"row"},gt={class:"col-md-4"},Lt={class:"text-instructions"},vt={class:"col-md-8"},_t={key:0,id:"link_wizard_results"},yt=["src"],ft={key:1,class:"alert alert-warning"},St={key:2,class:"wizard-results"},It={class:"wizard-results--card--tick"},wt=["value","id"],Ct={class:"wizard-results--card--content"},jt={class:"text-instructions"},Et={class:"text-instructions"},Rt={class:"modal-footer"},$t=["disabled"],Mt={name:"NewLinkWizard",components:{Icon:M.In,NSelect:K.A},emits:["update_link_results"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,Z.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[G.A],data:()=>({isSearching:!1,objectModel:null,objectRelation:[{value:"relates",label:"Relates To"},{value:"blocked_by",label:"Is Blocked By"},{value:"blocking",label:"Is Currently Blocking"},{value:"sub_object_of",label:"Is Sub Object Of"},{value:"parent_object_of",label:"Is Parent Object Of"},{value:"has_duplicate",label:"Has Duplicate Object Of"},{value:"duplicate_object",label:"Is Duplicate Object Of"}],objectRelationModel:"relates",objectResults:[],objectSelection:[{value:"Project",label:"Project"},{value:"Requirement",label:"Requirement"},{value:"Requirement_Item",label:"Requirement_Item"},{value:"Task",label:"Task"}],linkModel:[]}),methods:{saveLinks(){const e=new FormData;this.linkModel.forEach((t=>{e.append(`${this.objectModel.toLowerCase()}`,t)})),e.set("object_relation",this.objectRelationModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_link/`,e).then((()=>{this.$emit("update_link_results",{}),this.objectModel=null,document.getElementById("linkCloseButton").click()}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${this.objectModel.toLowerCase()}/link_list/`).then((e=>{this.objectResults=e.data,this.isSearching=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Searching",message:`We got an error searching. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))):this.isSearching=!1}}},Tt=(0,te.A)(Mt,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",nt,[(0,i.Lk)("div",at,[(0,i.Lk)("div",lt,[(0,i.Lk)("div",ot,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkOut},null,8,["icon"]),(0,i.eW)(" New "+(0,ce.toDisplayString)(s.destination)+" Link Wizard ",1)]),t[4]||(t[4]=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"linkCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,i.Lk)("div",rt,[(0,i.Q3)(" CHOOSING A OBJECT TYPE "),(0,i.Lk)("div",dt,[(0,i.Lk)("div",ct,[t[5]||(t[5]=(0,i.Lk)("strong",null,"Object Selector",-1)),(0,i.Lk)("p",ut," Please select which object you would like to link to this "+(0,ce.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",mt,[a.isSearching?((0,i.uX)(),(0,i.CE)("div",pt," Searching for "+(0,ce.toDisplayString)(a.objectModel)+"s ",1)):((0,i.uX)(),(0,i.Wv)(r,{key:0,options:a.objectSelection,value:a.objectModel,"onUpdate:value":t[0]||(t[0]=e=>a.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),t[10]||(t[10]=(0,i.Lk)("hr",null,null,-1)),(0,i.Q3)(" CHOOSE RELATIONSHIP TYPE "),(0,i.Lk)("div",ht,[t[7]||(t[7]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Relationship"),(0,i.Lk)("p",{class:"text-instructions"},' Please select an appropriate relation for the objects. Default is "Relates" ')],-1)),(0,i.Lk)("div",kt,[t[6]||(t[6]=(0,i.Lk)("label",{for:"object-relation"},"Current object",-1)),(0,i.bF)(r,{id:"object-relation",options:a.objectRelation,value:a.objectRelationModel,"onUpdate:value":t[1]||(t[1]=e=>a.objectRelationModel=e),class:"object-selection",disabled:null===a.objectModel},null,8,["options","value","disabled"])])]),t[11]||(t[11]=(0,i.Lk)("hr",null,null,-1)),(0,i.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),(0,i.Lk)("div",bt,[(0,i.Lk)("div",gt,[t[8]||(t[8]=(0,i.Lk)("strong",null,"Select Links",-1)),(0,i.Lk)("p",Lt," Please select which of the objects you want to connect to this "+(0,ce.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",vt,[(0,i.Q3)(" LOADING PLACEHOLDER "),a.isSearching||null==a.objectModel?((0,i.uX)(),(0,i.CE)("div",_t,[(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/search.svg`,alt:"Searching..."},null,8,yt)])):(0,i.Q3)("v-if",!0),0===a.objectResults.length&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",ft," Sorry - there are no results. ")):(0,i.Q3)("v-if",!0),!a.isSearching&&a.objectResults.length>0&&null!=a.objectModel?((0,i.uX)(),(0,i.CE)("div",St,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.objectResults,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"wizard-results--card",key:e.id},[(0,i.Lk)("div",It,[(0,i.bo)((0,i.Lk)("input",{class:"form-check-input",type:"checkbox",name:"link-option",value:e.id,id:`checkbox_${a.objectModel.toLowerCase()}_${e.pk}`,"onUpdate:modelValue":t[2]||(t[2]=e=>a.linkModel=e)},null,8,wt),[[T.vModelCheckbox,a.linkModel]])]),(0,i.Lk)("div",Ct,[(0,i.Lk)("div",jt,(0,ce.toDisplayString)(a.objectModel)+" "+(0,ce.toDisplayString)(e.id),1),(0,i.Lk)("div",null,[(0,i.Lk)("strong",null,(0,ce.toDisplayString)(e.description),1)]),(0,i.Lk)("div",null,[t[9]||(t[9]=(0,i.eW)(" Status: ")),(0,i.Lk)("span",Et,(0,ce.toDisplayString)(e.status),1)])])])))),128))])):(0,i.Q3)("v-if",!0)])])]),(0,i.Lk)("div",Rt,[t[12]||(t[12]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===a.linkModel.length,onClick:t[3]||(t[3]=(...e)=>l.saveLinks&&l.saveLinks(...e))}," Save changes ",8,$t)])])])])}]]),xt={name:"ObjectLinks",components:{ConfirmLinkDelete:Ae,Icon:M.In,NewLinkWizard:Tt,SubObjectLinks:Ne.A},mixins:[G.A],data:()=>({hasDuplicateObjectOf:[],isBlockedBy:[],isCurrentlyBlocking:[],isDuplicateObjectOf:[],isParentOf:[],isSubObjectOf:[],kanbanCard:[],linkResults:[],relatesTo:[]}),computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{isLinkedObject(e){let t=!1;return null!==e.fields.project&&(t=!0),null!==e.fields.task&&(t=!0),null!==e.fields.requirement&&(t=!0),t},newLink(){new $.aF(document.getElementById("newLinkModal")).show()},updateLinkResults(){this.linkResults=[],this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/object_link_list/`).then((e=>{this.linkResults=e.data,this.relatesTo=e.data.filter((e=>"Relate"===e.link_relationship||null===e.link_relationship)),this.isBlockedBy=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Block"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s})),this.kanbanCard=e.data.filter((e=>"Card"===e.link_relationship)),this.isCurrentlyBlocking=e.data.filter((e=>{const t="Block"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Block"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.isSubObjectOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s})),this.isParentOf=e.data.filter((e=>{const t="Subobject"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Subobject"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.hasDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!1===e.reverse_relation,s="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!0===e.reverse_relation;return t||s})),this.isDuplicateObjectOf=e.data.filter((e=>{const t="Duplicate"===e.link_relationship&&e.parent_link!==this.destination&&!1===e.reverse_relation,s="Duplicate"===e.link_relationship&&e.parent_link===this.destination&&!0===e.reverse_relation;return t||s}))})).catch((e=>{this.$store.dispatch("newToast",{heading:"Object Links failed to get data",message:`Failed to get data - Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.updateLinkResults()}))}},Dt=(0,te.A)(xt,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("sub-object-links"),d=(0,i.g2)("new-link-wizard"),c=(0,i.g2)("confirm-link-delete");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.linkOut},null,8,["icon"]),(0,i.eW)(" "+(0,ce.toDisplayString)(e.destination)+" Links ",1)]),(0,i.Lk)("p",Ye," The following are links to other objects like projects/tasks/requirements. You can link a "+(0,ce.toDisplayString)(e.destination)+" to these other objects to symbolise a connection between the two. ",1),(0,i.Q3)(" OBJECT LINKS "),0===a.linkResults.length?((0,i.uX)(),(0,i.CE)("div",Ze,t[8]||(t[8]=[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no Links for this requirement. ",-1)]))):((0,i.uX)(),(0,i.CE)("div",et,[(0,i.Q3)(" Relates To "),(0,i.bF)(r,{title:"Relates To","link-results":a.relatesTo,onUpdate_link_results:t[0]||(t[0]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Kanban Cards "),(0,i.bF)(r,{title:"Kanban Cards","link-results":a.kanbanCard,"can-delete":!1},null,8,["link-results"]),(0,i.Q3)(" Is Blocked By "),(0,i.bF)(r,{title:"Is Blocked By","link-results":a.isBlockedBy,onUpdate_link_results:t[1]||(t[1]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Currently Blocking "),(0,i.bF)(r,{title:"Is Currently Blocking","link-results":a.isCurrentlyBlocking,onUpdate_link_results:t[2]||(t[2]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Sub Object Of "),(0,i.bF)(r,{title:"Is Subobject Of","link-results":a.isSubObjectOf,onUpdate_link_results:t[3]||(t[3]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Parent Object Of "),(0,i.bF)(r,{title:"Is Parent Object Of","link-results":a.isParentOf,onUpdate_link_results:t[4]||(t[4]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Has Duplicate Object Of "),(0,i.bF)(r,{title:"Has Duplicate Object Of","link-results":a.hasDuplicateObjectOf,onUpdate_link_results:t[5]||(t[5]=e=>l.updateLinkResults(e))},null,8,["link-results"]),(0,i.Q3)(" Is Duplicate Object Of "),(0,i.bF)(r,{title:"Is Duplicate Object Of","link-results":a.isDuplicateObjectOf,onUpdate_link_results:t[6]||(t[6]=e=>l.updateLinkResults(e))},null,8,["link-results"])])),(0,i.Q3)(" Submit Button "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",tt)):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",st,[(0,i.Lk)("div",it,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[7]||(t[7]=(...e)=>l.newLink&&l.newLink(...e))},"Create new Link")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" MODAL FOR NEW OBJECT LINKS "),(0,i.bF)(d,{destination:e.destination,"location-id":e.locationId,onUpdate_link_results:l.updateLinkResults},null,8,["destination","location-id","onUpdate_link_results"]),(0,i.Q3)(" MODAL FOR CONFIRM DELETE LINK "),(0,i.bF)(c,{onUpdate_link_results:l.updateLinkResults},null,8,["onUpdate_link_results"])])}]]),Ft={class:"text-instructions"},Ut={key:0},qt={key:1},Ot={class:"row submit-row"},At={class:"col-md-12"};var Nt=s(7865);const Qt={class:"modal fade",id:"addCustomerModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Bt={class:"modal-dialog modal-lg"},Xt={class:"modal-content"},Pt={class:"modal-header"},Wt={class:"modal-body"},zt={key:0,class:"row"},Kt={class:"col-md-4"},Ht={class:"text-instructions"},Gt={class:"col-md-8"},Vt={key:1,class:"row"},Jt={class:"col-md-6 no-search"},Yt=["src"],Zt={class:"modal-footer"},es=["diabled"],ts={name:"AddCustomerWizard",components:{Icon:M.In,NSelect:K.A},emits:["update_customer_results"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0},excludeCustomers:{type:Array,default:()=>[]}},computed:{...(0,Z.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[G.A],data:()=>({customerModel:"",customerList:[],customerFixList:[]}),methods:{addCustomer(){const e=new FormData;e.set("customer",this.customerModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_customer/`,e).then((e=>{this.$emit("update_customer_results",e.data),this.customerModel="",document.getElementById("addCustomerCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Adding Customer",message:`We had an issue adding customers. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getCustomerList(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list_all/`).then((e=>{this.customerList=e.data,this.updateCustomerFixList()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Customer List",message:`We had an issue getting customer list. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateCustomerFixList(){if(0===this.customerList.length)return;const e=[];this.excludeCustomers.forEach((t=>{e.push(t.pk)})),this.customerFixList=this.customerList.filter((t=>!e.includes(t.pk))).map((e=>({value:e.pk,label:`${e.fields.customer_first_name} ${e.fields.customer_last_name}`})))}},mounted(){!["requirement_item"].indexOf(this.locationId)<0||this.$nextTick((()=>{this.getCustomerList()}))},watch:{excludeCustomers(){this.updateCustomerFixList()}}},ss={name:"CustomersModule",components:{AddCustomerWizard:(0,te.A)(ts,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Qt,[(0,i.Lk)("div",Bt,[(0,i.Lk)("div",Xt,[(0,i.Lk)("div",Pt,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.usersIcon},null,8,["icon"]),t[2]||(t[2]=(0,i.eW)(" Add Customers Wizard "))]),t[3]||(t[3]=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addCustomerCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,i.Lk)("div",Wt,[a.customerFixList.length>0?((0,i.uX)(),(0,i.CE)("div",zt,[(0,i.Lk)("div",Kt,[t[4]||(t[4]=(0,i.Lk)("strong",null,"Select Customer",-1)),(0,i.Lk)("p",Ht," Search for a customer who has not been added to this "+(0,ce.toDisplayString)(s.destination)+". If the search is blank there are either no customers that match that search, or all customer have already been added to the "+(0,ce.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",Gt,[(0,i.bF)(r,{options:a.customerFixList,label:"customerName",value:a.customerModel,"onUpdate:value":t[0]||(t[0]=e=>a.customerModel=e)},null,8,["options","value"])])])):((0,i.uX)(),(0,i.CE)("div",Vt,[t[5]||(t[5]=(0,i.Lk)("div",{class:"col-md-6"},[(0,i.Lk)("strong",null,"Sorry - no results"),(0,i.Lk)("p",{class:"text-instructions"}," This could be because "),(0,i.Lk)("ul",{class:"text-instructions"},[(0,i.Lk)("li",null,"There are no more customers left to add"),(0,i.Lk)("li",null," There are no customers for this organisation ")])],-1)),(0,i.Lk)("div",Jt,[(0,i.Lk)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,Yt)])]))]),(0,i.Lk)("div",Zt,[t[6]||(t[6]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",diabled:""==a.customerModel,onClick:t[1]||(t[1]=(...e)=>l.addCustomer&&l.addCustomer(...e))}," Save changes ",8,es)])])])])}]]),CustomersListModule:Nt.A,Icon:M.In},mixins:[G.A],data:()=>({customerResults:[]}),computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addNewCustomer(){new $.aF(document.getElementById("addCustomerModal")).show()},loadCustomerResults(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/customer_list/`).then((e=>{this.customerResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Loading Customer Results",message:`We had an issue loading customer results. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},removeCustomer(e){this.customerResults=this.customerResults.filter((t=>t.pk!==e))},updateCustomerResults(e){this.customerResults=e}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.loadCustomerResults()}))}},is=(0,te.A)(ss,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("customers-list-module"),d=(0,i.g2)("add-customer-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.userIcon},null,8,["icon"]),t[3]||(t[3]=(0,i.eW)(" Customers "))]),(0,i.Lk)("p",Ft," Below are a list of customers who are stakeholders to this "+(0,ce.toDisplayString)(e.destination)+". ",1),(0,i.Q3)(" CUSTOMER RESULTS CARDS "),0==a.customerResults.length?((0,i.uX)(),(0,i.CE)("div",Ut,t[4]||(t[4]=[(0,i.Lk)("div",{class:"customers-module-spacer"},[(0,i.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no customers. Please add them by clicking on the button below ")],-1)]))):((0,i.uX)(),(0,i.CE)("div",qt,[(0,i.bF)(r,{"customer-results":a.customerResults,onRemove_customer:t[0]||(t[0]=e=>l.removeCustomer(e))},null,8,["customer-results"])])),(0,i.Q3)(" ADD CUSTOMER BUTTON "),t[5]||(t[5]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("div",Ot,[(0,i.Lk)("div",At,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>l.addNewCustomer&&l.addNewCustomer(...e))}," Add Customer ")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" MODALS "),(0,i.bF)(d,{"location-id":e.locationId,destination:e.destination,"exclude-customers":a.customerResults,onUpdate_customer_results:t[2]||(t[2]=e=>l.updateCustomerResults(e))},null,8,["location-id","destination","exclude-customers"])])}]]),ns={key:0};var as=s(891);const ls={class:"text-instructions"},os={key:0,class:"spacer"},rs={class:"alert alert-dark"},ds={key:1},cs={class:"table"},us=["href"],ms={class:"small-text"},ps={key:0,class:"remove-link"},hs={key:2},ks={class:"row submit-row"},bs={class:"col-md-12"},gs={class:"modal fade",id:"addBugModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ls={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},vs={class:"modal-content"},_s={class:"modal-header"},ys={class:"modal-body"},fs={class:"row"},Ss={class:"col-md-4"},Is={class:"text-instructions"},ws={class:"col-md-8"},Cs={class:"form-group"},js={class:"form-group mt-4"},Es=["disabled"],Rs={key:0,class:"no-search mt-4"},$s=["src"],Ms={key:1,class:"no-search"},Ts=["src"],xs={key:2,id:"bug_results_div"},Ds={class:"table"},Fs=["id"],Us=["onClick"],qs={class:"small-text"},Os={class:"small-text"},As={name:"AddBugWizard",components:{Icon:M.In,NSelect:K.A},emits:["append_bug_list"],props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},computed:{...(0,Z.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[G.A],data:()=>({bugClientModel:"",bugClientList:[],bugResults:[],searchModel:"",searchOn:!1,searchTimer:""}),methods:{loadBugClientList(){this.axios.post(`${this.rootUrl}object_data/bug_client_list/`).then((e=>{this.bugClientList=e.data.map((e=>({value:e.pk,label:e.fields.bug_client_name})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error loading bug client list",message:`We had an issue loading the bug client list - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},startSearchTimer(){""!==this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout((()=>{this.startSearch()}),700)},startSearch(){if(""===this.searchModel)return;this.searchOn=!0;const e=new FormData;e.set("bug_client_id",this.bugClientModel),e.set("search",this.searchModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/query_bug_client/`,e).then((e=>{this.bugResults=e.data,this.searchOn=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Search Failed",message:`Sorry, the search for bug client has failed. Errors -> ${e}`,extra_classes:"bg-warning text-dark",delay:0})}))},submitBug(e){const t=document.getElementById(`bug_no_${e}`);t.innerHTML="Adding Bug";const s=this.bugResults.filter((t=>t.id==e)),i=new FormData;i.set("bug_client",this.bugClientModel),i.set("bug_id",e),i.set("bug_description",s[0].summary),i.set("bug_status",s[0].status),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_bug/`,i).then((e=>{this.$emit("append_bug_list",e.data),t.innerHTML="Done"})).catch((e=>{this.$store.dispatch("newToast",{header:"Submit Bug Failed",message:`Sorry, the submitting the bug failed. Errors -> ${e}`,extra_classes:"bg-warning text-dark",delay:0})}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.loadBugClientList()}))}},Ns={name:"BugsModule",components:{AddBugWizard:(0,te.A)(As,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",gs,[(0,i.Lk)("div",Ls,[(0,i.Lk)("div",vs,[(0,i.Lk)("div",_s,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.usersIcon},null,8,["icon"]),t[3]||(t[3]=(0,i.eW)(" Add Bugs Wizard "))]),t[4]||(t[4]=(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addBugsCloseButton"},[(0,i.Lk)("span",{"aria-hidden":"true"})],-1))]),(0,i.Lk)("div",ys,[(0,i.Lk)("div",fs,[(0,i.Lk)("div",Ss,[t[5]||(t[5]=(0,i.Lk)("strong",null,"Adding Bugs",-1)),(0,i.Lk)("p",Is," Select which bug client you want to search data from. Then use keywords or bug id to search for the required bugs. Once the search results appear, select those appropriate bugs that you want to link to the "+(0,ce.toDisplayString)(s.destination)+". ",1)]),(0,i.Lk)("div",ws,[(0,i.Q3)(" Bug Client List "),(0,i.Lk)("div",Cs,[t[6]||(t[6]=(0,i.Lk)("label",null,"Bug Client",-1)),(0,i.bF)(r,{options:a.bugClientList,label:"bug_client_name",option:"bug_client_id",value:a.bugClientModel,"onUpdate:value":t[0]||(t[0]=e=>a.bugClientModel=e)},null,8,["options","value"])]),(0,i.Q3)(" Search Keywords "),(0,i.Lk)("div",js,[t[7]||(t[7]=(0,i.Lk)("label",null,"Search Keywords",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>a.searchModel=e),class:"form-control",disabled:""==a.bugClientModel,onKeydown:t[2]||(t[2]=(...e)=>l.startSearchTimer&&l.startSearchTimer(...e)),maxlength:"50"},null,40,Es),[[T.vModelText,a.searchModel]])]),(0,i.Q3)(" The Search Results "),a.searchOn?((0,i.uX)(),(0,i.CE)("div",Rs,[t[8]||(t[8]=(0,i.Lk)("strong",null,"Currently Searching for Bugs",-1)),t[9]||(t[9]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/online_connection.svg`,alt:"Placeholder Search Image"},null,8,$s)])):0==a.bugResults.length?((0,i.uX)(),(0,i.CE)("div",Ms,[t[10]||(t[10]=(0,i.Lk)("strong",null,"No Search Results Sorry",-1)),t[11]||(t[11]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("img",{src:`${e.staticUrl}/NearBeach/images/placeholder/road_to_knowledge.svg`,alt:"Placeholder Search Image"},null,8,Ts)])):((0,i.uX)(),(0,i.CE)("div",xs,[(0,i.Lk)("table",Ds,[t[13]||(t[13]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td"),(0,i.Lk)("td",null,"Bug Description"),(0,i.Lk)("td",null,"Bug Status")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.bugResults,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",{id:`bug_no_${e.id}`},[(0,i.Lk)("a",{href:"javascript:void(0)",onClick:t=>l.submitBug(e.id)}," Add Bug ",8,Us)],8,Fs),(0,i.Lk)("td",null,[(0,i.eW)((0,ce.toDisplayString)(e.summary)+" ",1),t[12]||(t[12]=(0,i.Lk)("div",{class:"spacer"},null,-1)),(0,i.Lk)("p",qs," Assigned to: "+(0,ce.toDisplayString)(e.assigned_to),1),(0,i.Lk)("p",Os," Bug No. "+(0,ce.toDisplayString)(e.id)+" | Priority. "+(0,ce.toDisplayString)(e.priority),1)]),(0,i.Lk)("td",null,(0,ce.toDisplayString)(e.status),1)])))),128))])])]))])])]),t[14]||(t[14]=(0,i.Lk)("div",{class:"modal-footer"},[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ")],-1))])])])}]]),Icon:M.In},mixins:[G.A],data:()=>({bugList:[]}),computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{addNewBug(){new $.aF(document.getElementById("addBugModal")).show()},appendBugList(e){const t=e[0].fields;t.bug_id=e[0].pk,this.bugList.push(t)},getBugHyperLink:e=>"Bugzilla"===e.bug_client__list_of_bug_client__bug_client_name?`${e.bug_client__bug_client_url}/show_bug.cgi?id=${e.bug_code}`:"javascript:void(0)",getBugList(){"requirement_item"!==this.destination&&this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/bug_list/`).then((e=>{this.bugList=[],e.data.forEach((e=>{this.bugList.push(e)}))})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to get bug list",message:`Failed to get bug list. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},removeBug(e){const t=new FormData;t.set("bug_id",e),this.axios.post(`${this.rootUrl}object_data/delete_bug/`,t).then((()=>{this.bugList=this.bugList.filter((t=>t.bug_id!==e))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Removing Bug",message:`We had an issue removing the bug - error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.getBugList()}))}},Qs=(0,te.A)(Ns,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon"),r=(0,i.g2)("add-bug-wizard");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("h2",null,[(0,i.bF)(o,{icon:e.icons.bugIcon},null,8,["icon"]),t[2]||(t[2]=(0,i.eW)(" Bugs List "))]),(0,i.Lk)("p",ls," The following is a list of bugs associated with this "+(0,ce.toDisplayString)(e.destination),1),(0,i.Q3)(" TABLE OF BUGS "),0===a.bugList.length?((0,i.uX)(),(0,i.CE)("div",os,[(0,i.Lk)("div",rs," Sorry - there are no bugs associated with this "+(0,ce.toDisplayString)(e.destination),1)])):((0,i.uX)(),(0,i.CE)("div",ds,[(0,i.Lk)("table",cs,[t[4]||(t[4]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("td",null,"Bug Description"),(0,i.Lk)("td",null,"Status")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.bugList,(s=>((0,i.uX)(),(0,i.CE)("tr",{key:s.pk},[(0,i.Lk)("td",null,[(0,i.Lk)("a",{href:l.getBugHyperLink(s),rel:"noopener noreferrer",target:"_blank"},[(0,i.Lk)("p",null,(0,ce.toDisplayString)(s.bug_description),1),t[3]||(t[3]=(0,i.Lk)("div",{class:"spacer"},null,-1)),(0,i.Lk)("p",ms," Bug No. "+(0,ce.toDisplayString)(s.bug_code)+" - "+(0,ce.toDisplayString)(s.bug_client__bug_client_name),1)],8,us)]),(0,i.Lk)("td",null,[(0,i.eW)((0,ce.toDisplayString)(s.bug_status)+" ",1),e.userLevel>=2?((0,i.uX)(),(0,i.CE)("span",ps,[(0,i.bF)(o,{icon:e.icons.trashCan,onClick:e=>l.removeBug(s.bug_id)},null,8,["icon","onClick"])])):(0,i.Q3)("v-if",!0)])])))),128))])])])),(0,i.Q3)(" Add Bug Button "),(0,i.Q3)(" TO DO - limit it to certain users "),e.userLevel>1?((0,i.uX)(),(0,i.CE)("hr",hs)):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",ks,[(0,i.Lk)("div",bs,[e.userLevel>1?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>l.addNewBug&&l.addNewBug(...e))}," Add Bug ")):(0,i.Q3)("v-if",!0)])]),(0,i.Q3)(" Modals "),(0,i.bF)(r,{destination:e.destination,"location-id":e.locationId,onAppend_bug_list:t[1]||(t[1]=e=>l.appendBugList(e))},null,8,["destination","location-id"])])}]]);var Bs=s(4711),Xs=s(3956);const Ps={name:"MiscModule",components:{AddTagWizard:as.A,BugsModule:Qs,ListPublicLinks:Bs.A,ListTagsModule:Xs.A},computed:{...(0,Z.L8)({destination:"getDestination"})}},Ws=(0,te.A)(Ps,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("list-tags-module"),r=(0,i.g2)("add-tag-wizard"),d=(0,i.g2)("list-public-links"),c=(0,i.g2)("bugs-module");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(o),(0,i.bF)(r),t[0]||(t[0]=(0,i.Lk)("hr",null,null,-1)),(0,i.bF)(d),["project","task","requirement"].includes(this.destination)?((0,i.uX)(),(0,i.CE)("hr",ns)):(0,i.Q3)("v-if",!0),["project","task","requirement"].includes(this.destination)?((0,i.uX)(),(0,i.Wv)(c,{key:1})):(0,i.Q3)("v-if",!0)],64)}]]);var zs=s(8045),Ks=s(5696),Hs=s(5067),Gs=s(8737),Vs=s(9735),Js=s(5081);const Ys={key:0},Zs={key:0,class:"alert alert-info"},ei={key:1,class:"row submit-row"},ti={class:"col-md-12"},si={key:2,class:"mt-4"},ii={class:"modal fade",id:"createNewSprintModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"createNewSprint","aria-hidden":"true"},ni={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},ai={class:"modal-content"},li={class:"modal-body"},oi={class:"row"},ri={class:"col-md-8"},di={class:"form-group"},ci={class:"row"},ui={class:"col-md-6"},mi={class:"form-group"},pi={class:"col-md-6"},hi={class:"form-group"},ki={class:"modal-footer"},bi={name:"NewSprintWizard",components:{NDatePicker:s(8105).A},props:{sprintResultsLength:{type:Number,default:0}},computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},data:()=>({sprintEndDate:0,sprintNameModel:"",sprintStartDate:0}),watch:{sprintResultsLength(){this.updateSprintNameModel()}},methods:{createNewSprint(){this.$store.dispatch("newToast",{header:"Creating New Toast",message:"Please wait - we are creating the new toast. It will automatically navigate you to the new sprint information page",extra_classes:"bg-warning text-dark",delay:0,unique_type:"create_sprint"});const e=new Date(this.sprintStartDate),t=new Date(this.sprintEndDate),s=new FormData;s.set("sprint_name",this.sprintNameModel),s.set("sprint_start_date",e.toISOString()),s.set("sprint_end_date",t.toISOString()),this.axios.post(`${this.rootUrl}new_sprint/${this.destination}/${this.locationId}/save/`,s).then((e=>{window.location=`${this.rootUrl}sprint_information/${e.data.id}/`})).catch((e=>{this.$store.dispatch("newToast",{header:"Error creating new sprint",message:`Could not create new sprint. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"create_sprint"})}))},updateSprintNameModel(){const e=this.sprintResultsLength+1,t=(new Date).toLocaleDateString("en-au",{year:"numeric",month:"short",day:"numeric"});this.sprintNameModel=`${this.destination}-${this.locationId} - Sprint ${e} - ${t}`}},mounted(){this.sprintStartDate=(new Date).getTime(),this.sprintEndDate=this.sprintStartDate+6048e5,this.$nextTick((()=>{this.updateSprintNameModel()}))}},gi=(0,te.A)(bi,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-date-picker");return(0,i.uX)(),(0,i.CE)("div",ii,[(0,i.Lk)("div",ni,[(0,i.Lk)("div",ai,[t[10]||(t[10]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title"}," Please confirm Link Deletion "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"createNewSprintButton"})],-1)),(0,i.Lk)("div",li,[(0,i.Lk)("div",oi,[t[9]||(t[9]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Sprint Information"),(0,i.Lk)("p",{class:"text-instructions"}," Please use an appropriate name, start date, and finish date. ")],-1)),(0,i.Lk)("div",ri,[(0,i.Lk)("div",di,[t[5]||(t[5]=(0,i.Lk)("label",null,"Sprint Name",-1)),(0,i.bo)((0,i.Lk)("input",{class:"form-control",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.sprintNameModel=e)},null,512),[[T.vModelText,a.sprintNameModel]])]),t[8]||(t[8]=(0,i.Lk)("div",{class:"spacer"},null,-1)),(0,i.Lk)("div",ci,[(0,i.Lk)("div",ui,[(0,i.Lk)("div",mi,[t[6]||(t[6]=(0,i.Lk)("label",null,"Start Date",-1)),(0,i.bF)(o,{value:a.sprintStartDate,"onUpdate:value":t[1]||(t[1]=e=>a.sprintStartDate=e),type:"date"},null,8,["value"])])]),(0,i.Lk)("div",pi,[(0,i.Lk)("div",hi,[t[7]||(t[7]=(0,i.Lk)("label",null,"End Date",-1)),(0,i.bF)(o,{value:a.sprintEndDate,"onUpdate:value":t[2]||(t[2]=e=>a.sprintEndDate=e),type:"date"},null,8,["value"])])])])])])]),(0,i.Lk)("div",ki,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=(...t)=>e.closeModal&&e.closeModal(...t))}," Cancel "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[4]||(t[4]=(...e)=>l.createNewSprint&&l.createNewSprint(...e))}," Create New Sprint ")])])])])}]]),Li={class:"col-md-10 object-link--details"},vi=["href"],_i={class:"object-link--link"},yi={class:"object-link--title"},fi={class:"object-link--link"},Si={class:"object-link--link"},Ii={class:"col-md-2 object-link--status"},wi={key:0,class:"object-link--remove"};var Ci=s(8083);const ji={name:"RenderSprintCard",components:{Icon:M.In},props:{canDelete:{type:Boolean,default:!0},sprintResults:{type:Array,default:()=>[]}},computed:{...(0,Z.L8)({rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mixins:[Ci.A,G.A],emits:["confirm_remove_sprint"],methods:{confirmRemoveSprintFunction(e){this.$emit("confirm_remove_sprint",e)}}},Ei=(0,te.A)(ji,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("Icon");return(0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.sprintResults,(n=>((0,i.uX)(),(0,i.CE)("div",{key:n.sprint_id,class:"row object-link"},[(0,i.Q3)(" Sprint ID + Sprint Name "),(0,i.Lk)("div",Li,[(0,i.Lk)("a",{href:`${this.rootUrl}sprint_information/${n.sprint_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",_i,"Sprint- "+(0,ce.toDisplayString)(n.sprint_id),1),(0,i.Lk)("div",yi,(0,ce.toDisplayString)(n.sprint_name),1),(0,i.Lk)("div",fi," Story Point Progression: "+(0,ce.toDisplayString)(n.completed_story_points)+" out of "+(0,ce.toDisplayString)(n.total_story_points),1),(0,i.Lk)("div",Si," Dates: "+(0,ce.toDisplayString)(e.getNiceDate(n.sprint_start_date))+" till "+(0,ce.toDisplayString)(e.getNiceDate(n.sprint_end_date)),1)],8,vi)]),(0,i.Q3)(" Sprint Status "),(0,i.Lk)("div",Ii,[t[0]||(t[0]=(0,i.Lk)("span",null,"Sprint Status: ",-1)),(0,i.Lk)("span",null,(0,ce.toDisplayString)(n.sprint_status),1)]),(0,i.Q3)(" Object Delete "),e.userLevel>=2&&!0===s.canDelete?((0,i.uX)(),(0,i.CE)("div",wi,[(0,i.bF)(o,{icon:e.icons.trashCan,onClick:e=>l.confirmRemoveSprintFunction(n)},null,8,["icon","onClick"])])):(0,i.Q3)("v-if",!0)])))),128)}]]),Ri={name:"ChildSprints",components:{RenderSprintCard:Ei,NewSprintWizard:gi},data:()=>({allowedObjects:["project","requirement"],sprintResults:[]}),computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{closeModal(){document.getElementById("createNewSprintButton").click()},getSprints(){const e=`${this.rootUrl}object_data/${this.destination}/${this.locationId}/sprint_list/child/`;this.axios.post(e).then((e=>{this.sprintResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Sprint List",message:`Sorry, could not get child sprints. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},openCreateModal(){new $.aF(document.getElementById("createNewSprintModal")).show()}},mounted(){this.$nextTick((()=>{this.allowedObjects.includes(this.destination)&&this.getSprints()}))}},$i=(0,te.A)(Ri,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("render-sprint-card"),r=(0,i.g2)("new-sprint-wizard");return(0,i.uX)(),(0,i.CE)(i.FK,null,[t[1]||(t[1]=(0,i.Lk)("h2",null,"List Sprints",-1)),t[2]||(t[2]=(0,i.Lk)("p",{class:"text-instructions"}," Lists out all the sprints associated with this particular object. ",-1)),a.allowedObjects.includes(e.destination)?((0,i.uX)(),(0,i.CE)("div",Ys,[0===a.sprintResults.length?((0,i.uX)(),(0,i.CE)("div",Zs," Currently there are no current sprints. ")):(0,i.Q3)("v-if",!0),(0,i.Q3)(" CURRENT SPRINTS"),(0,i.bF)(o,{"sprint-results":a.sprintResults,"can-delete":!1},null,8,["sprint-results"]),(0,i.Q3)(" BUTTONS"),e.userLevel>=2?((0,i.uX)(),(0,i.CE)("div",ei,[(0,i.Lk)("div",ti,[(0,i.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>l.openCreateModal&&l.openCreateModal(...e))}," Create New Sprint ")])])):(0,i.Q3)("v-if",!0),"project"===e.destination?((0,i.uX)(),(0,i.CE)("hr",si)):(0,i.Q3)("v-if",!0)])):(0,i.Q3)("v-if",!0),a.allowedObjects.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(r,{key:1,"sprint-results-length":a.sprintResults.length},null,8,["sprint-results-length"])):(0,i.Q3)("v-if",!0)],64)}]]),Mi={key:0},Ti={key:1},xi={key:2,class:"alert alert-info"},Di={class:"row submit-row"},Fi={class:"col-md-12"},Ui={class:"modal fade",id:"addSprintWizardModal",tabindex:"-1","aria-labelledby":"addSprintWizard","aria-hidden":"true"},qi={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},Oi={class:"modal-content"},Ai={class:"modal-body"},Ni={class:"row"},Qi={class:"col-md-8"},Bi={class:"form-group"},Xi={class:"col-md-12 mb-4"},Pi={class:"modal-footer"},Wi=["disabled"],zi={name:"AddSprintWizard",components:{NSelect:K.A},emits:["update_sprint_list"],data:()=>({selectedSprintObject:{},sprintModel:void 0,sprintOptions:[]}),mixins:[Ci.A],computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},watch:{sprintModel(e){this.selectedSprintObject=this.sprintOptions.filter((t=>parseInt(t.value)===parseInt(e)))}},methods:{addSprint(){this.$store.dispatch("newToast",{header:"Adding object to sprint",message:"Adding current object to sprint, please wait.",extra_classes:"bg-warning text-dark",delay:0,unique_type:"add_sprint_wizard"});const e=new FormData;e.set("sprint_id",this.sprintModel),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_sprint/`,e).then((e=>{this.$emit("update_sprint_list",e.data),document.getElementById("addSprintWizardButton").click(),this.$store.dispatch("newToast",{header:"Added to Sprint",message:"Successfully added current object to Sprint",extra_classes:"bg-success",unique_type:"add_sprint_wizard"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error adding current object to sprint",message:`Error adding the current object to sprint. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"add_sprint_wizard"})}))},getSprintOptions(){this.axios.post(`${this.rootUrl}object_data/sprint_list/`).then((e=>{this.sprintOptions=e.data.map((e=>({value:e.sprint_id,label:e.sprint_name,sprint_start_date:e.sprint_start_date,sprint_end_date:e.sprint_end_date})))})).catch((e=>{this.$store.dispatch("newToast",{header:"Error fetching Potential Sprint List",message:`Can not retrieve sprint list. ${e}`,extra_classes:"bg-warning text-dark",delay:0})}))}},mounted(){this.$nextTick((()=>{this.getSprintOptions()}))}},Ki=(0,te.A)(zi,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("n-select");return(0,i.uX)(),(0,i.CE)("div",Ui,[(0,i.Lk)("div",qi,[(0,i.Lk)("div",Oi,[t[9]||(t[9]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"addSprintWizard"},"Add Object to Sprint"),(0,i.Lk)("button",{id:"addSprintWizardButton",type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),(0,i.Lk)("div",Ai,[(0,i.Lk)("div",Ni,[t[7]||(t[7]=(0,i.Lk)("div",{class:"col-md-4"},[(0,i.Lk)("strong",null,"Sprint Wizard"),(0,i.Lk)("p",{class:"text-instructions"}," Please select the appropriate sprint to add this current object too. ")],-1)),(0,i.Lk)("div",Qi,[(0,i.Lk)("div",Bi,[t[2]||(t[2]=(0,i.Lk)("label",null,"Sprint",-1)),(0,i.bF)(o,{value:a.sprintModel,"onUpdate:value":t[0]||(t[0]=e=>a.sprintModel=e),options:a.sprintOptions,filterable:"",placeholder:"Please select a sprint from the list"},null,8,["value","options"])]),t[6]||(t[6]=(0,i.Lk)("div",{class:"spacer"},null,-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.selectedSprintObject,(s=>((0,i.uX)(),(0,i.CE)("div",{key:s.value,class:"row"},[(0,i.Lk)("div",Xi,[t[3]||(t[3]=(0,i.Lk)("strong",null,"Sprint Name: ",-1)),(0,i.eW)((0,ce.toDisplayString)(s.label),1),t[4]||(t[4]=(0,i.Lk)("br",null,null,-1)),t[5]||(t[5]=(0,i.Lk)("strong",null,"Sprint Start Date: ",-1)),(0,i.eW)((0,ce.toDisplayString)(e.getNiceDatetime(s.sprint_start_date)),1)])])))),128))])])]),(0,i.Lk)("div",Pi,[t[8]||(t[8]=(0,i.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,i.Lk)("button",{disabled:void 0===a.sprintModel,onClick:t[1]||(t[1]=(...e)=>l.addSprint&&l.addSprint(...e)),type:"button",class:"btn btn-primary"}," Add to Sprint ",8,Wi)])])])])}]]),Hi={class:"modal fade",id:"confirmSprintRemoveModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmSprintRemoveLabel","aria-hidden":"true"},Gi={class:"modal-dialog"},Vi={class:"modal-content"},Ji={class:"modal-footer"},Yi={name:"ConfirmRemoveSprint",emits:["update_sprint_list"],props:{confirmRemoveSprint:{type:Object,default:()=>({sprint_name:"",sprint_id:0})}},computed:{...(0,Z.L8)({destination:"getDestination",documentRemoveKey:"getDocumentRemoveKey",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{removeSprint(){const e=new FormData;e.set("sprint_id",this.confirmRemoveSprint.sprint_id),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_sprint/`,e).then((e=>{this.$emit("update_sprint_list",e.data),document.getElementById("confirmSprintRemovalButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Removing Sprint",message:`Sorry, we could not remove the sprint from the current object. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},closeModal(){document.getElementById("confirmSprintRemovalButton").click()}}},Zi={name:"AssignedSprints",components:{ConfirmRemoveSprint:(0,te.A)(Yi,[["render",function(e,t,s,n,a,l){return(0,i.uX)(),(0,i.CE)("div",Hi,[(0,i.Lk)("div",Gi,[(0,i.Lk)("div",Vi,[t[2]||(t[2]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"confirmSprintRemoveLabel"}," Please confirm the sprint removal "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmSprintRemovalButton"})],-1)),t[3]||(t[3]=(0,i.Lk)("div",{class:"modal-body"}," Are you sure you want to remove the sprint from the current object. ",-1)),(0,i.Lk)("div",Ji,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.removeSprint&&l.removeSprint(...e))}," Yes ")])])])])}]]),RenderSprintCard:Ei,AddSprintWizard:Ki},data:()=>({allowedObjects:["requirement_item","project","task"],confirmRemoveSprint:{sprint_id:0,sprint_name:""},currentImportVariables:{header:"List of Current Sprints",prefix:"sprint",id:"sprint_id",title:"sprint_name",status:"sprint_status"},currentSprints:[],finishedImportVariables:{header:"List of Finished Sprints",prefix:"sprint",id:"sprint_id",title:"sprint_name",status:"sprint_status"},finishedSprints:[]}),computed:{...(0,Z.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{addToSprint(){new $.aF(document.getElementById("addSprintWizardModal")).show()},confirmRemoveSprintFunction(e){this.confirmRemoveSprint=e,new $.aF(document.getElementById("confirmSprintRemoveModal")).show()},getAssignedSprints(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/sprint_list/assigned/`).then((e=>{this.updateSprintList(e.data)})).catch((e=>{this.$store.dispatch("newToast",{headers:"Error fetching assigned sprints",message:`Could not get the data. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateSprintList(e){this.currentSprints=e.filter((e=>"Finished"!==e.sprint_status)),this.finishedSprints=e.filter((e=>"Finished"===e.sprint_status))}},mounted(){this.$nextTick((()=>{this.allowedObjects.includes(this.destination)&&this.getAssignedSprints()}))}},en={name:"ListSprints",components:{AssignedSprints:(0,te.A)(Zi,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("render-sprint-card"),r=(0,i.g2)("add-sprint-wizard"),d=(0,i.g2)("confirm-remove-sprint");return(0,i.uX)(),(0,i.CE)(i.FK,null,[t[5]||(t[5]=(0,i.Lk)("h2",null,"AssignedSprints",-1)),t[6]||(t[6]=(0,i.Lk)("p",{class:"text-instructions"}," Lists all sprints that contains this object. ",-1)),a.currentSprints.length>0?((0,i.uX)(),(0,i.CE)("h3",Mi," Current ")):(0,i.Q3)("v-if",!0),(0,i.bF)(o,{"sprint-results":a.currentSprints,onConfirm_remove_sprint:t[0]||(t[0]=e=>l.confirmRemoveSprintFunction(e))},null,8,["sprint-results"]),a.finishedSprints.length>0?((0,i.uX)(),(0,i.CE)("h3",Ti," Finished ")):(0,i.Q3)("v-if",!0),(0,i.bF)(o,{"sprint-results":a.finishedSprints,onConfirm_remove_sprint:t[1]||(t[1]=e=>l.confirmRemoveSprintFunction(e))},null,8,["sprint-results"]),a.currentSprints.length+a.finishedSprints.length===0?((0,i.uX)(),(0,i.CE)("div",xi," Currently this object has not been assigned to any sprints. ")):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",Di,[(0,i.Lk)("div",Fi,[e.userLevel>=2?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn btn-primary save-changes",onClick:t[2]||(t[2]=(...e)=>l.addToSprint&&l.addToSprint(...e))}," Add Object To Sprint ")):(0,i.Q3)("v-if",!0)])]),(0,i.bF)(r,{onUpdate_sprint_list:t[3]||(t[3]=e=>l.updateSprintList(e))}),(0,i.bF)(d,{"confirm-remove-sprint":a.confirmRemoveSprint,onUpdate_sprint_list:t[4]||(t[4]=e=>l.updateSprintList(e))},null,8,["confirm-remove-sprint"])],64)}]]),ChildSprints:$i},data:()=>({assignedSprintAllowedDestination:["requirement_item","project","task"],childSprintsAllowedDestination:["requirement","project"]}),computed:{...(0,Z.L8)({destination:"getDestination"})}},tn=(0,te.A)(en,[["render",function(e,t,s,n,a,l){const o=(0,i.g2)("child-sprints"),r=(0,i.g2)("assigned-sprints");return(0,i.uX)(),(0,i.CE)(i.FK,null,[a.childSprintsAllowedDestination.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(o,{key:0})):(0,i.Q3)("v-if",!0),a.assignedSprintAllowedDestination.includes(e.destination)?((0,i.uX)(),(0,i.Wv)(r,{key:1})):(0,i.Q3)("v-if",!0)],64)}]]);var sn=s(150),nn=s(6169),an=s(9827);const ln={name:"ParentModules",components:{ConfirmNoteDelete:s(4678).A,AddFolderWizard:Js.A,ConfirmFileDeleteVue:Gs.A,AddLinkWizard:Hs.A,ConfirmFolderDelete:Vs.A,CustomersModule:is,DocumentsModule:Je.A,EditHistoryNoteWizard:sn.A,GroupsAndUsersModule:I.A,ListSprints:tn,NewHistoryNoteWizard:nn.A,NotesModule:zs.A,ObjectLinks:Dt,RequirementItemLinksModule:Be,RequirementItemsModule:ne,RequirementLinksModule:Ve,UploadDocumentWizard:Ks.A,MiscModule:Ws},mixins:[an.A],props:{destination:{type:String,default:""},isReadOnly:{type:Boolean,default:!1},locationId:{type:Number,default:0},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userExtraPermissions:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},data:()=>({}),methods:{},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination,locationId:this.locationId}),this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.isReadOnly?this.$store.commit({type:"updateUserLevel",userLevel:1}):(this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel}),this.$store.commit({type:"updateUserExtraPermissions",userExtraPermissions:this.userExtraPermissions}))}},on=(0,te.A)(ln,[["render",function(e,t,s,I,w,C){const j=(0,i.g2)("groups-and-users-module"),E=(0,i.g2)("requirement-items-module"),R=(0,i.g2)("requirement-links-module"),$=(0,i.g2)("requirement-item-links-module"),M=(0,i.g2)("documents-module"),T=(0,i.g2)("upload-document-wizard"),x=(0,i.g2)("add-folder-wizard"),D=(0,i.g2)("add-link-wizard"),F=(0,i.g2)("confirm-file-delete-vue"),U=(0,i.g2)("confirm-folder-delete"),q=(0,i.g2)("object-links"),O=(0,i.g2)("customers-module"),A=(0,i.g2)("list-sprints"),N=(0,i.g2)("misc-module"),Q=(0,i.g2)("notes-module"),B=(0,i.g2)("edit-history-note-wizard"),X=(0,i.g2)("new-history-note-wizard"),P=(0,i.g2)("confirm-note-delete"),W=(0,i.g2)("n-config-provider");return(0,i.uX)(),(0,i.Wv)(W,{theme:e.getTheme(s.theme)},{default:(0,i.k6)((()=>[(0,i.Lk)("div",n,[(0,i.Lk)("div",a,[(0,i.Lk)("ul",l,[(0,i.Q3)(" GROUPS AND USERS "),(0,i.Q3)(" Don't need to show to requirement items - as permissions are gained from parent requirement "),"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",o,t[0]||(t[0]=[(0,i.Lk)("button",{class:"nav-link active",id:"group-and-user-tab","data-bs-toggle":"tab","data-bs-target":"#group-and-users",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Groups and Users ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT ITEMS "),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("li",r,t[1]||(t[1]=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-item-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-items",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Item ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT LINKS "),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("li",d,t[2]||(t[2]=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-link-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Requirement Links ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" REQUIREMENT ITEM LINKS "),"requirement_item"===s.destination?((0,i.uX)(),(0,i.CE)("li",c,t[3]||(t[3]=[(0,i.Lk)("button",{class:"nav-link",id:"requirement-item-link-tab","data-bs-toggle":"tab","data-bs-target":"#requirement-item-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Links ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" DOCUMENTS "),t[6]||(t[6]=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"documents-tab","data-bs-toggle":"tab","data-bs-target":"#documents",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Documents ")],-1)),(0,i.Q3)(" LINKED OBJECTS "),"requirement"!==s.destination&&"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",u,t[4]||(t[4]=[(0,i.Lk)("button",{class:"nav-link",id:"object-link-tabs","data-bs-toggle":"tab","data-bs-target":"#object-links",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Linked Objects ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" CUSTOMERS "),(0,i.Q3)(" Customers are not needed by requirement items as the parent requirements take care of this "),"requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("li",m,t[5]||(t[5]=[(0,i.Lk)("button",{class:"nav-link",id:"customer-tab","data-bs-toggle":"tab","data-bs-target":"#customers",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Customers ",-1)]))):(0,i.Q3)("v-if",!0),(0,i.Q3)(" SPRINTS "),t[7]||(t[7]=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"sprints-tab","data-bs-toggle":"tab","data-bs-target":"#sprints",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Sprints ")],-1)),(0,i.Q3)(" MISC "),t[8]||(t[8]=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"misc-tab","data-bs-toggle":"tab","data-bs-target":"#misc",type:"button",role:"tab","aria-controls":"home","aria-selected":"false"}," Misc ")],-1)),(0,i.Q3)(" Notes "),t[9]||(t[9]=(0,i.Lk)("li",{class:"nav-item",role:"presentation"},[(0,i.Lk)("button",{class:"nav-link",id:"notes-tab","data-bs-toggle":"tab","data-bs-target":"#notes",type:"button",role:"tab","aria-controls":"home","aria-select":"false"}," Notes ")],-1))]),t[10]||(t[10]=(0,i.Lk)("hr",null,null,-1)),(0,i.Lk)("div",p,["requirement_item"!==s.destination?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.bF)(j)])):(0,i.Q3)("v-if",!0),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("div",k,[(0,i.bF)(E)])):(0,i.Q3)("v-if",!0),"requirement"===s.destination?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(R)])):"requirement_item"===s.destination?((0,i.uX)(),(0,i.CE)("div",g,[(0,i.bF)($)])):(0,i.Q3)("v-if",!0),(0,i.Lk)("div",L,[(0,i.bF)(M),(0,i.bF)(T),(0,i.bF)(x,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"]),(0,i.bF)(D,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"]),(0,i.bF)(F),(0,i.bF)(U)]),(0,i.Lk)("div",v,[(0,i.bF)(q)]),(0,i.Lk)("div",_,[(0,i.bF)(O)]),(0,i.Lk)("div",y,[(0,i.bF)(A)]),(0,i.Lk)("div",f,[(0,i.bF)(N)]),(0,i.Lk)("div",S,[(0,i.bF)(Q),(0,i.Q3)(" Modals for Notes section "),(0,i.bF)(B),(0,i.bF)(X,{"location-id":s.locationId,destination:s.destination},null,8,["location-id","destination"]),(0,i.bF)(P)])])])])])),_:1},8,["theme"])}]])},4711:(e,t,s)=>{s.d(t,{A:()=>_});var i=s(641),n=s(33);const a={key:0,class:"alert alert-info"},l={key:1,class:"alert alert-info"},o={key:2,class:"table table-striped"},r={key:0,style:{width:"10px"}},d=["onClick"],c={style:{"text-align":"center"}},u=["checked","data-public-link-id","disabled"],m={key:0},p={class:"remove-link"},h={key:3,class:"row submit-row"},k={class:"col-md-12"};var b=s(2124),g=s(2321),L=s(2243);const v={name:"ListPublicLinks",props:{isReadOnly:{type:Boolean,default:!1},overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},data:()=>({isFetchingData:!0,publicLinkResults:[]}),watch:{overrideLocationId(){this.getPublicLinks()}},components:{Icon:g.In},computed:{...(0,b.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},mixins:[L.A],methods:{async copyPublicLink(e){const t=`${window.location.origin}${this.rootUrl}public/${this.getDestination()}/${this.getLocationId()}/${e}/`;try{await navigator.clipboard.writeText(t),this.$store.dispatch("newToast",{header:"Public Link Copied",message:"Public Link has successfully copied to the clipboard",extra_classes:"bg-success"})}catch(e){this.$store.dispatch("newToast",{header:"Can not copy public link",message:"Sorry, we failed to copy the public link",extra_classes:"bg-danger",delay:0})}},createPublicLink(){this.$store.dispatch("newToast",{header:"Creating New Toast",message:"Please wait whilst we create the toast",extra_classes:"bg-warning text-dark",delay:0,unique_type:"create_public_link"}),this.axios.post(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/create/`).then((e=>{this.$store.dispatch("newToast",{header:"Successful new Public Link",message:"We have been able to create a new public link",extra_classes:"bg-success",unique_type:"create_public_link"}),this.publicLinkResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not create new public link",message:`Sorry, we failed to create the new public link. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"create_public_link"})}))},deletePublicLink(e){const t=new FormData;t.set("public_link_id",e),this.$store.dispatch("newToast",{header:"Deleting Public Link",message:"Deleting Public Link",extra_classes:"bg-warning text-dark",delay:0,unique_type:"public_link_delete"}),this.axios.post(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/delete/`,t).then((()=>{this.publicLinkResults=this.publicLinkResults.filter((t=>t.public_link_id!==e)),this.$store.dispatch("newToast",{header:"Successfully Deleted Public Link",message:"Successfully Deleted Public Link",extra_classes:"bg-success",unique_type:"public_link_delete"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Deleting Public Link",message:`Error - could not delete link. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"public_link_delete"})}))},formatUrl(e){if(""===e||void 0===e)return"Data error!";const t=e.slice(0,7);return`${window.location.origin}${this.rootUrl}public/${this.getDestination()}/${this.getLocationId()}/${t}...`},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},getPublicLinks(){0!==this.getLocationId()&&this.axios(`${this.rootUrl}public_data/${this.getDestination()}/${this.getLocationId()}/get_links/`).then((e=>{this.publicLinkResults=e.data,this.isFetchingData=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error fetching Public Links",message:`We had an issue fetching the public links for this object. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},updateIsActive(e){const t=e.target.dataset.publicLinkId;this.$store.dispatch("newToast",{header:"Updating Active Status for Private Link",message:"Please wait - we are updating the status",extra_classes:"bg-warning text-dark",delay:0,unique_type:`is_active-${t}`});let s="False";e.target.checked&&(s="True");const i=new FormData;i.set("public_link_id",t),i.set("public_link_is_active",s),this.axios.post(`${this.rootUrl}public_data/${this.destination}/${this.locationId}/update_link/`,i).then((()=>{this.$store.dispatch("newToast",{header:"Successfully Updated",message:"We have updated the is active status for the link",extra_classes:"bg-success",unique_type:`is_active-${t}`})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Active Status for Private Link",message:`We are sorry, something went wrong. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:`is_active-${t}`})}))}},mounted(){this.$nextTick((()=>{this.getPublicLinks()}))}},_=(0,s(6262).A)(v,[["render",function(e,t,s,b,g,L){const v=(0,i.g2)("Icon");return(0,i.uX)(),(0,i.CE)(i.FK,null,[t[4]||(t[4]=(0,i.Lk)("h2",null,"Public Links",-1)),t[5]||(t[5]=(0,i.Lk)("p",{class:"text-instructions"}," The following will be public links you can send to clients. The links will contain certain information of the current object. i.e. it's status and description. Becareful who you send the links too! ",-1)),g.isFetchingData?((0,i.uX)(),(0,i.CE)("div",a,"Currently loading data...")):(0,i.Q3)("v-if",!0),!1===g.isFetchingData&&0===g.publicLinkResults.length?((0,i.uX)(),(0,i.CE)("div",l," Sorry. There are no public links setup for this object. ")):((0,i.uX)(),(0,i.CE)("table",o,[(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[t[2]||(t[2]=(0,i.Lk)("td",null,"Public Link",-1)),t[3]||(t[3]=(0,i.Lk)("td",{style:{"text-align":"center",width:"100px"}},"Is Active",-1)),e.userLevel>1?((0,i.uX)(),(0,i.CE)("td",r)):(0,i.Q3)("v-if",!0)])]),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(g.publicLinkResults,(s=>((0,i.uX)(),(0,i.CE)("tr",{key:s.public_link_id},[(0,i.Lk)("td",null,[(0,i.Lk)("button",{type:"button",class:"btn btn-link",onClick:e=>L.copyPublicLink(s.public_link_id)},(0,n.toDisplayString)(L.formatUrl(s.public_link_id)),9,d)]),(0,i.Lk)("td",c,[(0,i.Lk)("input",{class:"form-check-input",type:"checkbox",checked:s.public_link_is_active,"data-public-link-id":s.public_link_id,disabled:e.userLevel<=1,onChange:t[0]||(t[0]=(...e)=>L.updateIsActive&&L.updateIsActive(...e))},null,40,u)]),e.userLevel>1?((0,i.uX)(),(0,i.CE)("td",m,[(0,i.Lk)("span",p,[(0,i.bF)(v,{icon:e.icons.trashCan,onClick:e=>L.deletePublicLink(s.public_link_id)},null,8,["icon","onClick"])])])):(0,i.Q3)("v-if",!0)])))),128))])])),!1===s.isReadOnly&&e.userLevel>1?((0,i.uX)(),(0,i.CE)("div",h,[(0,i.Lk)("div",k,[(0,i.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[1]||(t[1]=(...e)=>L.createPublicLink&&L.createPublicLink(...e))}," Create Public Link ")])])):(0,i.Q3)("v-if",!0)],64)}]])},8297:(e,t,s)=>{s.d(t,{A:()=>L});var i=s(641),n=s(33);const a={key:0},l={class:"col-md-10 object-link--details"},o=["href"],r={class:"object-link--link"},d={class:"object-link--title"},c={class:"col-md-2 object-link--status"},u={key:0,class:"object-link--remove"},m={key:1,class:"spacer-extra"};var p=s(2124),h=s(2321),k=s(9336),b=s(2243);const g={name:"SubObjectLinks",components:{Icon:h.In},emits:["update_link_results"],mixins:[b.A],props:{canDelete:{type:Boolean,default:!0},linkResults:{type:Array,default:()=>[]},title:{type:String,default:"Relates"}},computed:{...(0,p.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{confirmRemoveLink(e){this.$store.commit("updateObjectLink",{objectLink:e}),new k.aF(document.getElementById("confirmLinkDeleteModal")).show()}}},L=(0,s(6262).A)(g,[["render",function(e,t,s,p,h,k){const b=(0,i.g2)("Icon");return(0,i.uX)(),(0,i.CE)(i.FK,null,[s.linkResults.length>0?((0,i.uX)(),(0,i.CE)("h3",a,(0,n.toDisplayString)(s.title),1)):(0,i.Q3)("v-if",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.linkResults,(a=>((0,i.uX)(),(0,i.CE)("div",{key:a.pk,class:"row object-link"},[(0,i.Q3)(" Object ID + Title "),(0,i.Lk)("div",l,[(0,i.Lk)("a",{href:`${this.rootUrl}${a.object_type}_information/${a.object_id}/`,target:"_blank",rel:"noopener noreferrer"},[(0,i.Lk)("div",r,(0,n.toDisplayString)(a.object_type)+" - "+(0,n.toDisplayString)(a.object_id),1),(0,i.Lk)("div",d,(0,n.toDisplayString)(a.object_title),1)],8,o)]),(0,i.Q3)(" Object Status "),(0,i.Lk)("div",c,[t[0]||(t[0]=(0,i.Lk)("span",null,"Object Status: ",-1)),(0,i.Lk)("span",null,(0,n.toDisplayString)(a.object_status),1)]),(0,i.Q3)(" Object Delete "),e.userLevel>=2&&!0===s.canDelete?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.bF)(b,{icon:e.icons.trashCan,onClick:e=>k.confirmRemoveLink(a)},null,8,["icon","onClick"])])):(0,i.Q3)("v-if",!0)])))),128)),s.linkResults.length>0?((0,i.uX)(),(0,i.CE)("div",m)):(0,i.Q3)("v-if",!0)],64)}]])},9735:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(641);const n={class:"modal fade",id:"confirmFolderDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmFolderDelete","aria-hidden":"true"},a={class:"modal-dialog"},l={class:"modal-content"},o={class:"modal-footer"};var r=s(2124);const d={name:"ConfirmFolderDelete",mixins:[s(9022).A],computed:{...(0,r.L8)({destination:"getDestination",folderRemoveId:"getFolderRemoveId",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{deleteFolder(){if(""===this.folderRemoveId)return;const e=this.folderRemoveId,t=new FormData;t.set("folder_id",this.folderRemoveId),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove_folder/`,t).then((()=>{this.$store.dispatch("removeFolder",{folder_id:e}),this.closeModal()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing folder",message:`We could not remove your folder. Error - ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){this.$store.commit({type:"updateFolderRemoveId",documentRemoveKey:""}),document.getElementById("confirmFolderDeleteButton").click(),this.reopenCardInformation()}}},c=(0,s(6262).A)(d,[["render",function(e,t,s,r,d,c){return(0,i.uX)(),(0,i.CE)("div",n,[(0,i.Lk)("div",a,[(0,i.Lk)("div",l,[t[2]||(t[2]=(0,i.Lk)("div",{class:"modal-header"},[(0,i.Lk)("h5",{class:"modal-title",id:"confirmFolderDelete"}," Please confirm Folder Deletion "),(0,i.Q3)(" TASK INFORMATION "),(0,i.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmFolderDeleteButton"})],-1)),t[3]||(t[3]=(0,i.Lk)("div",{class:"modal-body"}," Are you sure you want to delete the folder? All files under this folder will be deleted also. ",-1)),(0,i.Lk)("div",o,[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>c.closeModal&&c.closeModal(...e))}," No "),(0,i.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>c.deleteFolder&&c.deleteFolder(...e))}," Yes ")])])])])}]])}}]);