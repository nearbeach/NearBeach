"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7133],{1401:(e,t,a)=>{a.d(t,{Z:()=>g});var l=a(6252),o=a(3577);const r={class:"row"},s={class:"col-md-4"},n=(0,l._)("h2",null,"Group Permissions",-1),i={class:"text-instructions"},d=(0,l._)("p",{class:"text-instructions"}," If you do not add one of your own group(s), you will only get readonly access. ",-1),u={class:"col-md-8"},c=(0,l.Uk)("Group List "),p={key:0,class:"error"};var m=a(3766),f=a(2587);const h={name:"GroupPermissions",setup:()=>({v$:(0,m.ZP)()}),components:{NSelect:a(9860).Z},props:{destination:{type:String,default:""},groupResults:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!0},userGroupResults:{type:Array,default:()=>[]}},watch:{groupModel:function(){this.$emit("update_group_model",this.groupModel)}},data:()=>({groupFixResults:[],groupModel:[]}),validations:{groupModel:{required:f.C1}},mounted(){this.groupFixResults=this.groupResults.map((e=>({value:e.pk,label:e.fields.group_name}))),this.groupModel=this.userGroupResults.map((e=>e.group_id))}},g=(0,a(3744).Z)(h,[["render",function(e,t,a,m,f,h){const g=(0,l.up)("n-select");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",s,[n,(0,l._)("p",i," Add or remove groups from this "+(0,o.toDisplayString)(a.destination)+". Adding a group will allow users from that group to access this "+(0,o.toDisplayString)(a.destination)+". ",1),d]),(0,l._)("div",u,[(0,l._)("label",null,[c,!m.v$.groupModel.required&&a.isDirty?((0,l.wg)(),(0,l.iD)("span",p," Please select at least one group.")):(0,l.kq)("v-if",!0)]),(0,l.Wm)(g,{options:f.groupFixResults,label:"group",value:f.groupModel,"onUpdate:value":t[0]||(t[0]=e=>f.groupModel=e),multiple:""},null,8,["options","value"])])])}]])},6827:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Me});var l=a(6252);const o={class:"card"},r={class:"card-body"},s=(0,l._)("h1",null,"New Request for Change",-1),n=(0,l._)("hr",null,null,-1),i=(0,l._)("hr",null,null,-1),d=(0,l._)("hr",null,null,-1),u=(0,l._)("hr",null,null,-1),c=(0,l._)("hr",null,null,-1),p=(0,l._)("hr",null,null,-1),m=(0,l._)("hr",null,null,-1),f={class:"row submit-row"},h={class:"col-md-12"};var g=a(1010),M=a(9963);const v=(0,l._)("hr",null,null,-1),_={class:"row"},y=(0,l._)("div",{class:"col-md-4"},[(0,l._)("h2",null,"Type and Version"),(0,l._)("p",{class:"text-instructions"}," Please specify how urgent this RFC's status really is. Optionally you can also specify the version or release number. ")],-1),b={class:"col-md-4"},S={class:"form-group"},R=(0,l.Uk)(" Request for Change Type: "),w={key:0,class:"error"},D={class:"col-md-4"},T={class:"form-group"},k=(0,l.Uk)(" Version/Release Number "),I={key:0,class:"error"},V=(0,l._)("hr",null,null,-1),C={class:"row"},$=(0,l._)("div",{class:"col-md-4"},[(0,l._)("h2",null,"Important Dates"),(0,l._)("p",{class:"text-instructions"}," Please supply the implementation start and end dates. Please also suply the release date of the change to the general consumer. ")],-1),q={class:"row col-md-8"},U={class:"col-md-12"},E={key:0,class:"error"},L={class:"col-sm-4"},P={class:"form-group"},x=(0,l._)("label",null,"Implementation Start: ",-1),Z={class:"col-sm-4"},B={class:"form-group"},F=(0,l._)("label",null,"Implementation End: ",-1),W={class:"col-sm-4"},A={class:"form-group"},G=(0,l._)("label",null,"Release Date: ",-1),N=(0,l._)("hr",null,null,-1),O={class:"row"},H=(0,l._)("div",{class:"col-md-4"},[(0,l._)("h2",null,"Change LEAD: "),(0,l._)("p",{class:"text-instructions"}," Please supply the LEAD who will be leading this Request for Change. ")],-1),j={class:"col-md-4"},X={class:"form-group"},Y=(0,l.Uk)(" LEAD: "),z={key:0,class:"error"},J=(0,l._)("hr",null,null,-1);var K=a(9974),Q=a(9860),ee=a(1401),te=a(431),ae=a(9113),le=a(4250),oe=a(3766),re=a(2587);const se=a(9669),ne={name:"RfcDetails",setup:()=>({v$:(0,oe.ZP)()}),components:{GroupPermissions:ee.Z,NDatePicker:K.Z,NSelect:Q.Z},props:{groupResults:{type:Array,default:()=>[]},userGroupResults:{type:Array,default:()=>[]}},mixins:[te.Z,ae.Z],data(){return{groupModel:[],rfcChangeLeadFixList:[],rfcChangeLeadModel:"",rfcImplementationStartModel:this.defaultStartDate(),rfcImplementationEndModel:this.defaultEndDate(),rfcReleaseModel:this.defaultReleaseDate(),rfcStatus:[{label:"Draft",value:1},{label:"Waiting for approval",value:2},{label:"Approved",value:3},{label:"Started",value:4},{label:"Finished",value:5},{label:"Rejected",value:6}],rfcType:[{label:"Emergency",value:4},{label:"High",value:3},{label:"Medium",value:2},{label:"Low",value:1}],rfcTypeModel:"",rfcVersionModel:"",searchTimeout:""}},validations:{groupModel:{required:re.C1},rfcChangeLeadModel:{required:re.C1},rfcImplementationStartModel:{required:re.C1},rfcImplementationEndModel:{required:re.C1},rfcReleaseModel:{required:re.C1},rfcTypeModel:{required:re.C1},rfcVersionModel:{maxLength:(0,re.BS)(25)}},computed:{...(0,le.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),checkDateValidation:function(){const e=!this.v$.rfcImplementationStartModel.required&&this.v$.rfcImplementationStartModel.$dirty,t=!this.v$.rfcImplementationEndModel.required&&this.v$.rfcImplementationEndModel.$dirty,a=!this.v$.rfcReleaseModel.required&&this.v$.rfcReleaseModel.$dirty;return e||t||a}},methods:{defaultStartDate:()=>{let e=new Date;return e.setHours(9),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()},defaultEndDate:()=>{let e=new Date;return e.setHours(16),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),new Date(e.setDate(e.getDate()+14)),e.getTime()},defaultReleaseDate:()=>{let e=new Date;return e.setHours(17),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),new Date(e.setDate(e.getDate()+14)),e.getTime()},fetchOptions:function(e,t){this.searchTrigger({return_function:this.getChangeLeadData,searchTimeout:this.searchTimeout,search:e,loading:t})},getChangeLeadData:function(e,t){const a=new FormData;a.set("search",e),se.post(`${this.rootUrl}object_data/lead_user_list/`,a).then((e=>{this.rfcChangeLeadFixList=[],e.data.forEach((e=>{var t={value:e.pk,label:`${e.fields.username} - ${e.fields.first_name} ${e.fields.last_name}`};this.rfcChangeLeadFixList.push(t)}))})).catch((function(e){document.getElementById("errorModalContent").innerHTML=`<strong>Search Lead User Issue:</strong><br/>${e}`,new bootstrap.Modal(document.getElementById("errorModal"),{keyboard:!1}).show(),document.getElementById("loader").style.display="none"}))},updateGroupModel:function(e){this.groupModel=e,this.updateValues("groupModel",e),this.updateValidation()},updateValidation:function(){this.v$.$touch(),this.$emit("update_validation",{tab:"tab_1",value:!this.v$.$invalid})},updateValues:function(e,t){this.$emit("update_values",{modelName:e,modelValue:t})}},watch:{rfcChangeLeadModel:function(){this.updateValues("rfcChangeLeadModel",this.rfcChangeLeadModel),this.updateValidation()},rfcImplementationStartModel:function(){this.rfcImplementationStartModel>this.rfcImplementationEndModel&&(this.rfcImplementationEndModel=this.rfcImplementationStartModel),this.updateValues("rfcImplementationStartModel",this.rfcImplementationStartModel),this.updateValidation()},rfcImplementationEndModel:function(){this.rfcImplementationEndModel>this.rfcReleaseModel&&(this.rfcReleaseModel=this.rfcImplementationEndModel),this.rfcImplementationStartModel>this.rfcImplementationEndModel&&(this.rfcImplementationEndModel=this.rfcImplementationStartModel),this.updateValues("rfcImplementationEndModel",this.rfcImplementationEndModel),this.updateValidation()},rfcReleaseModel:function(){this.rfcImplementationEndModel>this.rfcReleaseModel&&(this.rfcReleaseModel=this.rfcImplementationEndModel),this.updateValues("rfcReleaseModel",this.rfcReleaseModel),this.updateValidation()},rfcStatus:function(){this.updateValues("rfcStatus",this.rfcStatus),this.updateValidation()},rfcType:function(){this.updateValues("rfcType",this.rfcType),this.updateValidation()},rfcTypeModel:function(){this.updateValues("rfcTypeModel",this.rfcTypeModel),this.updateValidation()},rfcVersionModel:function(){this.updateValues("rfcVersionModel",this.rfcVersionModel),this.updateValidation()}},mounted(){setTimeout((()=>{this.getChangeLeadData()}),200),this.updateValues("rfcImplementationEndModel",this.rfcImplementationEndModel),this.updateValues("rfcReleaseModel",this.rfcReleaseModel),this.updateValues("rfcImplementationStartModel",this.rfcImplementationStartModel),this.v$.$touch()}};var ie=a(3744);const de=(0,ie.Z)(ne,[["render",function(e,t,a,o,r,s){const n=(0,l.up)("n-select"),i=(0,l.up)("n-date-picker"),d=(0,l.up)("group-permissions");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.kq)(" Request for Change Types and Release Number "),v,(0,l._)("div",_,[y,(0,l._)("div",b,[(0,l._)("div",S,[(0,l._)("label",null,[R,!o.v$.rfcTypeModel.required&&o.v$.rfcTypeModel.$dirty?((0,l.wg)(),(0,l.iD)("span",w," Please select a Change Type.")):(0,l.kq)("v-if",!0)]),(0,l.Wm)(n,{options:r.rfcType,value:r.rfcTypeModel,"onUpdate:value":t[0]||(t[0]=e=>r.rfcTypeModel=e)},null,8,["options","value"])])]),(0,l._)("div",D,[(0,l._)("div",T,[(0,l._)("label",null,[k,o.v$.rfcVersionModel.maxLength?(0,l.kq)("v-if",!0):((0,l.wg)(),(0,l.iD)("span",I," Sorry - too many characters."))]),(0,l.wy)((0,l._)("input",{type:"text",maxlength:"25",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>r.rfcVersionModel=e)},null,512),[[M.vModelText,r.rfcVersionModel]])])])]),(0,l.kq)(" Implementation and Release Dates "),V,(0,l._)("div",C,[$,(0,l._)("div",q,[(0,l.kq)(" Validation row "),(0,l._)("div",U,[s.checkDateValidation?((0,l.wg)(),(0,l.iD)("span",E," Please select an appropriate date for ALL fields.")):(0,l.kq)("v-if",!0)]),(0,l.kq)(" Dates Row "),(0,l._)("div",L,[(0,l._)("div",P,[x,(0,l.Wm)(i,{type:"datetime",value:r.rfcImplementationStartModel,"onUpdate:value":t[2]||(t[2]=e=>r.rfcImplementationStartModel=e),"is-date-disabled":e.disableDate,"input-class":"form-control"},null,8,["value","is-date-disabled"])])]),(0,l._)("div",Z,[(0,l._)("div",B,[F,(0,l.Wm)(i,{type:"datetime",value:r.rfcImplementationEndModel,"onUpdate:value":t[3]||(t[3]=e=>r.rfcImplementationEndModel=e),"is-date-disabled":e.disableDate,"input-class":"form-control"},null,8,["value","is-date-disabled"])])]),(0,l._)("div",W,[(0,l._)("div",A,[G,(0,l.Wm)(i,{type:"datetime",value:r.rfcReleaseModel,"onUpdate:value":t[4]||(t[4]=e=>r.rfcReleaseModel=e),"is-date-disabled":e.disableDate,"input-class":"form-control"},null,8,["value","is-date-disabled"])])])])]),(0,l.kq)(" RFC Change Lead User "),N,(0,l._)("div",O,[H,(0,l._)("div",j,[(0,l._)("div",X,[(0,l._)("label",null,[Y,!o.v$.rfcChangeLeadModel.required&&o.v$.rfcChangeLeadModel.$dirty?((0,l.wg)(),(0,l.iD)("span",z," Please select a Change Lead.")):(0,l.kq)("v-if",!0)]),(0,l.Wm)(n,{options:r.rfcChangeLeadFixList,onSearch:s.fetchOptions,value:r.rfcChangeLeadModel,"onUpdate:value":t[5]||(t[5]=e=>r.rfcChangeLeadModel=e)},null,8,["options","onSearch","value"]),(0,l.kq)(" TO DO FIX THIS ")])])]),(0,l.kq)(" Group Permissions "),J,(0,l.Wm)(d,{"group-results":a.groupResults,destination:"request_for_change","is-dirty":o.v$.groupModel.$dirty,"user-group-results":a.userGroupResults,onUpdate_group_model:t[6]||(t[6]=e=>s.updateGroupModel(e))},null,8,["group-results","is-dirty","user-group-results"])])}]]);var ue=a(2984),ce=a(7156),pe=a(2898),me=a(2320),fe=a(3058);const he=a(9669),ge={name:"NewRequestForChange",components:{RfcBackoutPlan:pe.Z,RfcDescription:g.Z,RfcDetails:de,RfcImplementationPlan:me.Z,RfcRisk:ue.Z,RfcTestPlan:ce.Z},props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userGroupResults:{type:Array,default:()=>[]}},emits:["onComplete"],mixins:[fe.Z],data:()=>({currentTab:0,rfcData:{groupModel:[],rfcBackoutPlan:"",rfcChangeLeadModel:{},rfcImpactModel:{},rfcImplementationEndModel:"",rfcImplementationPlanModel:"",rfcImplementationStartModel:"",rfcPriorityModel:{},rfcReleaseModel:"",rfcRiskModel:{},rfcRiskSummaryModel:"",rfcSummaryModel:"",rfcTestPlanModel:"",rfcTitleModel:"",rfcTypeModel:{},rfcVersionModel:""},validationData:{tab_0:!1,tab_1:!1,tab_2:!1,tab_3:!1,tab_4:!1,tab_5:!1}}),methods:{beforeChange:function(){return this.validationData[`tab_${this.currentTab}`]},onChange:function(e,t){this.currentTab=t,window.scrollTo(0,60)},onComplete:function(){const e=new FormData,t=this.rfcData;e.set("rfc_title",t.rfcTitleModel),e.set("rfc_summary",t.rfcSummaryModel),e.set("rfc_type",t.rfcTypeModel),e.set("rfc_implementation_start_date",new Date(t.rfcImplementationStartModel).toISOString()),e.set("rfc_implementation_end_date",new Date(t.rfcImplementationEndModel).toISOString()),e.set("rfc_implementation_release_date",new Date(t.rfcReleaseModel).toISOString()),e.set("rfc_version_number",t.rfcVersionModel),e.set("rfc_lead",t.rfcChangeLeadModel),e.set("rfc_priority",t.rfcPriorityModel),e.set("rfc_risk",t.rfcRiskModel),e.set("rfc_impact",t.rfcImpactModel),e.set("rfc_risk_and_impact_analysis",t.rfcRiskSummaryModel),e.set("rfc_implementation_plan",t.rfcImplementationPlanModel),e.set("rfc_backout_plan",t.rfcBackoutPlan),e.set("rfc_test_plan",t.rfcTestPlanModel),t.groupModel.forEach(((t,a)=>{e.append("group_list",t)})),he.post(`${this.rootUrl}new_request_for_change/save/`,e).then((e=>{window.location.href=e.data})).catch((e=>{this.showErrorModal(e,"request_for_change","")}))},updateValidation:function(e){this.validationData[e.tab]=e.value},updateValues:function(e){this.rfcData[e.modelName]=e.modelValue}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},Me=(0,ie.Z)(ge,[["render",function(e,t,a,g,M,v){const _=(0,l.up)("rfc-description"),y=(0,l.up)("rfc-details"),b=(0,l.up)("rfc-risk"),S=(0,l.up)("rfc-implementation-plan"),R=(0,l.up)("rfc-backout-plan"),w=(0,l.up)("rfc-test-plan");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",r,[s,n,(0,l.kq)(" DESCRIPTION "),(0,l.Wm)(_,{onUpdate_values:t[0]||(t[0]=e=>v.updateValues(e)),onUpdate_validation:t[1]||(t[1]=e=>v.updateValidation(e)),"static-url":a.staticUrl},null,8,["static-url"]),i,(0,l.kq)(" Details "),(0,l.Wm)(y,{"group-results":a.groupResults,"user-group-results":a.userGroupResults,onUpdate_validation:t[2]||(t[2]=e=>v.updateValidation(e)),onUpdate_values:t[3]||(t[3]=e=>v.updateValues(e))},null,8,["group-results","user-group-results"]),d,(0,l.kq)(" Risk "),(0,l.Wm)(b,{onUpdate_values:t[4]||(t[4]=e=>v.updateValues(e)),onUpdate_validation:t[5]||(t[5]=e=>v.updateValidation(e))}),u,(0,l.kq)(" Implementation Plan "),(0,l.Wm)(S,{onUpdate_values:t[6]||(t[6]=e=>v.updateValues(e)),onUpdate_validation:t[7]||(t[7]=e=>v.updateValidation(e))}),c,(0,l.kq)(" Backout Plan "),(0,l.Wm)(R,{onUpdate_values:t[8]||(t[8]=e=>v.updateValues(e)),onUpdate_validation:t[9]||(t[9]=e=>v.updateValidation(e))}),p,(0,l.kq)(" Test Plan "),(0,l.Wm)(w,{onUpdate_values:t[10]||(t[10]=e=>v.updateValues(e)),onUpdate_validation:t[11]||(t[11]=e=>v.updateValidation(e))}),(0,l.kq)(" Submit Button "),m,(0,l._)("div",f,[(0,l._)("div",h,[(0,l._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[12]||(t[12]=(...e)=>v.onComplete&&v.onComplete(...e))},"Create new Request for Change")])])])])}]])},1010:(e,t,a)=>{a.d(t,{Z:()=>S});var l=a(6252),o=a(9963);const r={class:"row"},s=(0,l._)("div",{class:"col-md-4"},[(0,l._)("h2",null,"Description"),(0,l._)("p",{class:"text-instructions"}," Place a detailed description here. This should cover what your Request For Change (RFC) will entail and why it should be implemented within the time frames specified below. ")],-1),n={class:"col-md-8",style:{"min-height":"610px"}},i={class:"form-group"},d=(0,l.Uk)(" Request for Change Title: "),u={key:0,class:"error"},c=(0,l._)("br",null,null,-1),p=(0,l.Uk)("Request for Change Summary: "),m={key:0,class:"error"},f={key:1,class:"error"},h=(0,l._)("br",null,null,-1),g=["src"];var M=a(3766),v=a(2587),_=a(7267),y=a(4250);const b={name:"RfcDescription",setup:()=>({v$:(0,M.ZP)()}),components:{editor:_.Z},props:{isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:function(){return[]}}},data:()=>({rfcSummaryModel:"",rfcTitleModel:""}),computed:{...(0,y.Se)({staticUrl:"getStaticUrl"})},validations:{rfcSummaryModel:{required:v.C1,maxLength:(0,v.BS)(63e4)},rfcTitleModel:{required:v.C1,maxLength:(0,v.BS)(250)}},methods:{updateValues:function(e,t){this.$emit("update_values",{modelName:e,modelValue:t})}},watch:{rfcSummaryModel:function(){this.updateValues("rfcSummaryModel",this.rfcSummaryModel)},rfcTitleModel:function(){this.updateValues("rfcTitleModel",this.rfcTitleModel)}},updated(){this.v$.$touch(),this.$emit("update_validation",{tab:"tab_0",value:!this.v$.$invalid})},mounted(){this.rfcResults.length>0&&(this.rfcSummaryModel=this.rfcResults[0].fields.rfc_summary,this.rfcTitleModel=this.rfcResults[0].fields.rfc_title),this.v$.$touch()}},S=(0,a(3744).Z)(b,[["render",function(e,t,a,M,v,_){const y=(0,l.up)("editor");return(0,l.wg)(),(0,l.iD)("div",r,[s,(0,l._)("div",n,[(0,l._)("div",i,[(0,l._)("label",null,[d,!M.v$.rfcTitleModel.required&&M.v$.rfcTitleModel.$dirty?((0,l.wg)(),(0,l.iD)("span",u," Please suppy a title.")):(0,l.kq)("v-if",!0)]),(0,l.wy)((0,l._)("input",{type:"text",maxlength:"255",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=t=>e.rfcTitleModel=t)},null,512),[[o.vModelText,e.rfcTitleModel]])]),c,(0,l.kq)(" RFC SUMMARY "),(0,l._)("label",null,[p,!M.v$.rfcSummaryModel.required&&M.v$.rfcSummaryModel.$dirty?((0,l.wg)(),(0,l.iD)("span",m," Please supply a description.")):(0,l.kq)("v-if",!0),M.v$.rfcSummaryModel.maxLength?(0,l.kq)("v-if",!0):((0,l.wg)(),(0,l.iD)("span",f," Sorry - too many characters."))]),h,(0,l._)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,g),(0,l.Wm)(y,{init:{height:500,menubar:!1,plugins:["lists","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat"]},content_css:!1,skin:!1,disabled:a.isReadOnly,modelValue:e.rfcSummaryModel,"onUpdate:modelValue":t[1]||(t[1]=t=>e.rfcSummaryModel=t)},null,8,["disabled","modelValue"])])])}]])},3058:(e,t,a)=>{a.d(t,{Z:()=>o});var l=a(9909);const o={methods:{showErrorModal:function(e,t,a){new l.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new l.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new l.u_(document.getElementById("errorModal")).show()}}}},9113:(e,t,a)=>{a.d(t,{Z:()=>l});const l={methods:{searchTrigger:function(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined:function(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined:function(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);