"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7133],{5553:(e,t,l)=>{l.d(t,{Z:()=>g});var a=l(6252),r=l(3577);const s={class:"row"},o={class:"col-md-4"},i=(0,a._)("h2",null,"Group Permissions",-1),n={class:"text-instructions"},d=(0,a._)("p",{class:"text-instructions"}," If you do not add one of your own group(s), you will only get readonly access. ",-1),u={class:"col-md-8"};var c=l(2001),p=l(5705),m=l(760),h=l(7939);const f={name:"GroupPermissions",setup:()=>({v$:(0,p.ZP)()}),components:{NSelect:c.Z,ValidationRendering:h.Z},props:{destination:{type:String,default:""},groupResults:{type:Array,default:()=>[]},isDirty:{type:Boolean,default:!0},userGroupResults:{type:Array,default:()=>[]}},watch:{groupModel(){this.$emit("update_group_model",this.groupModel)}},data:()=>({groupFixResults:[],groupModel:[]}),validations:{groupModel:{required:m.C1}},mounted(){this.groupFixResults=this.groupResults.map((e=>({value:e.pk,label:e.fields.group_name}))),this.groupModel=this.userGroupResults.map((e=>e.group_id))}},g=(0,l(3744).Z)(f,[["render",function(e,t,l,c,p,m){const h=(0,a.up)("validation-rendering"),f=(0,a.up)("n-select");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",o,[i,(0,a._)("p",n," Add or remove groups from this "+(0,r.toDisplayString)(l.destination)+". Adding a group will allow users from that group to access this "+(0,r.toDisplayString)(l.destination)+". ",1),d]),(0,a._)("div",u,[(0,a._)("label",null,[(0,a.Uk)("Group List "),(0,a.Wm)(h,{"error-list":c.v$.groupModel.$errors},null,8,["error-list"])]),(0,a.Wm)(f,{options:p.groupFixResults,label:"group",value:p.groupModel,"onUpdate:value":t[0]||(t[0]=e=>p.groupModel=e),multiple:""},null,8,["options","value"])])])}]])},9855:(e,t,l)=>{l.r(t),l.d(t,{default:()=>fe});var a=l(6252);const r={class:"card"},s={class:"card-body"},o=(0,a._)("h1",null,"New Request for Change",-1),i=(0,a._)("hr",null,null,-1),n=(0,a._)("hr",null,null,-1),d=(0,a._)("hr",null,null,-1),u=(0,a._)("hr",null,null,-1),c=(0,a._)("hr",null,null,-1),p=(0,a._)("hr",null,null,-1),m=(0,a._)("hr",null,null,-1),h={class:"row submit-row"},f={class:"col-md-12"};var g=l(6670),M=l(9963);const _=(0,a._)("hr",null,null,-1),v={class:"row"},y=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Type and Version"),(0,a._)("p",{class:"text-instructions"}," Please specify how urgent this RFC's status really is. Optionally you can also specify the version or release number. ")],-1),b={class:"col-md-4"},R={class:"form-group"},I={class:"col-md-4"},S={class:"form-group"},T=(0,a._)("hr",null,null,-1),V={class:"row"},k=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Important Dates"),(0,a._)("p",{class:"text-instructions"}," Please supply the implementation start and end dates. Please also suply the release date of the change to the general consumer. ")],-1),D={class:"row col-md-8"},w={class:"col-md-12"},C={key:0,class:"error"},U={class:"col-sm-4"},$={class:"form-group"},q=(0,a._)("label",null,"Implementation Start: ",-1),L={class:"col-sm-4"},E={class:"form-group"},P=(0,a._)("label",null,"Implementation End: ",-1),Z={class:"col-sm-4"},x={class:"form-group"},W=(0,a._)("label",null,"Release Date: ",-1),F=(0,a._)("hr",null,null,-1),A={class:"row"},B=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Change LEAD:"),(0,a._)("p",{class:"text-instructions"}," Please supply the LEAD who will be leading this Request for Change. ")],-1),G={class:"col-md-4"},N={class:"form-group"},O={key:0,class:"error"},j=(0,a._)("hr",null,null,-1);var H=l(1892),X=l(2001),Y=l(5553),z=l(431),J=l(9113),K=l(989),Q=l(5705),ee=l(760),te=l(7939);const le=l(9669),ae={name:"RfcDetails",setup:()=>({v$:(0,Q.ZP)()}),components:{GroupPermissions:Y.Z,NDatePicker:H.Z,NSelect:X.Z,ValidationRendering:te.Z},inject:["nextTick"],props:{groupResults:{type:Array,default:()=>[]},userGroupResults:{type:Array,default:()=>[]},uuid:{type:String,default:""}},mixins:[z.Z,J.Z],data(){return{groupModel:[],rfcChangeLeadFixList:[],rfcChangeLeadModel:"",rfcImplementationStartModel:this.defaultStartDate(),rfcImplementationEndModel:this.defaultEndDate(),rfcReleaseModel:this.defaultReleaseDate(),rfcStatus:[{label:"Draft",value:1},{label:"Waiting for approval",value:2},{label:"Approved",value:3},{label:"Started",value:4},{label:"Finished",value:5},{label:"Rejected",value:6}],rfcType:[{label:"Emergency",value:4},{label:"High",value:3},{label:"Medium",value:2},{label:"Low",value:1}],rfcTypeModel:"",rfcVersionModel:"",searchTimeout:""}},validations:{groupModel:{required:ee.C1},rfcChangeLeadModel:{required:ee.C1},rfcImplementationStartModel:{required:ee.C1},rfcImplementationEndModel:{required:ee.C1},rfcReleaseModel:{required:ee.C1},rfcTypeModel:{required:ee.C1},rfcVersionModel:{maxLength:(0,ee.BS)(25)}},computed:{...(0,K.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),checkDateValidation(){const e=!this.v$.rfcImplementationStartModel.required&&this.v$.rfcImplementationStartModel.$dirty,t=!this.v$.rfcImplementationEndModel.required&&this.v$.rfcImplementationEndModel.$dirty,l=!this.v$.rfcReleaseModel.required&&this.v$.rfcReleaseModel.$dirty;return e||t||l}},methods:{defaultStartDate:()=>{let e=new Date;return e.setHours(9),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()},defaultEndDate:()=>{let e=new Date;return e.setHours(16),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),new Date(e.setDate(e.getDate()+14)),e.getTime()},defaultReleaseDate:()=>{let e=new Date;return e.setHours(17),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),new Date(e.setDate(e.getDate()+14)),e.getTime()},fetchOptions(e,t){this.searchTrigger({return_function:this.getChangeLeadData,searchTimeout:this.searchTimeout,search:e,loading:t})},getChangeLeadData(e,t){const l=new FormData;l.set("search",e),le.post(`${this.rootUrl}object_data/lead_user_list/`,l).then((e=>{this.rfcChangeLeadFixList=[],e.data.forEach((e=>{var t={value:e.pk,label:`${e.fields.username} - ${e.fields.first_name} ${e.fields.last_name}`};this.rfcChangeLeadFixList.push(t)}))})).catch((function(e){document.getElementById("errorModalContent").innerHTML=`<strong>Search Lead User Issue:</strong><br/>${e}`,new bootstrap.Modal(document.getElementById("errorModal"),{keyboard:!1}).show(),document.getElementById("loader").style.display="none"}))},updateGroupModel(e){this.groupModel=e,this.updateValues("groupModel",e),this.updateValidation()},updateValidation(){this.v$.$touch(),this.$emit("update_validation",{tab:"tab_1",value:!this.v$.$invalid})},updateValues(e,t){this.$emit("update_values",{modelName:e,modelValue:t})}},watch:{rfcChangeLeadModel(){this.updateValues("rfcChangeLeadModel",this.rfcChangeLeadModel),this.updateValidation()},rfcImplementationStartModel(){this.rfcImplementationStartModel>this.rfcImplementationEndModel&&(this.rfcImplementationEndModel=this.rfcImplementationStartModel),this.updateValues("rfcImplementationStartModel",this.rfcImplementationStartModel),this.updateValidation()},rfcImplementationEndModel(){this.rfcImplementationEndModel>this.rfcReleaseModel&&(this.rfcReleaseModel=this.rfcImplementationEndModel),this.rfcImplementationStartModel>this.rfcImplementationEndModel&&(this.rfcImplementationEndModel=this.rfcImplementationStartModel),this.updateValues("rfcImplementationEndModel",this.rfcImplementationEndModel),this.updateValidation()},rfcReleaseModel(){this.rfcImplementationEndModel>this.rfcReleaseModel&&(this.rfcReleaseModel=this.rfcImplementationEndModel),this.updateValues("rfcReleaseModel",this.rfcReleaseModel),this.updateValidation()},rfcStatus(){this.updateValues("rfcStatus",this.rfcStatus),this.updateValidation()},rfcType(){this.updateValues("rfcType",this.rfcType),this.updateValidation()},rfcTypeModel(){this.updateValues("rfcTypeModel",this.rfcTypeModel),this.updateValidation()},rfcVersionModel(){this.updateValues("rfcVersionModel",this.rfcVersionModel),this.updateValidation()}},mounted(){this.nextTick((()=>{this.getChangeLeadData()})),this.updateValues("rfcImplementationEndModel",this.rfcImplementationEndModel),this.updateValues("rfcReleaseModel",this.rfcReleaseModel),this.updateValues("rfcImplementationStartModel",this.rfcImplementationStartModel),this.v$.$touch()}};var re=l(3744);const se=(0,re.Z)(ae,[["render",function(e,t,l,r,s,o){const i=(0,a.up)("validation-rendering"),n=(0,a.up)("n-select"),d=(0,a.up)("n-date-picker"),u=(0,a.up)("group-permissions");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.kq)(" Request for Change Types and Release Number "),_,(0,a._)("div",v,[y,(0,a._)("div",b,[(0,a._)("div",R,[(0,a._)("label",null,[(0,a.Uk)(" Request for Change Type: "),(0,a.Wm)(i,{"error-list":r.v$.rfcTypeModel.$errors},null,8,["error-list"])]),(0,a.Wm)(n,{options:s.rfcType,value:s.rfcTypeModel,"onUpdate:value":t[0]||(t[0]=e=>s.rfcTypeModel=e)},null,8,["options","value"])])]),(0,a._)("div",I,[(0,a._)("div",S,[(0,a._)("label",null,[(0,a.Uk)(" Version/Release Number "),(0,a.Wm)(i,{"error-list":r.v$.rfcVersionModel.$errors},null,8,["error-list"])]),(0,a.wy)((0,a._)("input",{type:"text",maxlength:"25",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>s.rfcVersionModel=e)},null,512),[[M.vModelText,s.rfcVersionModel]])])])]),(0,a.kq)(" Implementation and Release Dates "),T,(0,a._)("div",V,[k,(0,a._)("div",D,[(0,a.kq)(" Validation row "),(0,a._)("div",w,[o.checkDateValidation?((0,a.wg)(),(0,a.iD)("span",C," Please select an appropriate date for ALL fields.")):(0,a.kq)("v-if",!0)]),(0,a.kq)(" Dates Row "),(0,a._)("div",U,[(0,a._)("div",$,[q,(0,a.Wm)(d,{type:"datetime",value:s.rfcImplementationStartModel,"onUpdate:value":t[2]||(t[2]=e=>s.rfcImplementationStartModel=e),"is-date-disabled":e.disableDate,"input-class":"form-control"},null,8,["value","is-date-disabled"])])]),(0,a._)("div",L,[(0,a._)("div",E,[P,(0,a.Wm)(d,{type:"datetime",value:s.rfcImplementationEndModel,"onUpdate:value":t[3]||(t[3]=e=>s.rfcImplementationEndModel=e),"is-date-disabled":e.disableDate,"input-class":"form-control"},null,8,["value","is-date-disabled"])])]),(0,a._)("div",Z,[(0,a._)("div",x,[W,(0,a.Wm)(d,{type:"datetime",value:s.rfcReleaseModel,"onUpdate:value":t[4]||(t[4]=e=>s.rfcReleaseModel=e),"is-date-disabled":e.disableDate,"input-class":"form-control"},null,8,["value","is-date-disabled"])])])])]),(0,a.kq)(" RFC Change Lead User "),F,(0,a._)("div",A,[B,(0,a._)("div",G,[(0,a._)("div",N,[(0,a._)("label",null,[(0,a.Uk)(" LEAD: "),!r.v$.rfcChangeLeadModel.required&&r.v$.rfcChangeLeadModel.$dirty?((0,a.wg)(),(0,a.iD)("span",O," Please select a Change Lead.")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(n,{options:s.rfcChangeLeadFixList,onSearch:o.fetchOptions,value:s.rfcChangeLeadModel,"onUpdate:value":t[5]||(t[5]=e=>s.rfcChangeLeadModel=e)},null,8,["options","onSearch","value"]),(0,a.kq)(" TO DO FIX THIS ")])])]),(0,a.kq)(" Group Permissions "),j,(0,a.Wm)(u,{"group-results":l.groupResults,destination:"request_for_change","is-dirty":r.v$.groupModel.$dirty,"user-group-results":l.userGroupResults,onUpdate_group_model:t[6]||(t[6]=e=>o.updateGroupModel(e))},null,8,["group-results","is-dirty","user-group-results"])])}]]);var oe=l(7048),ie=l(7035),ne=l(8618),de=l(4041),ue=l(3058),ce=l(624),pe=l(4758);const me=l(9669),he={name:"NewRequestForChange",components:{RfcBackoutPlan:ne.Z,RfcDescription:g.Z,RfcDetails:se,RfcImplementationPlan:de.Z,RfcRisk:oe.Z,RfcTestPlan:ie.Z},props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userGroupResults:{type:Array,default:()=>[]},uuid:{type:String,default:""}},emits:["onComplete"],mixins:[ue.Z,ce.Z,pe.Z],data:()=>({currentTab:0,rfcData:{groupModel:[],rfcBackoutPlan:"",rfcChangeLeadModel:{},rfcImpactModel:{},rfcImplementationEndModel:"",rfcImplementationPlanModel:"",rfcImplementationStartModel:"",rfcPriorityModel:{},rfcReleaseModel:"",rfcRiskModel:{},rfcRiskSummaryModel:"",rfcSummaryModel:"",rfcTestPlanModel:"",rfcTitleModel:"",rfcTypeModel:{},rfcVersionModel:""},validationData:{tab_0:!1,tab_1:!1,tab_2:!1,tab_3:!1,tab_4:!1,tab_5:!1}}),methods:{beforeChange(){return this.validationData[`tab_${this.currentTab}`]},onChange(e,t){this.currentTab=t,window.scrollTo(0,60)},onComplete(){const e=new FormData,t=this.rfcData;e.set("rfc_title",t.rfcTitleModel),e.set("rfc_summary",this.replaceIncorrectImageUrl(t.rfcSummaryModel)),e.set("rfc_type",t.rfcTypeModel),e.set("rfc_implementation_start_date",new Date(t.rfcImplementationStartModel).toISOString()),e.set("rfc_implementation_end_date",new Date(t.rfcImplementationEndModel).toISOString()),e.set("rfc_implementation_release_date",new Date(t.rfcReleaseModel).toISOString()),e.set("rfc_version_number",t.rfcVersionModel),e.set("rfc_lead",t.rfcChangeLeadModel),e.set("rfc_priority",t.rfcPriorityModel),e.set("rfc_risk",t.rfcRiskModel),e.set("rfc_impact",t.rfcImpactModel),e.set("rfc_risk_and_impact_analysis",this.replaceIncorrectImageUrl(t.rfcRiskSummaryModel)),e.set("rfc_implementation_plan",this.replaceIncorrectImageUrl(t.rfcImplementationPlanModel)),e.set("rfc_backout_plan",this.replaceIncorrectImageUrl(t.rfcBackoutPlan)),e.set("rfc_test_plan",this.replaceIncorrectImageUrl(t.rfcTestPlanModel)),t.groupModel.forEach(((t,l)=>{e.append("group_list",t)})),me.post(`${this.rootUrl}new_request_for_change/save/`,e).then((e=>{window.location.href=e.data})).catch((e=>{this.showErrorModal(e,"request_for_change","")}))},updateValidation(e){this.validationData[e.tab]=e.value},updateValues(e){this.rfcData[e.modelName]=e.modelValue}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},fe=(0,re.Z)(he,[["render",function(e,t,l,g,M,_){const v=(0,a.up)("rfc-description"),y=(0,a.up)("rfc-details"),b=(0,a.up)("rfc-risk"),R=(0,a.up)("rfc-implementation-plan"),I=(0,a.up)("rfc-backout-plan"),S=(0,a.up)("rfc-test-plan"),T=(0,a.up)("n-config-provider");return(0,a.wg)(),(0,a.j4)(T,{theme:e.getTheme(l.theme)},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("div",s,[o,i,(0,a.kq)(" DESCRIPTION "),(0,a.Wm)(v,{uuid:l.uuid,onUpdate_values:t[0]||(t[0]=e=>_.updateValues(e)),onUpdate_validation:t[1]||(t[1]=e=>_.updateValidation(e)),"static-url":l.staticUrl},null,8,["uuid","static-url"]),n,(0,a.kq)(" Details "),(0,a.Wm)(y,{uuid:l.uuid,"group-results":l.groupResults,"user-group-results":l.userGroupResults,onUpdate_validation:t[2]||(t[2]=e=>_.updateValidation(e)),onUpdate_values:t[3]||(t[3]=e=>_.updateValues(e))},null,8,["uuid","group-results","user-group-results"]),d,(0,a.kq)(" Risk "),(0,a.Wm)(b,{uuid:l.uuid,onUpdate_values:t[4]||(t[4]=e=>_.updateValues(e)),onUpdate_validation:t[5]||(t[5]=e=>_.updateValidation(e))},null,8,["uuid"]),u,(0,a.kq)(" Implementation Plan "),(0,a.Wm)(R,{uuid:l.uuid,onUpdate_values:t[6]||(t[6]=e=>_.updateValues(e)),onUpdate_validation:t[7]||(t[7]=e=>_.updateValidation(e))},null,8,["uuid"]),c,(0,a.kq)(" Backout Plan "),(0,a.Wm)(I,{uuid:l.uuid,onUpdate_values:t[8]||(t[8]=e=>_.updateValues(e)),onUpdate_validation:t[9]||(t[9]=e=>_.updateValidation(e))},null,8,["uuid"]),p,(0,a.kq)(" Test Plan "),(0,a.Wm)(S,{uuid:l.uuid,onUpdate_values:t[10]||(t[10]=e=>_.updateValues(e)),onUpdate_validation:t[11]||(t[11]=e=>_.updateValidation(e))},null,8,["uuid"]),(0,a.kq)(" Submit Button "),m,(0,a._)("div",h,[(0,a._)("div",f,[(0,a._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[12]||(t[12]=(...e)=>_.onComplete&&_.onComplete(...e))},"Create new Request for Change")])])])])])),_:1},8,["theme"])}]])},6670:(e,t,l)=>{l.d(t,{Z:()=>y});var a=l(6252),r=l(9963);const s={class:"row"},o=(0,a._)("div",{class:"col-md-4"},[(0,a._)("h2",null,"Description"),(0,a._)("p",{class:"text-instructions"}," Place a detailed description here. This should cover what your Request For Change (RFC) will entail and why it should be implemented within the time frames specified below. ")],-1),i={class:"col-md-8",style:{"min-height":"610px"}},n={class:"form-group"},d=(0,a._)("br",null,null,-1),u=(0,a._)("br",null,null,-1),c=["src"];var p=l(5705),m=l(760),h=l(7939),f=l(7267),g=l(2299),M=l(4758),_=l(989);const v={name:"RfcDescription",setup:()=>({v$:(0,p.ZP)()}),components:{editor:f.Z,ValidationRendering:h.Z},props:{isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:()=>[]},uuid:{type:String,default:""}},mixins:[g.Z,M.Z],data:()=>({rfcSummaryModel:"",rfcTitleModel:""}),computed:{...(0,_.Se)({contentCss:"getContentCss",skin:"getSkin",staticUrl:"getStaticUrl"})},validations:{rfcSummaryModel:{required:m.C1,maxLength:(0,m.BS)(63e4)},rfcTitleModel:{required:m.C1,maxLength:(0,m.BS)(250)}},methods:{handleUploadImage(e,t){return""===this.uuid?this.uploadImage(e,t):this.newObjectUploadImage(e,t)},updateValues(e,t){this.$emit("update_values",{modelName:e,modelValue:t})}},watch:{rfcSummaryModel(){this.updateValues("rfcSummaryModel",this.rfcSummaryModel)},rfcTitleModel(){this.updateValues("rfcTitleModel",this.rfcTitleModel)}},updated(){this.v$.$touch(),this.$emit("update_validation",{tab:"tab_0",value:!this.v$.$invalid})},mounted(){this.rfcResults.length>0&&(this.rfcSummaryModel=this.rfcResults[0].fields.rfc_summary,this.rfcTitleModel=this.rfcResults[0].fields.rfc_title),this.v$.$touch()}},y=(0,l(3744).Z)(v,[["render",function(e,t,l,p,m,h){const f=(0,a.up)("validation-rendering"),g=(0,a.up)("editor");return(0,a.wg)(),(0,a.iD)("div",s,[o,(0,a._)("div",i,[(0,a._)("div",n,[(0,a._)("label",null,[(0,a.Uk)(" Request for Change Title: "),(0,a.Wm)(f,{"error-list":p.v$.rfcTitleModel.$errors},null,8,["error-list"])]),(0,a.wy)((0,a._)("input",{type:"text",maxlength:"255",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=t=>e.rfcTitleModel=t)},null,512),[[r.vModelText,e.rfcTitleModel]])]),d,(0,a.kq)(" RFC SUMMARY "),(0,a._)("label",null,[(0,a.Uk)(" Request for Change Summary: "),(0,a.Wm)(f,{"error-list":p.v$.rfcTitleModel.$errors},null,8,["error-list"])]),u,(0,a._)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,c),(0,a.Wm)(g,{init:{file_picker_types:"image",height:500,images_upload_handler:h.handleUploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat | image codesample"],skin:`${this.skin}`,content_css:`${this.contentCss}`},disabled:l.isReadOnly,modelValue:e.rfcSummaryModel,"onUpdate:modelValue":t[1]||(t[1]=t=>e.rfcSummaryModel=t)},null,8,["init","disabled","modelValue"])])])}]])},9113:(e,t,l)=>{l.d(t,{Z:()=>a});const a={methods:{searchTrigger(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);