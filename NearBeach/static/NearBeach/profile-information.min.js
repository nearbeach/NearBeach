"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7803],{8518:(e,t,s)=>{s.r(t),s.d(t,{default:()=>$});var a=s(641),l=s(33),r=s(3751);const o={class:"card"},i={class:"card-body"},n={class:"row"},d={class:"col-md-8"},u={class:"row"},m={class:"col-md-6"},c={class:"col-md-6"},h={class:"row"},p={class:"col-md-6"},k={class:"row"},v={class:"col-md-4"},L={class:"form-group"},g={key:0,class:"error"},f={class:"row submit-row"},b={class:"col-md-12"};var M=s(1080),y=s(9639),w=s(3855),U=s(404),T=s(9827);const x={name:"ProfileInformation",setup:()=>({v$:(0,y.Ay)()}),props:{rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:"light"},userResults:{type:Array,default:()=>[]}},components:{NSelect:M.A,ValidationRendering:U.A},data(){return{currentTheme:this.theme,emailModel:this.userResults[0].email,firstNameModel:this.userResults[0].first_name,lastNameModel:this.userResults[0].last_name,showMessage:!1,themeList:[{label:"Light Theme",value:"light"},{label:"Dark Theme",value:"dark"}],themeModel:this.theme}},watch:{themeModel(){this.showMessage=!0}},mixins:[T.A],validations:()=>({lastNameModel:{required:w.mw,maxLength:(0,w.Ru)(255)},firstNameModel:{required:w.mw,maxLength:(0,w.Ru)(255)}}),methods:{updateUser(){if(this.v$.$touch(),this.v$.$invalid)return void this.$store.dispatch("newToast",{header:"Please check validation",message:"Sorry, but can you please fix all validation issues.",extra_classes:"bg-warning text-dark",delay:0});const e=new FormData;e.set("username",this.userResults[0].id),e.set("first_name",this.firstNameModel),e.set("last_name",this.lastNameModel),e.set("theme",this.themeModel),this.showMessage=!1,document.documentElement.setAttribute("data-bs-theme",this.themeModel),this.$store.dispatch("newToast",{header:"Currently Updating",message:"Your Profile has been submitted. Please wait",unique_type:"update",extra_classes:"bg-warning text-dark",delay:0}),this.currentTheme=this.themeModel,this.axios.post(`${this.rootUrl}profile_information/update_data/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Update Successful",message:"Your Profile has been updated",unique_type:"update",extra_classes:"bg-success"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error updating profile",message:`Can not update your profile sorry. Error -> ${e}`,unique_type:"update",extra_classes:"bg-danger"})}))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},$=(0,s(6262).A)(x,[["render",function(e,t,s,M,y,w){const U=(0,a.g2)("validation-rendering"),T=(0,a.g2)("n-select"),x=(0,a.g2)("n-config-provider");return(0,a.uX)(),(0,a.Wv)(x,{theme:e.getTheme(y.currentTheme)},{default:(0,a.k6)((()=>[(0,a.Lk)("div",o,[(0,a.Lk)("div",i,[t[15]||(t[15]=(0,a.Lk)("h1",null,"My Profile",-1)),t[16]||(t[16]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",n,[t[12]||(t[12]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"User Details"),(0,a.Lk)("p",{class:"text-instructions"},"Please update your details.")],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("p",null,[t[5]||(t[5]=(0,a.Lk)("strong",null,"Username: ",-1)),(0,a.eW)((0,l.toDisplayString)(s.userResults[0].username),1)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",m,[(0,a.Lk)("label",null,[t[6]||(t[6]=(0,a.eW)(" First Name: ")),(0,a.bF)(U,{"error-list":M.v$.firstNameModel.$errors},null,8,["error-list"]),t[7]||(t[7]=(0,a.Lk)("br",null,null,-1))]),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>y.firstNameModel=e),class:"form-control"},null,512),[[r.vModelText,y.firstNameModel]])]),(0,a.Lk)("div",c,[(0,a.Lk)("label",null,[t[8]||(t[8]=(0,a.eW)(" Last Name: ")),(0,a.bF)(U,{"error-list":M.v$.firstNameModel.$errors},null,8,["error-list"]),t[9]||(t[9]=(0,a.Lk)("br",null,null,-1))]),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>y.lastNameModel=e),class:"form-control"},null,512),[[r.vModelText,y.lastNameModel]])])]),t[11]||(t[11]=(0,a.Lk)("div",{class:"spacer"},null,-1)),(0,a.Lk)("div",h,[(0,a.Lk)("div",p,[t[10]||(t[10]=(0,a.Lk)("label",null," Email: ",-1)),(0,a.bo)((0,a.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>y.emailModel=e),class:"form-control",disabled:"true"},null,512),[[r.vModelText,y.emailModel]])])])])]),t[17]||(t[17]=(0,a.Lk)("hr",null,null,-1)),(0,a.Q3)(" THEME SETTINGS "),(0,a.Lk)("div",k,[t[14]||(t[14]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Theme Preference"),(0,a.Lk)("p",{class:"text-instructions"},"Please choose an appropriate theme for NearBeach")],-1)),(0,a.Lk)("div",v,[(0,a.Lk)("div",L,[t[13]||(t[13]=(0,a.Lk)("label",null,"Theme",-1)),(0,a.bF)(T,{value:y.themeModel,"onUpdate:value":t[3]||(t[3]=e=>y.themeModel=e),options:y.themeList},null,8,["value","options"]),y.showMessage?((0,a.uX)(),(0,a.CE)("p",g," Please update user details to save. ")):(0,a.Q3)("v-if",!0)])])]),t[18]||(t[18]=(0,a.Lk)("hr",null,null,-1)),(0,a.Q3)(" UPDATE USER "),(0,a.Lk)("div",f,[(0,a.Lk)("div",b,[(0,a.Lk)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[4]||(t[4]=(...e)=>w.updateUser&&w.updateUser(...e))}," Update User Details ")])])])])])),_:1},8,["theme"])}]])},404:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(641),l=s(33);const r={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},o=(0,s(6262).A)(r,[["render",function(e,t,s,r,o,i){return(0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.errorList,(e=>((0,a.uX)(),(0,a.CE)("span",{class:"error",key:e.$uid},(0,l.toDisplayString)(e.$message),1)))),128)}]])},9827:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(7413);const l={data:()=>({darkTheme:a.a}),methods:{getTheme:e=>"dark"===e?a.a:null}}}}]);