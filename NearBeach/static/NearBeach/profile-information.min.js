"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1793],{3958:(e,t,l)=>{l.r(t),l.d(t,{default:()=>A});var s=l(6252),o=l(3577),a=l(9963);const r={class:"card"},n={class:"card-body"},d=(0,s._)("h1",null,"My Profile",-1),i=(0,s._)("hr",null,null,-1),u={class:"row"},m=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"User Details"),(0,s._)("p",{class:"text-instructions"},"Please update your details.")],-1),c={class:"col-md-8"},h=(0,s._)("strong",null,"Username: ",-1),p={class:"row"},g={class:"col-md-6"},M=(0,s._)("br",null,null,-1),_={class:"col-md-6"},v=(0,s._)("br",null,null,-1),f=(0,s._)("div",{class:"spacer"},null,-1),w={class:"row"},y={class:"col-md-6"},U=(0,s._)("label",null," Email: ",-1),E=(0,s._)("hr",null,null,-1),T={class:"row"},b=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Theme Preference"),(0,s._)("p",{class:"text-instructions"},"Please choose an appropriate theme for NearBeach")],-1),L={class:"col-md-4"},S={class:"form-group"},$=(0,s._)("label",null,"Theme",-1),k={key:0,class:"error"},N=(0,s._)("hr",null,null,-1),I={class:"row submit-row"},B={class:"col-md-12"};var D=l(2001),Z=l(5705),C=l(760),x=l(7939),P=l(3058),R=l(624),H=l(8416);const V=l(9669),q={name:"ProfileInformation",setup:()=>({v$:(0,Z.ZP)()}),props:{rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:"light"},userResults:{type:Array,default:()=>[]}},components:{NSelect:D.Z,ValidationRendering:x.Z},data(){return{emailModel:this.userResults[0].email,firstNameModel:this.userResults[0].first_name,lastNameModel:this.userResults[0].last_name,showMessage:!1,themeList:[{label:"Light Theme",value:"light"},{label:"Dark Theme",value:"dark"}],themeModel:this.theme}},watch:{themeModel(){this.showMessage=!0}},mixins:[P.Z,R.Z,H.Z],validations:()=>({lastNameModel:{required:C.C1,maxLength:(0,C.BS)(255)},firstNameModel:{required:C.C1,maxLength:(0,C.BS)(255)}}),methods:{updateTheme(){},updateUser(){if(this.v$.$touch(),this.v$.$invalid)return void this.showValidationErrorModal();const e=new FormData;e.set("username",this.userResults[0].id),e.set("first_name",this.firstNameModel),e.set("last_name",this.lastNameModel),e.set("theme",this.themeModel),this.showLoadingModal("Project"),this.showMessage=!1,document.documentElement.setAttribute("data-bs-theme",this.themeModel),V.post(`${this.rootUrl}profile_information/update_data/`,e).then((e=>{this.closeLoadingModal()})).catch((e=>{this.showErrorModal(e,"profile")}))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},A=(0,l(3744).Z)(q,[["render",function(e,t,l,D,Z,C){const x=(0,s.up)("validation-rendering"),P=(0,s.up)("n-select"),R=(0,s.up)("n-config-provider");return(0,s.wg)(),(0,s.j4)(R,{theme:e.getTheme(l.theme)},{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",n,[d,i,(0,s._)("div",u,[m,(0,s._)("div",c,[(0,s._)("p",null,[h,(0,s.Uk)((0,o.toDisplayString)(l.userResults[0].username),1)]),(0,s._)("div",p,[(0,s._)("div",g,[(0,s._)("label",null,[(0,s.Uk)(" First Name: "),(0,s.Wm)(x,{"error-list":D.v$.firstNameModel.$errors},null,8,["error-list"]),M]),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>Z.firstNameModel=e),class:"form-control"},null,512),[[a.vModelText,Z.firstNameModel]])]),(0,s._)("div",_,[(0,s._)("label",null,[(0,s.Uk)(" Last Name: "),(0,s.Wm)(x,{"error-list":D.v$.firstNameModel.$errors},null,8,["error-list"]),v]),(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>Z.lastNameModel=e),class:"form-control"},null,512),[[a.vModelText,Z.lastNameModel]])])]),f,(0,s._)("div",w,[(0,s._)("div",y,[U,(0,s.wy)((0,s._)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>Z.emailModel=e),class:"form-control",disabled:"true"},null,512),[[a.vModelText,Z.emailModel]])])])])]),E,(0,s.kq)(" THEME SETTINGS "),(0,s._)("div",T,[b,(0,s._)("div",L,[(0,s._)("div",S,[$,(0,s.Wm)(P,{value:Z.themeModel,"onUpdate:value":t[3]||(t[3]=e=>Z.themeModel=e),options:Z.themeList},null,8,["value","options"]),Z.showMessage?((0,s.wg)(),(0,s.iD)("p",k," Please update user details to save. ")):(0,s.kq)("v-if",!0)])])]),N,(0,s.kq)(" UPDATE USER "),(0,s._)("div",I,[(0,s._)("div",B,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[4]||(t[4]=(...e)=>C.updateUser&&C.updateUser(...e))}," Update User Details ")])])])])])),_:1},8,["theme"])}]])},7939:(e,t,l)=>{l.d(t,{Z:()=>r});var s=l(6252),o=l(3577);const a={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},r=(0,l(3744).Z)(a,[["render",function(e,t,l,a,r,n){return(0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.errorList,(e=>((0,s.wg)(),(0,s.iD)("span",{class:"error",key:e.$uid},(0,o.toDisplayString)(e.$message),1)))),128)}]])},3058:(e,t,l)=>{l.d(t,{Z:()=>o});var s=l(3138);const o={methods:{showErrorModal(e,t,l){const o=document.getElementById("loadingModal");if(null===o)return;new s.u_(o).hide();const a=document.getElementById("errorModalContent");if(void 0===a)return;if(a.innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${t}-${l}<hr>${e}`,null===document.getElementById("errorModal"))return;const r=new s.u_(r);r.show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new s.u_(document.getElementById("errorModal")).show()}}}},624:(e,t,l)=>{l.d(t,{Z:()=>o});var s=l(8458);const o={data:()=>({darkTheme:s.$}),methods:{getTheme:e=>"dark"===e?s.$:null}}},8416:(e,t,l)=>{l.d(t,{Z:()=>o});var s=l(3138);const o={methods:{closeLoadingModal(){const e=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal(e){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}}}]);