"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2464],{404:(o,r,e)=>{e.d(r,{A:()=>a});var t=e(641),s=e(33);const i={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},a=(0,e(6262).A)(i,[["render",function(o,r,e,i,a,l){return(0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.errorList,(o=>((0,t.uX)(),(0,t.CE)("span",{class:"error",key:o.$uid},(0,s.toDisplayString)(o.$message),1)))),128)}]])},947:(o,r,e)=>{e.d(r,{A:()=>d,b:()=>n});var t=e(4484),s=e(9359),i=e(8880),a=e(8146),l=e(1365);function n(o){const{iconColor:r,primaryColor:e,errorColor:s,textColor2:i,successColor:a,opacityDisabled:l,actionColor:n,borderColor:d,hoverColor:c,lineHeight:u,borderRadius:p,fontSize:x}=o;return{fontSize:x,lineHeight:u,borderRadius:p,draggerColor:n,draggerBorder:`1px dashed ${d}`,draggerBorderHover:`1px dashed ${e}`,itemColorHover:c,itemColorHoverError:(0,t.QX)(s,{alpha:.06}),itemTextColor:i,itemTextColorError:s,itemTextColorSuccess:a,itemIconColor:r,itemDisabledOpacity:l,itemBorderImageCardError:`1px solid ${s}`,itemBorderImageCard:`1px solid ${d}`}}const d=(0,s.a)({name:"Upload",common:i.A,peers:{Button:a.A,Progress:l.A},self:n})},1365:(o,r,e)=>{function t(o){const{infoColor:r,successColor:e,warningColor:t,errorColor:s,textColor2:i,progressRailColor:a,fontSize:l,fontWeight:n}=o;return{fontSize:l,fontSizeCircle:"28px",fontWeightCircle:n,railColor:a,railHeight:"8px",iconSizeCircle:"36px",iconSizeLine:"18px",iconColor:r,iconColorInfo:r,iconColorSuccess:e,iconColorWarning:t,iconColorError:s,textColorCircle:i,textColorLineInner:"rgb(255, 255, 255)",textColorLineOuter:i,fillColor:r,fillColorInfo:r,fillColorSuccess:e,fillColorWarning:t,fillColorError:s,lineBgProcessing:"linear-gradient(90deg, rgba(255, 255, 255, .3) 0%, rgba(255, 255, 255, .5) 100%)"}}e.d(r,{A:()=>s,b:()=>t});const s={name:"Progress",common:e(8880).A,self:t}},2032:(o,r,e)=>{e.r(r),e.d(r,{default:()=>w});var t=e(641),s=e(3751);const i={class:"card"},a={class:"card-body"},l=["href"],n={class:"row"},d={class:"col-md-3"},c=["src"],u={class:"col-md-5"},p={class:"form-group"},x={for:"id_organisation_name"},g={class:"form-group"},C={for:"id_organisation_website"},h={class:"form-group"},b={for:"id_organisation_email"},m={key:0},f={key:1,class:"row submit-row"},v={class:"col-md-12"};var P=e(2601),y=e(2819),S=e(2124),T=e(9639),$=e(3855),E=e(404),L=e(5740);const k={name:"OrganisationInformation",setup:()=>({v$:(0,T.Ay)()}),components:{NButton:P.Ay,NUpload:y.A,ValidationRendering:E.A},props:{organisationResults:{type:Array,default:()=>[]}},computed:{...(0,S.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},data(){return{organisationNameModel:this.organisationResults[0].fields.organisation_name,organisationEmailModel:this.organisationResults[0].fields.organisation_email,organisationWebsiteModel:this.organisationResults[0].fields.organisation_website,profilePicture:""}},validations:{organisationNameModel:{required:$.mw,maxLength:(0,$.Ru)(255)},organisationWebsiteModel:{required:$.mw,url:$.OZ},organisationEmailModel:{required:$.mw,email:$.Rp}},methods:{useToken:L.r,showErrorToast(o){let r=o.event.originalTarget.response;(void 0===r||""===r||null===r||r.length>255)&&(r="Sorry, we had an issue uploading the profile image."),this.$store.dispatch("newToast",{header:"Error uploading profile picture",message:r,extra_classes:"bg-danger",delay:0})},setProfilePicture(){const o=this.organisationResults[0].fields.organisation_profile_picture;this.profilePicture=null!=o&&""!==o?`${this.rootUrl}private/${o}`:`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`},updateOrganisation(){if(this.v$.$touch(),this.v$.$invalid)return void this.$store.dispatch("newToast",{header:"Please check validation",message:"Sorry, but can you please fix all validation issues.",extra_classes:"bg-warning text-dark",delay:0});const o=new FormData;o.set("organisation_name",this.organisationNameModel),o.set("organisation_email",this.organisationEmailModel),o.set("organisation_website",this.organisationWebsiteModel),this.$store.dispatch("newToast",{header:"Updating Organisation",message:"Please wait whilst we update organisation",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save"}),this.axios.post(`${this.rootUrl}organisation_information/${this.organisationResults[0].pk}/save/`,o).then((()=>{this.$store.dispatch("newToast",{header:"Organisation Updated",message:"The Organisation has updated",extra_classes:"bg-success",unique_type:"save"})})).catch((o=>{this.$store.dispatch("newToast",{header:"Failed to Update Organisation",message:`Sorry. We have encounted an error. Error -> ${o}`,extra_classes:"bg-danger",delay:0,unique_type:"save"})}))},updateProfilePicture(){this.$store.dispatch("newToast",{header:"Profile Picture updated",message:"Good news - profile picture updated",extra_classes:"bg-success",unique_type:"update_profile",delay:0}),this.axios.post(`${this.rootUrl}organisation_information/${this.organisationResults[0].pk}/get_profile_picture/`).then((o=>{this.profilePicture=o.data,this.$store.dispatch("newToast",{header:"Profile Picture updated",message:"Good news - profile picture updated",extra_classes:"bg-success",unique_type:"update_profile"})})).catch((o=>{this.profilePicture=`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,this.$store.dispatch("newToast",{header:"Error uploading profile picture",message:`Sorry, we had an issue uploading the profile image. Error -> ${o}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.setProfilePicture(),this.$store.commit({type:"updateTitle",title:this.organisationNameModel})}},w=(0,e(6262).A)(k,[["render",function(o,r,e,P,y,S){const T=(0,t.g2)("n-button"),$=(0,t.g2)("n-upload"),E=(0,t.g2)("validation-rendering");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.Lk)("div",a,[(0,t.Q3)(" TITLE "),r[12]||(r[12]=(0,t.Lk)("h1",null,"Organisation Information",-1)),r[13]||(r[13]=(0,t.Lk)("br",null,null,-1)),(0,t.Lk)("a",{href:`${o.rootUrl}search/organisation/`},"Back to organisation search",8,l),r[14]||(r[14]=(0,t.Lk)("hr",null,null,-1)),(0,t.Q3)(" FIELDS SECTION "),(0,t.Lk)("div",n,[r[11]||(r[11]=(0,t.Lk)("div",{class:"col-md-4"},[(0,t.Lk)("strong",null,"Please Note"),(0,t.Lk)("p",{class:"text-instructions"}," Please only use generic information for both the website and email. Do not use any personal details - you can create contacts in the section below. ")],-1)),(0,t.Lk)("div",d,[(0,t.Lk)("img",{src:y.profilePicture,alt:"Profile Picture",class:"organisation-profile-image"},null,8,c),r[5]||(r[5]=(0,t.Lk)("br",null,null,-1)),(0,t.Q3)('<button class="btn btn-primary">Update Profile...</button>'),o.userLevel>1?((0,t.uX)(),(0,t.Wv)($,{key:0,action:`${o.rootUrl}organisation_information/${e.organisationResults[0].pk}/update_profile/`,headers:{"X-CSRFTOKEN":S.useToken("csrftoken")},data:{},onFinish:S.updateProfilePicture,onError:S.showErrorToast,accept:".jpg, .jpeg, .png, *.webp"},{default:(0,t.k6)((()=>[(0,t.bF)(T,null,{default:(0,t.k6)((()=>r[4]||(r[4]=[(0,t.eW)("Update Profile Picture")]))),_:1})])),_:1},8,["action","headers","onFinish","onError"])):(0,t.Q3)("v-if",!0)]),(0,t.Lk)("div",u,[(0,t.Q3)(" ORGANISATION NAME "),(0,t.Lk)("div",p,[(0,t.Lk)("label",x,[r[6]||(r[6]=(0,t.eW)(" Organisation Name ")),(0,t.bF)(E,{"error-list":P.v$.organisationNameModel.$errors},null,8,["error-list"])]),(0,t.bo)((0,t.Lk)("input",{id:"id_organisation_name","onUpdate:modelValue":r[0]||(r[0]=o=>y.organisationNameModel=o),type:"text",class:"form-control"},null,512),[[s.vModelText,y.organisationNameModel]])]),r[9]||(r[9]=(0,t.Lk)("br",null,null,-1)),(0,t.Q3)(" ORGANISATION WEBSITE "),(0,t.Lk)("div",g,[(0,t.Lk)("label",C,[r[7]||(r[7]=(0,t.eW)(" Organisation Website ")),(0,t.bF)(E,{"error-list":P.v$.organisationWebsiteModel.$errors},null,8,["error-list"])]),(0,t.bo)((0,t.Lk)("input",{id:"id_organisation_website","onUpdate:modelValue":r[1]||(r[1]=o=>y.organisationWebsiteModel=o),type:"text",class:"form-control"},null,512),[[s.vModelText,y.organisationWebsiteModel]])]),r[10]||(r[10]=(0,t.Lk)("br",null,null,-1)),(0,t.Q3)(" ORGANISATION EMAIL "),(0,t.Lk)("div",h,[(0,t.Lk)("label",b,[r[8]||(r[8]=(0,t.eW)(" Organisation Email ")),(0,t.bF)(E,{"error-list":P.v$.organisationWebsiteModel.$errors},null,8,["error-list"])]),(0,t.bo)((0,t.Lk)("input",{id:"id_organisation_email","onUpdate:modelValue":r[2]||(r[2]=o=>y.organisationEmailModel=o),type:"text",class:"form-control"},null,512),[[s.vModelText,y.organisationEmailModel]])])])]),r[15]||(r[15]=(0,t.Lk)("br",null,null,-1)),(0,t.Q3)(" NEED TO APPLY PERMISSIONS "),(0,t.Q3)(" Submit Button "),o.userLevel>1?((0,t.uX)(),(0,t.CE)("hr",m)):(0,t.Q3)("v-if",!0),o.userLevel>1?((0,t.uX)(),(0,t.CE)("div",f,[(0,t.Lk)("div",v,[(0,t.Lk)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:r[3]||(r[3]=(...o)=>S.updateOrganisation&&S.updateOrganisation(...o))},"Update Organisation")])])):(0,t.Q3)("v-if",!0)])])}]])},5740:(o,r,e)=>{e.d(r,{r:()=>s});var t=e(953);function s(o){const r=(0,t.BA)(o),e=new RegExp(`${r}=([^;]+)`).exec(document.cookie);return null!==e?encodeURIComponent(e[1]):null}},7445:(o,r,e)=>{e.d(r,{A:()=>t});const t={padding:"8px 14px"}},7765:(o,r,e)=>{e.d(r,{A:()=>a,b:()=>i});var t=e(8880);const s={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};function i(o){const{boxShadow2:r,popoverColor:e,textColor2:t,borderRadius:i,fontSize:a,dividerColor:l}=o;return Object.assign(Object.assign({},s),{fontSize:a,borderRadius:i,color:e,dividerColor:l,textColor:t,boxShadow:r})}const a={name:"Popover",common:t.A,self:i}},8146:(o,r,e)=>{e.d(r,{A:()=>a,b:()=>i});var t=e(8880);const s={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};function i(o){const{heightTiny:r,heightSmall:e,heightMedium:t,heightLarge:i,borderRadius:a,fontSizeTiny:l,fontSizeSmall:n,fontSizeMedium:d,fontSizeLarge:c,opacityDisabled:u,textColor2:p,textColor3:x,primaryColorHover:g,primaryColorPressed:C,borderColor:h,primaryColor:b,baseColor:m,infoColor:f,infoColorHover:v,infoColorPressed:P,successColor:y,successColorHover:S,successColorPressed:T,warningColor:$,warningColorHover:E,warningColorPressed:L,errorColor:k,errorColorHover:w,errorColorPressed:I,fontWeight:W,buttonColor2:H,buttonColor2Hover:_,buttonColor2Pressed:F,fontWeightStrong:D}=o;return Object.assign(Object.assign({},s),{heightTiny:r,heightSmall:e,heightMedium:t,heightLarge:i,borderRadiusTiny:a,borderRadiusSmall:a,borderRadiusMedium:a,borderRadiusLarge:a,fontSizeTiny:l,fontSizeSmall:n,fontSizeMedium:d,fontSizeLarge:c,opacityDisabled:u,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:H,colorSecondaryHover:_,colorSecondaryPressed:F,colorTertiary:H,colorTertiaryHover:_,colorTertiaryPressed:F,colorQuaternary:"#0000",colorQuaternaryHover:_,colorQuaternaryPressed:F,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:p,textColorTertiary:x,textColorHover:g,textColorPressed:C,textColorFocus:g,textColorDisabled:p,textColorText:p,textColorTextHover:g,textColorTextPressed:C,textColorTextFocus:g,textColorTextDisabled:p,textColorGhost:p,textColorGhostHover:g,textColorGhostPressed:C,textColorGhostFocus:g,textColorGhostDisabled:p,border:`1px solid ${h}`,borderHover:`1px solid ${g}`,borderPressed:`1px solid ${C}`,borderFocus:`1px solid ${g}`,borderDisabled:`1px solid ${h}`,rippleColor:b,colorPrimary:b,colorHoverPrimary:g,colorPressedPrimary:C,colorFocusPrimary:g,colorDisabledPrimary:b,textColorPrimary:m,textColorHoverPrimary:m,textColorPressedPrimary:m,textColorFocusPrimary:m,textColorDisabledPrimary:m,textColorTextPrimary:b,textColorTextHoverPrimary:g,textColorTextPressedPrimary:C,textColorTextFocusPrimary:g,textColorTextDisabledPrimary:p,textColorGhostPrimary:b,textColorGhostHoverPrimary:g,textColorGhostPressedPrimary:C,textColorGhostFocusPrimary:g,textColorGhostDisabledPrimary:b,borderPrimary:`1px solid ${b}`,borderHoverPrimary:`1px solid ${g}`,borderPressedPrimary:`1px solid ${C}`,borderFocusPrimary:`1px solid ${g}`,borderDisabledPrimary:`1px solid ${b}`,rippleColorPrimary:b,colorInfo:f,colorHoverInfo:v,colorPressedInfo:P,colorFocusInfo:v,colorDisabledInfo:f,textColorInfo:m,textColorHoverInfo:m,textColorPressedInfo:m,textColorFocusInfo:m,textColorDisabledInfo:m,textColorTextInfo:f,textColorTextHoverInfo:v,textColorTextPressedInfo:P,textColorTextFocusInfo:v,textColorTextDisabledInfo:p,textColorGhostInfo:f,textColorGhostHoverInfo:v,textColorGhostPressedInfo:P,textColorGhostFocusInfo:v,textColorGhostDisabledInfo:f,borderInfo:`1px solid ${f}`,borderHoverInfo:`1px solid ${v}`,borderPressedInfo:`1px solid ${P}`,borderFocusInfo:`1px solid ${v}`,borderDisabledInfo:`1px solid ${f}`,rippleColorInfo:f,colorSuccess:y,colorHoverSuccess:S,colorPressedSuccess:T,colorFocusSuccess:S,colorDisabledSuccess:y,textColorSuccess:m,textColorHoverSuccess:m,textColorPressedSuccess:m,textColorFocusSuccess:m,textColorDisabledSuccess:m,textColorTextSuccess:y,textColorTextHoverSuccess:S,textColorTextPressedSuccess:T,textColorTextFocusSuccess:S,textColorTextDisabledSuccess:p,textColorGhostSuccess:y,textColorGhostHoverSuccess:S,textColorGhostPressedSuccess:T,textColorGhostFocusSuccess:S,textColorGhostDisabledSuccess:y,borderSuccess:`1px solid ${y}`,borderHoverSuccess:`1px solid ${S}`,borderPressedSuccess:`1px solid ${T}`,borderFocusSuccess:`1px solid ${S}`,borderDisabledSuccess:`1px solid ${y}`,rippleColorSuccess:y,colorWarning:$,colorHoverWarning:E,colorPressedWarning:L,colorFocusWarning:E,colorDisabledWarning:$,textColorWarning:m,textColorHoverWarning:m,textColorPressedWarning:m,textColorFocusWarning:m,textColorDisabledWarning:m,textColorTextWarning:$,textColorTextHoverWarning:E,textColorTextPressedWarning:L,textColorTextFocusWarning:E,textColorTextDisabledWarning:p,textColorGhostWarning:$,textColorGhostHoverWarning:E,textColorGhostPressedWarning:L,textColorGhostFocusWarning:E,textColorGhostDisabledWarning:$,borderWarning:`1px solid ${$}`,borderHoverWarning:`1px solid ${E}`,borderPressedWarning:`1px solid ${L}`,borderFocusWarning:`1px solid ${E}`,borderDisabledWarning:`1px solid ${$}`,rippleColorWarning:$,colorError:k,colorHoverError:w,colorPressedError:I,colorFocusError:w,colorDisabledError:k,textColorError:m,textColorHoverError:m,textColorPressedError:m,textColorFocusError:m,textColorDisabledError:m,textColorTextError:k,textColorTextHoverError:w,textColorTextPressedError:I,textColorTextFocusError:w,textColorTextDisabledError:p,textColorGhostError:k,textColorGhostHoverError:w,textColorGhostPressedError:I,textColorGhostFocusError:w,textColorGhostDisabledError:k,borderError:`1px solid ${k}`,borderHoverError:`1px solid ${w}`,borderPressedError:`1px solid ${I}`,borderFocusError:`1px solid ${w}`,borderDisabledError:`1px solid ${k}`,rippleColorError:k,waveOpacity:"0.6",fontWeight:W,fontWeightStrong:D})}const a={name:"Button",common:t.A,self:i}},8565:(o,r,e)=>{e.d(r,{A:()=>n});var t=e(4484),s=e(9359),i=e(8880),a=e(7765),l=e(7445);const n=(0,s.a)({name:"Tooltip",common:i.A,peers:{Popover:a.A},self:function(o){const{borderRadius:r,boxShadow2:e,baseColor:s}=o;return Object.assign(Object.assign({},l.A),{borderRadius:r,boxShadow:e,color:(0,t.sN)(s,"rgba(0, 0, 0, .85)"),textColor:s})}})}}]);