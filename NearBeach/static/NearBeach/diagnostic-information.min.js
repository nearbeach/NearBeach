"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2139],{3553:(t,e,l)=>{l.r(e),l.d(e,{default:()=>$});var a=l(641),s=l(33);const n={class:"card"},o={class:"card-body"},i={class:"row"},r={class:"col-md-8"},d={class:"table"},u={class:"row"},c={class:"col-md-8"},k={class:"table"},L={class:"row"},m={class:"col-md-8"},p={class:"table"},h={class:"row"},g={class:"col-md-8"},S={class:"table"},y={key:0,class:"row"},f={class:"col-md-8"},E={key:0,class:"alert alert-danger"},v={key:1},w={key:2},C=["srcdoc"],_={key:3,class:"row"},b={class:"col-md-8"},U=["href"];var D=l(2124),I=l(799);const A={name:"DiagnosticUpload",data:()=>({downloadLocation:"",uploadError:"",uploadIssues:"",uploadState:"before_upload",uuidVerification:""}),computed:{...(0,D.L8)({rootUrl:"getRootUrl"})},methods:{uploadFile(){this.uploadState="sending";const t=(0,I.w)(),e=new Blob([t],{type:"text/plain"}),l=new FormData;l.set("document",e,"diagnostic-upload-test.txt"),l.set("uuid",t.toString()),this.axios.post(`${this.rootUrl}diagnostic_information/upload_test/`,l).then((e=>{this.uploadState="Completed",this.uuidVerification=t,this.downloadLocation=`${this.rootUrl}private/${e.data[0].document_key_id}/`})).catch((t=>{this.$store.dispatch("newToast",{header:"Error with Uploads",message:`Sorry could not upload document. Error -> ${t}`,extra_classes:"bg-danger",delay:0}),this.uploadState="error",this.uploadError=t.response.data}))}}};var T=l(6262);const R=(0,T.A)(A,[["render",function(t,e,l,n,o,i){return"before_upload"===o.uploadState?((0,a.uX)(),(0,a.CE)("div",y,[e[2]||(e[2]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Upload Document Test"),(0,a.Lk)("p",{class:"text-instructions"},' Please click on the "Upload Document" button. It will upload a small text file to the blob storage. If there are any issues, they will print here. ')],-1)),(0,a.Lk)("div",f,[(0,a.Lk)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>i.uploadFile&&i.uploadFile(...t))}," Upload Test "),""!==o.uploadIssues?((0,a.uX)(),(0,a.CE)("div",E,[e[1]||(e[1]=(0,a.Lk)("h1",null,"Upload Issues",-1)),(0,a.eW)(" "+(0,s.toDisplayString)(o.uploadIssues),1)])):(0,a.Q3)("v-if",!0)])])):"sending"===o.uploadState?((0,a.uX)(),(0,a.CE)("div",v,e[3]||(e[3]=[(0,a.Lk)("div",{class:"alert alert-info"},"Currently sending data",-1)]))):"error"===o.uploadState?((0,a.uX)(),(0,a.CE)("div",w,[e[4]||(e[4]=(0,a.Lk)("div",{class:"alert alert-danger"}," Sorry this upload process failed. Please read the error below. ",-1)),(0,a.Lk)("iframe",{srcdoc:o.uploadError},null,8,C)])):((0,a.uX)(),(0,a.CE)("div",_,[e[5]||(e[5]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Test Download"),(0,a.Lk)("p",{class:"text-instructions"}," Please download the file and compare it's components with the UUID. They should match. ")],-1)),(0,a.Lk)("div",b,[(0,a.Lk)("p",null,[(0,a.Lk)("a",{href:o.downloadLocation,target:"_blank",rel:"noopener noreferrer"},"Please click here to download the file.",8,U)]),(0,a.Lk)("p",null,"It's contents should match the UUID: "+(0,s.toDisplayString)(o.uuidVerification),1)])]))}]]),F={class:"row"},x={class:"col-md-8"},B={key:1,class:"alert alert-warning"},N={key:2,class:"alert alert-success"},X={key:3,class:"alert alert-danger"},P={name:"DiagnosticEmailTest",computed:{...(0,D.L8)({rootUrl:"getRootUrl"})},data:()=>({emailState:"not_started"}),methods:{sendEmail(){this.emailState="sending_email",this.axios.post(`${this.rootUrl}diagnostic_information/email_test/`).then((()=>{this.emailState="sent_email"})).catch((t=>{this.emailState="failed_sending",this.$store.dispatch("newToast",{header:"Error sending Email",message:`${t}`,extra_classes:"bg-danger",delay:0})}))}}},H=(0,T.A)(P,[["render",function(t,e,l,s,n,o){return(0,a.uX)(),(0,a.CE)("div",F,[e[1]||(e[1]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Email Test"),(0,a.Lk)("p",{class:"text-instructions"},' Please click "Send Email", to send an email to yourself. If you do not receive an email, it means there is something broken. '),(0,a.Lk)("p",{class:"text-instructions"}," Potential Issues "),(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,"Spam Blocking Email"),(0,a.Lk)("li",null,"Server not sending"),(0,a.Lk)("li",null,"Email Credentials Incorrect")])],-1)),(0,a.Lk)("div",x,["not_started"===n.emailState?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"btn btn-warning",onClick:e[0]||(e[0]=(...t)=>o.sendEmail&&o.sendEmail(...t))},"Send Email")):(0,a.Q3)("v-if",!0),"sending_email"===n.emailState?((0,a.uX)(),(0,a.CE)("div",B," Currently sending the email. Please wait. ")):(0,a.Q3)("v-if",!0),"sent_email"===n.emailState?((0,a.uX)(),(0,a.CE)("div",N," Email sent by backend. Please check your inbox. If you do not receive the email, please check to make sure it is not in spam. ")):(0,a.Q3)("v-if",!0),"failed_sending"===n.emailState?((0,a.uX)(),(0,a.CE)("div",X," Sorry. The backend server could not send the email. Please check logs ")):(0,a.Q3)("v-if",!0)])])}]]);var O=l(9581);const K={name:"DiagnosticInformation",components:{DiagnosticEmailTest:H,DiagnosticUpload:R},props:{awsAccessKeyId:{type:Boolean,default:!1},awsSecretAccessKey:{type:Boolean,default:!1},allowedHosts:{type:Array,default:()=>[]},awsS3EndpointUrl:{type:Boolean,default:!1},awsStorageBucketName:{type:Boolean,default:!1},azureStorageConnectionString:{type:Boolean,default:!1},azureStorageContainerName:{type:Boolean,default:!1},rootUrl:{type:String,default:"/"},smtpEmailHost:{type:Boolean,default:!1},smtpEmailHostUser:{type:Boolean,default:!1},theme:{type:String,default:"light"}},methods:{useNBTheme:O.p},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},$=(0,T.A)(K,[["render",function(t,e,l,y,f,E){const v=(0,a.g2)("diagnostic-upload"),w=(0,a.g2)("diagnostic-email-test"),C=(0,a.g2)("n-config-provider");return(0,a.uX)(),(0,a.Wv)(C,{theme:E.useNBTheme(l.theme)},{default:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.Lk)("div",o,[e[18]||(e[18]=(0,a.Lk)("h1",null,"Diagnostic Information",-1)),e[19]||(e[19]=(0,a.Lk)("hr",null,null,-1)),e[20]||(e[20]=(0,a.Lk)("h2",null,"Core Configurations",-1)),e[21]||(e[21]=(0,a.Lk)("div",{class:"spacer"},null,-1)),(0,a.Lk)("div",i,[e[3]||(e[3]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Azure Storage"),(0,a.Lk)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. Please ignore if you are not utilsing Azure Storage ")],-1)),(0,a.Lk)("div",r,[(0,a.Lk)("table",d,[e[2]||(e[2]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{style:{width:"80%"}},"Configuration Field"),(0,a.Lk)("td",{style:{width:"20%"}},"Is Filled In")])],-1)),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[e[0]||(e[0]=(0,a.Lk)("td",null,"AZURE_STORAGE_CONNECTION_STRING",-1)),(0,a.Lk)("td",null,(0,s.toDisplayString)(l.azureStorageConnectionString),1)]),(0,a.Lk)("tr",null,[e[1]||(e[1]=(0,a.Lk)("td",null,"AZURE_STORAGE_CONTAINER_NAME",-1)),(0,a.Lk)("td",null,(0,s.toDisplayString)(l.azureStorageContainerName),1)])])])])]),e[22]||(e[22]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",u,[e[9]||(e[9]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"S3/R2/Minio Storage"),(0,a.Lk)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. Please ignore if you are not utilsing either S3, R2, or Minio storage solutions. ")],-1)),(0,a.Lk)("div",c,[(0,a.Lk)("table",k,[e[8]||(e[8]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{style:{width:"80%"}},"Configuration Field"),(0,a.Lk)("td",{style:{width:"20%"}},"Is Filled In")])],-1)),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[e[4]||(e[4]=(0,a.Lk)("td",null,"AWS_ACCESS_KEY_ID",-1)),(0,a.Lk)("td",null,(0,s.toDisplayString)(l.awsAccessKeyId),1)]),(0,a.Lk)("tr",null,[e[5]||(e[5]=(0,a.Lk)("td",null,"AWS_SECRET_ACCESS_KEY",-1)),(0,a.Lk)("td",null,(0,s.toDisplayString)(l.awsSecretAccessKey),1)]),(0,a.Lk)("tr",null,[e[6]||(e[6]=(0,a.Lk)("td",null,"AWS_S3_ENDPOINT_URL (for minio)",-1)),(0,a.Lk)("td",null,(0,s.toDisplayString)(l.awsS3EndpointUrl),1)]),(0,a.Lk)("tr",null,[e[7]||(e[7]=(0,a.Lk)("td",null,"AWS_STORAGE_BUCKET_NAME",-1)),(0,a.Lk)("td",null,(0,s.toDisplayString)(l.awsStorageBucketName),1)])])])])]),e[23]||(e[23]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",L,[e[13]||(e[13]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Email"),(0,a.Lk)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. ")],-1)),(0,a.Lk)("div",m,[(0,a.Lk)("table",p,[e[12]||(e[12]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{style:{width:"80%"}},"Configuration Field"),(0,a.Lk)("td",{style:{width:"20%"}},"Values")])],-1)),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[e[10]||(e[10]=(0,a.Lk)("td",null,"SMTP_EMAIL_HOST",-1)),(0,a.Lk)("td",null,(0,s.toDisplayString)(l.smtpEmailHost),1)]),(0,a.Lk)("tr",null,[e[11]||(e[11]=(0,a.Lk)("td",null,"SMTP_EMAIL_HOST_USER",-1)),(0,a.Lk)("td",null,(0,s.toDisplayString)(l.smtpEmailHostUser),1)])])])])]),e[24]||(e[24]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",h,[e[17]||(e[17]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Allowed Hosts & CSRF Trusted URLS"),(0,a.Lk)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. ")],-1)),(0,a.Lk)("div",g,[(0,a.Lk)("table",S,[e[16]||(e[16]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{style:{width:"50%"}},"Configuration Field"),(0,a.Lk)("td",{style:{width:"50%"}},"Is Filled In")])],-1)),(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[e[14]||(e[14]=(0,a.Lk)("td",null,"ALLOWED_HOSTS",-1)),(0,a.Lk)("td",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.allowedHosts,(t=>((0,a.uX)(),(0,a.CE)("p",{key:t},"- "+(0,s.toDisplayString)(t),1)))),128))])]),(0,a.Lk)("tr",null,[e[15]||(e[15]=(0,a.Lk)("td",null,"CSRF_TRUSTED_URLS",-1)),(0,a.Lk)("td",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.allowedHosts,(t=>((0,a.uX)(),(0,a.CE)("p",{key:t},"- "+(0,s.toDisplayString)(t),1)))),128))])])])])])]),e[25]||(e[25]=(0,a.Lk)("hr",null,null,-1)),(0,a.bF)(v),e[26]||(e[26]=(0,a.Lk)("hr",null,null,-1)),(0,a.bF)(w)])])])),_:1},8,["theme"])}]])},9581:(t,e,l)=>{l.d(e,{p:()=>n});var a=l(953),s=l(166);function n(t){return"dark"===(0,a.BA)(t)?s.a:null}}}]);