"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2139],{3553:(t,e,l)=>{l.r(e),l.d(e,{default:()=>Et});var a=l(641),s=l(33);const n={class:"card"},o={class:"card-body"},i=(0,a.Lk)("h1",null,"Diagnostic Information",-1),r=(0,a.Lk)("hr",null,null,-1),d=(0,a.Lk)("h2",null,"Core Configurations",-1),u=(0,a.Lk)("div",{class:"spacer"},null,-1),c={class:"row"},k=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Azure Storage"),(0,a.Lk)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. Please ignore if you are not utilsing Azure Storage ")],-1),L={class:"col-md-8"},m={class:"table"},p=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{style:{width:"80%"}},"Configuration Field"),(0,a.Lk)("td",{style:{width:"20%"}},"Is Filled In")])],-1),h=(0,a.Lk)("td",null,"AZURE_STORAGE_CONNECTION_STRING",-1),g=(0,a.Lk)("td",null,"AZURE_STORAGE_CONTAINER_NAME",-1),S=(0,a.Lk)("hr",null,null,-1),y={class:"row"},f=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"S3/R2/Minio Storage"),(0,a.Lk)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. Please ignore if you are not utilsing either S3, R2, or Minio storage solutions. ")],-1),E={class:"col-md-8"},v={class:"table"},w=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{style:{width:"80%"}},"Configuration Field"),(0,a.Lk)("td",{style:{width:"20%"}},"Is Filled In")])],-1),C=(0,a.Lk)("td",null,"AWS_ACCESS_KEY_ID",-1),_=(0,a.Lk)("td",null,"AWS_SECRET_ACCESS_KEY",-1),b=(0,a.Lk)("td",null,"AWS_S3_ENDPOINT_URL (for minio)",-1),U=(0,a.Lk)("td",null,"AWS_STORAGE_BUCKET_NAME",-1),D=(0,a.Lk)("hr",null,null,-1),I={class:"row"},A=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Email"),(0,a.Lk)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. ")],-1),T={class:"col-md-8"},R={class:"table"},F=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{style:{width:"80%"}},"Configuration Field"),(0,a.Lk)("td",{style:{width:"20%"}},"Values")])],-1),x=(0,a.Lk)("td",null,"SMTP_EMAIL_HOST",-1),B=(0,a.Lk)("td",null,"SMTP_EMAIL_HOST_USER",-1),N=(0,a.Lk)("hr",null,null,-1),X={class:"row"},P=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Allowed Hosts & CSRF Trusted URLS"),(0,a.Lk)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. ")],-1),H={class:"col-md-8"},O={class:"table"},K=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",{style:{width:"50%"}},"Configuration Field"),(0,a.Lk)("td",{style:{width:"50%"}},"Is Filled In")])],-1),$=(0,a.Lk)("td",null,"ALLOWED_HOSTS",-1),M=(0,a.Lk)("td",null,"CSRF_TRUSTED_URLS",-1),W=(0,a.Lk)("hr",null,null,-1),z=(0,a.Lk)("hr",null,null,-1),Q={key:0,class:"row"},j=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Upload Document Test"),(0,a.Lk)("p",{class:"text-instructions"},' Please click on the "Upload Document" button. It will upload a small text file to the blob storage. If there are any issues, they will print here. ')],-1),G={class:"col-md-8"},V={key:0,class:"alert alert-danger"},Y=(0,a.Lk)("h1",null,"Upload Issues",-1),Z={key:1},q=[(0,a.Lk)("div",{class:"alert alert-info"},"Currently sending data",-1)],J={key:2},tt=(0,a.Lk)("div",{class:"alert alert-danger"}," Sorry this upload process failed. Please read the error below. ",-1),et=["srcdoc"],lt={key:3,class:"row"},at=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Test Download"),(0,a.Lk)("p",{class:"text-instructions"}," Please download the file and compare it's components with the UUID. They should match. ")],-1),st={class:"col-md-8"},nt=["href"];var ot=l(2124),it=l(799);const rt={name:"DiagnosticUpload",data:()=>({downloadLocation:"",uploadError:"",uploadIssues:"",uploadState:"before_upload",uuidVerification:""}),computed:{...(0,ot.L8)({rootUrl:"getRootUrl"})},methods:{uploadFile(){this.uploadState="sending";const t=(0,it.w)(),e=new Blob([t],{type:"text/plain"}),l=new FormData;l.set("document",e,"diagnostic-upload-test.txt"),l.set("uuid",t.toString()),this.axios.post(`${this.rootUrl}diagnostic_information/upload_test/`,l).then((e=>{this.uploadState="Completed",this.uuidVerification=t,this.downloadLocation=`${this.rootUrl}private/${e.data[0].document_key_id}/`})).catch((t=>{this.$store.dispatch("newToast",{header:"Error with Uploads",message:`Sorry could not upload document. Error -> ${t}`,extra_classes:"bg-danger",delay:0}),this.uploadState="error",this.uploadError=t.response.data}))}}};var dt=l(6262);const ut=(0,dt.A)(rt,[["render",function(t,e,l,n,o,i){return"before_upload"===o.uploadState?((0,a.uX)(),(0,a.CE)("div",Q,[j,(0,a.Lk)("div",G,[(0,a.Lk)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>i.uploadFile&&i.uploadFile(...t))}," Upload Test "),""!==o.uploadIssues?((0,a.uX)(),(0,a.CE)("div",V,[Y,(0,a.eW)(" "+(0,s.toDisplayString)(o.uploadIssues),1)])):(0,a.Q3)("v-if",!0)])])):"sending"===o.uploadState?((0,a.uX)(),(0,a.CE)("div",Z,q)):"error"===o.uploadState?((0,a.uX)(),(0,a.CE)("div",J,[tt,(0,a.Lk)("iframe",{srcdoc:o.uploadError},null,8,et)])):((0,a.uX)(),(0,a.CE)("div",lt,[at,(0,a.Lk)("div",st,[(0,a.Lk)("p",null,[(0,a.Lk)("a",{href:o.downloadLocation,target:"_blank",rel:"noopener noreferrer"},"Please click here to download the file.",8,nt)]),(0,a.Lk)("p",null,"It's contents should match the UUID: "+(0,s.toDisplayString)(o.uuidVerification),1)])]))}]]),ct={class:"row"},kt=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Email Test"),(0,a.Lk)("p",{class:"text-instructions"},' Please click "Send Email", to send an email to yourself. If you do not receive an email, it means there is something broken. '),(0,a.Lk)("p",{class:"text-instructions"}," Potential Issues "),(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,"Spam Blocking Email"),(0,a.Lk)("li",null,"Server not sending"),(0,a.Lk)("li",null,"Email Credentials Incorrect")])],-1),Lt={class:"col-md-8"},mt={key:1,class:"alert alert-warning"},pt={key:2,class:"alert alert-success"},ht={key:3,class:"alert alert-danger"},gt={name:"DiagnosticEmailTest",computed:{...(0,ot.L8)({rootUrl:"getRootUrl"})},data:()=>({emailState:"not_started"}),methods:{sendEmail(){this.emailState="sending_email",this.axios.post(`${this.rootUrl}diagnostic_information/email_test/`).then((()=>{this.emailState="sent_email"})).catch((t=>{this.emailState="failed_sending",this.$store.dispatch("newToast",{header:"Error sending Email",message:`${t}`,extra_classes:"bg-danger",delay:0})}))}}},St=(0,dt.A)(gt,[["render",function(t,e,l,s,n,o){return(0,a.uX)(),(0,a.CE)("div",ct,[kt,(0,a.Lk)("div",Lt,["not_started"===n.emailState?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"btn btn-warning",onClick:e[0]||(e[0]=(...t)=>o.sendEmail&&o.sendEmail(...t))},"Send Email")):(0,a.Q3)("v-if",!0),"sending_email"===n.emailState?((0,a.uX)(),(0,a.CE)("div",mt," Currently sending the email. Please wait. ")):(0,a.Q3)("v-if",!0),"sent_email"===n.emailState?((0,a.uX)(),(0,a.CE)("div",pt," Email sent by backend. Please check your inbox. If you do not receive the email, please check to make sure it is not in spam. ")):(0,a.Q3)("v-if",!0),"failed_sending"===n.emailState?((0,a.uX)(),(0,a.CE)("div",ht," Sorry. The backend server could not send the email. Please check logs ")):(0,a.Q3)("v-if",!0)])])}]]);var yt=l(9581);const ft={name:"DiagnosticInformation",components:{DiagnosticEmailTest:St,DiagnosticUpload:ut},props:{awsAccessKeyId:{type:Boolean,default:!1},awsSecretAccessKey:{type:Boolean,default:!1},allowedHosts:{type:Array,default:()=>[]},awsS3EndpointUrl:{type:Boolean,default:!1},awsStorageBucketName:{type:Boolean,default:!1},azureStorageConnectionString:{type:Boolean,default:!1},azureStorageContainerName:{type:Boolean,default:!1},rootUrl:{type:String,default:"/"},smtpEmailHost:{type:Boolean,default:!1},smtpEmailHostUser:{type:Boolean,default:!1},theme:{type:String,default:"light"}},methods:{useNBTheme:yt.p},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},Et=(0,dt.A)(ft,[["render",function(t,e,l,Q,j,G){const V=(0,a.g2)("diagnostic-upload"),Y=(0,a.g2)("diagnostic-email-test"),Z=(0,a.g2)("n-config-provider");return(0,a.uX)(),(0,a.Wv)(Z,{theme:G.useNBTheme(l.theme)},{default:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.Lk)("div",o,[i,r,d,u,(0,a.Lk)("div",c,[k,(0,a.Lk)("div",L,[(0,a.Lk)("table",m,[p,(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[h,(0,a.Lk)("td",null,(0,s.toDisplayString)(l.azureStorageConnectionString),1)]),(0,a.Lk)("tr",null,[g,(0,a.Lk)("td",null,(0,s.toDisplayString)(l.azureStorageContainerName),1)])])])])]),S,(0,a.Lk)("div",y,[f,(0,a.Lk)("div",E,[(0,a.Lk)("table",v,[w,(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[C,(0,a.Lk)("td",null,(0,s.toDisplayString)(l.awsAccessKeyId),1)]),(0,a.Lk)("tr",null,[_,(0,a.Lk)("td",null,(0,s.toDisplayString)(l.awsSecretAccessKey),1)]),(0,a.Lk)("tr",null,[b,(0,a.Lk)("td",null,(0,s.toDisplayString)(l.awsS3EndpointUrl),1)]),(0,a.Lk)("tr",null,[U,(0,a.Lk)("td",null,(0,s.toDisplayString)(l.awsStorageBucketName),1)])])])])]),D,(0,a.Lk)("div",I,[A,(0,a.Lk)("div",T,[(0,a.Lk)("table",R,[F,(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[x,(0,a.Lk)("td",null,(0,s.toDisplayString)(l.smtpEmailHost),1)]),(0,a.Lk)("tr",null,[B,(0,a.Lk)("td",null,(0,s.toDisplayString)(l.smtpEmailHostUser),1)])])])])]),N,(0,a.Lk)("div",X,[P,(0,a.Lk)("div",H,[(0,a.Lk)("table",O,[K,(0,a.Lk)("tbody",null,[(0,a.Lk)("tr",null,[$,(0,a.Lk)("td",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.allowedHosts,(t=>((0,a.uX)(),(0,a.CE)("p",{key:t},"- "+(0,s.toDisplayString)(t),1)))),128))])]),(0,a.Lk)("tr",null,[M,(0,a.Lk)("td",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.allowedHosts,(t=>((0,a.uX)(),(0,a.CE)("p",{key:t},"- "+(0,s.toDisplayString)(t),1)))),128))])])])])])]),W,(0,a.bF)(V),z,(0,a.bF)(Y)])])])),_:1},8,["theme"])}]])},9581:(t,e,l)=>{l.d(e,{p:()=>n});var a=l(953),s=l(7413);function n(t){return"dark"===(0,a.BA)(t)?s.a:null}}}]);