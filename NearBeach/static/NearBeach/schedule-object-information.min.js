"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6537],{3846:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Y});var s=o(641),a=o(3751);const l={class:"card"},n={class:"card card-body"},r=(0,s.Lk)("h1",null,"Scheduled Object Information",-1),i=["href"],d=(0,s.Lk)("hr",null,null,-1),c={class:"row"},u=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Object Type"),(0,s.Lk)("p",{class:"text-instructions"}," Please select if the object will be either a Project or Task. ")],-1),h={class:"col-md-8"},b=(0,s.Lk)("hr",null,null,-1),p={class:"row"},g=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Description"),(0,s.Lk)("p",{class:"text-instructions"}," Please supply a suitable Title and Description for your object. This will be created exactly each time the object is created. ")],-1),m={class:"col-md-8",style:{"min-height":"610px"}},v={class:"form-group"},f=(0,s.Lk)("br",null,null,-1),y=(0,s.Lk)("br",null,null,-1),k=["src"],_=(0,s.Lk)("hr",null,null,-1),w=(0,s.Lk)("hr",null,null,-1),j=(0,s.Lk)("hr",null,null,-1),M={class:"row"},S=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Group Permissions"),(0,s.Lk)("p",{class:"text-instructions"}," Add or remove groups from this scheduled object. Adding a group will allow users from that group to access the constructed object. "),(0,s.Lk)("p",{class:"text-instructions"}," Users who do not have access to this scheduled object, won't be able to edit/view this object, nor it's constructed object. ")],-1),D={class:"col-md-8"},R=(0,s.Lk)("br",null,null,-1),L={key:0,class:"alert alert-warning"},T=(0,s.Lk)("hr",null,null,-1),x=(0,s.Lk)("hr",null,null,-1),E={class:"row"},O=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Is Active"),(0,s.Lk)("p",{class:"text-instructions"}," Toggle this scheduled object on or off. Please remember to save after toggling. ")],-1),C={class:"col-md-8"},$=(0,s.Lk)("hr",null,null,-1),A={class:"row submit-row"},F={class:"col-md-12"};var B=o(8838),U=o(3913),V=o(1080),q=o(4991),I=o(6894),G=o(6741),P=o(9639),N=o(3855),W=o(404),z=o(2124),Q=o(891),K=o(9581),X=o(9184);const H={name:"NewScheduledObject",setup:()=>({v$:(0,P.Ay)()}),components:{StakeholderInformation:Q.A,BetweenDates:I.A,editor:B.A,NConfigProvider:U.A,NSelect:V.A,NSwitch:q.A,SchedulerFrequency:G.A,ValidationRendering:W.A},props:{defaultStakeholderImage:{type:String,default:""},groupResults:{type:Array,default:()=>[]},objectTemplateResults:{type:Array,default:()=>[]},organisationResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},scheduledObjectResults:{type:Object,default:()=>({schedule_object_id:0,object_template_id:0,end_date:null,frequency:"Set Day of the Week",frequency_attribute:null,is_active:!0,number_of_repeats:-1})},staticUrl:{type:String,default:"/"},templateGroupResults:{type:Array,default:()=>[]},theme:{type:String,default:"light"},userGroupAndLevel:{type:Array,default:()=>[]},userGroupResults:{type:Array,default:()=>[]}},data(){return{groupModelValidation:!0,displayGroupPermissionIssue:!1,objectDescriptionModel:this.objectTemplateResults[0].object_template_json.object_description,objectEndDateModel:new Date(this.objectTemplateResults[0].object_template_json.object_end_date),objectGroupModel:this.templateGroupResults,objectStartDateModel:new Date(this.objectTemplateResults[0].object_template_json.object_start_date),objectTitleModel:this.objectTemplateResults[0].object_template_json.object_title,objectTypeModel:this.objectTemplateResults[0].object_template_type,objectTypeOptions:[{value:0,label:"Project"},{value:1,label:"Task"}],daysBeforeModel:this.getDaysBeforeModel(),dayModel:this.getDayModel(),endDateConditionModel:this.getEndDateConditionModel(),endDateModel:this.getEndDateModel(),isActiveModel:this.scheduledObjectResults.is_active,isFormValid:!0,numberOfRepeats:this.scheduledObjectResults.number_of_repeats,schedulerFrequencyModel:this.scheduledObjectResults.frequency,singleDayModel:this.getSingleDayModel(),startDateModel:new Date(this.scheduledObjectResults.start_date).getTime()}},computed:{...(0,z.L8)({contentCss:"getContentCss",skin:"getSkin"})},validations:{objectDescriptionModel:{required:N.mw},objectGroupModel:{required:N.mw},objectTitleModel:{required:N.mw},objectTypeModel:{required:N.mw}},methods:{useNewObjectUploadImage:X.j,useNBTheme:K.p,calculateUserLevel(e){if(0===e.length)return 0;const t=e.reduce(((e,t)=>e&&e.project_permission>t.project_permission?e:t)).project_permission,o=e.reduce(((e,t)=>e&&e.task_permission>t.task_permission?e:t)).task_permission;return o>t?o:t},checkObjectGroupModel(){this.displayGroupPermissionIssue=0===this.userGroupResults.filter((e=>this.objectGroupModel.includes(e.group_id))).length;const e=this.userGroupAndLevel.filter((e=>this.objectGroupModel.includes(e.group_id)));this.groupModelValidation=this.calculateUserLevel(e)>=3,this.groupModelValidation||this.$store.dispatch("newToast",{header:"No CREATE permission for groups",message:"Please note - for the current groups selected, you do not have create permissions. Please add in a group you have create permission with.",extra_classes:"bg-danger",delay:5e3,unique_type:"group-model-validation"})},getEndDateConditionModel(){return this.scheduledObjectResults.number_of_repeats>=0?"number-of-repeats":null!==this.scheduledObjectResults.end_date?"end-date":"no-end-date"},getDayModel(){return void 0===this.scheduledObjectResults.frequency_attribute||void 0===this.scheduledObjectResults.frequency_attribute.days_of_the_week?[]:this.scheduledObjectResults.frequency_attribute.days_of_the_week},getDaysBeforeModel(){return void 0===this.scheduledObjectResults.frequency_attribute||void 0===this.scheduledObjectResults.frequency_attribute.days_before?0:this.scheduledObjectResults.frequency_attribute.days_before},getEndDateModel(){return null===this.scheduledObjectResults.end_date?0:new Date(this.scheduledObjectResults.end_date).getTime()},getSingleDayModel(){return void 0===this.scheduledObjectResults.frequency_attribute||void 0===this.scheduledObjectResults.frequency_attribute.day_of_the_week?"Monday":this.scheduledObjectResults.frequency_attribute.day_of_the_week},updateDates(e){this.objectStartDateModel=new Date(e.start_date),this.objectEndDateModel=new Date(e.end_date)},updateSchedulerFrequency(e){this.daysBeforeModel=e.daysBeforeModel,this.dayModel=e.dayModel,this.endDateConditionModel=e.endDateConditionModel,this.endDateModel=e.endDateModel,this.isFormValid=e.isFormValid,this.numberOfRepeats=e.numberOfRepeatsModel,this.schedulerFrequencyModel=e.schedulerFrequencyModel,this.singleDayModel=e.singleDayModel,this.startDateModel=e.startDateModel},async updateSchedulerObject(){if(!await this.v$.$validate()||this.displayGroupPermissionIssue||!this.isFormValid)return void this.$store.dispatch("newToast",{header:"Please check all validation",message:"There are some fields that are filled in correctly. Please correct these mistakes.",extra_classes:"bg-danger",delay:0});if(!this.groupModelValidation)return void this.$store.dispatch("newToast",{header:"No CREATE permission for groups",message:"Please note - for the current groups selected, you do not have create permissions. Please add in a group you have create permission with.",extra_classes:"bg-danger",delay:5e3});const e=new FormData;e.set("object_type",this.objectTypeModel),e.set("object_title",this.objectTitleModel),e.set("object_description",this.objectDescriptionModel),e.set("object_start_date",this.objectStartDateModel.toISOString()),e.set("object_end_date",this.objectEndDateModel.toISOString()),this.objectGroupModel.forEach((t=>{e.append("group_list",t)}));const t=(new Date).getTimezoneOffset();let o=new Date(this.endDateModel-60*t*1e3),s=new Date(this.startDateModel-60*t*1e3);o=o.toISOString().split("T")[0],s=s.toISOString().split("T")[0],e.set("days_before",this.daysBeforeModel),e.set("number_of_repeats",this.numberOfRepeats),e.set("scheduler_frequency",this.schedulerFrequencyModel),e.set("scheduler_end_date",o),e.set("scheduler_start_date",s),e.set("single_day",this.singleDayModel),e.set("end_date_condition",this.endDateConditionModel),e.set("is_active",this.isActiveModel),this.dayModel.forEach((t=>{e.append("day",t)})),this.axios.post(`${this.rootUrl}scheduled_object_information/${this.scheduledObjectResults.schedule_object_id}/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Saved Scheduled Object",message:"Scheduled Object has been updated",extra_classes:"bg-success"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error creating new scheduled object",message:`Sorry, we could not create this scheduled object for you. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl});const e=this.calculateUserLevel(this.userGroupAndLevel);this.$store.commit({type:"updateUserLevel",userLevel:e})}},Y=(0,o(6262).A)(H,[["render",function(e,t,o,B,U,V){const q=(0,s.g2)("validation-rendering"),I=(0,s.g2)("n-select"),G=(0,s.g2)("editor"),P=(0,s.g2)("stakeholder-information"),N=(0,s.g2)("between-dates"),W=(0,s.g2)("scheduler-frequency"),z=(0,s.g2)("n-switch"),Q=(0,s.g2)("n-config-provider");return(0,s.uX)(),(0,s.Wv)(Q,{theme:V.useNBTheme(o.theme)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",l,[(0,s.Lk)("div",n,[r,(0,s.Lk)("a",{href:`${o.rootUrl}scheduled_objects/`},"Back to Scheduled Object list",8,i),d,(0,s.Lk)("div",c,[u,(0,s.Lk)("div",h,[(0,s.Lk)("label",null,[(0,s.eW)(" Object Type "),(0,s.bF)(q,{"error-list":B.v$.objectTypeModel.$errors},null,8,["error-list"])]),(0,s.bF)(I,{value:U.objectTypeModel,"onUpdate:value":t[0]||(t[0]=e=>U.objectTypeModel=e),options:U.objectTypeOptions},null,8,["value","options"])])]),(0,s.Q3)(" OBJECT DESCRIPTION"),b,(0,s.Lk)("div",p,[g,(0,s.Lk)("div",m,[(0,s.Lk)("div",v,[(0,s.Lk)("label",null,[(0,s.eW)("Object Title "),(0,s.bF)(q,{"error-list":B.v$.objectTitleModel.$errors},null,8,["error-list"])]),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>U.objectTitleModel=e),class:"form-control"},null,512),[[a.vModelText,U.objectTitleModel]])]),f,(0,s.Q3)(" OBJECT DESCRIPTION "),(0,s.Lk)("label",null,[(0,s.eW)(" Object Description: "),(0,s.bF)(q,{"error-list":B.v$.objectDescriptionModel.$errors},null,8,["error-list"])]),y,(0,s.Lk)("img",{src:`${o.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,k),(0,s.bF)(G,{"license-key":"gpl",init:{file_picker_types:"image",height:500,images_upload_handler:V.useNewObjectUploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`,relative_urls:!1},modelValue:U.objectDescriptionModel,"onUpdate:modelValue":t[2]||(t[2]=e=>U.objectDescriptionModel=e)},null,8,["init","modelValue"])])]),(0,s.Q3)(" STAKEHOLDER ORGANISATION "),_,(0,s.bF)(P,{"organisation-results":o.organisationResults,"default-stakeholder-image":o.defaultStakeholderImage},null,8,["organisation-results","default-stakeholder-image"]),(0,s.Q3)(" START DATE & END DATE "),w,(0,s.bF)(N,{destination:"object","end-date-model":U.objectEndDateModel.getTime(),"start-date-model":U.objectStartDateModel.getTime(),onUpdate_dates:t[3]||(t[3]=e=>V.updateDates(e))},null,8,["end-date-model","start-date-model"]),(0,s.Q3)(" Group Permissions "),j,(0,s.Lk)("div",M,[S,(0,s.Lk)("div",D,[(0,s.Lk)("label",null,[(0,s.eW)(" Group List "),(0,s.bF)(q,{"error-list":B.v$.objectGroupModel.$errors},null,8,["error-list"])]),(0,s.bF)(I,{options:o.groupResults,label:"group",value:U.objectGroupModel,"onUpdate:value":t[4]||(t[4]=e=>U.objectGroupModel=e),onUpdateValue:V.checkObjectGroupModel,multiple:""},null,8,["options","value","onUpdateValue"]),(0,s.Q3)("\t\t\t\t\t\t ALERT FOR WHEN USER GROUPS ARE NOT INCLUDED "),R,U.displayGroupPermissionIssue?((0,s.uX)(),(0,s.CE)("div",L," None of your user groups were included. You will not have permissions to create this object. Please select one of your groups ")):(0,s.Q3)("v-if",!0)])]),(0,s.Q3)(" Scheduler Frequency "),T,(0,s.bF)(W,{"days-before":U.daysBeforeModel,day:U.dayModel,"end-date-condition":U.endDateConditionModel,"end-date":U.endDateModel,"number-of-repeats":U.numberOfRepeats,"scheduler-frequency":U.schedulerFrequencyModel,"single-day":U.singleDayModel,"start-date":U.startDateModel,onUpdate_scheduler_frequency:V.updateSchedulerFrequency},null,8,["days-before","day","end-date-condition","end-date","number-of-repeats","scheduler-frequency","single-day","start-date","onUpdate_scheduler_frequency"]),(0,s.Q3)(" Is Active "),x,(0,s.Lk)("div",E,[O,(0,s.Lk)("div",C,[(0,s.bF)(z,{value:U.isActiveModel,"onUpdate:value":t[5]||(t[5]=e=>U.isActiveModel=e)},{checked:(0,s.k6)((()=>[(0,s.eW)(" Currently Active ")])),unchecked:(0,s.k6)((()=>[(0,s.eW)(" Disabled ")])),_:1},8,["value"])])]),(0,s.Q3)(" Submit Button "),$,(0,s.Lk)("div",A,[(0,s.Lk)("div",F,[(0,s.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[6]||(t[6]=(...e)=>V.updateSchedulerObject&&V.updateSchedulerObject(...e))}," Update Scheduled Object ")])])])])])),_:1},8,["theme"])}]])},891:(e,t,o)=>{o.d(t,{A:()=>f});var s=o(641),a=o(33);const l={class:"row"},n=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Stakeholder")],-1),r={class:"col-md-8 organisation-details"},i=["src"],d={class:"organisation-name"},c=["href"],u={class:"organisation-link"},h=["href"],b={class:"organisation-email"},p=["href"];var g=o(2124),m=o(3980);const v={name:"StakeholderInformation",components:{CarbonEmail:m.G2,CarbonLink:m.wX},props:{defaultStakeholderImage:{type:String,default:""},organisationResults:{type:Array,default:()=>[]}},data(){return{stakeholderModel:this.organisationResults[0].fields}},computed:{...(0,g.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"}),getStakeholderImage(){const e=this.stakeholderModel.organisation_profile_picture;return""===e||null===e?this.defaultStakeholderImage:`${this.rootUrl}private/${e}`}}},f=(0,o(6262).A)(v,[["render",function(e,t,o,g,m,v){const f=(0,s.g2)("carbon-link"),y=(0,s.g2)("carbon-email");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Q3)(" Description "),n,(0,s.Lk)("div",r,[(0,s.Lk)("img",{src:v.getStakeholderImage,alt:"Stakeholder Logo",class:"organisation-image"},null,8,i),(0,s.Lk)("div",d,[(0,s.Lk)("a",{href:`${e.rootUrl}organisation_information/${o.organisationResults[0].pk}/`},(0,a.toDisplayString)(m.stakeholderModel.organisation_name),9,c)]),(0,s.Lk)("div",u,[(0,s.bF)(f),(0,s.eW)(" Website: "),(0,s.Lk)("a",{href:m.stakeholderModel.organisation_website,target:"_blank",rel:"noopener noreferrer"},(0,a.toDisplayString)(m.stakeholderModel.organisation_website),9,h)]),(0,s.Lk)("div",b,[(0,s.bF)(y),(0,s.eW)(" Email: "),(0,s.Lk)("a",{href:`mailto:${m.stakeholderModel.organisation_email}`},(0,a.toDisplayString)(m.stakeholderModel.organisation_email),9,p)])])])}]])},4991:(e,t,o)=>{o.d(t,{A:()=>j});var s=o(641),a=o(953),l=o(4041),n=o(5562),r=o(9359),i=o(922),d=o(3370),c=o(4019),u=o(9819),h=o(2778),b=o(6680),p=o(7872),g=o(9521),m=o(4484),v=o(8090);const f={name:"Switch",common:o(8880).A,self:e=>{const{primaryColor:t,opacityDisabled:o,borderRadius:s,textColor3:a}=e;return Object.assign(Object.assign({},v.A),{iconColor:a,textColor:"white",loadingColor:t,opacityDisabled:o,railColor:"rgba(0, 0, 0, .14)",railColorActive:t,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:s,railBorderRadiusMedium:s,railBorderRadiusLarge:s,buttonBorderRadiusSmall:s,buttonBorderRadiusMedium:s,buttonBorderRadiusLarge:s,boxShadowFocus:`0 0 0 2px ${(0,m.QX)(t,{alpha:.2})}`})}};var y=o(8454);const k=(0,p.cB)("switch","\n height: var(--n-height);\n min-width: var(--n-width);\n vertical-align: middle;\n user-select: none;\n -webkit-user-select: none;\n display: inline-flex;\n outline: none;\n justify-content: center;\n align-items: center;\n",[(0,p.cE)("children-placeholder","\n height: var(--n-rail-height);\n display: flex;\n flex-direction: column;\n overflow: hidden;\n pointer-events: none;\n visibility: hidden;\n "),(0,p.cE)("rail-placeholder","\n display: flex;\n flex-wrap: none;\n "),(0,p.cE)("button-placeholder","\n width: calc(1.75 * var(--n-rail-height));\n height: var(--n-rail-height);\n "),(0,p.cB)("base-loading","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n font-size: calc(var(--n-button-width) - 4px);\n color: var(--n-loading-color);\n transition: color .3s var(--n-bezier);\n ",[(0,y.N)({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),(0,p.cE)("checked, unchecked","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n box-sizing: border-box;\n position: absolute;\n white-space: nowrap;\n top: 0;\n bottom: 0;\n display: flex;\n align-items: center;\n line-height: 1;\n "),(0,p.cE)("checked","\n right: 0;\n padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));\n "),(0,p.cE)("unchecked","\n left: 0;\n justify-content: flex-end;\n padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));\n "),(0,p.c)("&:focus",[(0,p.cE)("rail","\n box-shadow: var(--n-box-shadow-focus);\n ")]),(0,p.cM)("round",[(0,p.cE)("rail","border-radius: calc(var(--n-rail-height) / 2);",[(0,p.cE)("button","border-radius: calc(var(--n-button-height) / 2);")])]),(0,p.C5)("disabled",[(0,p.C5)("icon",[(0,p.cM)("rubber-band",[(0,p.cM)("pressed",[(0,p.cE)("rail",[(0,p.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,p.cE)("rail",[(0,p.c)("&:active",[(0,p.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,p.cM)("active",[(0,p.cM)("pressed",[(0,p.cE)("rail",[(0,p.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),(0,p.cE)("rail",[(0,p.c)("&:active",[(0,p.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),(0,p.cM)("active",[(0,p.cE)("rail",[(0,p.cE)("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),(0,p.cE)("rail","\n overflow: hidden;\n height: var(--n-rail-height);\n min-width: var(--n-rail-width);\n border-radius: var(--n-rail-border-radius);\n cursor: pointer;\n position: relative;\n transition:\n opacity .3s var(--n-bezier),\n background .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-rail-color);\n ",[(0,p.cE)("button-icon","\n color: var(--n-icon-color);\n transition: color .3s var(--n-bezier);\n font-size: calc(var(--n-button-height) - 4px);\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n display: flex;\n justify-content: center;\n align-items: center;\n line-height: 1;\n ",[(0,y.N)()]),(0,p.cE)("button",'\n align-items: center; \n top: var(--n-offset);\n left: var(--n-offset);\n height: var(--n-button-height);\n width: var(--n-button-width-pressed);\n max-width: var(--n-button-width);\n border-radius: var(--n-button-border-radius);\n background-color: var(--n-button-color);\n box-shadow: var(--n-button-box-shadow);\n box-sizing: border-box;\n cursor: inherit;\n content: "";\n position: absolute;\n transition:\n background-color .3s var(--n-bezier),\n left .3s var(--n-bezier),\n opacity .3s var(--n-bezier),\n max-width .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n ')]),(0,p.cM)("active",[(0,p.cE)("rail","background-color: var(--n-rail-color-active);")]),(0,p.cM)("loading",[(0,p.cE)("rail","\n cursor: wait;\n ")]),(0,p.cM)("disabled",[(0,p.cE)("rail","\n cursor: not-allowed;\n opacity: .5;\n ")])]),_=Object.assign(Object.assign({},r.A.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]});let w;const j=(0,s.pM)({name:"Switch",props:_,setup(e){void 0===w&&(w="undefined"==typeof CSS||void 0!==CSS.supports&&CSS.supports("width","max(1px)"));const{mergedClsPrefixRef:t,inlineThemeDisabled:o}=(0,i.Ay)(e),u=(0,r.A)("Switch","-switch",k,f,e,t),h=(0,d.A)(e),{mergedSizeRef:g,mergedDisabledRef:m}=h,v=(0,a.KR)(e.defaultValue),y=(0,a.lW)(e,"value"),_=(0,n.A)(y,v),j=(0,s.EW)((()=>_.value===e.checkedValue)),M=(0,a.KR)(!1),S=(0,a.KR)(!1),D=(0,s.EW)((()=>{const{railStyle:t}=e;if(t)return t({focused:S.value,checked:j.value})}));function R(t){const{"onUpdate:value":o,onChange:s,onUpdateValue:a}=e,{nTriggerFormInput:l,nTriggerFormChange:n}=h;o&&(0,b.T)(o,t),a&&(0,b.T)(a,t),s&&(0,b.T)(s,t),v.value=t,l(),n()}const L=(0,s.EW)((()=>{const{value:e}=g,{self:{opacityDisabled:t,railColor:o,railColorActive:s,buttonBoxShadow:a,buttonColor:n,boxShadowFocus:r,loadingColor:i,textColor:d,iconColor:c,[(0,p.cF)("buttonHeight",e)]:h,[(0,p.cF)("buttonWidth",e)]:b,[(0,p.cF)("buttonWidthPressed",e)]:m,[(0,p.cF)("railHeight",e)]:v,[(0,p.cF)("railWidth",e)]:f,[(0,p.cF)("railBorderRadius",e)]:y,[(0,p.cF)("buttonBorderRadius",e)]:k},common:{cubicBezierEaseInOut:_}}=u.value;let j,M,S;return w?(j=`calc((${v} - ${h}) / 2)`,M=`max(${v}, ${h})`,S=`max(${f}, calc(${f} + ${h} - ${v}))`):(j=(0,l.Cw)(((0,l.eV)(v)-(0,l.eV)(h))/2),M=(0,l.Cw)(Math.max((0,l.eV)(v),(0,l.eV)(h))),S=(0,l.eV)(v)>(0,l.eV)(h)?f:(0,l.Cw)((0,l.eV)(f)+(0,l.eV)(h)-(0,l.eV)(v))),{"--n-bezier":_,"--n-button-border-radius":k,"--n-button-box-shadow":a,"--n-button-color":n,"--n-button-width":b,"--n-button-width-pressed":m,"--n-button-height":h,"--n-height":M,"--n-offset":j,"--n-opacity-disabled":t,"--n-rail-border-radius":y,"--n-rail-color":o,"--n-rail-color-active":s,"--n-rail-height":v,"--n-rail-width":f,"--n-width":S,"--n-box-shadow-focus":r,"--n-loading-color":i,"--n-text-color":d,"--n-icon-color":c}})),T=o?(0,c.R)("switch",(0,s.EW)((()=>g.value[0])),L,e):void 0;return{handleClick:function(){e.loading||m.value||(_.value!==e.checkedValue?R(e.checkedValue):R(e.uncheckedValue))},handleBlur:function(){S.value=!1,function(){const{nTriggerFormBlur:e}=h;e()}(),M.value=!1},handleFocus:function(){S.value=!0,function(){const{nTriggerFormFocus:e}=h;e()}()},handleKeyup:function(t){e.loading||m.value||" "===t.key&&(_.value!==e.checkedValue?R(e.checkedValue):R(e.uncheckedValue),M.value=!1)},handleKeydown:function(t){e.loading||m.value||" "===t.key&&(t.preventDefault(),M.value=!0)},mergedRailStyle:D,pressed:M,mergedClsPrefix:t,mergedValue:_,checked:j,mergedDisabled:m,cssVars:o?void 0:L,themeClass:null==T?void 0:T.themeClass,onRender:null==T?void 0:T.onRender}},render(){const{mergedClsPrefix:e,mergedDisabled:t,checked:o,mergedRailStyle:a,onRender:l,$slots:n}=this;null==l||l();const{checked:r,unchecked:i,icon:d,"checked-icon":c,"unchecked-icon":b}=n,p=!((0,g.yr)(d)&&(0,g.yr)(c)&&(0,g.yr)(b));return(0,s.h)("div",{role:"switch","aria-checked":o,class:[`${e}-switch`,this.themeClass,p&&`${e}-switch--icon`,o&&`${e}-switch--active`,t&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},(0,s.h)("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:a},(0,g.iQ)(r,(t=>(0,g.iQ)(i,(o=>t||o?(0,s.h)("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},(0,s.h)("div",{class:`${e}-switch__rail-placeholder`},(0,s.h)("div",{class:`${e}-switch__button-placeholder`}),t),(0,s.h)("div",{class:`${e}-switch__rail-placeholder`},(0,s.h)("div",{class:`${e}-switch__button-placeholder`}),o)):null)))),(0,s.h)("div",{class:`${e}-switch__button`},(0,g.iQ)(d,(t=>(0,g.iQ)(c,(o=>(0,g.iQ)(b,(a=>(0,s.h)(u.A,null,{default:()=>this.loading?(0,s.h)(h.A,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(o||t)?(0,s.h)("div",{class:`${e}-switch__button-icon`,key:o?"checked-icon":"icon"},o||t):this.checked||!a&&!t?null:(0,s.h)("div",{class:`${e}-switch__button-icon`,key:a?"unchecked-icon":"icon"},a||t)}))))))),(0,g.iQ)(r,(t=>t&&(0,s.h)("div",{key:"checked",class:`${e}-switch__checked`},t))),(0,g.iQ)(i,(t=>t&&(0,s.h)("div",{key:"unchecked",class:`${e}-switch__unchecked`},t))))))}})}}]);