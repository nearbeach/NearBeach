"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7491],{7491:(t,e,o)=>{o.d(e,{Z:()=>z});var a=o(6252),i=o(3577),s=o(9963);const n={key:0,class:"error"},r=(0,a._)("br",null,null,-1),l=["id","data-id","data-title"],d=["id","data-id","data-title"],p=["onClick"],c=(0,a._)("hr",null,null,-1),m=["id"],h={class:"modal-dialog"},y={class:"modal-content"},u={class:"modal-header"},I={class:"modal-title",id:"exampleModalLabel"},b=["id"],g={class:"modal-body"},w={class:"form-group"},_={class:"modal-footer"},f=(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),L=["id"],k={class:"modal-dialog"},v={class:"modal-content"},P={class:"modal-header"},N={class:"modal-title"},C=["id"],D={class:"modal-body"},M={class:"row"},Z=(0,a._)("label",null,[(0,a._)("strong",null,"Destination for Cards")],-1),E=(0,a._)("br",null,null,-1),$=(0,a._)("div",{class:"alert alert-warning"},[(0,a._)("h4",null,"WARNING"),(0,a._)("p",null,"This process can not be reversed. Deleting a {propertyName} will remove it."),(0,a._)("p",null," All existing cards will be moved to the stated location you have provided. Any cards that have been archived or deleted, will still be associated with the removed card. ")],-1),A={class:"modal-footer"},S=(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close",-1),B=["disabled"];var x=o(9669),T=o.n(x),U=o(5169),q=o(6542),O=o(967),R=o(9980),W=o.n(R),F=o(3766),V=o(2587),G=o(5808),H=o(3058);const j={name:"KanbanPropertyOrder",setup:()=>({v$:(0,F.ZP)()}),components:{draggable:W(),Icon:q.JO,NSelect:O.Z},props:{isDirty:{type:Boolean,default:!0},isNewMode:{type:Boolean,default:!0},kanbanBoardId:{type:Number,default:0},propertyList:{type:Array,default:()=>[]},propertyName:{type:String,default:""},source:{type:String,default:""}},data(){return{deleteItemId:"",destinationItemId:"",localPropertyList:this.propertyList,newCardDestinationList:[],newPropertyItem:"",singleItemId:""}},mixins:[H.Z,G.Z],validations:{localPropertyList:{required:V.C1}},watch:{propertyList:function(){this.localPropertyList=this.propertyList}},methods:{addItem:function(){""!=this.newPropertyItem&&(this.isNewMode?this.newModeAddItem():this.editModeAddItem(),this.sendPropertyListUp(),document.getElementById(`addItemClose${this.propertyName}`).click())},deleteItem:function(){const t=new FormData;t.set("delete_item_id",this.deleteItemId),t.set("destination_item_id",this.destinationItemId.id);const e=`${this.rootUrl}kanban_${this.propertyName.toLowerCase()}/${this.kanbanBoardId}/delete/`;T().post(e,t).then((t=>{this.localPropertyList=this.localPropertyList.filter((t=>t.id!=this.deleteItemId)),this.$emit("update_property_list",{source:this.source,data:this.localPropertyList}),document.getElementById(`deleteItemClose${this.propertyName}`).click()})).catch((t=>{this.showErrorModal(t,"kanban item delete",this.kanbanBoardId)}))},editItem:function(t){this.newPropertyItem=t.target.dataset.title,this.singleItemId=t.target.dataset.id,this.openModal()},editModeAddItem:async function(){const t=`kanban_${this.propertyName.toLowerCase()}_name`,e=`kanban_${this.propertyName.toLowerCase()}_sort_number`,o=this.singleItemId,a=new FormData;if(a.set(t,this.newPropertyItem),a.set(e,this.getMaxId()+1),""==o)var i=`/kanban_${this.propertyName.toLowerCase()}/${this.kanbanBoardId}/new/`;else i=`/kanban_${this.propertyName.toLowerCase()}/${this.singleItemId}/edit/`;await T().post(i,a).then((e=>{const a=e.data[0];""==o?this.localPropertyList.push({id:a.pk,title:a.fields[t]}):this.localPropertyList.forEach((t=>{t.id==this.singleItemId&&(t.title=this.newPropertyItem)})),this.singleItemId="",this.newPropertyItem=""})).catch((t=>{this.showErrorModal(t,"kanban board",this.kanbanBoardId)}))},getMaxId:function(){const t=this.localPropertyList.map((t=>t.id));return t.sort(((t,e)=>t-e))[t.length-1]},newModeAddItem:function(){""==this.singleItemId?this.localPropertyList.push({id:this.getMaxId()+1,title:this.newPropertyItem}):this.localPropertyList.forEach((t=>{t.id==this.singleItemId&&(t.title=this.newPropertyItem)})),this.singleItemId="",this.newPropertyItem=""},openModal:function(){new U.u_(document.getElementById(`addItem${this.propertyName}`)).show()},removeItem:function(t){this.isNewMode?(this.localPropertyList=this.localPropertyList.filter((e=>e.id!=t)),this.sendPropertyListUp()):(this.deleteItemId=t,this.newCardDestinationList=this.localPropertyList.filter((t=>t.id!=this.deleteItemId)).map((t=>({value:t.id,label:t.title}))),this.destinationItemId=this.newCardDestinationList[0].value,new U.u_(document.getElementById(`deleteItem${this.propertyName}`)).show())},sendPropertyListUp:function(){if(this.$emit("update_property_list",{source:this.source,data:this.localPropertyList}),!this.isNewMode){const t=`/kanban_${this.propertyName.toLowerCase()}/${this.kanbanBoardId}/resort/`,e=new FormData;this.localPropertyList.forEach(((t,o)=>{e.append("item",t.id)})),T().post(t,e).then((t=>{})).catch((t=>{}))}}}},z=(0,o(3744).Z)(j,[["render",function(t,e,o,x,T,U){const q=(0,a.up)("Icon"),O=(0,a.up)("draggable"),R=(0,a.up)("n-select");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("strong",null,(0,i.toDisplayString)(o.propertyName),1),!x.v$.localPropertyList.required&&o.isDirty?((0,a.wg)(),(0,a.iD)("span",n," Please create at least one "+(0,i.toDisplayString)(o.propertyName)+".",1)):(0,a.kq)("v-if",!0),r,(0,a.kq)(" The column of data where you can sort the properties "),(0,a.Wm)(O,{modelValue:T.localPropertyList,"onUpdate:modelValue":e[1]||(e[1]=t=>T.localPropertyList=t),"item-key":"pk","ghost-class":"ghost",onChange:U.sendPropertyListUp},{item:(0,a.w5)((({element:o})=>[((0,a.wg)(),(0,a.iD)("div",{class:"sortable",key:o.id,id:o.id,"data-id":o.id,"data-title":o.title,onDblclick:e[0]||(e[0]=t=>U.editItem(t))},[((0,a.wg)(),(0,a.iD)("strong",{key:o.id,id:o.id,"data-id":o.id,"data-title":o.title},(0,i.toDisplayString)(o.title),9,d)),T.localPropertyList.length>1?((0,a.wg)(),(0,a.iD)("span",{key:0,onClick:t=>U.removeItem(o.id)},[(0,a.Wm)(q,{icon:t.icons.xCircle},null,8,["icon"])],8,p)):(0,a.kq)("v-if",!0)],40,l))])),_:1},8,["modelValue","onChange"]),(0,a.kq)(" ADD BUTTON "),c,(0,a._)("button",{class:"btn btn-primary",onClick:e[2]||(e[2]=(...t)=>U.openModal&&U.openModal(...t))}," Add "+(0,i.toDisplayString)(o.propertyName)+" Item ",1),(0,a.kq)(" MODAL FOR ADDING AN EXTRA ROW "),(0,a._)("div",{class:"modal fade",id:`addItem${o.propertyName}`,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[(0,a._)("div",h,[(0,a._)("div",y,[(0,a._)("div",u,[(0,a._)("h5",I,"Add/Edit "+(0,i.toDisplayString)(o.propertyName),1),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:`addItemClose${o.propertyName}`},null,8,b)]),(0,a._)("div",g,[(0,a._)("div",w,[(0,a._)("label",null,(0,i.toDisplayString)(o.propertyName)+" Item Description",1),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>T.newPropertyItem=t),type:"text",class:"form-control"},null,512),[[s.vModelText,T.newPropertyItem]])])]),(0,a._)("div",_,[f,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...t)=>U.addItem&&U.addItem(...t))}," Save changes ")])])])],8,m),(0,a.kq)(" MODAL FOR DELETING ITEM "),(0,a._)("div",{class:"modal fade",id:`deleteItem${o.propertyName}`,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[(0,a._)("div",k,[(0,a._)("div",v,[(0,a._)("div",P,[(0,a._)("h5",N,"Delete "+(0,i.toDisplayString)(o.propertyName),1),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:`deleteItemClose${o.propertyName}`},null,8,C)]),(0,a._)("div",D,[(0,a.kq)(" CARD DESTINATIONS "),(0,a._)("div",M,[Z,(0,a.Wm)(R,{options:T.newCardDestinationList,value:T.destinationItemId,"onUpdate:value":e[5]||(e[5]=t=>T.destinationItemId=t),style:{"z-index":"9999"},class:"new-card-destination"},null,8,["options","value"])]),E,(0,a.kq)(" WARNING "),$]),(0,a._)("div",A,[S,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...t)=>U.deleteItem&&U.deleteItem(...t)),disabled:null==this.destinationItemId}," Delete "+(0,i.toDisplayString)(o.propertyName),9,B)])])])],8,L)])}]])},3058:(t,e,o)=>{o.d(e,{Z:()=>i});var a=o(5169);const i={methods:{showErrorModal:function(t,e,o){new a.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${t}`,new a.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new a.u_(document.getElementById("errorModal")).show()}}}},5808:(t,e,o)=>{o.d(e,{Z:()=>D});var a=o(3985),i=o(5555),s=o(1826),n=o(6443),r=o(1327),l=o(8521),d=o(1056),p=o(4324),c=o(9672),m=o(9867),h=o(1239),y=o(5004),u=o(1321),I=o(1216),b=o(5550),g=o(7702),w=o(7903),_=o(2606),f=o(3843),L=o(2393),k=o(3360),v=o(9714),P=o(1323),N=o(2610),C=o(5968);const D={data:()=>({icons:{arrowUp:a.Z,bugIcon:i.Z,bxBriefcase:s.Z,cardChecklist:n.Z,clipboardIcon:r.Z,documentPdf:l.Z,documentText:d.Z,folderIcon:p.Z,groupPresentation:c.Z,imageIcon:m.Z,infoCircle:h.Z,linkIcon:y.Z,linkIcon2:u.Z,linkOut:I.Z,mailIcon:b.Z,microsoftExcel:g.Z,microsoftPowerpoint:w.Z,microsoftWord:_.Z,noteAdd:f.Z,objectStorage:L.Z,passwordIcon:k.Z,trashCan:v.Z,userIcon:P.Z,usersIcon:N.Z,xCircle:C.Z}})}}}]);