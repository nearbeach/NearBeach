"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4063],{7520:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var l=a(641);const s={class:"icon"},o=["width","height"],d=[(0,l.Lk)("path",{fill:"currentColor",d:"M17 22v-8h-4v2h2v6h-3v2h8v-2zM16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8"},null,-1),(0,l.Lk)("path",{fill:"currentColor",d:"M16 30a14 14 0 1 1 14-14a14 14 0 0 1-14 14m0-26a12 12 0 1 0 12 12A12 12 0 0 0 16 4"},null,-1)],g={name:"CarbonInformation",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},i=(0,a(6262).A)(g,[["render",function(e,t,a,g,i,r){return(0,l.uX)(),(0,l.CE)("span",s,[((0,l.uX)(),(0,l.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:a.width,height:a.height,viewBox:"0 0 32 32"},d,8,o))])}]])},1667:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var l=a(641),s=a(33);const o={class:"card"},d={class:"card-body"},g=(0,l.Lk)("h1",null,"Search Tags",-1),i=(0,l.Lk)("hr",null,null,-1),r={class:"row"},n={class:"col-md-4"},u=(0,l.Lk)("strong",null,"Tags",-1),c=(0,l.Lk)("p",{class:"text-instructions"}," Use the search bar to help you find any tags. ",-1),h={class:"text-instructions"},p=(0,l.Lk)("p",{class:"text-instructions"},' To add in any new tags - please click on the "New Tag" button. ',-1),T={class:"col-md-8 tag-list"},m=["onDblclick"],k=["onClick"],v=(0,l.Lk)("hr",null,null,-1),b={class:"row submit-row"},C={class:"col-md-12"};var f=a(9336),y=a(3751);const L={class:"modal fade",id:"editTagModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editTagModalLabel","aria-hidden":"true"},x={class:"modal-dialog"},_={class:"modal-content"},w=(0,l.Lk)("div",{class:"modal-header"},[(0,l.Lk)("h5",{class:"modal-title",id:"editTagModalLabel"}," Edit Tag "),(0,l.Lk)("button",{type:"button",id:"editTagCloseModal",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),M={class:"modal-body"},N={class:"row"},E=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Edit Tags"),(0,l.Lk)("p",{class:"text-instructions"}," Please give the tag an appropriate name. Please do not pick an existing tag name. ")],-1),$={class:"col-md-8"},U={key:0,class:"error"},S=["disabled"],I=(0,l.Lk)("hr",null,null,-1),R={class:"row"},A=(0,l.Lk)("div",{class:"col-md-4"},[(0,l.Lk)("strong",null,"Pick Colour"),(0,l.Lk)("p",{class:"text-instructions"}," Please choose a background and text colour for your tag. ")],-1),D={class:"col-md-8"},X={class:"form-group"},F=(0,l.Lk)("label",null,"Background Colour",-1),B={class:"form-group"},P=(0,l.Lk)("label",null,"Text Colour",-1),Q=(0,l.Lk)("hr",null,null,-1),q={class:"modal-footer"},W=(0,l.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),z=["disabled"];var O=a(2124);const j={name:"EditTagModal",components:{NColorPicker:a(9979).A},emits:["update_tags","new_tag","delete_tag"],props:{existingTags:{type:Array,default:()=>[]},tagColour:{type:String,default:""},tagId:{type:Number,default:0},tagName:{type:String,default:""},tagTextColour:{type:String,default:""}},data(){return{tagColourModel:this.tagColour,tagNameModel:this.tagName,tagTextColourModel:this.tagTextColour}},watch:{tagColour(){this.tagColourModel=this.tagColour},tagName(){this.tagNameModel=this.tagName},tagTextColour(){this.tagTextColourModel=this.tagTextColour}},computed:{...(0,O.L8)({rootUrl:"getRootUrl",userLevel:"getUserLevel"}),canSave(){return 0===this.existingTags.filter((e=>e.fields.tag_name.toUpperCase()===this.tagNameModel.toUpperCase()&&e.pk!==this.tagId)).length}},methods:{deleteTag(){this.axios.post(`${this.rootUrl}tag/delete/${this.tagId}/`).then((()=>{this.$emit("delete_tag",{tag_id:this.tagId}),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error deleting tag",message:`Sorry we could not delete your tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getClasses(e){let t="single-colour";return e===this.tagColourModel&&(t=`${t} selected-colour`),t},newTag(e){this.$store.dispatch("newToast",{header:"New Tag",message:"Creating new Tag - please wait",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_tag"}),this.axios.post(`${this.rootUrl}tag/new/`,e).then((e=>{this.$store.dispatch("newToast",{header:"Tag Saved",message:"Tag has been successfully saved",extra_classes:"bg-success",unique_type:"save_tag"}),this.$emit("new_tag",e.data),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not create new tag",message:`Sorry, we could not create your new tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},saveTag(){const e=new FormData;e.set("tag_id",this.tagId),e.set("tag_name",this.tagNameModel),e.set("tag_colour",this.tagColourModel),e.set("tag_text_colour",this.tagTextColourModel),0===this.tagId?this.newTag(e):this.updateTag(e)},updateColour(e){this.tagColourModel=e},updateTag(e){this.$store.dispatch("newToast",{header:"Updating Tag",message:"Updating Tag - please wait",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_tag"}),this.axios.post(`${this.rootUrl}tag/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Tag Updated",message:"Tag has been updated successfully",extra_classes:"bg-success",unique_type:"save_tag"}),this.$emit("update_tags",{tag_id:this.tagId,tag_name:this.tagNameModel,tag_colour:this.tagColourModel,tag_text_colour:this.tagTextColourModel}),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not update tag",message:`Sorry, we could not update your tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}};var G=a(6262);const K=(0,G.A)(j,[["render",function(e,t,a,o,d,g){const i=(0,l.g2)("n-color-picker");return(0,l.uX)(),(0,l.CE)("div",L,[(0,l.Lk)("div",x,[(0,l.Lk)("div",_,[w,(0,l.Lk)("div",M,[(0,l.Lk)("div",N,[E,(0,l.Lk)("div",$,[(0,l.Lk)("label",null,[(0,l.eW)(" Tag Name "),g.canSave?(0,l.Q3)("v-if",!0):((0,l.uX)(),(0,l.CE)("span",U," Please use a unique name "))]),(0,l.bo)((0,l.Lk)("input",{class:"form-control",disabled:e.userLevel<=1,"onUpdate:modelValue":t[0]||(t[0]=e=>d.tagNameModel=e)},null,8,S),[[y.vModelText,d.tagNameModel]])])]),I,(0,l.Lk)("div",R,[A,(0,l.Lk)("div",D,[(0,l.Lk)("div",X,[F,(0,l.bF)(i,{"show-alpha":!1,disabled:e.userLevel<=1,value:d.tagColourModel,"onUpdate:value":t[1]||(t[1]=e=>d.tagColourModel=e),modes:["hex"]},null,8,["disabled","value"])]),(0,l.Lk)("div",B,[P,(0,l.bF)(i,{value:d.tagTextColourModel,"onUpdate:value":t[2]||(t[2]=e=>d.tagTextColourModel=e),disabled:e.userLevel<=1,"show-alpha":!1,modes:["hex"]},null,8,["value","disabled"]),(0,l.Lk)("span",null,(0,s.toDisplayString)(d.tagTextColourModel),1)]),Q,(0,l.Lk)("div",{class:"single-tag",style:(0,s.normalizeStyle)(`margin-right:0;background-color:${d.tagColourModel};color:${d.tagTextColourModel};`)},(0,s.toDisplayString)(d.tagNameModel),5)])])]),(0,l.Lk)("div",q,[0!==a.tagId&&e.userLevel>1?((0,l.uX)(),(0,l.CE)("button",{key:0,type:"button",class:"btn btn-danger delete-tag",onClick:t[3]||(t[3]=(...e)=>g.deleteTag&&g.deleteTag(...e))}," Delete Tag ")):(0,l.Q3)("v-if",!0),W,e.userLevel>1?((0,l.uX)(),(0,l.CE)("button",{key:1,type:"button",class:"btn btn-primary",disabled:!g.canSave,onClick:t[4]||(t[4]=(...e)=>g.saveTag&&g.saveTag(...e))}," Save Tag ",8,z)):(0,l.Q3)("v-if",!0)])])])])}]]),V={name:"SearchTags",components:{CarbonInformation:a(7520).default,EditTagModal:K},props:{rootUrl:{type:String,default:"/"},tagResults:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},data(){return{singleTagColour:"",singleTagId:0,singleTagName:"#37cbd2",singleTagTextColour:"#ffffff",localTagResults:this.tagResults}},methods:{addTag(){this.singleTagName="default tag",this.singleTagId=0,this.singleTagColour="#37cbd2",this.singleTagTextColour="#ffffff",new f.aF(document.getElementById("editTagModal")).show()},deleteTag(e){this.localTagResults=this.localTagResults.filter((t=>t.pk!==e.tag_id))},editTag(e){const t=this.localTagResults.filter((t=>t.pk===e))[0];this.singleTagName=t.fields.tag_name,this.singleTagId=e,this.singleTagColour=t.fields.tag_colour,this.singleTagTextColour=t.fields.tag_text_colour,new f.aF(document.getElementById("editTagModal")).show()},newTag(e){this.localTagResults.push(e[0])},updateTags(e){const t=this.localTagResults.findIndex((t=>t.pk===e.tag_id));this.localTagResults[t].fields.tag_name=e.tag_name,this.localTagResults[t].fields.tag_colour=e.tag_colour,this.localTagResults[t].fields.tag_text_colour=e.tag_text_colour}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},H=(0,G.A)(V,[["render",function(e,t,a,f,y,L){const x=(0,l.g2)("carbon-information"),_=(0,l.g2)("edit-tag-modal");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("div",d,[g,i,(0,l.Lk)("div",r,[(0,l.Lk)("div",n,[u,c,(0,l.Lk)("p",h,[(0,l.eW)(" Click on the icon "),(0,l.bF)(x),(0,l.eW)(" to edit the tag. ")]),p]),(0,l.Lk)("div",T,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(y.localTagResults,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.pk,style:(0,s.normalizeStyle)(`background-color: ${e.fields.tag_colour};color: ${e.fields.tag_text_colour}`),onDblclick:t=>L.editTag(e.pk),class:"single-tag"},[(0,l.eW)((0,s.toDisplayString)(e.fields.tag_name)+" ",1),(0,l.Lk)("span",{onClick:t=>L.editTag(e.pk)},[(0,l.bF)(x)],8,k)],44,m)))),128))]),(0,l.Q3)(" ADD NEW TAG BUTTON "),v,(0,l.Lk)("div",b,[(0,l.Lk)("div",C,[a.userLevel>=2?((0,l.uX)(),(0,l.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>L.addTag&&L.addTag(...e))},"Add Tag")):(0,l.Q3)("v-if",!0)])])]),(0,l.Q3)(" MODALS "),(0,l.bF)(_,{"existing-tags":y.localTagResults,"tag-colour":y.singleTagColour,"tag-id":y.singleTagId,"tag-name":y.singleTagName,"tag-text-colour":y.singleTagTextColour,onNew_tag:L.newTag,onDelete_tag:t[1]||(t[1]=e=>L.deleteTag(e)),onUpdate_tags:L.updateTags},null,8,["existing-tags","tag-colour","tag-id","tag-name","tag-text-colour","onNew_tag","onUpdate_tags"])])])}]])}}]);