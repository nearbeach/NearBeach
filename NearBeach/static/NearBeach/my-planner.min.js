"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[9738],{961:(e,t,a)=>{a.r(t),a.d(t,{default:()=>oe});var o=a(641),s=a(33);const l={class:"my-planner"},r={class:"my-planner--header"},n={class:"text-instructions"},i={class:"my-planner--body"},d=["data-user-job-id"],c={key:0,class:"card-priority-line priority-normal"},u={class:"text-instructions"},b={class:"text-instructions"};var h=a(432),m=a.n(h),p=a(6285),y=a(9336),k=a(2321),g=a(8083),j=a(9827),L=a(2243);const v={class:"modal fade",id:"confirmUserJobDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmUserJobDelete","aria-hidden":"true"},f={class:"modal-dialog"},_={class:"modal-content"},w={class:"modal-footer"};var A=a(2124);const D={name:"confirmUserJobDelete",props:{userJobId:{type:Number,default:0}},computed:{...(0,A.L8)({rootUrl:"getRootUrl"})},methods:{deleteUserJob(){const e=new FormData;e.set("user_job_id",`${this.userJobId}`),this.axios.post(`${this.rootUrl}my_planner/delete_user_job/`,e).then((()=>{this.$emit("remove_user_job",{})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing user job from my planner",message:`We encounted an error removing user job from the planner. Error -> ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){document.getElementById("confirmUserJobDeleteButton").click()}}};var M=a(6262);const C=(0,M.A)(D,[["render",function(e,t,a,s,l,r){return(0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("div",f,[(0,o.Lk)("div",_,[t[2]||(t[2]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title",id:"confirmUserJobDelete"}," Please confirm User Job Deletion "),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmUserJobDeleteButton"})],-1)),t[3]||(t[3]=(0,o.Lk)("div",{class:"modal-body"}," Are you sure you want to remove the current object from your planner? ",-1)),(0,o.Lk)("div",w,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>r.closeModal&&r.closeModal(...e))}," No "),(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>r.deleteUserJob&&r.deleteUserJob(...e))}," Yes ")])])])])}]]);var E=a(3751);const S={class:"modal fade",id:"newPlannerObjectWizardModal",tabindex:"-1","aria-labelledby":"newPlannerObjectModel","aria-hidden":"true"},I={class:"modal-dialog modal-lg modal-fullscreen-lg-down"},T={class:"modal-content"},x={class:"modal-body"},U={class:"row"},O={class:"col-md-8"},$={key:1,class:"alert alert-success"},P={class:"row"},F={class:"col-md-8"},J={class:"row"},R={class:"col-md-6 mt-4"},W={class:"row"},X={class:"col-md-8"},N={key:0,class:"alert alert-info"},B={key:1,class:"alert alert-warning"},Q={key:2,class:"form-group mb-4"},z={key:3,class:"wizard-results"},H={class:"wizard-results--card--tick"},K=["value","id"],q={class:"wizard-results--card--content"},G={class:"text-instructions"},Y={class:"text-instructions"},V={class:"modal-footer"},Z=["disabled"],ee={name:"NewPlannerObjectWizard",components:{NSelect:a(1080).A},props:{},computed:{...(0,A.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},data:()=>({dayModel:"",isSearching:!1,linkModel:[],listOfDays:[],objectModel:null,objectFilteredResults:[],objectResults:[],objectSelection:[{value:"kanban_card",label:"Kanban Card"},{value:"project",label:"Project"},{value:"task",label:"Task"}],searchTermModel:""}),methods:{renderObjectId(e){switch(e.destination){case"kanban_card":return`Card${e.location_id}`;case"project":return`Pro${e.location_id}`;case"task":return`Task${e.location_id}`;default:return"----"}},saveLinks(){if(0===this.linkModel.length)return;this.$store.dispatch("newToast",{header:"Currenty updating your Planner",message:"Currently updating your planner. Please wait",extra_classes:"bg-warning",delay:0,unique_type:"add-objects-to-planner"});const e=new FormData;e.set("destination",this.objectModel),this.linkModel.forEach((t=>{e.append(this.objectModel,t)})),e.set("job_date",this.dayModel),this.axios.post(`${this.rootUrl}my_planner/add_object/`,e).then((e=>{this.$emit("update_date_array",e.data),this.objectModel=null,document.getElementById("newPlannerObjectButton").click(),this.$store.dispatch("newToast",{header:"Updated your Planner",message:"We have successfully updated your planner",extra_classes:"bg-success",unique_type:"add-objects-to-planner"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error adding objects to your planner",message:`Sorry we could not add any objects to your planner. ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"add-objects-to-planner"})}))}},watch:{objectModel(){this.linkModel=[],null!==this.objectModel?(this.isSearching=!0,this.axios.post(`${this.rootUrl}my_planner/get_object_list/${this.objectModel}/`).then((e=>{this.objectResults=e.data,this.objectFilteredResults=e.data,this.isSearching=!1,this.searchTermModel=""})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Object List",message:`We had an issue getting Object List. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))):this.isSearching=!1},searchTermModel(){""!==this.searchTermModel&&null!==this.searchTermModel?this.objectFilteredResults=this.objectResults.filter((e=>e.title.toLowerCase().includes(this.searchTermModel.toLowerCase()))):this.objectFilteredResults=this.objectResults}},mounted(){const e=p.c9.now();for(let t=0;t<7;t++){const a=e.plus({days:t}),o=a.toFormat("yyyy-LL-dd"),s=a.toFormat("cccc");this.listOfDays.push({label:`${s} - ${o}`,value:o})}this.dayModel=this.listOfDays[0].value}},te=(0,M.A)(ee,[["render",function(e,t,a,l,r,n){const i=(0,o.g2)("n-select");return(0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",I,[(0,o.Lk)("div",T,[t[14]||(t[14]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h2",null," New Planner Object Wizard "),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newPlannerObjectButton"},[(0,o.Lk)("span",{"aria-hidden":"true"})])],-1)),(0,o.Lk)("div",x,[(0,o.Q3)(" CHOOSING A OBJECT TYPE "),(0,o.Lk)("div",U,[t[5]||(t[5]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Object Selector"),(0,o.Lk)("p",{class:"text-instructions"}," Please select which object you would like to link to this requirement. ")],-1)),(0,o.Lk)("div",O,[r.isSearching?((0,o.uX)(),(0,o.CE)("div",$," Searching for "+(0,s.toDisplayString)(r.objectModel)+"s ",1)):((0,o.uX)(),(0,o.Wv)(i,{key:0,options:r.objectSelection,value:r.objectModel,"onUpdate:value":t[0]||(t[0]=e=>r.objectModel=e),class:"object-selection"},null,8,["options","value"]))])]),(0,o.Q3)(" OBJECT LOCATION "),t[11]||(t[11]=(0,o.Lk)("hr",null,null,-1)),(0,o.Lk)("div",P,[t[7]||(t[7]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Select Day"),(0,o.Lk)("p",{class:"text-instructions"}," Select the appropriate day for this object. ")],-1)),(0,o.Lk)("div",F,[(0,o.Lk)("div",J,[(0,o.Lk)("div",R,[t[6]||(t[6]=(0,o.Lk)("label",null,"Day",-1)),(0,o.bF)(i,{options:r.listOfDays,label:"column",value:r.dayModel,"onUpdate:value":t[1]||(t[1]=e=>r.dayModel=e)},null,8,["options","value"])])])])]),(0,o.Q3)(" SELECTING WHICH OBJECTS TO LINK TO "),t[12]||(t[12]=(0,o.Lk)("hr",null,null,-1)),(0,o.Lk)("div",W,[t[10]||(t[10]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Select Links"),(0,o.Lk)("p",{class:"text-instructions"}," Please select which of the objects you want to connect to this requirement. ")],-1)),(0,o.Lk)("div",X,[(0,o.Q3)(" LOADING PLACEHOLDER "),r.isSearching||null==r.objectModel?((0,o.uX)(),(0,o.CE)("div",N," Please select the object type. ")):(0,o.Q3)("v-if",!0),0===r.objectResults.length&&null!=r.objectModel?((0,o.uX)(),(0,o.CE)("div",B," Sorry. It currently looks like there are no "+(0,s.toDisplayString)(this.objectModel)+"s assigned to you. Only assigned "+(0,s.toDisplayString)(this.objectModel)+"s will show up here. ",1)):(0,o.Q3)("v-if",!0),(0,o.Q3)(" SEARCH RESULTS "),!r.isSearching&&r.objectResults.length>0&&null!=r.objectModel?((0,o.uX)(),(0,o.CE)("div",Q,[t[8]||(t[8]=(0,o.Lk)("label",null,"Search Terms",-1)),(0,o.bo)((0,o.Lk)("input",{id:"search_terms",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>r.searchTermModel=e),type:"text"},null,512),[[E.vModelText,r.searchTermModel]])])):(0,o.Q3)("v-if",!0),!r.isSearching&&r.objectFilteredResults.length>0&&null!=r.objectModel?((0,o.uX)(),(0,o.CE)("div",z,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.objectFilteredResults,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"wizard-results--card",key:e.location_id},[(0,o.Lk)("div",H,[(0,o.bo)((0,o.Lk)("input",{class:"form-check-input",type:"checkbox",name:"link-option",value:e.location_id,id:`checkbox_${e.location_id}`,"onUpdate:modelValue":t[3]||(t[3]=e=>r.linkModel=e)},null,8,K),[[E.vModelCheckbox,r.linkModel]])]),(0,o.Lk)("div",q,[(0,o.Lk)("div",G,(0,s.toDisplayString)(n.renderObjectId(e)),1),(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,s.toDisplayString)(e.title),1)]),(0,o.Lk)("div",null,[t[9]||(t[9]=(0,o.eW)(" Status: ")),(0,o.Lk)("span",Y,(0,s.toDisplayString)(e.status),1)])])])))),128))])):(0,o.Q3)("v-if",!0)])])]),(0,o.Lk)("div",V,[t[13]||(t[13]=(0,o.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,o.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===r.linkModel.length,onClick:t[4]||(t[4]=(...e)=>n.saveLinks&&n.saveLinks(...e))}," Save changes ",8,Z)])])])])}]]),ae={name:"MyPlanner",components:{ConfirmUserJobDelete:C,draggable:m(),Icon:k.In,NewPlannerObjectWizard:te},props:{rootUrl:{type:String,default:"/"},objectData:{type:Array,default:()=>[]},staticUrl:{type:String,default:"/"},theme:{type:String,default:""}},data:()=>({confirmIdToDelete:0,confirmIndex:0,dateArray:[]}),mixins:[g.A,j.A,L.A],methods:{confirmCardDelete(e,t){this.confirmIdToDelete=e,this.confirmIndex=t,new y.aF(document.getElementById("confirmUserJobDeleteModal")).show()},getClass:e=>"Closed"===e?"text-decoration-line-through":"",formatObjectId(e){const t=this.getNiceDatetime(e.end_date);switch(e.object_type){case"card":return`Card${e.location_id}`;case"project":return`Pro${e.location_id} - ${t}`;case"task":return`Task${e.location_id} - ${t}`;default:return"----"}},removeUserJob(){this.dateArray[this.confirmIndex].data=this.dateArray[this.confirmIndex].data.filter((e=>e.user_job_id!==this.confirmIdToDelete))},onEnd(e){const t=e.to,a=e.from,o=e.item.dataset.userJobId,s=new FormData;s.set("user_job_id",o),s.set("job_date",t.dataset.jobDate);const l=t.dataset.index,r=a.dataset.index;this.dateArray[l].data.forEach((e=>{s.append("new_destination",e.user_job_id)})),l!==r&&this.dateArray[r].data.forEach((e=>{s.append("old_destination",e.user_job_id)})),this.axios.post(`${this.rootUrl}my_planner/update_object_list/`,s).catch((e=>{this.$store.dispatch("newToast",{header:"Error updating my planner",message:`Sorry, we could not update your planner. ${e}`,extra_classes:"bg-danger",delay:0})}))},showModal(){new y.aF(document.getElementById("newPlannerObjectWizardModal")).show()},updateDateArray(e){this.dateArray=this.dateArray.map((t=>{const a=e.filter((e=>e.job_date===t.date));return{date:t.date,day:t.day,data:a}}))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl});const e=p.c9.now();for(let t=0;t<7;t++){const a=e.plus({days:t}),o=this.objectData.filter((e=>e.job_date===a.toFormat("yyyy-LL-dd")));this.dateArray.push({date:a.toFormat("yyyy-LL-dd"),day:a.toFormat("cccc"),data:o})}}},oe=(0,M.A)(ae,[["render",function(e,t,a,h,m,p){const y=(0,o.g2)("Icon"),k=(0,o.g2)("draggable"),g=(0,o.g2)("confirm-user-job-delete"),j=(0,o.g2)("new-planner-object-wizard"),L=(0,o.g2)("n-config-provider");return(0,o.uX)(),(0,o.Wv)(L,{theme:e.getTheme(a.theme)},{default:(0,o.k6)((()=>[t[5]||(t[5]=(0,o.Lk)("h1",{class:"planner-header"},"My Planner",-1)),(0,o.Lk)("button",{class:"btn btn-primary planner-button",onClick:t[0]||(t[0]=(...e)=>p.showModal&&p.showModal(...e))},"Add Object"),(0,o.Lk)("div",l,[(0,o.Q3)(" HEADER "),(0,o.Lk)("div",r,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.dateArray,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.date,class:"my-planner--header-single-day"},[(0,o.Lk)("p",null,[(0,o.eW)((0,s.toDisplayString)(e.day),1),t[3]||(t[3]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("span",n,(0,s.toDisplayString)(e.date),1)])])))),128))]),(0,o.Q3)(" BODY "),(0,o.Lk)("div",i,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.dateArray,((a,l)=>((0,o.uX)(),(0,o.Wv)(k,{class:"my-planner--single-day list-group",group:"objects","ghost-class":"ghost",itemKey:"user_job_id","data-job-date":a.date,"data-index":l,key:a.date,list:a.data,onEnd:t[1]||(t[1]=e=>p.onEnd(e))},{item:(0,o.k6)((({element:a})=>[(0,o.Lk)("div",{class:"list-group-item","data-user-job-id":a.user_job_id},["Closed"!==a.higher_order_status?((0,o.uX)(),(0,o.CE)("div",c)):(0,o.Q3)("v-if",!0),(0,o.Lk)("div",u,(0,s.toDisplayString)(p.formatObjectId(a)),1),(0,o.Lk)("div",null,[(0,o.Lk)("strong",{class:(0,s.normalizeClass)(p.getClass(a.higher_order_status))},(0,s.toDisplayString)(a.title),3)]),(0,o.Lk)("div",null,[t[4]||(t[4]=(0,o.eW)("Status: ")),(0,o.Lk)("span",b,(0,s.toDisplayString)(a.status),1)]),(0,o.bF)(y,{class:"kanban-card-info-icon",style:{color:"red"},icon:e.icons.trashCan,onClick:e=>p.confirmCardDelete(a.user_job_id,l),onDblclick:e=>p.confirmCardDelete(a.user_job_id,l)},null,8,["icon","onClick","onDblclick"])],8,d)])),_:2},1032,["data-job-date","data-index","list"])))),128))])]),(0,o.bF)(g,{"user-job-id":m.confirmIdToDelete,onRemove_user_job:p.removeUserJob},null,8,["user-job-id","onRemove_user_job"]),(0,o.bF)(j,{onUpdate_date_array:t[2]||(t[2]=e=>p.updateDateArray(e))})])),_:1},8,["theme"])}]])},8083:(e,t,a)=>{a.d(t,{A:()=>s});var o=a(6285);const s={methods:{getNiceDatetime:e=>""===e||null==e?"":o.c9.fromISO(e).toLocaleString(o.c9.DATETIME_MED),getNiceDatetimeFromInt:e=>""===e||null==e?"":o.c9.fromMillis(e).toLocaleString(o.c9.DATETIME_MED),getNiceDate:e=>""===e||null==e?"":o.c9.fromISO(e).toLocaleString(o.c9.DATE_MED_WITH_WEEKDAY),disableDate(e){const t=new Date;return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),e<=t.getTime()-36e5}}}},9827:(e,t,a)=>{a.d(t,{A:()=>s});var o=a(7413);const s={data:()=>({darkTheme:o.a}),methods:{getTheme:e=>"dark"===e?o.a:null}}},2243:(e,t,a)=>{a.d(t,{A:()=>C});var o=a(8998),s=a(102),l=a(9394),r=a(2438),n=a(9605),i=a(3438),d=a(5666),c=a(6375),u=a(1647),b=a(7066),h=a(4397),m=a(4603),p=a(7432),y=a(1758),k=a(8959),g=a(9587),j=a(9675),L=a(386),v=a(6120),f=a(8086),_=a(5617),w=a(6325),A=a(6500),D=a(5707),M=a(1511);const C={data:()=>({icons:{arrowUp:o.A,bugIcon:s.A,bxBriefcase:l.A,cardChecklist:r.A,clipboardIcon:n.A,documentPdf:i.A,documentText:d.A,folderIcon:c.A,groupPresentation:u.A,imageIcon:b.A,infoCircle:h.A,linkIcon:m.A,linkIcon2:p.A,linkOut:y.A,mailIcon:k.A,microsoftExcel:g.A,microsoftPowerpoint:j.A,microsoftWord:L.A,noteAdd:v.A,objectStorage:f.A,passwordIcon:_.A,trashCan:w.A,userIcon:A.A,usersIcon:D.A,xCircle:M.A}})}}}]);