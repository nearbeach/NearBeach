"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5555],{6262:(e,t)=>{t.A=(e,t)=>{const s=e.__vccOpts||e;for(const[e,c]of t)s[e]=c;return s}},7178:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var c=s(641),a=s(3751),l=s(33);const r={class:"card"},d={class:"card-body"},o={class:"form-row"},i={class:"form-group"},u={key:0,class:"scheduled-object-loader"},h=["src"],n={key:1,class:"alert alert-info"},b={key:2,class:"object-card-list"},j={class:"object-card--detail"},k=["href"],g={class:"object-card--detail--link"},p={class:"object-card--detail--description"},_={class:"object-card--status"},y=["href"],L={class:"object-card--status--status"},v={key:0},m={key:1},f={key:3},S={key:4,class:"row submit-row"},O={name:"ScheduleObjects",props:{rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userLevel:{type:Object,default:()=>({project:0,task:0})}},data:()=>({currentPage:1,isLoadingData:!0,numberOfPages:1,searchModel:"",searchTimeout:"",scheduleObjectResults:[]}),computed:{canUserAddScheduledObject(){return this.userLevel.project>=3||this.userLevel.task>=3}},watch:{searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),(this.searchModel.length>=3||0===this.searchModel.length)&&(this.searchTimeout=setTimeout((()=>{this.getScheduleObjectResults()}),500))}},methods:{getScheduleObjectResults(){const e=new FormData;e.set("search",this.searchModel),e.set("array_of_objects","project"),e.set("array_of_objects","task"),e.set("destination_page",this.currentPage),this.axios.post(`${this.rootUrl}search/scheduled_objects/`,e).then((e=>{this.scheduleObjectResults=e.data,this.isLoadingData=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Scheduled Objects",message:`Sorry, could not get the scheduled objects. Error -> ${e}`,delay:0,extra_classes:"bg-danger"})}))},getType:e=>0===e||"0"===e?"Project":"Task"},mounted(){this.getScheduleObjectResults()}},C=(0,s(6262).A)(O,[["render",function(e,t,s,O,C,E){return(0,c.uX)(),(0,c.CE)("div",r,[(0,c.Lk)("div",d,[t[7]||(t[7]=(0,c.Lk)("h1",null,"Scheduled Objects",-1)),t[8]||(t[8]=(0,c.Lk)("hr",null,null,-1)),(0,c.Q3)(" SEARCH FIELD "),(0,c.Lk)("div",o,[(0,c.Lk)("div",i,[t[1]||(t[1]=(0,c.Lk)("label",null,"Search:",-1)),(0,c.bo)((0,c.Lk)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>C.searchModel=e),maxlength:"250"},null,512),[[a.vModelText,C.searchModel]])])]),t[9]||(t[9]=(0,c.Lk)("hr",null,null,-1)),C.isLoadingData?((0,c.uX)(),(0,c.CE)("div",u,[(0,c.Lk)("img",{src:`${s.staticUrl}NearBeach/images/placeholder/loading_re.svg`,alt:"Please wait whilst we load in the scheduled objects"},null,8,h)])):0===C.scheduleObjectResults.length?((0,c.uX)(),(0,c.CE)("div",n," Currently there are no scheduled objects. ")):((0,c.uX)(),(0,c.CE)("div",b,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)(C.scheduleObjectResults,(e=>((0,c.uX)(),(0,c.CE)("div",{class:"object-card",key:e.schedule_object_id},[(0,c.Lk)("div",j,[(0,c.Lk)("a",{href:`${s.rootUrl}scheduled_object_information/${e.schedule_object_id}/`},[(0,c.Lk)("div",g,[(0,c.eW)(" Sch"+(0,l.toDisplayString)(e.schedule_object_id),1),t[2]||(t[2]=(0,c.Lk)("br",null,null,-1)),t[3]||(t[3]=(0,c.Lk)("strong",null,"Frequency: ",-1)),(0,c.eW)(" "+(0,l.toDisplayString)(e.frequency),1),t[4]||(t[4]=(0,c.Lk)("br",null,null,-1)),t[5]||(t[5]=(0,c.Lk)("strong",null,"Type: ",-1)),(0,c.eW)(" "+(0,l.toDisplayString)(E.getType(e.object_template_type)),1)]),(0,c.Lk)("div",p,(0,l.toDisplayString)(e.object_template_json.object_title),1)],8,k)]),(0,c.Lk)("div",_,[(0,c.Lk)("a",{href:`${s.rootUrl}scheduled_object_information/${e.schedule_object_id}/`},[(0,c.Lk)("div",L,[e.is_active?((0,c.uX)(),(0,c.CE)("span",v,"Active Schedule")):((0,c.uX)(),(0,c.CE)("span",m,"Deactivated"))])],8,y)])])))),128))])),E.canUserAddScheduledObject?((0,c.uX)(),(0,c.CE)("hr",f)):(0,c.Q3)("v-if",!0),E.canUserAddScheduledObject?((0,c.uX)(),(0,c.CE)("div",S,t[6]||(t[6]=[(0,c.Lk)("div",{class:"col-md-12"},[(0,c.Lk)("a",{href:"/new_scheduled_object/",class:"btn btn-primary save-changes"}," New Scheduled Object ")],-1)]))):(0,c.Q3)("v-if",!0)])])}]])}}]);