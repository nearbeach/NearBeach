"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5555],{6262:(e,t)=>{t.A=(e,t)=>{const s=e.__vccOpts||e;for(const[e,c]of t)s[e]=c;return s}},6976:(e,t,s)=>{s.r(t),s.d(t,{default:()=>$});var c=s(641),l=s(3751),a=s(33);const r={class:"card"},d={class:"card-body"},o=(0,c.Lk)("h1",null,"Scheduled Objects",-1),i=(0,c.Lk)("hr",null,null,-1),u={class:"form-row"},h={class:"form-group"},n=(0,c.Lk)("label",null,"Search:",-1),b=(0,c.Lk)("hr",null,null,-1),j={key:0,class:"scheduled-object-loader"},k=["src"],p={key:1,class:"alert alert-info"},g={key:2,class:"object-card-list"},L={class:"object-card--detail"},v=["href"],y={class:"object-card--detail--link"},m=(0,c.Lk)("br",null,null,-1),_=(0,c.Lk)("strong",null,"Frequency: ",-1),f=(0,c.Lk)("br",null,null,-1),S=(0,c.Lk)("strong",null,"Type: ",-1),O={class:"object-card--detail--description"},C={class:"object-card--status"},E=["href"],w={class:"object-card--status--status"},T={key:0},D={key:1},U={key:3},X={key:4,class:"row submit-row"},M=[(0,c.Lk)("div",{class:"col-md-12"},[(0,c.Lk)("a",{href:"/new_scheduled_object/",class:"btn btn-primary save-changes"}," New Scheduled Object ")],-1)],R={name:"ScheduleObjects",props:{rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},userLevel:{type:Object,default:()=>({project:0,task:0})}},data:()=>({isLoadingData:!0,searchModel:"",searchTimeout:"",scheduleObjectResults:[]}),computed:{canUserAddScheduledObject(){return this.userLevel.project>=3||this.userLevel.task>=3}},watch:{searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),(this.searchModel.length>=3||0===this.searchModel.length)&&(this.searchTimeout=setTimeout((()=>{this.getScheduleObjectResults()}),500))}},methods:{getScheduleObjectResults(){const e=new FormData;e.set("search",this.searchModel),this.axios.post(`${this.rootUrl}search/scheduled_objects/`,e).then((e=>{this.scheduleObjectResults=e.data,this.isLoadingData=!1})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Scheduled Objects",message:`Sorry, could not get the scheduled objects. Error -> ${e}`,delay:0,extra_classes:"bg-danger"})}))},getType:e=>0===e||"0"===e?"Project":"Task"},mounted(){this.getScheduleObjectResults()}},$=(0,s(6262).A)(R,[["render",function(e,t,s,R,$,A){return(0,c.uX)(),(0,c.CE)("div",r,[(0,c.Lk)("div",d,[o,i,(0,c.Q3)(" SEARCH FIELD "),(0,c.Lk)("div",u,[(0,c.Lk)("div",h,[n,(0,c.bo)((0,c.Lk)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>$.searchModel=e),maxlength:"250"},null,512),[[l.vModelText,$.searchModel]])])]),b,$.isLoadingData?((0,c.uX)(),(0,c.CE)("div",j,[(0,c.Lk)("img",{src:`${s.staticUrl}NearBeach/images/placeholder/loading_re.svg`,alt:"Please wait whilst we load in the scheduled objects"},null,8,k)])):0===$.scheduleObjectResults.length?((0,c.uX)(),(0,c.CE)("div",p," Currently there are no scheduled objects. ")):((0,c.uX)(),(0,c.CE)("div",g,[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)($.scheduleObjectResults,(e=>((0,c.uX)(),(0,c.CE)("div",{class:"object-card",key:e.schedule_object_id},[(0,c.Lk)("div",L,[(0,c.Lk)("a",{href:`${s.rootUrl}scheduled_object_information/${e.schedule_object_id}/`},[(0,c.Lk)("div",y,[(0,c.eW)(" Sch"+(0,a.toDisplayString)(e.schedule_object_id),1),m,_,(0,c.eW)(" "+(0,a.toDisplayString)(e.frequency),1),f,S,(0,c.eW)(" "+(0,a.toDisplayString)(A.getType(e.object_template_type)),1)]),(0,c.Lk)("div",O,(0,a.toDisplayString)(e.object_template_json.object_title),1)],8,v)]),(0,c.Lk)("div",C,[(0,c.Lk)("a",{href:`${s.rootUrl}scheduled_object_information/${e.schedule_object_id}/`},[(0,c.Lk)("div",w,[e.is_active?((0,c.uX)(),(0,c.CE)("span",T,"Active Schedule")):((0,c.uX)(),(0,c.CE)("span",D,"Deactivated"))])],8,E)])])))),128))])),A.canUserAddScheduledObject?((0,c.uX)(),(0,c.CE)("hr",U)):(0,c.Q3)("v-if",!0),A.canUserAddScheduledObject?((0,c.uX)(),(0,c.CE)("div",X,M)):(0,c.Q3)("v-if",!0)])])}]])}}]);