"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6792],{2434:(t,e,s)=>{s.r(e),s.d(e,{default:()=>q});var a=s(641),o=s(33);const r={class:"card"},i={class:"card-body"},l=["href"],d={class:"row"},n={class:"col-md-8"},u={key:0,class:"error"},c=["data-id"],h=["data-id"],p=["onClick"];var g=s(2321),S=s(432),m=s.n(S),b=s(9336),x=s(2243);const C={class:"modal fade",id:"confirmStatusDeleteModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},v={class:"modal-dialog"},L={class:"modal-content"},f={class:"modal-body"},w={class:"row"},y={class:"row"},k={class:"modal-footer"},_=["disabled"];var A=s(1080),M=s(2124);const I={name:"ObjectStatusConfirmDelete",components:{NSelect:A.A},props:{statusData:{type:Object,default:()=>({higherOrderStatus:"Closed",status:""})},statusId:{type:Number,default:0},statusList:{type:Array,default:()=>[]}},data:()=>({migrationStatusIdModel:"",newStatusList:[]}),watch:{statusId(){this.migrationStatusIdModel="",this.newStatusList=this.statusList.filter((t=>parseInt(t.status_id)!==parseInt(this.statusId))).map((t=>({label:t.status,value:t.status_id})))}},computed:{...(0,M.L8)({destination:"getDestination",rootUrl:"getRootUrl"})},methods:{deleteStatus(){this.$store.dispatch("newToast",{header:"Removing Status",message:"Please wait whilst we remove the status",extra_classes:"bg-warning text-dark",delay:0,unique_type:"remove_status"});const t=new FormData;t.set("status_id",`${this.statusId}`),t.set("migration_status_id",this.migrationStatusIdModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/delete/`,t).then((()=>{this.$store.dispatch("newToast",{header:"Status Successfully Removed",message:"Status has been removed",extra_classes:"bg-success",unique_type:"remove_status"}),this.$emit("delete_status"),document.getElementById("confirmStatusDeleteModalClose").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Removing Status",message:`Sorry, we could not remove the status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"remove_status"})}))}}};var D=s(6262);const $=(0,D.A)(I,[["render",function(t,e,s,r,i,l){const d=(0,a.g2)("n-select");return(0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("div",v,[(0,a.Lk)("div",L,[e[10]||(e[10]=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title"},"Confirm Deletion"),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmStatusDeleteModalClose"})],-1)),(0,a.Lk)("div",f,[(0,a.Q3)(" WARNING "),e[6]||(e[6]=(0,a.Lk)("div",{class:"alert alert-warning"},[(0,a.Lk)("h4",null,"WARNING"),(0,a.Lk)("p",null," This process can not be reversed. Deleting a status will remove it completely. "),(0,a.Lk)("p",null," All objects connected with this status will have to migrate to a new status. This is also permanent and can not be reversed. ")],-1)),(0,a.Lk)("div",w,[(0,a.Lk)("p",null,[e[2]||(e[2]=(0,a.Lk)("strong",null,"Status: ",-1)),(0,a.eW)((0,o.toDisplayString)(s.statusData.status),1)]),(0,a.Lk)("p",null,[e[3]||(e[3]=(0,a.Lk)("strong",null,"Higher Order Status: ",-1)),(0,a.eW)((0,o.toDisplayString)(s.statusData.higherOrderStatus),1)])]),e[7]||(e[7]=(0,a.Lk)("div",{class:"spacer"},null,-1)),(0,a.Lk)("div",y,[e[4]||(e[4]=(0,a.Lk)("p",null,"Please select an appropriate status to migrate too.",-1)),e[5]||(e[5]=(0,a.Lk)("label",null,[(0,a.Lk)("strong",null,"New Status for the objects")],-1)),(0,a.bF)(d,{options:i.newStatusList,value:i.migrationStatusIdModel,"onUpdate:value":e[0]||(e[0]=t=>i.migrationStatusIdModel=t),style:{"z-index":"9999"},class:"new-card-destination"},null,8,["options","value"])]),e[8]||(e[8]=(0,a.Lk)("br",null,null,-1))]),(0,a.Lk)("div",k,[e[9]||(e[9]=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>l.deleteStatus&&l.deleteStatus(...t)),disabled:null===this.migrationStatusIdModel||""===this.migrationStatusIdModel}," Delete Status ",8,_)])])])])}]]);var O=s(3751);const z={class:"modal fade",id:"objectStatusModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-keyboard":"false"},E={class:"modal-dialog"},j={class:"modal-content"},T={class:"modal-body"},H={class:"form-group"},F={key:0,class:"error"},P={class:"form-group"},U={class:"modal-footer"},N=["disabled"],W={name:"ObjectStatusModal",components:{NSelect:A.A},props:{statusData:{type:Object,default:()=>({higherOrderStatus:"Closed",status:""})},statusId:{type:Number,default:0},statusList:{type:Array,default:()=>[]}},computed:{...(0,M.L8)({destination:"getDestination",rootUrl:"getRootUrl"})},data:()=>({higherOrderStatusList:[{label:"Backlog",value:"Backlog"},{label:"Blocked",value:"Blocked"},{label:"Normal",value:"Normal"},{label:"Closed",value:"Closed"}],higherOrderStatusModel:"Normal",isDuplicate:!1,localStatusModel:""}),watch:{statusId(){this.higherOrderStatusModel=this.statusData.higherOrderStatus,this.localStatusModel=this.statusData.status},localStatusModel(){const t=this.statusList.filter((t=>t.status.toLowerCase()===this.localStatusModel.toLowerCase())).length;this.isDuplicate=t>0}},methods:{editStatus(){this.$store.dispatch("newToast",{header:"Updating Status",message:"Please wait whilst we update the status",extra_classes:"bg-warning text-dark",delay:0,unique_type:"update_status"});const t=new FormData;t.set("status_id",this.statusId.toString()),t.set("status",this.localStatusModel),t.set("higher_order_status",this.higherOrderStatusModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/update/`,t).then((()=>{this.$emit("update_status",{statusId:this.statusId,status:this.localStatusModel,higherOrderStatus:this.higherOrderStatusModel}),this.$store.dispatch("newToast",{header:"Successfully updated status",message:"Status has been updated",extra_classes:"bg-success",unique_type:"update_status"}),document.getElementById("objectStatusModalClose").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Error updating status",message:`Sorry, but we could not update your status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"update_status"})}))},newStatus(){this.$store.dispatch("newToast",{header:"Creating New Status",message:"Please wait whilst we create new status",extra_classes:"bg-warning text-dark",delay:0,unique_type:"create_status"});const t=new FormData;t.set("status",this.localStatusModel),t.set("higher_order_status",this.higherOrderStatusModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/create/`,t).then((t=>{this.$store.dispatch("newToast",{header:"Created New Status",message:"New Status has been created successfully",extra_classes:"bg-success",unique_type:"create_status"}),this.$emit("add_status",t.data),document.getElementById("objectStatusModalClose").click(),this.localStatusModel="",this.higherOrderStatusModel="Normal"})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Creating New Status",message:`Sorry, we could not create the status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"create_status"})}))},saveChanges(){0===parseInt(this.statusId)?this.newStatus():this.editStatus()}}},R=(0,D.A)(W,[["render",function(t,e,s,o,r,i){const l=(0,a.g2)("n-select");return(0,a.uX)(),(0,a.CE)("div",z,[(0,a.Lk)("div",E,[(0,a.Lk)("div",j,[e[7]||(e[7]=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"}," Add/Edit Status "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"objectStatusModalClose"})],-1)),(0,a.Lk)("div",T,[(0,a.Lk)("div",H,[(0,a.Lk)("label",null,[e[3]||(e[3]=(0,a.eW)(" Status ")),r.isDuplicate?((0,a.uX)(),(0,a.CE)("span",F," Sorry, there is a status of that name already ")):(0,a.Q3)("v-if",!0)]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.localStatusModel=t),type:"text",class:"form-control"},null,512),[[O.vModelText,r.localStatusModel]])]),e[5]||(e[5]=(0,a.Lk)("div",{class:"spacer"},null,-1)),(0,a.Lk)("div",P,[e[4]||(e[4]=(0,a.Lk)("label",null,"Higher Order Status",-1)),(0,a.bF)(l,{value:r.higherOrderStatusModel,"onUpdate:value":e[1]||(e[1]=t=>r.higherOrderStatusModel=t),options:r.higherOrderStatusList},null,8,["value","options"])])]),(0,a.Lk)("div",U,[e[6]||(e[6]=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,a.Lk)("button",{type:"button",class:"btn btn-primary",disabled:r.isDuplicate,onClick:e[2]||(e[2]=(...t)=>i.saveChanges&&i.saveChanges(...t))}," Save changes ",8,N)])])])])}]]),X={name:"ObjectStatusInformation",props:{destination:{type:String,default:""},nearbeachTitle:{type:String,default:"Status Editor"},objectStatusResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},mixins:[x.A],components:{draggable:m(),Icon:g.In,ObjectStatusConfirmDelete:$,ObjectStatusModal:R},data(){return{localStatusList:this.objectStatusResults,statusData:{higherOrderStatus:"Closed",status:""},statusId:0}},methods:{addStatus(t){this.localStatusList.push(t[0])},delete_status(){this.localStatusList=this.localStatusList.filter((t=>t.status_id!==this.statusId))},editStatus(t){const e=parseInt(t.target.dataset.id);this.updateProps(e),new b.aF(document.getElementById("objectStatusModal")).show()},newStatus(){this.statusData={higherOrderStatus:"Normal",status:""},this.statusId=0,new b.aF(document.getElementById("objectStatusModal")).show()},removeStatus(t){this.updateProps(t),new b.aF(document.getElementById("confirmStatusDeleteModal")).show()},updateProps(t){const e=this.localStatusList.filter((e=>parseInt(e.status_id)===t));0!==e.length&&(this.statusData={higherOrderStatus:e[0].higher_order_status,status:e[0].status},this.statusId=t)},updateSortOrder(){this.$store.dispatch("newToast",{header:"Updating Sort Order",message:"Please wait, as we update the sort order",extra_classes:"bg-warning text-dark",delay:0,unique_type:"sort_order"});const t=new FormData;this.localStatusList.forEach((e=>{t.append("status_id",e.status_id)})),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/reorder/`,t).then((()=>{this.$store.dispatch("newToast",{header:"Updated Sort Order",message:"Sort Order has been updated",extra_classes:"bg-success",unique_type:"sort_order"})})).catch((t=>{this.$store.dispatch("newToast",{header:"Failed Updating Sort Order",message:`We've encounted an issue updating the sort order: Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"sort_order"})}))},updateStatus(t){const e=parseInt(t.statusId);if(void 0===e)return void this.$store.dispatch("newToast",{header:"Error updating card",message:"Please reload the page. We have experienced an in page issue",extra_classes:"bg-danger",delay:0});const s=this.localStatusList.findIndex((t=>t.status_id===e));this.localStatusList[s].higher_order_status=t.higherOrderStatus,this.localStatusList[s].status=t.status}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination})}},q=(0,D.A)(X,[["render",function(t,e,s,g,S,m){const b=(0,a.g2)("Icon"),x=(0,a.g2)("draggable"),C=(0,a.g2)("object-status-modal"),v=(0,a.g2)("object-status-confirm-delete");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",r,[(0,a.Lk)("div",i,[(0,a.Lk)("h1",null,(0,o.toDisplayString)(s.nearbeachTitle),1),e[9]||(e[9]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("a",{href:`${this.rootUrl}object_status_list/`}," Go back to object status list ",8,l),e[10]||(e[10]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",d,[e[8]||(e[8]=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Editing Status"),(0,a.Lk)("p",{class:"text-instructions"}," Move the status' around to reorder them. Double click to edit text and settings. ")],-1)),(0,a.Lk)("div",n,[e[5]||(e[5]=(0,a.Lk)("strong",null,"Status List",-1)),0===S.localStatusList.length?((0,a.uX)(),(0,a.CE)("span",u," Please create at least one status ")):(0,a.Q3)("v-if",!0),e[6]||(e[6]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(x,{modelValue:S.localStatusList,"onUpdate:modelValue":e[1]||(e[1]=t=>S.localStatusList=t),"item-key":"status_id","ghost-class":"ghost",onChange:m.updateSortOrder},{item:(0,a.k6)((({element:s})=>[((0,a.uX)(),(0,a.CE)("div",{class:"sortable",key:s.status_id,"data-id":s.status_id,onDblclick:e[0]||(e[0]=t=>m.editStatus(t))},[((0,a.uX)(),(0,a.CE)("strong",{key:s.status_id,"data-id":s.status_id},(0,o.toDisplayString)(s.status),9,h)),S.localStatusList.length>1?((0,a.uX)(),(0,a.CE)("span",{key:0,onClick:t=>m.removeStatus(s.status_id)},[(0,a.bF)(b,{icon:t.icons.xCircle},null,8,["icon"])],8,p)):(0,a.Q3)("v-if",!0)],40,c))])),_:1},8,["modelValue","onChange"]),e[7]||(e[7]=(0,a.Lk)("div",{class:"spacer"},null,-1)),(0,a.Lk)("button",{onClick:e[2]||(e[2]=(...t)=>m.newStatus&&m.newStatus(...t)),class:"btn btn-primary"}," New Status ")])])])]),(0,a.bF)(C,{"status-data":S.statusData,"status-id":S.statusId,"status-list":S.localStatusList,onAdd_status:e[3]||(e[3]=t=>m.addStatus(t)),onUpdate_status:e[4]||(e[4]=t=>m.updateStatus(t))},null,8,["status-data","status-id","status-list"]),(0,a.bF)(v,{"status-data":S.statusData,"status-id":S.statusId,"status-list":S.localStatusList,onDelete_status:m.delete_status},null,8,["status-data","status-id","status-list","onDelete_status"])],64)}]])},2243:(t,e,s)=>{s.d(e,{A:()=>M});var a=s(8998),o=s(102),r=s(9394),i=s(2438),l=s(9605),d=s(3438),n=s(5666),u=s(6375),c=s(1647),h=s(7066),p=s(4397),g=s(4603),S=s(7432),m=s(1758),b=s(8959),x=s(9587),C=s(9675),v=s(386),L=s(6120),f=s(8086),w=s(5617),y=s(6325),k=s(6500),_=s(5707),A=s(1511);const M={data:()=>({icons:{arrowUp:a.A,bugIcon:o.A,bxBriefcase:r.A,cardChecklist:i.A,clipboardIcon:l.A,documentPdf:d.A,documentText:n.A,folderIcon:u.A,groupPresentation:c.A,imageIcon:h.A,infoCircle:p.A,linkIcon:g.A,linkIcon2:S.A,linkOut:m.A,mailIcon:b.A,microsoftExcel:x.A,microsoftPowerpoint:C.A,microsoftWord:v.A,noteAdd:L.A,objectStorage:f.A,passwordIcon:w.A,trashCan:y.A,userIcon:k.A,usersIcon:_.A,xCircle:A.A}})}},707:(t,e,s)=>{s.d(e,{A:()=>n,b:()=>d});var a=s(1841),o=s(435),r=s(8880),i=s(9359);const l={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};function d(t){const{borderRadius:e,popoverColor:s,textColor3:a,dividerColor:o,textColor2:r,primaryColorPressed:i,textColorDisabled:d,primaryColor:n,opacityDisabled:u,hoverColor:c,fontSizeSmall:h,fontSizeMedium:p,fontSizeLarge:g,fontSizeHuge:S,heightSmall:m,heightMedium:b,heightLarge:x,heightHuge:C}=t;return Object.assign(Object.assign({},l),{optionFontSizeSmall:h,optionFontSizeMedium:p,optionFontSizeLarge:g,optionFontSizeHuge:S,optionHeightSmall:m,optionHeightMedium:b,optionHeightLarge:x,optionHeightHuge:C,borderRadius:e,color:s,groupHeaderTextColor:a,actionDividerColor:o,optionTextColor:r,optionTextColorPressed:i,optionTextColorDisabled:d,optionTextColorActive:n,optionOpacityDisabled:u,optionCheckColor:n,optionColorPending:c,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:c,actionTextColor:r,loadingColor:n})}const n=(0,i.a)({name:"InternalSelectMenu",common:r.A,peers:{Scrollbar:o.A,Empty:a.A},self:d})},2719:(t,e,s)=>{s.d(e,{A:()=>a});const a={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"}},5991:(t,e,s)=>{s.d(e,{A:()=>d});var a=s(4484),o=s(8880),r=s(7765),i=s(9359),l=s(2719);const d=(0,i.a)({name:"InternalSelection",common:o.A,peers:{Popover:r.A},self:function(t){const{borderRadius:e,textColor2:s,textColorDisabled:o,inputColor:r,inputColorDisabled:i,primaryColor:d,primaryColorHover:n,warningColor:u,warningColorHover:c,errorColor:h,errorColorHover:p,borderColor:g,iconColor:S,iconColorDisabled:m,clearColor:b,clearColorHover:x,clearColorPressed:C,placeholderColor:v,placeholderColorDisabled:L,fontSizeTiny:f,fontSizeSmall:w,fontSizeMedium:y,fontSizeLarge:k,heightTiny:_,heightSmall:A,heightMedium:M,heightLarge:I}=t;return Object.assign(Object.assign({},l.A),{fontSizeTiny:f,fontSizeSmall:w,fontSizeMedium:y,fontSizeLarge:k,heightTiny:_,heightSmall:A,heightMedium:M,heightLarge:I,borderRadius:e,textColor:s,textColorDisabled:o,placeholderColor:v,placeholderColorDisabled:L,color:r,colorDisabled:i,colorActive:r,border:`1px solid ${g}`,borderHover:`1px solid ${n}`,borderActive:`1px solid ${d}`,borderFocus:`1px solid ${n}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${(0,a.QX)(d,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${(0,a.QX)(d,{alpha:.2})}`,caretColor:d,arrowColor:S,arrowColorDisabled:m,loadingColor:d,borderWarning:`1px solid ${u}`,borderHoverWarning:`1px solid ${c}`,borderActiveWarning:`1px solid ${u}`,borderFocusWarning:`1px solid ${c}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${(0,a.QX)(u,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${(0,a.QX)(u,{alpha:.2})}`,colorActiveWarning:r,caretColorWarning:u,borderError:`1px solid ${h}`,borderHoverError:`1px solid ${p}`,borderActiveError:`1px solid ${h}`,borderFocusError:`1px solid ${p}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${(0,a.QX)(h,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${(0,a.QX)(h,{alpha:.2})}`,colorActiveError:r,caretColorError:h,clearColor:b,clearColorHover:x,clearColorPressed:C})}})},1841:(t,e,s)=>{s.d(e,{A:()=>i,b:()=>r});var a=s(8880);const o={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};function r(t){const{textColorDisabled:e,iconColor:s,textColor2:a,fontSizeSmall:r,fontSizeMedium:i,fontSizeLarge:l,fontSizeHuge:d}=t;return Object.assign(Object.assign({},o),{fontSizeSmall:r,fontSizeMedium:i,fontSizeLarge:l,fontSizeHuge:d,textColor:e,iconColor:s,extraTextColor:a})}const i={name:"Empty",common:a.A,self:r}},7765:(t,e,s)=>{s.d(e,{A:()=>i,b:()=>r});var a=s(8880);const o={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};function r(t){const{boxShadow2:e,popoverColor:s,textColor2:a,borderRadius:r,fontSize:i,dividerColor:l}=t;return Object.assign(Object.assign({},o),{fontSize:i,borderRadius:r,color:s,dividerColor:l,textColor:a,boxShadow:e})}const i={name:"Popover",common:a.A,self:r}},2414:(t,e,s)=>{s.d(e,{A:()=>l,b:()=>i});var a=s(5991),o=s(707),r=s(8880);function i(t){const{boxShadow2:e}=t;return{menuBoxShadow:e}}const l=(0,s(9359).a)({name:"Select",common:r.A,peers:{InternalSelection:a.A,InternalSelectMenu:o.A},self:i})},9166:(t,e,s)=>{s.d(e,{A:()=>a});const a={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"}}}]);