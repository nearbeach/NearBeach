"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2158],{6262:(s,e)=>{e.A=(s,e)=>{const a=s.__vccOpts||s;for(const[s,o]of e)a[s]=o;return a}},7913:(s,e,a)=>{a.r(e),a.d(e,{default:()=>S});var o=a(641),t=a(3751);const d={class:"card"},r={class:"card-body"},l=(0,o.Lk)("h2",null,"Reset Password",-1),n=(0,o.Lk)("hr",null,null,-1),i={class:"row"},c=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Passwords"),(0,o.Lk)("p",{class:"text-instructions"}," Users have the ability to reset their password from the login page. If needed, please click on the link to be taken to the password reset form. ")],-1),p={class:"col-md-8"},u={class:"modal fade",id:"passwordResetModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},w={class:"modal-dialog"},h={class:"modal-content"},k=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h2",null," Reset User Password "),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"passwordResetCloseButton"},[(0,o.Lk)("span",{"aria-hidden":"true"})])],-1),m={class:"modal-body"},b={class:"row"},L={class:"col-md-6"},v=(0,o.Lk)("label",null,"Password",-1),g={class:"col-md-6"},y=(0,o.Lk)("label",null,"Confirm Password",-1),M={class:"row"},f={class:"col-md-12"},P={key:0,class:"col-md-12"},U=[(0,o.Lk)("span",{class:"error"},"Passwords need to be the same ",-1)],C={class:"modal-footer"},R=["disabled"];var $=a(9336),x=a(2124),A=a(9639),_=a(3855);const E={name:"ResetUserPassword",setup:()=>({v$:(0,A.Ay)()}),components:{ValidationRendering:a(404).A},props:{location:{type:String,default:"/"},username:{type:Number,default:0}},data:()=>({password1Model:"",password2Model:""}),validations:{password1Model:{required:_.mw,minLength:(0,_.Bp)(8)}},watch:{password1Model(){this.v$.$validate()},password2Model(){this.v$.$validate()}},computed:{...(0,x.L8)({rootUrl:"getRootUrl"}),disableButton(){const s=this.password1Model===this.password2Model,e=this.password1Model.length>=8;return!(s&&!0===e)}},methods:{closeModal(){this.password1Model="",this.password2Model="",document.getElementById("passwordResetCloseButton").click()},passwordResetClicked(){new $.aF(document.getElementById("passwordResetModal")).show()},updatePassword(){const s=new FormData;s.set("password",this.password1Model),s.set("username",this.username),this.$store.dispatch("newToast",{header:"Updating User Password",message:"Please wait. Updating Password",extra_classes:"bg-warning",delay:0,unique_type:"update-user-password"}),this.axios.post(`${this.rootUrl}${this.location}update_user_password/`,s).then((()=>{this.closeModal(),this.$store.dispatch("newToast",{header:"Updated User Password",message:"User Password Successfully Updated",extra_classes:"bg-success",delay:0,unique_type:"update-user-password"})})).catch((s=>{let e="There was an issue trying to save your password.";if(void 0!==s.response){e="Please fix the following issues: ";for(const[a,o]of Object.entries(s.response.data))e=`${e} ${a} - ${o[0].message} `}this.$store.dispatch("newToast",{header:"Error Updating User Password",message:e,extra_classes:"bg-danger",delay:0,unique_type:"update-user-password"})}))}}},S=(0,a(6262).A)(E,[["render",function(s,e,a,$,x,A){const _=(0,o.g2)("validation-rendering");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",d,[(0,o.Lk)("div",r,[l,n,(0,o.Q3)(" PASSWORD "),(0,o.Lk)("div",i,[c,(0,o.Lk)("div",p,[(0,o.Lk)("button",{type:"button",class:"btn btn-warning",onClick:e[0]||(e[0]=(...s)=>A.passwordResetClicked&&A.passwordResetClicked(...s))}," Password Reset ")])])])]),(0,o.Q3)(" PASSWORD RESET MODAL "),(0,o.Lk)("div",u,[(0,o.Lk)("div",w,[(0,o.Lk)("div",h,[k,(0,o.Lk)("div",m,[(0,o.Lk)("div",b,[(0,o.Lk)("div",L,[v,(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=s=>x.password1Model=s)},null,512),[[t.vModelText,x.password1Model]])]),(0,o.Lk)("div",g,[y,(0,o.bo)((0,o.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>x.password2Model=s)},null,512),[[t.vModelText,x.password2Model]])])]),(0,o.Lk)("div",M,[(0,o.Lk)("div",f,[(0,o.bF)(_,{"error-list":$.v$.password1Model.$errors},null,8,["error-list"]),x.password1Model!==x.password2Model?((0,o.uX)(),(0,o.CE)("div",P,U)):(0,o.Q3)("v-if",!0)])])]),(0,o.Lk)("div",C,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:e[3]||(e[3]=(...s)=>A.closeModal&&A.closeModal(...s))}," Close "),(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=(...s)=>A.updatePassword&&A.updatePassword(...s)),disabled:A.disableButton}," Update Password ",8,R)])])])])])}]])},404:(s,e,a)=>{a.d(e,{A:()=>r});var o=a(641),t=a(33);const d={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},r=(0,a(6262).A)(d,[["render",function(s,e,a,d,r,l){return(0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.errorList,(s=>((0,o.uX)(),(0,o.CE)("span",{class:"error",key:s.$uid},(0,t.toDisplayString)(s.$message),1)))),128)}]])}}]);