"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2920,1373],{6262:(e,t)=>{t.A=(e,t)=>{const s=e.__vccOpts||e;for(const[e,a]of t)s[e]=a;return s}},469:(e,t,s)=>{s.d(t,{A:()=>k});var a=s(641),r=s(33);const l={class:"object-card-list"},i={class:"object-card--detail"},o=["href"],c={class:"object-card--detail--link"},n={class:"object-card--detail--description"},u={class:"object-card--status"},d=["href"],h={class:"object-card--status--status"},p={class:"small-text"};var b=s(8083),m=s(2124);const f={name:"RenderObjectCard",props:{destination:{type:String,default:""},importVariables:{type:Object,default:()=>({header:"",prefix:"",id:0,title:"",status:""})},searchResults:{type:Array,default:()=>[]}},mixins:[b.A],computed:{...(0,m.L8)({rootUrl:"getRootUrl"})}},k=(0,s(6262).A)(f,[["render",function(e,t,s,b,m,f){return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("h2",null,(0,r.toDisplayString)(s.importVariables.header),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.searchResults,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"object-card",key:t.pk},[(0,a.Lk)("div",i,[(0,a.Lk)("a",{href:`${e.rootUrl}${s.destination}_information/${t[s.importVariables.id]}/`},[(0,a.Lk)("div",c,(0,r.toDisplayString)(s.importVariables.prefix)+(0,r.toDisplayString)(t[s.importVariables.id]),1),(0,a.Lk)("div",n,(0,r.toDisplayString)(t[s.importVariables.title]),1)],8,o)]),(0,a.Lk)("div",u,[(0,a.Lk)("a",{href:`${e.rootUrl}${s.destination}_information/${t[s.importVariables.id]}/`},[(0,a.Lk)("div",h,(0,r.toDisplayString)(t[s.importVariables.status]),1),(0,a.Lk)("p",p,(0,r.toDisplayString)(e.getNiceDatetime(t[s.importVariables.end_date])),1)],8,d)])])))),128))])}]])},9980:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var a=s(641),r=s(33);const l={class:"card search-card"},i={class:"card-body"},o={name:"ListSearchResults",components:{RenderObjectCard:s(469).A},props:{destination:{type:String,default:""},importVariables:{type:Object,default:()=>({header:"",prefix:"",id:0,title:"",status:""})},searchResults:{type:Array,default:()=>[]}}},c=(0,s(6262).A)(o,[["render",function(e,t,s,o,c,n){const u=(0,a.g2)("render-object-card");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",i,[(0,a.Lk)("h2",null,(0,r.toDisplayString)(s.importVariables.header)+" Search Results",1),t[0]||(t[0]=(0,a.Lk)("hr",null,null,-1)),(0,a.bF)(u,{"search-results":s.searchResults,"import-variables":s.importVariables,destination:s.destination},null,8,["search-results","import-variables","destination"])])])}]])},492:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(641),r=s(3751);const l={class:"card"},i={class:"card-body"},o={class:"form-row"},c={class:"form-group"},n={class:"form-group"},u={class:"form-group"},d={key:5,class:"alert alert-warning"},h={name:"SearchObjects",components:{ListSearchResults:s(9980).default},props:{includeAllGroups:{type:Boolean,default:!1},includeClosed:{type:Boolean,default:!1},isSuperUser:{type:Boolean,default:!1},rootUrl:{type:String,default:"/"},searchInput:{type:String,required:!1,default:""},searchResults:{type:Object,required:!0,default:()=>({})}},data(){return{includeAllGroupsModel:this.includeAllGroups,includeClosedObjectsModel:this.includeClosed,kanbanVariables:{header:"Kanban",prefix:"Kb",id:"kanban_board_id",title:"kanban_board_name",status:"kanban_board_status"},localSearchResults:this.searchResults,projectVariables:{header:"Projects",prefix:"Pro",id:"project_id",title:"project_name",status:"project_status_text"},requestForChangeVariables:{header:"Request for Change",prefix:"Rfc",id:"rfc_id",title:"rfc_title",status:"rfc_status__rfc_status"},requirementVariables:{header:"Requirements",prefix:"Req",id:"requirement_id",title:"requirement_title",status:"requirement_status__requirement_status"},searchModel:this.searchInput,searchTimeout:"",taskVariables:{header:"Tasks",prefix:"Task",id:"task_id",title:"task_short_description",status:"task_status_text"}}},methods:{getSearchResults(){const e=new FormData;e.set("search",this.searchModel),e.set("include_closed",this.includeClosedObjectsModel),e.set("include_all_groups",this.includeAllGroupsModel),this.axios.post(`${this.rootUrl}search/data/`,e).then((e=>{this.localSearchResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to get search results",message:`Sorry, we failed to get your search results. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},watch:{includeAllGroupsModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.getSearchResults()},includeClosedObjectsModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.getSearchResults()},searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(this.getSearchResults,500)}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),void 0===this.includeClosed&&(this.includeClosedObjectsModel=!1)}},p=(0,s(6262).A)(h,[["render",function(e,t,s,h,p,b){const m=(0,a.g2)("list-search-results");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("div",l,[(0,a.Lk)("div",i,[(0,a.Q3)(" HEADING "),t[6]||(t[6]=(0,a.Lk)("h1",null,"Search",-1)),t[7]||(t[7]=(0,a.Lk)("hr",null,null,-1)),(0,a.Q3)(" SEARCH FIELD "),(0,a.Lk)("div",o,[(0,a.Lk)("div",c,[t[3]||(t[3]=(0,a.Lk)("label",null,"Search:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>p.searchModel=e),maxlength:"250"},null,512),[[r.vModelText,p.searchModel]])]),(0,a.Lk)("div",n,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",id:"inlcudeClosedObjects","onUpdate:modelValue":t[1]||(t[1]=e=>p.includeClosedObjectsModel=e)},null,512),[[r.vModelCheckbox,p.includeClosedObjectsModel]]),t[4]||(t[4]=(0,a.Lk)("label",{for:"inlcudeClosedObjects"}," Include Closed Objects",-1))]),(0,a.Lk)("div",u,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",id:"includeAllGroups","onUpdate:modelValue":t[2]||(t[2]=e=>p.includeAllGroupsModel=e)},null,512),[[r.vModelCheckbox,p.includeAllGroupsModel]]),t[5]||(t[5]=(0,a.Lk)("label",{for:"includeAllGroups"}," Include All Groups",-1))])])])]),t[8]||(t[8]=(0,a.Lk)("br",null,null,-1)),(0,a.Q3)(" REQUEST FOR CHANGE RESULTS "),p.localSearchResults.request_for_change.length>0?((0,a.uX)(),(0,a.Wv)(m,{key:0,"search-results":p.localSearchResults.request_for_change,"import-variables":p.requestForChangeVariables,destination:"rfc"},null,8,["search-results","import-variables"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" REQUIREMENTS RESULTS "),p.localSearchResults.requirement.length>0?((0,a.uX)(),(0,a.Wv)(m,{key:1,"search-results":p.localSearchResults.requirement,"import-variables":p.requirementVariables,destination:"requirement"},null,8,["search-results","import-variables"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" PROJECT RESULTS "),p.localSearchResults.project.length>0?((0,a.uX)(),(0,a.Wv)(m,{key:2,"search-results":p.localSearchResults.project,"import-variables":p.projectVariables,destination:"project"},null,8,["search-results","import-variables"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" TASK RESULTS "),p.localSearchResults.task.length>0?((0,a.uX)(),(0,a.Wv)(m,{key:3,"search-results":p.localSearchResults.task,"import-variables":p.taskVariables,destination:"task"},null,8,["search-results","import-variables"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" KANBAN RESULTS "),p.localSearchResults.kanban.length>0?((0,a.uX)(),(0,a.Wv)(m,{key:4,"search-results":p.localSearchResults.kanban,"import-variables":p.kanbanVariables,destination:"kanban"},null,8,["search-results","import-variables"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" WHEN THERE ARE NO RESULTS "),p.localSearchResults.requirement.length+p.localSearchResults.project.length+p.localSearchResults.task.length+p.localSearchResults.kanban.length+p.localSearchResults.request_for_change.length===0?((0,a.uX)(),(0,a.CE)("div",d," Sorry - but there are no results for this search term. Please try searching for a different search term. ")):(0,a.Q3)("v-if",!0)])}]])},8083:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(6285);const r={methods:{getNiceDatetime:e=>""===e||null==e?"":a.c9.fromISO(e).toLocaleString(a.c9.DATETIME_MED),getNiceDatetimeFromInt:e=>""===e||null==e?"":a.c9.fromMillis(e).toLocaleString(a.c9.DATETIME_MED),getNiceDate:e=>""===e||null==e?"":a.c9.fromISO(e).toLocaleString(a.c9.DATE_MED_WITH_WEEKDAY),disableDate(e){const t=new Date;return t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),e<=t.getTime()-36e5}}}}}]);