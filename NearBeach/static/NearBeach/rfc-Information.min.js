"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[9003],{8838:(e,t,a)=>{a.d(t,{A:()=>v});var s,r=a(641),l=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],n=function(e){return-1!==l.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},o=0,i=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++o+String(t)},d=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},c=function(){return{listeners:[],scriptId:i("tiny-script"),scriptLoaded:!1}},u=(s=c(),{load:function(e,t,a){s.scriptLoaded?a():(s.listeners.push(a),e.getElementById(s.scriptId)||function(e,t,a,r){var l=t.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=e,l.src=a;var n=function(){l.removeEventListener("load",n),s.listeners.forEach((function(e){return e()})),s.scriptLoaded=!0};l.addEventListener("load",n),t.head&&t.head.appendChild(l)}(s.scriptId,e,t))},reinitialize:function(){s=c()}}),p=function(){var e="undefined"!=typeof window?window:a.g;return e&&e.tinymce?e.tinymce:null},f={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},h=a(953),m=function(){return m=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},m.apply(this,arguments)},g={selector:void 0,target:void 0};const v=(0,r.pM)({props:f,setup:function(e,t){var a=e.init?m(m({},e.init),g):m({},g),s=(0,h.QW)(e),l=s.disabled,o=s.modelValue,c=s.tagName,f=(0,h.KR)(null),v=null,y=e.id||i("tiny-vue"),L=e.init&&e.init.inline||e.inline,C=!!t.attrs["onUpdate:modelValue"],k=!0,b=e.initialValue?e.initialValue:"",R="",S=function(){var s,l,i,c=(s=k,C?function(){return(null==o?void 0:o.value)?o.value:""}:function(){return s?b:R}),u=m(m({},a),{readonly:e.disabled,target:f.value,plugins:(l=a.plugins,i=e.plugins,d(l).concat(d(i))),toolbar:e.toolbar||a.toolbar,inline:L,setup:function(s){v=s,s.on("init",(function(a){return function(e,t,a,s,l,o){s.setContent(o()),a.attrs["onUpdate:modelValue"]&&function(e,t,a,s){var l=e.modelEvents?e.modelEvents:null,n=Array.isArray(l)?l.join(" "):l;(0,r.wB)(s,(function(t,s){a&&"string"==typeof t&&t!==s&&t!==a.getContent({format:e.outputFormat})&&a.setContent(t)})),a.on(n||"change input undo redo",(function(){t.emit("update:modelValue",a.getContent({format:e.outputFormat}))}))}(t,a,s,l),function(e,t,a){Object.keys(t).filter(n).forEach((function(s){var r=t[s];"function"==typeof r&&("onInit"===s?r(e,a):a.on(s.substring(2),(function(e){return r(e,a)})))}))}(e,a.attrs,s)}(a,e,t,s,o,c)})),"function"==typeof a.setup&&a.setup(s)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(f.value)&&(f.value.style.visibility=""),p().init(u),k=!1};return(0,r.wB)(l,(function(e){var t;null!==v&&("function"==typeof(null===(t=v.mode)||void 0===t?void 0:t.set)?v.mode.set(e?"readonly":"design"):v.setMode(e?"readonly":"design"))})),(0,r.wB)(c,(function(e){var t;C||(R=v.getContent()),null===(t=p())||void 0===t||t.remove(v),(0,r.dY)((function(){return S()}))})),(0,r.sV)((function(){if(null!==p())S();else if(f.value&&f.value.ownerDocument){var t=e.cloudChannel?e.cloudChannel:"6",a=e.apiKey?e.apiKey:"no-api-key",s=null==e.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(a,"/tinymce/").concat(t,"/tinymce.min.js"):e.tinymceScriptSrc;u.load(f.value.ownerDocument,s,S)}})),(0,r.xo)((function(){null!==p()&&p().remove(v)})),L||((0,r.n)((function(){k||S()})),(0,r.Y4)((function(){var e;C||(R=v.getContent()),null===(e=p())||void 0===e||e.remove(v)}))),t.expose({rerender:function(e){var t;R=v.getContent(),null===(t=p())||void 0===t||t.remove(v),a=m(m(m({},a),e),g),(0,r.dY)((function(){return S()}))},getEditor:function(){return v}}),function(){return L?function(e,t,a,s){return e(s||"div",{id:t,ref:a})}(r.h,y,f,e.tagName):(0,r.h)("textarea",{id:y,visibility:"hidden",ref:f})}}})},8563:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Te});var s=a(641),r=a(33),l=a(3751);const n={class:"card"},o={class:"card-body"},i=(0,s.Lk)("h1",null,"Request for Change",-1),d=(0,s.Lk)("br",null,null,-1),c=["href"],u=(0,s.Lk)("hr",null,null,-1),p=(0,s.Lk)("hr",null,null,-1),f={class:"row"},h=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Type and Version"),(0,s.Lk)("p",{class:"text-instructions"}," Please specify how urgent this RFC's status really is. Optionally you can also specify the version or release number. ")],-1),m={class:"col-md-4"},g={class:"form-group"},v={class:"col-md-4"},y={class:"form-group"},L=(0,s.Lk)("label",null,"Version/Release Number",-1),C=(0,s.Lk)("hr",null,null,-1),k={class:"row"},b=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Important Dates"),(0,s.Lk)("p",{class:"text-instructions"}," Start and End date are automatically calculated from the change tasks. "),(0,s.Lk)("p",{class:"text-instructions"}," The release date can only be equal or greater than the end date. By default it will equal the end date. Changing the release date will obey the time delta if the end date changes. ")],-1),R={class:"row col-md-8"},S={class:"col-md-12"},_=(0,s.Lk)("strong",null,"Start Date: ",-1),w=(0,s.Lk)("br",null,null,-1),D=(0,s.Lk)("strong",null,"End Date: ",-1),M={class:"col-md-12"},F={key:0,class:"error"},U={class:"col-sm-4"},$={class:"form-group"},E=(0,s.Lk)("label",null,"Release Date: ",-1),T=(0,s.Lk)("hr",null,null,-1),x={class:"row"},A={class:"col-md-4"},I=(0,s.Lk)("h2",null,"Change LEAD:",-1),V={class:"text-instructions"},B=(0,s.Lk)("br",null,null,-1),j={key:0},O={class:"col-md-8 user-card-list"},P={class:"user-card wide"},Q=["src"],X={class:"user-card--details"},N={class:"user-card--name"},q={class:"user-card--email"},W={key:1},K={key:2,class:"row"},z=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("strong",null,"Waiting for approval"),(0,s.Lk)("p",{class:"text-instructions"}," The following users will be able to approve or reject this RFC. Please contact them. ")],-1),G={key:0,class:"col-md-8"},H={key:1,class:"user-card-list col-md-8"},Y=["src"],J={class:"user-card--details"},Z={class:"user-card--name"},ee={class:"user-card--email"},te={key:3},ae={key:4},se={key:5,class:"row submit-row"},re={class:"col-md-12"},le={key:6,class:"row submit-row"},ne={class:"col-md-12"};var oe=a(1281);const ie={key:0,class:"modal fade",id:"updateChangeLeadModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},de={class:"modal-dialog modal-lg"},ce={class:"modal-content"},ue=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h2",null," Change Lead Wizard "),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"updateChangeLeadCloseButton"},[(0,s.Lk)("span",{"aria-hidden":"true"})])],-1),pe={class:"modal-body"},fe={class:"row"},he=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("strong",null,"Change User"),(0,s.Lk)("p",{class:"text-instructions"}," Please use the dropdown to select the new Change User ")],-1),me={class:"col-md-8"},ge={class:"modal-footer"},ve=(0,s.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),ye=["disabled"];var Le=a(1080),Ce=a(2124);const ke={name:"UpdateChangeLeadWizard",components:{NSelect:Le.A},emits:["update_change_lead"],computed:{...(0,Ce.L8)({destination:"getDestination",locationId:"getLocationId",potentialUserList:"getPotentialUserList",rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),watch:{potentialUserList(e){void 0!==e&&(this.userFixList=e.map((e=>({value:e.id,label:`${e.username}: ${e.first_name} ${e.last_name}`}))))}},methods:{changeLead(){const e=new FormData;e.set("username",this.userModel),this.axios.post(`${this.rootUrl}rfc_information/${this.locationId}/update_change_lead/`,e).then((e=>{this.$emit("update_change_lead",e.data.change_lead_results),document.getElementById("updateChangeLeadCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error changing the lead",message:`Sorry, we could not change the lead. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}};var be=a(6262);const Re=(0,be.A)(ke,[["render",function(e,t,a,r,l,n){const o=(0,s.g2)("n-select");return e.userLevel>1?((0,s.uX)(),(0,s.CE)("div",ie,[(0,s.Lk)("div",de,[(0,s.Lk)("div",ce,[ue,(0,s.Lk)("div",pe,[(0,s.Lk)("div",fe,[he,(0,s.Lk)("div",me,[(0,s.bF)(o,{options:l.userFixList,value:l.userModel,"onUpdate:value":t[0]||(t[0]=e=>l.userModel=e)},null,8,["options","value"])])])]),(0,s.Lk)("div",ge,[ve,(0,s.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===l.userModel.length,onClick:t[1]||(t[1]=(...e)=>n.changeLead&&n.changeLead(...e))}," Change Lead ",8,ye)])])])])):(0,s.Q3)("v-if",!0)}]]);var Se=a(8105),_e=a(9336),we=a(9639),De=a(3855),Me=a(404),Fe=a(6285),Ue=a(953),$e=a(9581);const Ee={name:"RfcInformation",setup:()=>({v$:(0,we.Ay)()}),components:{NDatePicker:Se.A,NSelect:Le.A,RfcDescription:oe.A,UpdateChangeLead:Re,ValidationRendering:Me.A},props:{groupLeaderCount:{type:Number,default:0},isReadOnly:{type:Boolean,default:!1},rfcChangeLead:{type:Array,default:()=>[]},rfcResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userLevel:{type:Number,default:0}},watch:{localReleaseDate(){this.localEndDate>this.localReleaseDate&&(this.localReleaseDate=this.localEndDate),this.updateReleaseDate()}},computed:{...(0,Ce.L8)({changeTaskCount:"getChangeTaskCount",rfcImplementationEndModel:"getEndDate",rfcImplementationStartModel:"getStartDate",rfcReleaseModel:"getReleaseDate"}),checkDateValidation(){return!this.v$.rfcReleaseModel.required&&this.v$.rfcReleaseModel.$dirty}},data(){return{approvalUsersList:[],localChangeLead:this.rfcChangeLead,localReleaseDate:0,rfcChangeLeadFixList:[],rfcChangeLeadModel:"",rfcTitleModel:this.rfcResults[0].fields.rfc_title,rfcSummaryModel:this.rfcResults[0].fields.rfc_summary,rfcStatus:[{label:"Draft",value:1},{label:"Waiting for approval",value:2},{label:"Approved",value:3},{label:"Started",value:4},{label:"Finished",value:5},{label:"Rejected",value:6}],rfcStatusDict:{1:"Draft",2:"Waiting for approval",3:"Approved",4:"Started",5:"Finished",6:"Rejected"},rfcType:[{label:"Emergency",value:4},{label:"High",value:3},{label:"Medium",value:2},{label:"Low",value:1}],rfcTypeModel:"",rfcVersionModel:this.rfcResults[0].fields.rfc_version_number}},validations:{rfcTitleModel:{required:De.mw},rfcSummaryModel:{required:De.mw,maxLength:(0,De.Ru)(63e4)},rfcReleaseModel:{required:De.mw},rfcTypeModel:{required:De.mw},rfcVersionModel:{maxLength:(0,De.Ru)(25)}},methods:{useNiceDatetimeFromInt:function(e){const t=(0,Ue.BA)(e);return""===t||null==t?"":Fe.c9.fromMillis(t).toLocaleString(Fe.c9.DATETIME_MED)},useNBTheme:$e.p,approveRFCStatus(){const e=new FormData;e.set("rfc_status","3"),this.sendUpdate(e)},checkDisableDate(e){return!0!==this.isReadOnly&&function(e){const t=(0,Ue.BA)(e),a=new Date;return a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),t<=a.getTime()-36e5}(e)},getApprovalUserList(){2===parseInt(this.rfcResults[0].fields.rfc_status)&&this.axios.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/get_approval_users/`).then((e=>{this.approvalUsersList=e.data})).catch((()=>{this.$store.dispatch("newToast",{header:"Error Getting Approval User List",message:"Sorry, we could not get you the list of users who can approve this RFC",extra_classes:"bg-danger",delay:0})}))},getProfilePicture(e){return""===e||null==e?`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${e}`},getStatus(){return this.rfcStatusDict[this.rfcResults[0].fields.rfc_status]},openChangeLeadModal(){new _e.aF(document.getElementById("updateChangeLeadModal")).show()},pauseRFCStatus(){const e=new FormData;e.set("rfc_status","7"),this.sendUpdate(e)},profilePicture(e){return null!==e&&""!==e?`${this.rootUrl}private/${e}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`},rejectRFCStatus(){const e=new FormData;e.set("rfc_status","6"),this.sendUpdate(e)},sendUpdate(e){this.axios.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/update_status/`,e).then((()=>{window.location.reload(!0)})).catch((()=>{this.$store.dispatch("newToast",{header:"Can not update status of RFC",message:"Sadly we had issues trying to update the status for the RFC.",delay:0,extra_classes:"bg-warning text-dark"})}))},startRFCStatus(){const e=new FormData;e.set("rfc_status",4),this.sendUpdate(e)},updateChangeLead(e){this.localChangeLead=e},updateReleaseDate(){this.$store.commit({type:"updateRfcReleaseDate",releaseDateModel:this.localReleaseDate})},async updateRFC(){if(!await this.v$.$validate())return void this.$store.dispatch("newToast",{header:"Please check validation",message:"Sorry, but can you please fix all validation issues.",extra_classes:"bg-warning text-dark",delay:0});const e=new FormData;e.set("rfc_title",this.rfcTitleModel),e.set("rfc_summary",this.rfcSummaryModel),e.set("rfc_type",this.rfcTypeModel),e.set("rfc_version_number",this.rfcVersionModel),e.set("rfc_implementation_start_date",new Date(this.rfcImplementationStartModel).toISOString()),e.set("rfc_implementation_end_date",new Date(this.rfcImplementationEndModel).toISOString()),e.set("rfc_implementation_release_date",new Date(this.rfcReleaseModel).toISOString()),this.axios.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Save Successfully",message:"RFC Has saved",delay:1e4,extra_classes:"bg-success"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not save RFC",message:`Sadly we've had the following error ${e}`,delay:0,extra_classes:"bg-warning text-dark"})}))},updateRFCStatus(){const e=new FormData;e.set("rfc_status","2"),this.sendUpdate(e)},updateValues(e){this[e.modelName]=e.modelValue}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.rfcTypeModel=this.rfcResults[0].fields.rfc_type,this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateTitle",title:this.rfcTitleModel}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel});const e=new Date(this.rfcResults[0].fields.rfc_implementation_end_date),t=new Date(this.rfcResults[0].fields.rfc_implementation_release_date),a=new Date(this.rfcResults[0].fields.rfc_implementation_start_date);this.localReleaseDate=t.getTime(),this.$store.commit({type:"updateRfcDates",endDateModel:e.getTime(),releaseDateModel:t.getTime(),startDateModel:a.getTime()}),this.getApprovalUserList()}},Te=(0,be.A)(Ee,[["render",function(e,t,a,oe,ie,de){const ce=(0,s.g2)("rfc-description"),ue=(0,s.g2)("validation-rendering"),pe=(0,s.g2)("n-select"),fe=(0,s.g2)("n-date-picker"),he=(0,s.g2)("update-change-lead"),me=(0,s.g2)("n-config-provider");return(0,s.uX)(),(0,s.Wv)(me,{theme:de.useNBTheme(a.theme)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",n,[(0,s.Lk)("div",o,[i,d,(0,s.Lk)("h2",null,(0,r.toDisplayString)(de.getStatus()),1),a.userLevel>=2&&a.isReadOnly&&"Draft"===de.getStatus()?((0,s.uX)(),(0,s.CE)("a",{key:0,href:`${a.rootUrl}rfc_information/${a.rfcResults[0].pk}/`}," Edit RFC ",8,c)):(0,s.Q3)("v-if",!0),u,(0,s.bF)(ce,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_values:t[0]||(t[0]=e=>de.updateValues(e))},null,8,["rfc-results","is-read-only"]),(0,s.Q3)(" Request for Change Types and Release Number "),p,(0,s.Lk)("div",f,[h,(0,s.Lk)("div",m,[(0,s.Lk)("div",g,[(0,s.Lk)("label",null,[(0,s.eW)(" Request for Change Type: "),(0,s.bF)(ue,{"error-list":oe.v$.rfcTypeModel.$errors},null,8,["error-list"])]),(0,s.bF)(pe,{options:ie.rfcType,disabled:a.isReadOnly,value:ie.rfcTypeModel,"onUpdate:value":t[1]||(t[1]=e=>ie.rfcTypeModel=e)},null,8,["options","disabled","value"])])]),(0,s.Lk)("div",v,[(0,s.Lk)("div",y,[L,(0,s.bo)((0,s.Lk)("input",{type:"text",maxlength:"25",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>ie.rfcVersionModel=e)},null,512),[[l.vModelText,ie.rfcVersionModel]])])])]),(0,s.Q3)(" Implementation and Release Dates "),C,(0,s.Lk)("div",k,[b,(0,s.Lk)("div",R,[(0,s.Q3)(" Start and End date row "),(0,s.Lk)("div",S,[_,(0,s.eW)((0,r.toDisplayString)(de.useNiceDatetimeFromInt(e.rfcImplementationStartModel)),1),w,D,(0,s.eW)((0,r.toDisplayString)(de.useNiceDatetimeFromInt(e.rfcImplementationEndModel)),1)]),(0,s.Q3)(" Validation row "),(0,s.Lk)("div",M,[de.checkDateValidation?((0,s.uX)(),(0,s.CE)("span",F," Please select an appropriate date for ALL fields.")):(0,s.Q3)("v-if",!0)]),(0,s.Q3)(" Dates Row "),(0,s.Lk)("div",U,[(0,s.Lk)("div",$,[E,(0,s.bF)(fe,{type:"datetime",value:ie.localReleaseDate,"onUpdate:value":t[3]||(t[3]=e=>ie.localReleaseDate=e),disabled:a.isReadOnly,"is-date-disabled":de.checkDisableDate},null,8,["value","disabled","is-date-disabled"])])])])]),(0,s.Q3)(" RFC Change Lead User "),T,(0,s.Lk)("div",x,[(0,s.Lk)("div",A,[I,(0,s.Lk)("p",V,[(0,s.eW)(" Please supply the LEAD who will be leading this Request for Change."),B,a.isReadOnly?(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.CE)("strong",j,[(0,s.Lk)("a",{onClick:t[4]||(t[4]=(...e)=>de.openChangeLeadModal&&de.openChangeLeadModal(...e)),class:"update-change-lead"},"Update Change Lead")]))])]),(0,s.Lk)("div",O,[(0,s.Lk)("div",P,[(0,s.Lk)("img",{src:de.profilePicture(ie.localChangeLead[0].profile_picture),alt:"default profile",class:"user-card--profile"},null,8,Q),(0,s.Lk)("div",X,[(0,s.Lk)("div",N,(0,r.toDisplayString)(ie.localChangeLead[0].first_name)+" "+(0,r.toDisplayString)(ie.localChangeLead[0].last_name),1),(0,s.Lk)("div",q,(0,r.toDisplayString)(ie.localChangeLead[0].email),1)])])])]),2===parseInt(a.rfcResults[0].fields.rfc_status)?((0,s.uX)(),(0,s.CE)("hr",W)):(0,s.Q3)("v-if",!0),2===parseInt(a.rfcResults[0].fields.rfc_status)?((0,s.uX)(),(0,s.CE)("div",K,[z,0===ie.approvalUsersList.length?((0,s.uX)(),(0,s.CE)("div",G," Currently gathering User Approval List. ")):((0,s.uX)(),(0,s.CE)("div",H,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(ie.approvalUsersList,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.username,class:"user-card wide"},[(0,s.Lk)("img",{src:de.profilePicture(e.profile_picture),alt:"default profile",class:"user-card--profile"},null,8,Y),(0,s.Lk)("div",J,[(0,s.Lk)("div",Z,(0,r.toDisplayString)(e.first_name)+" "+(0,r.toDisplayString)(e.last_name),1),(0,s.Lk)("div",ee,(0,r.toDisplayString)(e.email),1)])])))),128))]))])):(0,s.Q3)("v-if",!0),2===parseInt(a.rfcResults[0].fields.rfc_status)?((0,s.uX)(),(0,s.CE)("hr",te)):(0,s.Q3)("v-if",!0),(0,s.Q3)(" Update Button "),a.isReadOnly?(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.CE)("hr",ae)),a.isReadOnly?a.userLevel>=2?((0,s.uX)(),(0,s.CE)("div",le,[(0,s.Lk)("div",ne,[a.groupLeaderCount>0&&2==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:0,href:"javascript:void(0)",class:"reject-rfc-button","aria-disabled":"",onClick:t[7]||(t[7]=(...e)=>de.rejectRFCStatus&&de.rejectRFCStatus(...e))}," Reject RFC ")):(0,s.Q3)("v-if",!0),a.userLevel>1&&3==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:1,href:"javascript:void(0)",class:"accept-rfc-button save-changes",onClick:t[8]||(t[8]=(...e)=>de.startRFCStatus&&de.startRFCStatus(...e))}," Start RFC ")):(0,s.Q3)("v-if",!0),a.groupLeaderCount>0&&2==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:2,href:"javascript:void(0)",class:"accept-rfc-button save-changes",onClick:t[9]||(t[9]=(...e)=>de.approveRFCStatus&&de.approveRFCStatus(...e))}," Approve RFC ")):(0,s.Q3)("v-if",!0),4==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:3,href:"javascript:void(0)",class:"pause-rfc-button save-changes",onClick:t[10]||(t[10]=(...e)=>de.pauseRFCStatus&&de.pauseRFCStatus(...e))}," Pause RFC ")):(0,s.Q3)("v-if",!0),a.userLevel>1&&7==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:4,href:"javascript:void(0)",class:"restart-rfc-button save-changes",onClick:t[11]||(t[11]=(...e)=>de.startRFCStatus&&de.startRFCStatus(...e))}," Restart RFC ")):(0,s.Q3)("v-if",!0)])])):(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.CE)("div",se,[(0,s.Lk)("div",re,[a.userLevel>1&&e.changeTaskCount>0?((0,s.uX)(),(0,s.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>de.updateRFCStatus&&de.updateRFCStatus(...e))},"Submit RFC for Approval")):(0,s.Q3)("v-if",!0),a.userLevel>1?((0,s.uX)(),(0,s.CE)("a",{key:1,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[6]||(t[6]=(...e)=>de.updateRFC&&de.updateRFC(...e))},"Update Request for Change")):(0,s.Q3)("v-if",!0)])]))])]),(0,s.Q3)(" RFC MODALS "),(0,s.bF)(he,{onUpdate_change_lead:de.updateChangeLead},null,8,["onUpdate_change_lead"])])),_:1},8,["theme"])}]])},1281:(e,t,a)=>{a.d(t,{A:()=>C});var s=a(641),r=a(3751);const l={class:"row"},n=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Description"),(0,s.Lk)("p",{class:"text-instructions"}," Place a detailed description here. This should cover what your Request For Change (RFC) will entail and why it should be implemented within the time frames specified below. ")],-1),o={class:"col-md-8",style:{"min-height":"610px"}},i={class:"form-group"},d=(0,s.Lk)("br",null,null,-1),c=(0,s.Lk)("br",null,null,-1),u=["src"];var p=a(9639),f=a(3855),h=a(404),m=a(8838),g=a(2124),v=a(9184),y=a(2595);const L={name:"RfcDescription",setup:()=>({v$:(0,p.Ay)()}),components:{editor:m.A,ValidationRendering:h.A},emits:["update_validation","update_values"],props:{isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:()=>[]},uuid:{type:String,default:""}},data:()=>({rfcSummaryModel:"",rfcTitleModel:""}),computed:{...(0,g.L8)({contentCss:"getContentCss",skin:"getSkin",staticUrl:"getStaticUrl"})},validations:{rfcSummaryModel:{required:f.mw,maxLength:(0,f.Ru)(63e4)},rfcTitleModel:{required:f.mw,maxLength:(0,f.Ru)(250)}},methods:{handleUploadImage(e,t){return""===this.uuid?(0,y.A)(e,t):(0,v.j)(e,t)},updateValidation(){this.v$.$touch(),this.$emit("update_validation",{tab:"tab_0",value:!this.v$.$invalid})},updateValues(e,t){this.$emit("update_values",{modelName:e,modelValue:t})}},watch:{rfcSummaryModel(){this.updateValues("rfcSummaryModel",this.rfcSummaryModel),this.updateValidation()},rfcTitleModel(){this.updateValues("rfcTitleModel",this.rfcTitleModel),this.updateValidation()}},mounted(){this.rfcResults.length>0&&(this.rfcSummaryModel=this.rfcResults[0].fields.rfc_summary,this.rfcTitleModel=this.rfcResults[0].fields.rfc_title),this.v$.$touch()}},C=(0,a(6262).A)(L,[["render",function(e,t,a,p,f,h){const m=(0,s.g2)("validation-rendering"),g=(0,s.g2)("editor");return(0,s.uX)(),(0,s.CE)("div",l,[n,(0,s.Lk)("div",o,[(0,s.Lk)("div",i,[(0,s.Lk)("label",null,[(0,s.eW)(" Request for Change Title: "),(0,s.bF)(m,{"error-list":p.v$.rfcTitleModel.$errors},null,8,["error-list"])]),(0,s.bo)((0,s.Lk)("input",{type:"text",maxlength:"255",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=t=>e.rfcTitleModel=t)},null,512),[[r.vModelText,e.rfcTitleModel]])]),d,(0,s.Q3)(" RFC SUMMARY "),(0,s.Lk)("label",null,[(0,s.eW)(" Request for Change Summary: "),(0,s.bF)(m,{"error-list":p.v$.rfcSummaryModel.$errors},null,8,["error-list"])]),c,(0,s.Lk)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,u),(0,s.bF)(g,{"license-key":"gpl",init:{license_key:"gpl",file_picker_types:"image",height:500,images_upload_handler:h.handleUploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`,relative_urls:!1},disabled:a.isReadOnly,modelValue:e.rfcSummaryModel,"onUpdate:modelValue":t[1]||(t[1]=t=>e.rfcSummaryModel=t)},null,8,["init","disabled","modelValue"])])])}]])},404:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(641),r=a(33);const l={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},n=(0,a(6262).A)(l,[["render",function(e,t,a,l,n,o){return(0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.errorList,(e=>((0,s.uX)(),(0,s.CE)("span",{class:"error",key:e.$uid},(0,r.toDisplayString)(e.$message),1)))),128)}]])},9581:(e,t,a)=>{a.d(t,{p:()=>l});var s=a(953),r=a(7413);function l(e){return"dark"===(0,s.BA)(e)?r.a:null}},9184:(e,t,a)=>{a.d(t,{j:()=>l});var s=a(953),r=a(3783);function l(e,t){const a=(0,s.BA)(e),l=r.M.getters.getRootUrl;if(void 0===a)return;const n=new FormData;n.set("document",a.blob(),a.blob().name),n.set("document_description",a.blob().name),n.set("uuid",this.uuid);const o={onUploadProgress:e=>{t(parseFloat(e.loaded)/parseFloat(e.total))}};return this.axios.post(`${l}documentation/new_object_upload/`,n,o).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>(this.$store.dispatch("newToast",{header:"Failed to upload image",message:`Sorry, could not upload image. Error -> ${e}`,extra_classes:"bg-danger",delay:0}),"")))}},2595:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(953);function r(e,t){const a=(0,s.BA)(e),r=this.$store.getters.getRootUrl;let l=this.$store.getters.getDestination,n=this.$store.getters.getLocationId;"kanban_board"===l&&(l="kanban_card",n=this.$store.getters.getCardId);const o=new FormData;o.set("document",a.blob(),a.filename()),o.set("document_description",a.filename());const i={onUploadProgress:e=>{t(parseFloat(e.loaded)/parseFloat(e.total))}};return this.axios.post(`${r}documentation/${l}/${n}/upload/`,o,i).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>(this.$store.dispatch("newToast",{header:"Failed to upload image",message:`Sorry, could not upload image. Error -> ${e}`,extra_classes:"bg-danger",delay:0}),"")))}}}]);