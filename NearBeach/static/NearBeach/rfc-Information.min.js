"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[9003],{8838:(e,t,a)=>{a.d(t,{A:()=>v});var s,n=a(641),r=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],l=function(e){return-1!==r.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},o=0,i=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++o+String(t)},d=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},c=function(){return{listeners:[],scriptId:i("tiny-script"),scriptLoaded:!1}},u=(s=c(),{load:function(e,t,a){s.scriptLoaded?a():(s.listeners.push(a),e.getElementById(s.scriptId)||function(e,t,a){var n=t.createElement("script");n.referrerPolicy="origin",n.type="application/javascript",n.id=e,n.src=a;var r=function(){n.removeEventListener("load",r),s.listeners.forEach((function(e){return e()})),s.scriptLoaded=!0};n.addEventListener("load",r),t.head&&t.head.appendChild(n)}(s.scriptId,e,t))},reinitialize:function(){s=c()}}),p=function(){var e="undefined"!=typeof window?window:a.g;return e&&e.tinymce?e.tinymce:null},f={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},h=a(953),m=function(){return m=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},m.apply(this,arguments)},g={selector:void 0,target:void 0};const v=(0,n.pM)({props:f,setup:function(e,t){var a=e.init?m(m({},e.init),g):m({},g),s=(0,h.QW)(e),r=s.disabled,o=s.modelValue,c=s.tagName,f=(0,h.KR)(null),v=null,y=e.id||i("tiny-vue"),L=e.init&&e.init.inline||e.inline,C=!!t.attrs["onUpdate:modelValue"],k=!0,b=e.initialValue?e.initialValue:"",R="",S=function(){var s,r,i,c=(s=k,C?function(){return(null==o?void 0:o.value)?o.value:""}:function(){return s?b:R}),u=m(m({},a),{readonly:e.disabled,target:f.value,plugins:(r=a.plugins,i=e.plugins,d(r).concat(d(i))),toolbar:e.toolbar||a.toolbar,inline:L,license_key:e.licenseKey,setup:function(s){v=s,s.on("init",(function(a){return function(e,t,a,s,r,o){s.setContent(o()),a.attrs["onUpdate:modelValue"]&&function(e,t,a,s){var r=e.modelEvents?e.modelEvents:null,l=Array.isArray(r)?r.join(" "):r;(0,n.wB)(s,(function(t,s){a&&"string"==typeof t&&t!==s&&t!==a.getContent({format:e.outputFormat})&&a.setContent(t)})),a.on(l||"change input undo redo",(function(){t.emit("update:modelValue",a.getContent({format:e.outputFormat}))}))}(t,a,s,r),function(e,t,a){Object.keys(t).filter(l).forEach((function(s){var n=t[s];"function"==typeof n&&("onInit"===s?n(e,a):a.on(s.substring(2),(function(e){return n(e,a)})))}))}(e,a.attrs,s)}(a,e,t,s,o,c)})),"function"==typeof a.setup&&a.setup(s)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(f.value)&&(f.value.style.visibility=""),p().init(u),k=!1};return(0,n.wB)(r,(function(e){var t;null!==v&&("function"==typeof(null===(t=v.mode)||void 0===t?void 0:t.set)?v.mode.set(e?"readonly":"design"):v.setMode(e?"readonly":"design"))})),(0,n.wB)(c,(function(e){var t;C||(R=v.getContent()),null===(t=p())||void 0===t||t.remove(v),(0,n.dY)((function(){return S()}))})),(0,n.sV)((function(){if(null!==p())S();else if(f.value&&f.value.ownerDocument){var t=e.cloudChannel?e.cloudChannel:"7",a=e.apiKey?e.apiKey:"no-api-key",s=null==e.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(a,"/tinymce/").concat(t,"/tinymce.min.js"):e.tinymceScriptSrc;u.load(f.value.ownerDocument,s,S)}})),(0,n.xo)((function(){null!==p()&&p().remove(v)})),L||((0,n.n)((function(){k||S()})),(0,n.Y4)((function(){var e;C||(R=v.getContent()),null===(e=p())||void 0===e||e.remove(v)}))),t.expose({rerender:function(e){var t;R=v.getContent(),null===(t=p())||void 0===t||t.remove(v),a=m(m(m({},a),e),g),(0,n.dY)((function(){return S()}))},getEditor:function(){return v}}),function(){return L?function(e,t,a,s){return e(s||"div",{id:t,ref:a})}(n.h,y,f,e.tagName):(0,n.h)("textarea",{id:y,visibility:"hidden",ref:f})}}})},9941:(e,t,a)=>{a.r(t),a.d(t,{default:()=>he});var s=a(641),n=a(33),r=a(3751);const l={class:"card"},o={class:"card-body"},i=["href"],d={class:"row"},c={class:"col-md-4"},u={class:"form-group"},p={class:"col-md-4"},f={class:"form-group"},h={class:"row"},m={class:"row col-md-8"},g={class:"col-md-12"},v={class:"col-md-12"},y={key:0,class:"error"},L={class:"col-sm-4"},C={class:"form-group"},k={class:"row"},b={class:"col-md-4"},R={class:"text-instructions"},S={key:0},_={class:"col-md-8 user-card-list"},w={class:"user-card wide"},D=["src"],M={class:"user-card--details"},F={class:"user-card--name"},U={class:"user-card--email"},$={key:1},E={key:2,class:"row"},x={key:0,class:"col-md-8"},A={key:1,class:"user-card-list col-md-8"},T=["src"],I={class:"user-card--details"},V={class:"user-card--name"},B={class:"user-card--email"},j={key:3},O={key:4},P={key:5,class:"row submit-row"},Q={class:"col-md-12"},X={key:6,class:"row submit-row"},N={class:"col-md-12"};var q=a(1281);const W={key:0,class:"modal fade",id:"updateChangeLeadModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},K={class:"modal-dialog modal-lg"},z={class:"modal-content"},G={class:"modal-body"},H={class:"row"},Y={class:"col-md-8"},J={class:"modal-footer"},Z=["disabled"];var ee=a(1080),te=a(2124);const ae={name:"UpdateChangeLeadWizard",components:{NSelect:ee.A},emits:["update_change_lead"],computed:{...(0,te.L8)({destination:"getDestination",locationId:"getLocationId",potentialUserList:"getPotentialUserList",rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),watch:{potentialUserList(e){void 0!==e&&(this.userFixList=e.map((e=>({value:e.id,label:`${e.username}: ${e.first_name} ${e.last_name}`}))))}},methods:{changeLead(){const e=new FormData;e.set("username",this.userModel),this.axios.post(`${this.rootUrl}rfc_information/${this.locationId}/update_change_lead/`,e).then((e=>{this.$emit("update_change_lead",e.data.change_lead_results),document.getElementById("updateChangeLeadCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error changing the lead",message:`Sorry, we could not change the lead. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}};var se=a(6262);const ne=(0,se.A)(ae,[["render",function(e,t,a,n,r,l){const o=(0,s.g2)("n-select");return e.userLevel>1?((0,s.uX)(),(0,s.CE)("div",W,[(0,s.Lk)("div",K,[(0,s.Lk)("div",z,[t[4]||(t[4]=(0,s.Lk)("div",{class:"modal-header"},[(0,s.Lk)("h2",null," Change Lead Wizard "),(0,s.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"updateChangeLeadCloseButton"},[(0,s.Lk)("span",{"aria-hidden":"true"})])],-1)),(0,s.Lk)("div",G,[(0,s.Lk)("div",H,[t[2]||(t[2]=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("strong",null,"Change User"),(0,s.Lk)("p",{class:"text-instructions"}," Please use the dropdown to select the new Change User ")],-1)),(0,s.Lk)("div",Y,[(0,s.bF)(o,{options:r.userFixList,value:r.userModel,"onUpdate:value":t[0]||(t[0]=e=>r.userModel=e)},null,8,["options","value"])])])]),(0,s.Lk)("div",J,[t[3]||(t[3]=(0,s.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1)),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",disabled:0===r.userModel.length,onClick:t[1]||(t[1]=(...e)=>l.changeLead&&l.changeLead(...e))}," Change Lead ",8,Z)])])])])):(0,s.Q3)("v-if",!0)}]]);var re=a(8105),le=a(9336),oe=a(9639),ie=a(3855),de=a(404),ce=a(6285),ue=a(953),pe=a(9581);const fe={name:"RfcInformation",setup:()=>({v$:(0,oe.Ay)()}),components:{NDatePicker:re.A,NSelect:ee.A,RfcDescription:q.A,UpdateChangeLead:ne,ValidationRendering:de.A},props:{groupLeaderCount:{type:Number,default:0},isReadOnly:{type:Boolean,default:!1},rfcChangeLead:{type:Array,default:()=>[]},rfcResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:""},userLevel:{type:Number,default:0}},watch:{localReleaseDate(){this.localEndDate>this.localReleaseDate&&(this.localReleaseDate=this.localEndDate),this.updateReleaseDate()}},computed:{...(0,te.L8)({changeTaskCount:"getChangeTaskCount",rfcImplementationEndModel:"getEndDate",rfcImplementationStartModel:"getStartDate",rfcReleaseModel:"getReleaseDate"}),checkDateValidation(){return!this.v$.rfcReleaseModel.required&&this.v$.rfcReleaseModel.$dirty}},data(){return{approvalUsersList:[],localChangeLead:this.rfcChangeLead,localReleaseDate:0,rfcChangeLeadFixList:[],rfcChangeLeadModel:"",rfcTitleModel:this.rfcResults[0].fields.rfc_title,rfcSummaryModel:this.rfcResults[0].fields.rfc_summary,rfcStatus:[{label:"Draft",value:1},{label:"Waiting for approval",value:2},{label:"Approved",value:3},{label:"Started",value:4},{label:"Finished",value:5},{label:"Rejected",value:6}],rfcStatusDict:{1:"Draft",2:"Waiting for approval",3:"Approved",4:"Started",5:"Finished",6:"Rejected"},rfcType:[{label:"Emergency",value:4},{label:"High",value:3},{label:"Medium",value:2},{label:"Low",value:1}],rfcTypeModel:"",rfcVersionModel:this.rfcResults[0].fields.rfc_version_number}},validations:{rfcTitleModel:{required:ie.mw},rfcSummaryModel:{required:ie.mw,maxLength:(0,ie.Ru)(63e4)},rfcReleaseModel:{required:ie.mw},rfcTypeModel:{required:ie.mw},rfcVersionModel:{maxLength:(0,ie.Ru)(25)}},methods:{useNiceDatetimeFromInt:function(e){const t=(0,ue.BA)(e);return""===t||null==t?"":ce.c9.fromMillis(t).toLocaleString(ce.c9.DATETIME_MED)},useNBTheme:pe.p,approveRFCStatus(){const e=new FormData;e.set("rfc_status","3"),this.sendUpdate(e)},checkDisableDate(e){return!0!==this.isReadOnly&&function(e){const t=(0,ue.BA)(e),a=new Date;return a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),t<=a.getTime()-36e5}(e)},getApprovalUserList(){2===parseInt(this.rfcResults[0].fields.rfc_status)&&this.axios.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/get_approval_users/`).then((e=>{this.approvalUsersList=e.data})).catch((()=>{this.$store.dispatch("newToast",{header:"Error Getting Approval User List",message:"Sorry, we could not get you the list of users who can approve this RFC",extra_classes:"bg-danger",delay:0})}))},getProfilePicture(e){return""===e||null==e?`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${e}`},getStatus(){return this.rfcStatusDict[this.rfcResults[0].fields.rfc_status]},openChangeLeadModal(){new le.aF(document.getElementById("updateChangeLeadModal")).show()},pauseRFCStatus(){const e=new FormData;e.set("rfc_status","7"),this.sendUpdate(e)},profilePicture(e){return null!==e&&""!==e?`${this.rootUrl}private/${e}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`},rejectRFCStatus(){const e=new FormData;e.set("rfc_status","6"),this.sendUpdate(e)},sendUpdate(e){this.axios.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/update_status/`,e).then((()=>{window.location.reload(!0)})).catch((()=>{this.$store.dispatch("newToast",{header:"Can not update status of RFC",message:"Sadly we had issues trying to update the status for the RFC.",delay:0,extra_classes:"bg-warning text-dark"})}))},startRFCStatus(){const e=new FormData;e.set("rfc_status",4),this.sendUpdate(e)},updateChangeLead(e){this.localChangeLead=e},updateReleaseDate(){this.$store.commit({type:"updateRfcReleaseDate",releaseDateModel:this.localReleaseDate})},async updateRFC(){if(!await this.v$.$validate())return void this.$store.dispatch("newToast",{header:"Please check validation",message:"Sorry, but can you please fix all validation issues.",extra_classes:"bg-warning text-dark",delay:0});const e=new FormData;e.set("rfc_title",this.rfcTitleModel),e.set("rfc_summary",this.rfcSummaryModel),e.set("rfc_type",this.rfcTypeModel),e.set("rfc_version_number",this.rfcVersionModel),e.set("rfc_implementation_start_date",new Date(this.rfcImplementationStartModel).toISOString()),e.set("rfc_implementation_end_date",new Date(this.rfcImplementationEndModel).toISOString()),e.set("rfc_implementation_release_date",new Date(this.rfcReleaseModel).toISOString()),this.axios.post(`${this.rootUrl}rfc_information/${this.rfcResults[0].pk}/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Save Successfully",message:"RFC Has saved",delay:1e4,extra_classes:"bg-success"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not save RFC",message:`Sadly we've had the following error ${e}`,delay:0,extra_classes:"bg-warning text-dark"})}))},updateRFCStatus(){const e=new FormData;e.set("rfc_status","2"),this.sendUpdate(e)},updateValues(e){this[e.modelName]=e.modelValue}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.rfcTypeModel=this.rfcResults[0].fields.rfc_type,this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel});const e=new Date(this.rfcResults[0].fields.rfc_implementation_end_date),t=new Date(this.rfcResults[0].fields.rfc_implementation_release_date),a=new Date(this.rfcResults[0].fields.rfc_implementation_start_date);this.localReleaseDate=t.getTime(),this.$store.commit({type:"updateRfcDates",endDateModel:e.getTime(),releaseDateModel:t.getTime(),startDateModel:a.getTime()}),this.getApprovalUserList()}},he=(0,se.A)(fe,[["render",function(e,t,a,q,W,K){const z=(0,s.g2)("rfc-description"),G=(0,s.g2)("validation-rendering"),H=(0,s.g2)("n-select"),Y=(0,s.g2)("n-date-picker"),J=(0,s.g2)("update-change-lead"),Z=(0,s.g2)("n-config-provider");return(0,s.uX)(),(0,s.Wv)(Z,{theme:K.useNBTheme(a.theme)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",l,[(0,s.Lk)("div",o,[t[24]||(t[24]=(0,s.Lk)("h1",null,"Request for Change",-1)),t[25]||(t[25]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("h2",null,(0,n.toDisplayString)(K.getStatus()),1),a.userLevel>=2&&a.isReadOnly&&"Draft"===K.getStatus()?((0,s.uX)(),(0,s.CE)("a",{key:0,href:`${a.rootUrl}rfc_information/${a.rfcResults[0].pk}/`}," Edit RFC ",8,i)):(0,s.Q3)("v-if",!0),t[26]||(t[26]=(0,s.Lk)("hr",null,null,-1)),(0,s.bF)(z,{"rfc-results":a.rfcResults,"is-read-only":a.isReadOnly,onUpdate_values:t[0]||(t[0]=e=>K.updateValues(e))},null,8,["rfc-results","is-read-only"]),(0,s.Q3)(" Request for Change Types and Release Number "),t[27]||(t[27]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",d,[t[14]||(t[14]=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Type and Version"),(0,s.Lk)("p",{class:"text-instructions"}," Please specify how urgent this RFC's status really is. Optionally you can also specify the version or release number. ")],-1)),(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("label",null,[t[12]||(t[12]=(0,s.eW)(" Request for Change Type: ")),(0,s.bF)(G,{"error-list":q.v$.rfcTypeModel.$errors},null,8,["error-list"])]),(0,s.bF)(H,{options:W.rfcType,disabled:a.isReadOnly,value:W.rfcTypeModel,"onUpdate:value":t[1]||(t[1]=e=>W.rfcTypeModel=e)},null,8,["options","disabled","value"])])]),(0,s.Lk)("div",p,[(0,s.Lk)("div",f,[t[13]||(t[13]=(0,s.Lk)("label",null,"Version/Release Number",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",maxlength:"25",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>W.rfcVersionModel=e)},null,512),[[r.vModelText,W.rfcVersionModel]])])])]),(0,s.Q3)(" Implementation and Release Dates "),t[28]||(t[28]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",h,[t[19]||(t[19]=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Important Dates"),(0,s.Lk)("p",{class:"text-instructions"}," Start and End date are automatically calculated from the change tasks. "),(0,s.Lk)("p",{class:"text-instructions"}," The release date can only be equal or greater than the end date. By default it will equal the end date. Changing the release date will obey the time delta if the end date changes. ")],-1)),(0,s.Lk)("div",m,[(0,s.Q3)(" Start and End date row "),(0,s.Lk)("div",g,[t[15]||(t[15]=(0,s.Lk)("strong",null,"Start Date: ",-1)),(0,s.eW)((0,n.toDisplayString)(K.useNiceDatetimeFromInt(e.rfcImplementationStartModel)),1),t[16]||(t[16]=(0,s.Lk)("br",null,null,-1)),t[17]||(t[17]=(0,s.Lk)("strong",null,"End Date: ",-1)),(0,s.eW)((0,n.toDisplayString)(K.useNiceDatetimeFromInt(e.rfcImplementationEndModel)),1)]),(0,s.Q3)(" Validation row "),(0,s.Lk)("div",v,[K.checkDateValidation?((0,s.uX)(),(0,s.CE)("span",y," Please select an appropriate date for ALL fields.")):(0,s.Q3)("v-if",!0)]),(0,s.Q3)(" Dates Row "),(0,s.Lk)("div",L,[(0,s.Lk)("div",C,[t[18]||(t[18]=(0,s.Lk)("label",null,"Release Date: ",-1)),(0,s.bF)(Y,{type:"datetime",value:W.localReleaseDate,"onUpdate:value":t[3]||(t[3]=e=>W.localReleaseDate=e),disabled:a.isReadOnly,"is-date-disabled":K.checkDisableDate},null,8,["value","disabled","is-date-disabled"])])])])]),(0,s.Q3)(" RFC Change Lead User "),t[29]||(t[29]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",k,[(0,s.Lk)("div",b,[t[22]||(t[22]=(0,s.Lk)("h2",null,"Change LEAD:",-1)),(0,s.Lk)("p",R,[t[20]||(t[20]=(0,s.eW)(" Please supply the LEAD who will be leading this Request for Change.")),t[21]||(t[21]=(0,s.Lk)("br",null,null,-1)),a.isReadOnly?(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.CE)("strong",S,[(0,s.Lk)("a",{onClick:t[4]||(t[4]=(...e)=>K.openChangeLeadModal&&K.openChangeLeadModal(...e)),class:"update-change-lead"},"Update Change Lead")]))])]),(0,s.Lk)("div",_,[(0,s.Lk)("div",w,[(0,s.Lk)("img",{src:K.profilePicture(W.localChangeLead[0].profile_picture),alt:"default profile",class:"user-card--profile"},null,8,D),(0,s.Lk)("div",M,[(0,s.Lk)("div",F,(0,n.toDisplayString)(W.localChangeLead[0].first_name)+" "+(0,n.toDisplayString)(W.localChangeLead[0].last_name),1),(0,s.Lk)("div",U,(0,n.toDisplayString)(W.localChangeLead[0].email),1)])])])]),2===parseInt(a.rfcResults[0].fields.rfc_status)?((0,s.uX)(),(0,s.CE)("hr",$)):(0,s.Q3)("v-if",!0),2===parseInt(a.rfcResults[0].fields.rfc_status)?((0,s.uX)(),(0,s.CE)("div",E,[t[23]||(t[23]=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("strong",null,"Waiting for approval"),(0,s.Lk)("p",{class:"text-instructions"}," The following users will be able to approve or reject this RFC. Please contact them. ")],-1)),0===W.approvalUsersList.length?((0,s.uX)(),(0,s.CE)("div",x," Currently gathering User Approval List. ")):((0,s.uX)(),(0,s.CE)("div",A,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.approvalUsersList,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.username,class:"user-card wide"},[(0,s.Lk)("img",{src:K.profilePicture(e.profile_picture),alt:"default profile",class:"user-card--profile"},null,8,T),(0,s.Lk)("div",I,[(0,s.Lk)("div",V,(0,n.toDisplayString)(e.first_name)+" "+(0,n.toDisplayString)(e.last_name),1),(0,s.Lk)("div",B,(0,n.toDisplayString)(e.email),1)])])))),128))]))])):(0,s.Q3)("v-if",!0),2===parseInt(a.rfcResults[0].fields.rfc_status)?((0,s.uX)(),(0,s.CE)("hr",j)):(0,s.Q3)("v-if",!0),(0,s.Q3)(" Update Button "),a.isReadOnly?(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.CE)("hr",O)),a.isReadOnly?a.userLevel>=2?((0,s.uX)(),(0,s.CE)("div",X,[(0,s.Lk)("div",N,[a.groupLeaderCount>0&&2==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:0,href:"javascript:void(0)",class:"reject-rfc-button","aria-disabled":"",onClick:t[7]||(t[7]=(...e)=>K.rejectRFCStatus&&K.rejectRFCStatus(...e))}," Reject RFC ")):(0,s.Q3)("v-if",!0),a.userLevel>1&&3==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:1,href:"javascript:void(0)",class:"accept-rfc-button save-changes",onClick:t[8]||(t[8]=(...e)=>K.startRFCStatus&&K.startRFCStatus(...e))}," Start RFC ")):(0,s.Q3)("v-if",!0),a.groupLeaderCount>0&&2==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:2,href:"javascript:void(0)",class:"accept-rfc-button save-changes",onClick:t[9]||(t[9]=(...e)=>K.approveRFCStatus&&K.approveRFCStatus(...e))}," Approve RFC ")):(0,s.Q3)("v-if",!0),4==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:3,href:"javascript:void(0)",class:"pause-rfc-button save-changes",onClick:t[10]||(t[10]=(...e)=>K.pauseRFCStatus&&K.pauseRFCStatus(...e))}," Pause RFC ")):(0,s.Q3)("v-if",!0),a.userLevel>1&&7==a.rfcResults[0].fields.rfc_status?((0,s.uX)(),(0,s.CE)("a",{key:4,href:"javascript:void(0)",class:"restart-rfc-button save-changes",onClick:t[11]||(t[11]=(...e)=>K.startRFCStatus&&K.startRFCStatus(...e))}," Restart RFC ")):(0,s.Q3)("v-if",!0)])])):(0,s.Q3)("v-if",!0):((0,s.uX)(),(0,s.CE)("div",P,[(0,s.Lk)("div",Q,[a.userLevel>1&&e.changeTaskCount>0?((0,s.uX)(),(0,s.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>K.updateRFCStatus&&K.updateRFCStatus(...e))},"Submit RFC for Approval")):(0,s.Q3)("v-if",!0),a.userLevel>1?((0,s.uX)(),(0,s.CE)("a",{key:1,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[6]||(t[6]=(...e)=>K.updateRFC&&K.updateRFC(...e))},"Update Request for Change")):(0,s.Q3)("v-if",!0)])]))])]),(0,s.Q3)(" RFC MODALS "),(0,s.bF)(J,{onUpdate_change_lead:K.updateChangeLead},null,8,["onUpdate_change_lead"])])),_:1},8,["theme"])}]])},1281:(e,t,a)=>{a.d(t,{A:()=>v});var s=a(641),n=a(3751);const r={class:"row"},l={class:"col-md-8",style:{"min-height":"610px"}},o={class:"form-group"},i=["src"];var d=a(9639),c=a(3855),u=a(404),p=a(8838),f=a(2124),h=a(9184),m=a(2595);const g={name:"RfcDescription",setup:()=>({v$:(0,d.Ay)()}),components:{editor:p.A,ValidationRendering:u.A},emits:["update_validation","update_values"],props:{isReadOnly:{type:Boolean,default:!1},rfcResults:{type:Array,default:()=>[]},uuid:{type:String,default:""}},data:()=>({rfcSummaryModel:"",rfcTitleModel:""}),computed:{...(0,f.L8)({contentCss:"getContentCss",skin:"getSkin",staticUrl:"getStaticUrl"})},validations:{rfcSummaryModel:{required:c.mw,maxLength:(0,c.Ru)(63e4)},rfcTitleModel:{required:c.mw,maxLength:(0,c.Ru)(250)}},methods:{handleUploadImage(e,t){return""===this.uuid?(0,m.A)(e,t):(0,h.j)(e,t)},updateValidation(){this.v$.$touch(),this.$emit("update_validation",{tab:"tab_0",value:!this.v$.$invalid})},updateValues(e,t){this.$emit("update_values",{modelName:e,modelValue:t})}},watch:{rfcSummaryModel(){this.updateValues("rfcSummaryModel",this.rfcSummaryModel),this.updateValidation()},rfcTitleModel(){this.updateValues("rfcTitleModel",this.rfcTitleModel),this.updateValidation()}},mounted(){this.rfcResults.length>0&&(this.rfcSummaryModel=this.rfcResults[0].fields.rfc_summary,this.rfcTitleModel=this.rfcResults[0].fields.rfc_title),this.v$.$touch()}},v=(0,a(6262).A)(g,[["render",function(e,t,a,d,c,u){const p=(0,s.g2)("validation-rendering"),f=(0,s.g2)("editor");return(0,s.uX)(),(0,s.CE)("div",r,[t[6]||(t[6]=(0,s.Lk)("div",{class:"col-md-4"},[(0,s.Lk)("h2",null,"Description"),(0,s.Lk)("p",{class:"text-instructions"}," Place a detailed description here. This should cover what your Request For Change (RFC) will entail and why it should be implemented within the time frames specified below. ")],-1)),(0,s.Lk)("div",l,[(0,s.Lk)("div",o,[(0,s.Lk)("label",null,[t[2]||(t[2]=(0,s.eW)(" Request for Change Title: ")),(0,s.bF)(p,{"error-list":d.v$.rfcTitleModel.$errors},null,8,["error-list"])]),(0,s.bo)((0,s.Lk)("input",{type:"text",maxlength:"255",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=t=>e.rfcTitleModel=t)},null,512),[[n.vModelText,e.rfcTitleModel]])]),t[4]||(t[4]=(0,s.Lk)("br",null,null,-1)),(0,s.Q3)(" RFC SUMMARY "),(0,s.Lk)("label",null,[t[3]||(t[3]=(0,s.eW)(" Request for Change Summary: ")),(0,s.bF)(p,{"error-list":d.v$.rfcSummaryModel.$errors},null,8,["error-list"])]),t[5]||(t[5]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("img",{src:`${e.staticUrl}NearBeach/images/placeholder/body_text.svg`,class:"loader-image",alt:"loading image for Tinymce"},null,8,i),(0,s.bF)(f,{"license-key":"gpl",init:{license_key:"gpl",file_picker_types:"image",height:500,images_upload_handler:u.handleUploadImage,menubar:!1,paste_data_images:!0,plugins:["lists","image","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`,relative_urls:!1},disabled:a.isReadOnly,modelValue:e.rfcSummaryModel,"onUpdate:modelValue":t[1]||(t[1]=t=>e.rfcSummaryModel=t)},null,8,["init","disabled","modelValue"])])])}]])},404:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(641),n=a(33);const r={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},l=(0,a(6262).A)(r,[["render",function(e,t,a,r,l,o){return(0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.errorList,(e=>((0,s.uX)(),(0,s.CE)("span",{class:"error",key:e.$uid},(0,n.toDisplayString)(e.$message),1)))),128)}]])},9581:(e,t,a)=>{a.d(t,{p:()=>r});var s=a(953),n=a(7413);function r(e){return"dark"===(0,s.BA)(e)?n.a:null}},9184:(e,t,a)=>{a.d(t,{j:()=>r});var s=a(953),n=a(6303);function r(e,t){const a=(0,s.BA)(e),r=n.M.getters.getRootUrl;if(void 0===a)return;const l=new FormData;l.set("document",a.blob(),a.blob().name),l.set("document_description",a.blob().name),l.set("uuid",this.uuid);const o={onUploadProgress:e=>{t(parseFloat(e.loaded)/parseFloat(e.total))}};return this.axios.post(`${r}documentation/new_object_upload/`,l,o).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>(this.$store.dispatch("newToast",{header:"Failed to upload image",message:`Sorry, could not upload image. Error -> ${e}`,extra_classes:"bg-danger",delay:0}),"")))}},2595:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(953);function n(e,t){const a=(0,s.BA)(e),n=this.$store.getters.getRootUrl;let r=this.$store.getters.getDestination,l=this.$store.getters.getLocationId;"kanban_board"===r&&(r="kanban_card",l=this.$store.getters.getCardId);const o=new FormData;o.set("document",a.blob(),a.filename()),o.set("document_description",a.filename());const i={onUploadProgress:e=>{t(parseFloat(e.loaded)/parseFloat(e.total))}};return this.axios.post(`${n}documentation/${r}/${l}/upload/`,o,i).then((e=>`/private/${e.data[0].document_key_id}`)).catch((e=>(this.$store.dispatch("newToast",{header:"Failed to upload image",message:`Sorry, could not upload image. Error -> ${e}`,extra_classes:"bg-danger",delay:0}),"")))}}}]);