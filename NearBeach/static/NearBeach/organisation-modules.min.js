"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[9616],{4689:(t,e,s)=>{s.r(e),s.d(e,{default:()=>Ht});var a=s(6252);const o={class:"card"},l={class:"card-body"},i=(0,a._)("ul",{class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},[(0,a.kq)(" Organisation Contacts "),(0,a._)("li",{class:"nav-item",role:"presentation"},[(0,a._)("button",{class:"nav-link",id:"organisation-contacts-tab","data-bs-toggle":"tab","data-bs-target":"#organisation-contacts",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Organisation Contacts ")]),(0,a.kq)(" Document Uploads "),(0,a._)("li",{class:"nav-item",role:"presentation"},[(0,a._)("button",{class:"nav-link",id:"document-uploads-tab","data-bs-toggle":"tab","data-bs-target":"#document-uploads",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Document Uploads ")]),(0,a.kq)(" Associated Projects & Tasks "),(0,a._)("li",{class:"nav-item",role:"presentation"},[(0,a._)("button",{class:"nav-link",id:"associated-objects-tab","data-bs-toggle":"tab","data-bs-target":"#associated-objects",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Associated Objects ")]),(0,a.kq)(" Misc Modules "),(0,a._)("li",{class:"nav-item",role:"presentation"},[(0,a._)("button",{class:"nav-link",id:"misc-modules-tab","data-bs-toggle":"tab","data-bs-target":"#misc-modules",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Misc ")]),(0,a.kq)(" Notes Modules "),(0,a._)("li",{class:"nav-item",role:"presentation"},[(0,a._)("button",{class:"nav-link",id:"notes-modules-tab","data-bs-toggle":"tab","data-bs-target":"#notes-modules",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"},"Notes ")])],-1),n=(0,a._)("hr",null,null,-1),r={class:"tab-content",id:"misc_module_content"},d={class:"tab-pane fade",id:"organisation-contacts",role:"tabpanel","aria-labelledby":"profile-tab"},c=(0,a.Uk)(" Contacts"),u=(0,a._)("p",{class:"text-instructions"}," Below are a list of contacts who are connected to this organisation. ",-1),m=(0,a._)("hr",null,null,-1),p={class:"row submit-row"},_={class:"col-md-12"},b={class:"tab-pane fade",id:"document-uploads",role:"tabpanel","aria-labelledby":"profile-tab"},h={class:"tab-pane fade",id:"associated-objects",role:"tabpanel","aria-labelledby":"profile-tab"},g={class:"tab-pane fade",id:"misc-modules",role:"tabpanel","aria-labelledby":"profile-tab"},v={class:"tab-pane fade",id:"notes-modules",role:"tabpanel","aria-labelledby":"profile-tab"};var f=s(5169),k=s(6542),y=s(8798);const M={class:"modal fade",id:"addCustomerModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},w={class:"modal-dialog modal-xl"},N={class:"modal-content"},q={class:"modal-header"},D=(0,a.Uk)(" Add Customer Wizard"),C=(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addCustomerCloseButton"},[(0,a._)("span",{"aria-hidden":"true"})],-1),E={class:"modal-body"},R={class:"modal-footer"},L=(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);var j=s(9669),U=s.n(j),$=s(9963);const I={class:"row"},S=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"New Customer"),(0,a._)("p",{class:"text-instructions"}," Please fill out the following details. "),(0,a._)("strong",null,"Please Note:"),(0,a._)("p",{class:"text-instructions"}," Customers do not go through a duplication process. Please search for the potential customer first before adding them into NearBeach. ")],-1),O={class:"col-md-8"},T={class:"row"},F={class:"form-group col-sm-3"},x=(0,a.Uk)(" Title: "),P={key:0,class:"error"},A={class:"form-group col-sm-4"},W=(0,a.Uk)(" First Name: "),Z={key:0,class:"error"},V={class:"form-group col-sm-5"},B=(0,a.Uk)(" Last Name: "),H={key:0,class:"error"},Y=(0,a._)("br",null,null,-1),J={class:"form-group col-sm-8"},K=(0,a.Uk)(" Email: "),G={key:0,class:"error"},X={key:1,class:"error"},z=(0,a._)("br",null,null,-1);var Q=s(967),tt=s(3766),et=s(2587);s(9669);const st={name:"NewCustomerForm",setup:()=>({v$:(0,tt.ZP)()}),components:{NSelect:Q.Z},props:["flagValidationCheck","organisationName","titleList"],data:()=>({customerEmailModel:"",customerFirstNameModel:"",customerLastNameModel:"",organisationModel:{},searchTimeout:"",titleFixList:[],titleModel:[]}),validations:{customerEmailModel:{required:et.C1,email:et.Do},customerFirstNameModel:{required:et.C1},customerLastNameModel:{required:et.C1},organisationModel:{required:et.C1},titleModel:{required:et.C1}},methods:{},watch:{customerEmailModel:function(){this.$emit("update_customer_data",{field:"customerEmailModel",value:this.customerEmailModel})},customerFirstNameModel:function(){this.$emit("update_customer_data",{field:"customerFirstNameModel",value:this.customerFirstNameModel})},customerLastNameModel:function(){this.$emit("update_customer_data",{field:"customerLastNameModel",value:this.customerLastNameModel})},flagValidationCheck:function(){this.flagValidationCheck&&this.v$.$touch()},titleModel:function(){this.$emit("update_customer_data",{field:"titleModel",value:this.titleModel})}},mounted(){this.titleFixList=this.titleList.map((t=>({value:t.pk,label:t.fields.title})))}};var at=s(3744);const ot=(0,at.Z)(st,[["render",function(t,e,s,o,l,i){const n=(0,a.up)("n-select");return(0,a.wg)(),(0,a.iD)("div",I,[S,(0,a._)("div",O,[(0,a.kq)(" CUSTOMER DETAILS "),(0,a._)("div",T,[(0,a._)("div",F,[(0,a._)("label",null,[x,!o.v$.titleModel.required&&o.v$.titleModel.$dirty?((0,a.wg)(),(0,a.iD)("span",P," Please supply ")):(0,a.kq)("v-if",!0)]),(0,a.Wm)(n,{options:l.titleFixList,label:"title",placeholder:"",value:l.titleModel,"onUpdate:value":e[0]||(e[0]=t=>l.titleModel=t)},null,8,["options","value"])]),(0,a._)("div",A,[(0,a._)("label",null,[W,!o.v$.customerFirstNameModel.required&&o.v$.customerFirstNameModel.$dirty?((0,a.wg)(),(0,a.iD)("span",Z," Please supply ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>l.customerFirstNameModel=t)},null,512),[[$.vModelText,l.customerFirstNameModel]])]),(0,a._)("div",V,[(0,a._)("label",null,[B,!o.v$.customerLastNameModel.required&&o.v$.customerLastNameModel.$dirty?((0,a.wg)(),(0,a.iD)("span",H," Please supply ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=t=>l.customerLastNameModel=t)},null,512),[[$.vModelText,l.customerLastNameModel]])])]),Y,(0,a.kq)(" Customer Email "),(0,a._)("div",J,[(0,a._)("label",null,[K,!o.v$.customerEmailModel.required&&o.v$.customerEmailModel.$dirty?((0,a.wg)(),(0,a.iD)("span",G," Please supply ")):(0,a.kq)("v-if",!0),!o.v$.customerEmailModel.email&&o.v$.customerEmailModel.$dirty?((0,a.wg)(),(0,a.iD)("span",X," Please format as Email ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>l.customerEmailModel=t)},null,512),[[$.vModelText,l.customerEmailModel]])]),z])])}]]);var lt=s(4250),it=s(5808);const nt={name:"NewCustomerModal",setup:()=>({v$:(0,tt.ZP)()}),components:{Icon:k.JO,NewCustomerForm:ot},props:{organisationId:{type:Number,default:0},titleList:{type:Array,default:()=>[]}},mixins:[it.Z],data:()=>({customerEmailModel:"",customerFirstNameModel:"",customerLastNameModel:"",flagValidationCheck:!1,organisationModel:{},titleModel:[]}),validations:{customerEmailModel:{required:et.C1,email:et.Do},customerFirstNameModel:{required:et.C1},customerLastNameModel:{required:et.C1},titleModel:{required:et.C1}},computed:{...(0,lt.Se)({rootUrl:"getRootUrl"})},methods:{submitNewCustomer:async function(){if(this.flagValidationCheck=!0,setTimeout((()=>{this.flagValidationCheck=!1}),100),await this.v$.$validate())return document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",void new f.u_(document.getElementById("errorModal")).show();const t=new FormData;t.set("customer_title",this.titleModel),t.set("customer_first_name",this.customerFirstNameModel),t.set("customer_last_name",this.customerLastNameModel),t.set("customer_email",this.customerEmailModel),t.set("organisation",this.organisationId),U().post(`${this.rootUrl}new_customer/save/`,t).then((t=>{window.location.href=t.data})).catch((t=>{}))},updateCustomerData:function(t){this[t.field]=t.value}}},rt=(0,at.Z)(nt,[["render",function(t,e,s,o,l,i){const n=(0,a.up)("Icon"),r=(0,a.up)("new-customer-form");return(0,a.wg)(),(0,a.iD)("div",M,[(0,a._)("div",w,[(0,a._)("div",N,[(0,a._)("div",q,[(0,a._)("h2",null,[(0,a.Wm)(n,{icon:t.icons.userIcon},null,8,["icon"]),D]),C]),(0,a._)("div",E,[(0,a.Wm)(r,{"title-list":s.titleList,"flag-validation-check":l.flagValidationCheck,onUpdate_customer_data:e[0]||(e[0]=t=>i.updateCustomerData(t))},null,8,["title-list","flag-validation-check"])]),(0,a._)("div",R,[(0,a._)("a",{href:"javascript:void(0)",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>i.submitNewCustomer&&i.submitNewCustomer(...t))},"Add Contact"),L])])])])}]]);var dt=s(9555),ct=s(4527),ut=s(3577);const mt=(0,a.Uk)(" Associated Objects"),pt={key:0},_t={key:1,class:"row"},bt=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Project"),(0,a._)("p",{class:"text-instructions"}," The following are current OPEN projects associated with the organisation. ")],-1),ht={class:"col-md-8"},gt={class:"table"},vt=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",null,"Project Information"),(0,a._)("td",null,"Status")])],-1),ft=["href"],kt=(0,a._)("div",{class:"spacer"},null,-1),yt={class:"small-text"},Mt={key:2},wt={key:3,class:"row"},Nt=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Requirement"),(0,a._)("p",{class:"text-instructions"}," The following are current OPEN requirements associated with the organisation. ")],-1),qt={class:"col-md-8"},Dt={class:"table"},Ct=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",null,"Requirement Information")])],-1),Et=["href"],Rt=(0,a._)("div",{class:"spacer"},null,-1),Lt={class:"small-text"},jt={key:4},Ut={key:5,class:"row"},$t=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Task"),(0,a._)("p",{class:"text-instructions"}," The following are current OPEN tasks associated with the organisation. ")],-1),It={class:"col-md-8"},St={class:"table"},Ot=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",null,"Task Information"),(0,a._)("td",null,"Status")])],-1),Tt=["href"],Ft=(0,a._)("div",{class:"spacer"},null,-1),xt={class:"small-text"},Pt={key:6,class:"spacer"},At={key:7,class:"alert alert-info"},Wt={name:"AssociatedObjects",components:{Icon:k.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[it.Z],data:()=>({opportunityResults:[],projectResults:[],requirementResults:[],taskResults:[]}),computed:{...(0,lt.Se)({rootUrl:"getRootUrl"})},methods:{getAssociatedObjectResults:function(){U().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/associated_objects/`).then((t=>{this.opportunityResults=t.data.opportunity,this.projectResults=t.data.project,this.requirementResults=t.data.requirement,this.taskResults=t.data.task})).catch((t=>{}))},getFriendlyDate:function(t){return new Date(t).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}},mounted(){setTimeout((()=>{this.getAssociatedObjectResults()}),200)}},Zt=(0,at.Z)(Wt,[["render",function(t,e,s,o,l,i){const n=(0,a.up)("Icon");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("h2",null,[(0,a.Wm)(n,{icon:t.icons.objectStorage},null,8,["icon"]),mt]),l.projectResults.length+l.taskResults.length>0?((0,a.wg)(),(0,a.iD)("hr",pt)):(0,a.kq)("v-if",!0),(0,a.kq)(" Project Results "),l.projectResults.length>0?((0,a.wg)(),(0,a.iD)("div",_t,[bt,(0,a._)("div",ht,[(0,a._)("table",gt,[vt,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.projectResults,(e=>((0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",null,[(0,a._)("a",{href:`${t.rootUrl}project_information/${e.project_id}/`},[(0,a._)("p",null,(0,ut.toDisplayString)(e.project_name),1),kt,(0,a._)("p",yt," Project "+(0,ut.toDisplayString)(e.project_id)+" - End Date: "+(0,ut.toDisplayString)(i.getFriendlyDate(e.project_end_date)),1)],8,ft)]),(0,a._)("td",null,(0,ut.toDisplayString)(e.project_status),1)])))),256))])])])])):(0,a.kq)("v-if",!0),(0,a.kq)(" THE FOLLOWING HR WILL NEED TO BE FIXED! "),l.projectResults.length>0?((0,a.wg)(),(0,a.iD)("hr",Mt)):(0,a.kq)("v-if",!0),(0,a.kq)(" Requirement Results "),l.requirementResults.length>0?((0,a.wg)(),(0,a.iD)("div",wt,[Nt,(0,a._)("div",qt,[(0,a._)("table",Dt,[Ct,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.requirementResults,(e=>((0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",null,[(0,a._)("a",{href:`${t.rootUrl}requirement_information/${e.requirement_id}/`},[(0,a._)("p",null,(0,ut.toDisplayString)(e.requirement_title),1),Rt,(0,a._)("p",Lt," Requirement "+(0,ut.toDisplayString)(e.requirement_id),1)],8,Et)])])))),256))])])])])):(0,a.kq)("v-if",!0),(0,a.kq)(" THE FOLLOWING HR WILL NEED TO BE FIXED! "),l.projectResults.length>0?((0,a.wg)(),(0,a.iD)("hr",jt)):(0,a.kq)("v-if",!0),(0,a.kq)(" Task Results "),l.taskResults.length>0?((0,a.wg)(),(0,a.iD)("div",Ut,[$t,(0,a._)("div",It,[(0,a._)("table",St,[Ot,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.taskResults,(e=>((0,a.wg)(),(0,a.iD)("tr",null,[(0,a._)("td",null,[(0,a._)("a",{href:`${t.rootUrl}task_information/${e.task_id}/`},[(0,a._)("p",null,(0,ut.toDisplayString)(e.task_short_description),1),Ft,(0,a._)("p",xt," Task "+(0,ut.toDisplayString)(e.task_id)+" - End Date: "+(0,ut.toDisplayString)(i.getFriendlyDate(e.task_end_date)),1)],8,Tt)]),(0,a._)("td",null,(0,ut.toDisplayString)(e.task_status),1)])))),256))])])])])):(0,a.kq)("v-if",!0),(0,a.kq)(" Only show when there are no associated tasks "),l.projectResults.length+l.taskResults.length===0?((0,a.wg)(),(0,a.iD)("div",Pt)):(0,a.kq)("v-if",!0),l.projectResults.length+l.taskResults.length===0?((0,a.wg)(),(0,a.iD)("div",At,' There are currently no Objects associated with this Organisation. You can create some new objects by click on the "New Objects" menu item. ')):(0,a.kq)("v-if",!0)])}]]);var Vt=s(4246);const Bt={name:"OrganisationModules",components:{AssociatedObjects:Zt,CustomersListModule:y.Z,DocumentsModule:Vt.Z,Icon:k.JO,MiscModule:ct.Z,NewCustomerModal:rt,NotesModule:dt.Z},props:{customerResults:{type:Array,default:()=>[]},destination:{type:String,default:""},locationId:{type:Number,default:0},staticUrl:{type:String,default:"/"},rootUrl:{type:String,default:"/"},titleList:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},mixins:[it.Z],methods:{addNewContact:function(){new f.u_(document.getElementById("addCustomerModal")).show()}},mounted(){this.$store.commit({type:"updateUrl",staticUrl:this.staticUrl,rootUrl:this.rootUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},Ht=(0,at.Z)(Bt,[["render",function(t,e,s,f,k,y){const M=(0,a.up)("Icon"),w=(0,a.up)("customers-list-module"),N=(0,a.up)("documents-module"),q=(0,a.up)("associated-objects"),D=(0,a.up)("misc-module"),C=(0,a.up)("notes-module"),E=(0,a.up)("new-customer-modal");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",l,[(0,a.kq)(" The MENU Items "),i,n,(0,a.kq)(" The Modules "),(0,a._)("div",r,[(0,a._)("div",d,[(0,a._)("h2",null,[(0,a.Wm)(M,{icon:t.icons.userIcon},null,8,["icon"]),c]),u,(0,a.Wm)(w,{"customer-results":s.customerResults},null,8,["customer-results"]),(0,a.kq)(" ADD CUSTOMER BUTTON "),(0,a.kq)(" ADD IN PERMISSIONS "),m,(0,a._)("div",p,[(0,a._)("div",_,[(0,a._)("button",{class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>y.addNewContact&&y.addNewContact(...t))}," Add Contact ")])])]),(0,a._)("div",b,[(0,a.Wm)(N,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"])]),(0,a._)("div",h,[(0,a.Wm)(q,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"])]),(0,a._)("div",g,[(0,a.Wm)(D,{destination:s.destination,"location-id":s.locationId},null,8,["destination","location-id"])]),(0,a._)("div",v,[(0,a.Wm)(C,{"location-id":s.locationId,destination:s.destination},null,8,["location-id","destination"])])])]),(0,a.kq)(" MODALS "),(0,a.Wm)(E,{"organisation-id":s.locationId,"title-list":s.titleList},null,8,["organisation-id","title-list"])])}]])}}]);