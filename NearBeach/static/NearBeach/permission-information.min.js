"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6237],{7626:(e,t,o)=>{o.r(t),o.d(t,{default:()=>z});var s=o(6252),r=o(9963);const i={class:"card"},l={class:"card-body"},a=(0,s._)("h1",null,"Permission Information",-1),n=(0,s._)("br",null,null,-1),p=["href"],d=(0,s._)("hr",null,null,-1),u={key:0,class:"alert alert-danger"},m={class:"row"},c=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Permission Set Details"),(0,s._)("p",{class:"text-instructions"}," Please supply a unique name for the permission set. ")],-1),y={class:"col-md-8"},h=(0,s._)("label",null,"Permission Set Name",-1),_=(0,s._)("hr",null,null,-1),v={class:"row"},M=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Administration Permissions"),(0,s._)("p",{class:"text-instructions"}," The following are administration permissions. These should be only applied to permission sets where they are only granted to administrators. ")],-1),f={class:"col-md-8"},g=(0,s._)("hr",null,null,-1),b={class:"row"},S=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Customers and Organisations")],-1),k={class:"col-md-8"},C=(0,s._)("hr",null,null,-1),P={class:"row"},U=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Object Permissions")],-1),w={class:"col-md-8"},L=(0,s._)("hr",null,null,-1),R={class:"row"},q=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Extra Permissions"),(0,s._)("p",{class:"text-instructions"},' The following permissions are added permissions on top of any read only. For example, if a read only user requires the ability to upload documentation, then you will need to enable the "Document" permissions here. ')],-1),T={class:"col-md-8"},V=(0,s._)("hr",null,null,-1),I={class:"row"},W=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Misc Permissions"),(0,s._)("p",{class:"text-instructions"})],-1),E={class:"col-md-8"},j={key:1},B={key:2,class:"row submit-row"},O={class:"col-md-12"};var A=o(9669),G=o.n(A),x=o(3577);const H={class:"row"},D={name:"SinglePermissionProperties",components:{NSelect:o(2001).Z},props:{property:{type:String,default:""},propertyLabel:{type:String,default:""},propertyValue:{type:Number,default:0},listOfChoices:{type:Array,default:()=>[]}},data(){return{propertyModel:this.propertyValue,fixListOfChoices:[]}},watch:{propertyModel(){null===this.propertyModel&&(this.propertyModel=0),this.$emit("update_property_value",{property:this.property,value:this.propertyModel})}},methods:{getLabel(e){const t=this.listOfChoices.filter((t=>t[0]===e));return 0===t.length?"":t[0][1]}},mounted(){this.fixListOfChoices=this.listOfChoices.map((e=>({label:e[1],value:e[0]})))}};var N=o(3744);const $=(0,N.Z)(D,[["render",function(e,t,o,r,i,l){const a=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",H,[(0,s._)("label",null,(0,x.toDisplayString)(o.propertyLabel),1),(0,s.Wm)(a,{options:i.fixListOfChoices,value:i.propertyModel,"onUpdate:value":t[0]||(t[0]=e=>i.propertyModel=e),class:"form-group"},null,8,["options","value"])])}]]);var F=o(3058),Z=o(624),K=o(8416);const Y={name:"PermissionInformation",components:{SinglePermissionProperties:$},props:{permissionBoolean:{type:Array,default:()=>[]},permissionLevel:{type:Array,default:()=>[]},permissionSetResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},data(){return{permissionSetNameModel:this.permissionSetResults[0].fields.permission_set_name,administrationAssignUserToGroupModel:this.permissionSetResults[0].fields.administration_assign_user_to_group,administrationCreateGroupModel:this.permissionSetResults[0].fields.administration_create_group,administrationCreatePermissionSetModel:this.permissionSetResults[0].fields.administration_create_permission_set,administrationCreateUserModel:this.permissionSetResults[0].fields.administration_create_user,bugClientModel:this.permissionSetResults[0].fields.bug_client,customerModel:this.permissionSetResults[0].fields.customer,kanbanModel:this.permissionSetResults[0].fields.kanban_board,kanbanCardModel:this.permissionSetResults[0].fields.kanban_card,organisationModel:this.permissionSetResults[0].fields.organisation,projectModel:this.permissionSetResults[0].fields.project,requestForChangeModel:this.permissionSetResults[0].fields.request_for_change,requirementModel:this.permissionSetResults[0].fields.requirement,tagModel:this.permissionSetResults[0].fields.tag,taskModel:this.permissionSetResults[0].fields.task,documentModel:this.permissionSetResults[0].fields.document,kanbanCommentModel:this.permissionSetResults[0].fields.kanban_comment,projectHistoryModel:this.permissionSetResults[0].fields.project_history,taskHistoryModel:this.permissionSetResults[0].fields.task_history}},mixins:[F.Z,Z.Z,K.Z],methods:{saveChanges(){const e=new FormData;e.set("permission_set_id",this.permissionSetResults[0].pk),e.set("permission_set_name",this.permissionSetNameModel),e.set("administration_assign_user_to_group",this.administrationAssignUserToGroupModel),e.set("administration_create_group",this.administrationCreateGroupModel),e.set("administration_create_permission_set",this.administrationCreatePermissionSetModel),e.set("administration_create_user",this.administrationCreateUserModel),e.set("bug_client",this.bugClientModel),e.set("customer",this.customerModel),e.set("kanban_board",this.kanbanModel),e.set("kanban_card",this.kanbanCardModel),e.set("organisation",this.organisationModel),e.set("project",this.projectModel),e.set("requirement",this.requirementModel),e.set("request_for_change",this.requestForChangeModel),e.set("task",this.taskModel),e.set("document",this.documentModel),e.set("kanban_comment",this.kanbanCommentModel),e.set("project_history",this.projectHistoryModel),e.set("task_history",this.taskHistoryModel),e.set("tag",this.tagModel),this.showLoadingModal("permission set"),G().post(`${this.rootUrl}permission_set_information/${this.permissionSetResults[0].pk}/save/`,e).then((e=>{this.closeLoadingModal()})).catch((e=>{this.showErrorModal(e,"Permission Set","")}))},updatePropertyValue(e){this[e.property]=e.value}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},z=(0,N.Z)(Y,[["render",function(e,t,o,A,G,x){const H=(0,s.up)("single-permission-properties"),D=(0,s.up)("n-config-provider");return(0,s.wg)(),(0,s.j4)(D,{theme:e.getTheme(o.theme)},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",l,[a,n,(0,s._)("a",{href:`${this.rootUrl}search/permission_set/`},"Go back to permission list",8,p),d,1===this.permissionSetResults[0].pk?((0,s.wg)(),(0,s.iD)("div",u," Can not edit administration permission set. ")):(0,s.kq)("v-if",!0),(0,s.kq)(" BASIC INFORMATION "),(0,s._)("div",m,[c,(0,s._)("div",y,[h,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>G.permissionSetNameModel=e),class:"form-control"},null,512),[[r.vModelText,G.permissionSetNameModel]])])]),_,(0,s.kq)(" ADMINISTRATION PERMISSIONS "),(0,s._)("div",v,[M,(0,s._)("div",f,[(0,s.Wm)(H,{property:"administrationAssignUserToGroupModel","property-label":"Assign User To Group Model","property-value":G.administrationAssignUserToGroupModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[1]||(t[1]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"administrationCreateGroupModel","property-label":"Create Groups","property-value":G.administrationCreateGroupModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[2]||(t[2]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"administrationCreatePermissionSetModel","property-label":"Create Permission Sets","property-value":G.administrationCreatePermissionSetModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[3]||(t[3]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"administrationCreateUserModel","property-label":"Create Users","property-value":G.administrationCreateUserModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[4]||(t[4]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),g,(0,s.kq)(" Customers and Organisations "),(0,s._)("div",b,[S,(0,s._)("div",k,[(0,s.Wm)(H,{property:"customerModel","property-label":"Customers","property-value":G.customerModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[5]||(t[5]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"organisationModel","property-label":"Organisations","property-value":G.organisationModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[6]||(t[6]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),C,(0,s.kq)(" Object Permissions "),(0,s._)("div",P,[U,(0,s._)("div",w,[(0,s.Wm)(H,{property:"kanbanModel","property-label":"Kanban Boards","property-value":G.kanbanModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[7]||(t[7]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"kanbanCardModel","property-label":"Kanban Cards","property-value":G.kanbanCardModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[8]||(t[8]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"projectModel","property-label":"Projects","property-value":G.projectModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[9]||(t[9]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"taskModel","property-label":"Tasks","property-value":G.taskModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[10]||(t[10]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"requestForChangeModel","property-label":"Request for Change","property-value":G.requestForChangeModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[11]||(t[11]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"requirementModel","property-label":"Requirements","property-value":G.requirementModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[12]||(t[12]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),L,(0,s.kq)(" Extra Permissions "),(0,s._)("div",R,[q,(0,s._)("div",T,[(0,s.Wm)(H,{property:"documentModel","property-label":"Grants upload ability","property-value":G.documentModel,"list-of-choices":o.permissionBoolean,onUpdate_property_value:t[13]||(t[13]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"kanbanCommentModel","property-label":"Grants comments on Kanban Boards","property-value":G.kanbanCommentModel,"list-of-choices":o.permissionBoolean,onUpdate_property_value:t[14]||(t[14]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"projectHistoryModel","property-label":"Grants comments on Projects","property-value":G.projectHistoryModel,"list-of-choices":o.permissionBoolean,onUpdate_property_value:t[15]||(t[15]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"taskHistoryModel","property-label":"Grants comments on Tasks","property-value":G.taskHistoryModel,"list-of-choices":o.permissionBoolean,onUpdate_property_value:t[16]||(t[16]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),V,(0,s.kq)(" MISC "),(0,s._)("div",I,[W,(0,s._)("div",E,[(0,s.Wm)(H,{property:"bugClientModel","property-label":"Configure bug clients","property-value":G.bugClientModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[17]||(t[17]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,s.Wm)(H,{property:"tagModel","property-label":"Configure tags","property-value":G.tagModel,"list-of-choices":o.permissionLevel,onUpdate_property_value:t[18]||(t[18]=e=>x.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),(0,s.kq)(" Save Changes "),(0,s.kq)(" Don't show if we are looking at admin "),1!==this.permissionSetResults[0].pk?((0,s.wg)(),(0,s.iD)("hr",j)):(0,s.kq)("v-if",!0),1!==this.permissionSetResults[0].pk?((0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("div",O,[(0,s._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[19]||(t[19]=(...e)=>x.saveChanges&&x.saveChanges(...e))},"Save Permission Set")])])):(0,s.kq)("v-if",!0)])])])),_:1},8,["theme"])}]])},3058:(e,t,o)=>{o.d(t,{Z:()=>r});var s=o(3138);const r={methods:{showErrorModal(e,t,o){const r=document.getElementById("loadingModal");if(null===r)return;new s.u_(r).hide();const i=document.getElementById("errorModalContent");if(void 0===i)return;if(i.innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${t}-${o}<hr>${e}`,null===document.getElementById("errorModal"))return;const l=new s.u_(l);l.show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new s.u_(document.getElementById("errorModal")).show()}}}},624:(e,t,o)=>{o.d(t,{Z:()=>r});var s=o(8458);const r={data:()=>({darkTheme:s.$}),methods:{getTheme:e=>"dark"===e?s.$:null}}},8416:(e,t,o)=>{o.d(t,{Z:()=>r});var s=o(3138);const r={methods:{closeLoadingModal(){const e=new s.u_(document.getElementById("loadingModal"));document.getElementById("loadingModalContent").innerHTML="UPDATED SUCCESSFULLY",setTimeout((()=>{e.hide()}),1e3)},showLoadingModal(e){new s.u_(document.getElementById("loadingModal")).show(),document.getElementById("loadingModalContent").innerHTML=`Updating your ${e} details`}}}}}]);