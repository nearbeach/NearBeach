"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[9207],{387:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var o=s(641),r=s(3751);const i={class:"card"},l={class:"card-body"},a=["href"],n={key:0,class:"alert alert-danger"},p={class:"row"},d={class:"col-md-8"},u={class:"row"},m={class:"col-md-8"},c={class:"row"},h={class:"col-md-8"},y={class:"row"},v={class:"col-md-8"},f={class:"row"},b={class:"col-md-8"},_={class:"row"},k={class:"col-md-8"},M={key:1},g={key:2,class:"row submit-row"},S={class:"col-md-12"};var L=s(33);const P={class:"row"},C={name:"SinglePermissionProperties",components:{NSelect:s(1080).A},emits:["update_property_value"],props:{property:{type:String,default:""},propertyLabel:{type:String,default:""},propertyValue:{type:Number,default:0},listOfChoices:{type:Array,default:()=>[]}},data(){return{propertyModel:this.propertyValue,fixListOfChoices:[]}},watch:{propertyModel(){null===this.propertyModel&&(this.propertyModel=0),this.$emit("update_property_value",{property:this.property,value:this.propertyModel})}},methods:{getLabel(e){const t=this.listOfChoices.filter((t=>t[0]===e));return 0===t.length?"":t[0][1]}},mounted(){this.fixListOfChoices=this.listOfChoices.map((e=>({label:e[1],value:e[0]})))}};var U=s(6262);const N=(0,U.A)(C,[["render",function(e,t,s,r,i,l){const a=(0,o.g2)("n-select");return(0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("label",null,(0,L.toDisplayString)(s.propertyLabel),1),(0,o.bF)(a,{options:i.fixListOfChoices,value:i.propertyModel,"onUpdate:value":t[0]||(t[0]=e=>i.propertyModel=e)},null,8,["options","value"])])}]]),R={class:"modal fade",id:"confirmPermissionSetDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmPermissionSetDelete","aria-hidden":"true"},w={class:"modal-dialog"},q={class:"modal-content"},F={class:"modal-footer"},I={name:"ConfirmPermissionSetDelete",computed:{...(0,s(2124).L8)({rootUrl:"getRootUrl"})},props:{permissionSetId:{type:Number,default:0}},methods:{closeModal(){document.getElementById("confirmPermissionSetDeleteButton").click()},deletePermissionSet(){0!==this.permissionSetId?this.axios.post(`${this.rootUrl}permission_set_information/${this.permissionSetId}/delete/`).then((()=>{window.location=`${this.rootUrl}search/permission_set/`})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Deleting Permission Set",message:`Sorry could not delete the permission set. Error -> ${e}`,extra_classes:"bg-danger",delay:0})})):this.$store.dispatch("newToast",{header:"Permission Set ID not valid",message:"Sorry, current permission set ID is not valid",extra_classes:"bg-danger",delay:0})}}},T=(0,U.A)(I,[["render",function(e,t,s,r,i,l){return(0,o.uX)(),(0,o.CE)("div",R,[(0,o.Lk)("div",w,[(0,o.Lk)("div",q,[t[2]||(t[2]=(0,o.Lk)("div",{class:"modal-header"},[(0,o.Lk)("h5",{class:"modal-title",id:"confirmPermissionSetDelete"}," Please confirm Permission Set Deletion "),(0,o.Q3)(" TASK INFORMATION "),(0,o.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmPermissionSetDeleteButton"})],-1)),t[3]||(t[3]=(0,o.Lk)("div",{class:"modal-body"}," Please confirm you would like to delete this permission set. This is permanent. ",-1)),(0,o.Lk)("div",F,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.deletePermissionSet&&l.deletePermissionSet(...e))}," Yes ")])])])])}]]);var V=s(9827),x=s(9336);const A={name:"PermissionInformation",components:{ConfirmPermissionSetDelete:T,SinglePermissionProperties:N},props:{permissionBoolean:{type:Array,default:()=>[]},permissionLevel:{type:Array,default:()=>[]},permissionSetResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},data(){return{permissionSetNameModel:this.permissionSetResults[0].fields.permission_set_name,administrationAssignUserToGroupModel:this.permissionSetResults[0].fields.administration_assign_user_to_group,administrationCreateGroupModel:this.permissionSetResults[0].fields.administration_create_group,administrationCreatePermissionSetModel:this.permissionSetResults[0].fields.administration_create_permission_set,administrationCreateUserModel:this.permissionSetResults[0].fields.administration_create_user,bugClientModel:this.permissionSetResults[0].fields.bug_client,customerModel:this.permissionSetResults[0].fields.customer,kanbanModel:this.permissionSetResults[0].fields.kanban_board,kanbanCardModel:this.permissionSetResults[0].fields.kanban_card,organisationModel:this.permissionSetResults[0].fields.organisation,projectModel:this.permissionSetResults[0].fields.project,requestForChangeModel:this.permissionSetResults[0].fields.request_for_change,requirementModel:this.permissionSetResults[0].fields.requirement,tagModel:this.permissionSetResults[0].fields.tag,taskModel:this.permissionSetResults[0].fields.task,documentModel:this.permissionSetResults[0].fields.document,kanbanNoteModel:this.permissionSetResults[0].fields.kanban_note,projectNoteModel:this.permissionSetResults[0].fields.project_note,taskNoteModel:this.permissionSetResults[0].fields.task_note,requirementNoteModel:this.permissionSetResults[0].fields.requirement_note,requirementItemNoteModel:this.permissionSetResults[0].fields.requirement_item_note,organisationNoteModel:this.permissionSetResults[0].fields.organisation_note}},mixins:[V.A],methods:{confirmDelete(){new x.aF(document.getElementById("confirmPermissionSetDeleteModal")).show()},saveChanges(){this.$store.dispatch("newToast",{header:"Updating Permission Set",message:"Please wait, whilst we update the permission set",extra_classes:"bg-warning text-dark",delay:0,unique_type:"update_permission_set"});const e=new FormData;e.set("permission_set_id",this.permissionSetResults[0].pk),e.set("permission_set_name",this.permissionSetNameModel),e.set("administration_assign_user_to_group",this.administrationAssignUserToGroupModel),e.set("administration_create_group",this.administrationCreateGroupModel),e.set("administration_create_permission_set",this.administrationCreatePermissionSetModel),e.set("administration_create_user",this.administrationCreateUserModel),e.set("bug_client",this.bugClientModel),e.set("customer",this.customerModel),e.set("kanban_board",this.kanbanModel),e.set("kanban_card",this.kanbanCardModel),e.set("organisation",this.organisationModel),e.set("project",this.projectModel),e.set("requirement",this.requirementModel),e.set("request_for_change",this.requestForChangeModel),e.set("task",this.taskModel),e.set("document",this.documentModel),e.set("kanban_note",this.kanbanNoteModel),e.set("project_note",this.projectNoteModel),e.set("task_note",this.taskNoteModel),e.set("requirement_note",this.requirementNoteModel),e.set("requirement_item_note",this.requirementItemNoteModel),e.set("organisation_note",this.organisationNoteModel),e.set("tag",this.tagModel),this.axios.post(`${this.rootUrl}permission_set_information/${this.permissionSetResults[0].pk}/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Updated Permission Set",message:"We have updated your permission set successfully",extra_classes:"bg-success",unique_type:"update_permission_set"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error saving changes",message:`Sorry, we could not save your changes. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"update_permission_set"})}))},updatePropertyValue(e){this[e.property]=e.value}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},D=(0,U.A)(A,[["render",function(e,t,s,L,P,C){const U=(0,o.g2)("single-permission-properties"),N=(0,o.g2)("confirm-permission-set-delete"),R=(0,o.g2)("n-config-provider");return(0,o.uX)(),(0,o.Wv)(R,{theme:e.getTheme(s.theme)},{default:(0,o.k6)((()=>[(0,o.Lk)("div",i,[(0,o.Lk)("div",l,[t[31]||(t[31]=(0,o.Lk)("h1",null,"Permission Information",-1)),t[32]||(t[32]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("a",{href:`${this.rootUrl}search/permission_set/`},"Go back to permission list",8,a),t[33]||(t[33]=(0,o.Lk)("hr",null,null,-1)),1===this.permissionSetResults[0].pk?((0,o.uX)(),(0,o.CE)("div",n," Can not edit administration permission set. ")):(0,o.Q3)("v-if",!0),(0,o.Q3)(" BASIC INFORMATION "),(0,o.Lk)("div",p,[t[25]||(t[25]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Permission Set Details"),(0,o.Lk)("p",{class:"text-instructions"}," Please supply a unique name for the permission set. ")],-1)),(0,o.Lk)("div",d,[t[24]||(t[24]=(0,o.Lk)("label",null,"Permission Set Name",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>P.permissionSetNameModel=e),class:"form-control"},null,512),[[r.vModelText,P.permissionSetNameModel]])])]),t[34]||(t[34]=(0,o.Lk)("hr",null,null,-1)),(0,o.Q3)(" ADMINISTRATION PERMISSIONS "),(0,o.Lk)("div",u,[t[26]||(t[26]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Administration Permissions"),(0,o.Lk)("p",{class:"text-instructions"}," The following are administration permissions. These should be only applied to permission sets where they are only granted to administrators. ")],-1)),(0,o.Lk)("div",m,[(0,o.bF)(U,{"property-value":P.administrationAssignUserToGroupModel,"list-of-choices":s.permissionLevel,property:"administrationAssignUserToGroupModel","property-label":"Assign User To Group Model",onUpdate_property_value:t[1]||(t[1]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.administrationCreateGroupModel,"list-of-choices":s.permissionLevel,property:"administrationCreateGroupModel","property-label":"Create Groups",onUpdate_property_value:t[2]||(t[2]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.administrationCreatePermissionSetModel,"list-of-choices":s.permissionLevel,"property-label":"Create Permission Sets",property:"administrationCreatePermissionSetModel",onUpdate_property_value:t[3]||(t[3]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.administrationCreateUserModel,"list-of-choices":s.permissionLevel,property:"administrationCreateUserModel","property-label":"Create Users",onUpdate_property_value:t[4]||(t[4]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),t[35]||(t[35]=(0,o.Lk)("hr",null,null,-1)),(0,o.Q3)(" Customers and Organisations "),(0,o.Lk)("div",c,[t[27]||(t[27]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Customers and Organisations")],-1)),(0,o.Lk)("div",h,[(0,o.bF)(U,{"property-value":P.customerModel,"list-of-choices":s.permissionLevel,property:"customerModel","property-label":"Customers",onUpdate_property_value:t[5]||(t[5]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.organisationModel,"list-of-choices":s.permissionLevel,property:"organisationModel","property-label":"Organisations",onUpdate_property_value:t[6]||(t[6]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),t[36]||(t[36]=(0,o.Lk)("hr",null,null,-1)),(0,o.Q3)(" Object Permissions "),(0,o.Lk)("div",y,[t[28]||(t[28]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Object Permissions")],-1)),(0,o.Lk)("div",v,[(0,o.bF)(U,{"property-value":P.kanbanModel,"list-of-choices":s.permissionLevel,property:"kanbanModel","property-label":"Kanban Boards",onUpdate_property_valu:t[7]||(t[7]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.kanbanCardModel,"list-of-choices":s.permissionLevel,property:"kanbanCardModel","property-label":"Kanban Cards",onUpdate_property_value:t[8]||(t[8]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.projectModel,"list-of-choices":s.permissionLevel,property:"projectModel","property-label":"Projects",onUpdate_property_value:t[9]||(t[9]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.taskModel,"list-of-choices":s.permissionLevel,property:"taskModel","property-label":"Tasks",onUpdate_property_value:t[10]||(t[10]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.requestForChangeModel,"list-of-choices":s.permissionLevel,property:"requestForChangeModel","property-label":"Request for Change",onUpdate_property_value:t[11]||(t[11]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.requirementModel,"list-of-choices":s.permissionLevel,property:"requirementModel","property-label":"Requirements",onUpdate_property_value:t[12]||(t[12]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),t[37]||(t[37]=(0,o.Lk)("hr",null,null,-1)),(0,o.Q3)(" Extra Permissions "),(0,o.Lk)("div",f,[t[29]||(t[29]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Extra Permissions"),(0,o.Lk)("p",{class:"text-instructions"},' The following permissions are added permissions on top of any read only. For example, if a read only user requires the ability to upload documentation, then you will need to enable the "Document" permissions here. ')],-1)),(0,o.Lk)("div",b,[(0,o.bF)(U,{"property-value":P.documentModel,"list-of-choices":s.permissionBoolean,onUpdate_property_value:t[13]||(t[13]=e=>C.updatePropertyValue(e)),property:"documentModel","property-label":"Grants upload ability"},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.kanbanNoteModel,"list-of-choices":s.permissionBoolean,property:"kanbanNoteModel","property-label":"Grants notes on Kanban Boards",onUpdate_property_value:t[14]||(t[14]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.organisationNoteModel,"list-of-choices":s.permissionBoolean,property:"organisationNoteModel","property-label":"Grants notes on Organisations",onUpdate_property_value:t[15]||(t[15]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.projectNoteModel,"list-of-choices":s.permissionBoolean,property:"projectNoteModel","property-label":"Grants notes on Projects",onUpdate_property_value:t[16]||(t[16]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.requirementNoteModel,"list-of-choices":s.permissionBoolean,property:"requirementNoteModel","property-label":"Grants notes on Requirements",onUpdate_property_value:t[17]||(t[17]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.requirementItemNoteModel,"list-of-choices":s.permissionBoolean,property:"requirementItemNoteModel","property-label":"Grants notes on Requirement Items",onUpdate_property_value:t[18]||(t[18]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.taskNoteModel,"list-of-choices":s.permissionBoolean,property:"taskNoteModel","property-label":"Grants notes on Tasks",onUpdate_property_value:t[19]||(t[19]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),t[38]||(t[38]=(0,o.Lk)("hr",null,null,-1)),(0,o.Q3)(" MISC "),(0,o.Lk)("div",_,[t[30]||(t[30]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Misc Permissions"),(0,o.Lk)("p",{class:"text-instructions"})],-1)),(0,o.Lk)("div",k,[(0,o.bF)(U,{"property-value":P.bugClientModel,"list-of-choices":s.permissionLevel,property:"bugClientModel","property-label":"Configure bug clients",onUpdate_property_value:t[20]||(t[20]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"]),(0,o.bF)(U,{"property-value":P.tagModel,"list-of-choices":s.permissionLevel,property:"tagModel","property-label":"Configure tags",onUpdate_property_value:t[21]||(t[21]=e=>C.updatePropertyValue(e))},null,8,["property-value","list-of-choices"])])]),(0,o.Q3)(" Save Changes "),(0,o.Q3)(" Don't show if we are looking at admin "),1!==this.permissionSetResults[0].pk?((0,o.uX)(),(0,o.CE)("hr",M)):(0,o.Q3)("v-if",!0),1!==this.permissionSetResults[0].pk?((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",S,[(0,o.Lk)("button",{class:"btn btn-danger",onClick:t[22]||(t[22]=(...e)=>C.confirmDelete&&C.confirmDelete(...e))}," Delete Permission Set "),(0,o.Lk)("button",{class:"btn btn-primary save-changes",onClick:t[23]||(t[23]=(...e)=>C.saveChanges&&C.saveChanges(...e))}," Save Permission Set ")])])):(0,o.Q3)("v-if",!0)])]),(0,o.bF)(N,{"permission-set-id":s.permissionSetResults[0].pk},null,8,["permission-set-id"])])),_:1},8,["theme"])}]])},9827:(e,t,s)=>{s.d(t,{A:()=>r});var o=s(7413);const r={data:()=>({darkTheme:o.a}),methods:{getTheme:e=>"dark"===e?o.a:null}}}}]);