"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7615],{42:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(641);const i={class:"card"},o={class:"card-body"},l={class:"nav nav-tabs",id:"misc_module_tabs",role:"tablist"},r=(0,a.Lk)("li",{class:"nav-item",role:"presentation"},[(0,a.Lk)("button",{class:"nav-link active",id:"associated-objects-tab","data-bs-toggle":"tab","data-bs-target":"#associated-objects",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," Associated Objects ")],-1),n={key:0,class:"nav-item",role:"presentation"},c=[(0,a.Lk)("button",{class:"nav-link",id:"admin-tab","data-bs-toggle":"tab","data-bs-target":"#admin",type:"button",role:"tab","aria-controls":"home","aria-select":"false"}," Admin ",-1)],d=(0,a.Lk)("hr",null,null,-1),u={key:0,class:"tab-content",id:"misc_module_content"},b={class:"tab-pane fade active show",id:"associated-objects",role:"tabpanel","aria-labelledby":"profile-tab"},m={class:"tab-pane fade bg-danger",id:"admin",role:"tabpanel","aria-labelledby":"contact-tab"};var h=s(5890),p=s(2124),k=s(9581),g=s(4325);const f={name:"CustomerModule",methods:{useNBTheme:k.p},components:{DeleteObject:g.A,AssociatedObjects:h.A},computed:{...(0,p.L8)({theme:"getTheme",userLevel:"getUserLevel"})}},j=(0,s(6262).A)(f,[["render",function(e,t,s,h,p,k){const g=(0,a.g2)("associated-objects"),f=(0,a.g2)("delete-object"),j=(0,a.g2)("n-config-provider");return(0,a.uX)(),(0,a.Wv)(j,{theme:k.useNBTheme(e.theme)},{default:(0,a.k6)((()=>[(0,a.Lk)("div",i,[(0,a.Lk)("div",o,[(0,a.Q3)(" The MENU Items "),(0,a.Lk)("ul",l,[(0,a.Q3)(" Associated Projects & Tasks "),r,(0,a.Q3)(" ADMIN "),4===e.userLevel?((0,a.uX)(),(0,a.CE)("li",n,c)):(0,a.Q3)("v-if",!0)]),d,(0,a.Q3)(" The Modules "),4===e.userLevel?((0,a.uX)(),(0,a.CE)("div",u,[(0,a.Lk)("div",b,[(0,a.bF)(g)]),(0,a.Lk)("div",m,[(0,a.bF)(f)])])):(0,a.Q3)("v-if",!0)])])])),_:1},8,["theme"])}]])},5890:(e,t,s)=>{s.d(t,{A:()=>u});var a=s(641);const i=(0,a.Lk)("h2",null," Associated Objects ",-1),o=(0,a.Lk)("p",{class:"text-instructions"}," The following are current OPEN objects associated with the organisation. ",-1),l={key:0},r={key:4,class:"spacer"},n={key:5,class:"alert alert-info"};var c=s(2124);const d={name:"AssociatedObjects",components:{RenderObjectCard:s(302).A},data:()=>({projectResults:[],projectVariables:{header:"Projects",prefix:"Pro",id:"project_id",title:"project_name",status:"project_status_text"},requirementResults:[],requirementVariables:{header:"Requirements",prefix:"Req",id:"requirement_id",title:"requirement_title",status:"requirement_status__requirement_status"},taskResults:[],taskVariables:{header:"Tasks",prefix:"Task",id:"task_id",title:"task_short_description",status:"task_status_text"}}),computed:{...(0,c.L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{getAssociatedObjectResults(){0!==this.locationId?this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/associated_objects/`).then((e=>{this.projectResults=e.data.project,this.requirementResults=e.data.requirement,this.taskResults=e.data.task})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Associated Objects",message:`Sorry, we could not get associated objects. Error -> ${e}`,extra_classes:"bg-danger",delay:0})})):setTimeout((()=>{this.getAssociatedObjectResults()}),100)},getFriendlyDate:e=>new Date(e).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},mounted(){this.$nextTick((()=>{this.getAssociatedObjectResults()}))}},u=(0,s(6262).A)(d,[["render",function(e,t,s,c,d,u){const b=(0,a.g2)("render-object-card");return(0,a.uX)(),(0,a.CE)("div",null,[i,o,d.projectResults.length+d.taskResults.length+d.requirementResults.length>0?((0,a.uX)(),(0,a.CE)("hr",l)):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Project Results "),d.projectResults.length>0?((0,a.uX)(),(0,a.Wv)(b,{key:1,"search-results":d.projectResults,"import-variables":d.projectVariables,destination:"project"},null,8,["search-results","import-variables"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Requirement Results "),d.requirementResults.length>0?((0,a.uX)(),(0,a.Wv)(b,{key:2,"search-results":d.requirementResults,"import-variables":d.requirementVariables,destination:"requirement"},null,8,["search-results","import-variables"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Task Results "),d.taskResults.length>0?((0,a.uX)(),(0,a.Wv)(b,{key:3,"search-results":d.taskResults,"import-variables":d.taskVariables,destination:"task"},null,8,["search-results","import-variables"])):(0,a.Q3)("v-if",!0),(0,a.Q3)(" Only show when there are no associated tasks "),d.projectResults.length+d.taskResults.length+d.requirementResults.length===0?((0,a.uX)(),(0,a.CE)("div",r)):(0,a.Q3)("v-if",!0),d.projectResults.length+d.taskResults.length+d.requirementResults.length===0?((0,a.uX)(),(0,a.CE)("div",n,' There are currently no Objects associated with this Organisation. You can create some new objects by click on the "New Objects" menu item. ')):(0,a.Q3)("v-if",!0)])}]])},4325:(e,t,s)=>{s.d(t,{A:()=>d});var a=s(641),i=s(33);const o={class:"delete-object"},l=(0,a.Lk)("h2",null,"Delete Object",-1);var r=s(2124),n=s(9336);const c={name:"DeleteObject",components:{ConfirmDeleteObject:s(4463).A},computed:{...(0,r.L8)({destination:"getDestination",rootUrl:"getRootUrl"})},methods:{confirmDeleteObject(){new n.aF(document.getElementById("confirmDeleteObjectModal")).show()}}},d=(0,s(6262).A)(c,[["render",function(e,t,s,r,n,c){const d=(0,a.g2)("confirm-delete-object");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",o,[l,(0,a.Lk)("p",null," WARNING! This will delete the follow "+(0,i.toDisplayString)(e.destination)+" from the system. This can not be undone. ",1),(0,a.Lk)("button",{class:"btn btn-outline-dark",onClick:t[0]||(t[0]=(...e)=>c.confirmDeleteObject&&c.confirmDeleteObject(...e))}," DELETE "+(0,i.toDisplayString)(e.destination),1)]),(0,a.bF)(d)],64)}]])},4463:(e,t,s)=>{s.d(t,{A:()=>y});var a=s(641),i=s(33),o=s(3751);const l={class:"modal fade",id:"confirmDeleteObjectModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmDeleteObject","aria-hidden":"true"},r={class:"modal-dialog modal-lg"},n={class:"modal-content"},c={class:"modal-header"},d={class:"modal-title",id:"confirmDeleteObject"},u=(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmDeleteObjectButton"},null,-1),b={class:"modal-body"},m=(0,a.Lk)("br",null,null,-1),h={class:"mt-2"},p=(0,a.Lk)("strong",null,"Title: ",-1),k={class:"form-group mt-2"},g=(0,a.Lk)("label",null,"Confirm Title: ",-1),f={class:"modal-footer justify-content-between"},j=["disabled"],v={name:"ConfirmDeleteObject",data:()=>({confirmTitle:"",isButtonDisabled:!0}),computed:{...(0,s(2124).L8)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",title:"getTitle"})},watch:{confirmTitle(){this.isButtonDisabled=this.confirmTitle.toLowerCase()!==this.title.toLowerCase()}},methods:{closeModal(){this.confirmTitle="",document.getElementById("confirmDeleteObjectButton").click()},deleteObject(){this.$store.dispatch("newToast",{header:"Deleting Object",message:"Deleting Object, please wait",extra_classes:"bg-warning",delay:0,unique_type:"delete_object"}),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/delete/`).then((()=>{window.location.href=this.rootUrl})).catch((e=>{this.$store.dispatch("newToast",{header:"Error deleting Object",message:`Could not delete the ${this.destination}. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"delete_object"})}))}}},y=(0,s(6262).A)(v,[["render",function(e,t,s,v,y,L){return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",r,[(0,a.Lk)("div",n,[(0,a.Lk)("div",c,[(0,a.Lk)("h5",d," Please confirm "+(0,i.toDisplayString)(e.destination)+" deletion ",1),(0,a.Q3)(" TASK INFORMATION "),u]),(0,a.Lk)("div",b,[(0,a.eW)(" Can you please confirm the title of the "+(0,i.toDisplayString)(e.destination)+" you are deleting. ",1),m,(0,a.Lk)("div",h,[p,(0,a.eW)((0,i.toDisplayString)(e.title),1)]),(0,a.Lk)("div",k,[g,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>y.confirmTitle=e),class:"form-control",onpaste:"return false",ondrop:"return false",autocomplete:"off"},null,512),[[o.vModelText,y.confirmTitle]])])]),(0,a.Lk)("div",f,[(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>L.closeModal&&L.closeModal(...e))}," No - Keep "+(0,i.toDisplayString)(e.destination),1),(0,a.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>L.deleteObject&&L.deleteObject(...e)),disabled:y.isButtonDisabled}," Yes - Delete "+(0,i.toDisplayString)(e.destination),9,j)])])])])}]])},302:(e,t,s)=>{s.d(t,{A:()=>k});var a=s(641),i=s(33);const o={class:"object-card-list"},l={class:"object-card--detail"},r=["href"],n={class:"object-card--detail--link"},c={class:"object-card--detail--description"},d={class:"object-card--status"},u=["href"],b={class:"object-card--status--status"},m={class:"small-text"};var h=s(2124);const p={name:"RenderObjectCard",methods:{useNiceDatetime:s(246).y},props:{destination:{type:String,default:""},importVariables:{type:Object,default:()=>({header:"",prefix:"",id:0,title:"",status:""})},searchResults:{type:Array,default:()=>[]}},computed:{...(0,h.L8)({rootUrl:"getRootUrl"})}},k=(0,s(6262).A)(p,[["render",function(e,t,s,h,p,k){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("h2",null,(0,i.toDisplayString)(s.importVariables.header),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.searchResults,(t=>((0,a.uX)(),(0,a.CE)("div",{class:"object-card",key:t.pk},[(0,a.Lk)("div",l,[(0,a.Lk)("a",{href:`${e.rootUrl}${s.destination}_information/${t[s.importVariables.id]}/`},[(0,a.Lk)("div",n,(0,i.toDisplayString)(s.importVariables.prefix)+(0,i.toDisplayString)(t[s.importVariables.id]),1),(0,a.Lk)("div",c,(0,i.toDisplayString)(t[s.importVariables.title]),1)],8,r)]),(0,a.Lk)("div",d,[(0,a.Lk)("a",{href:`${e.rootUrl}${s.destination}_information/${t[s.importVariables.id]}/`},[(0,a.Lk)("div",b,(0,i.toDisplayString)(t[s.importVariables.status]),1),(0,a.Lk)("p",m,(0,i.toDisplayString)(k.useNiceDatetime(t[s.importVariables.end_date])),1)],8,u)])])))),128))])}]])},246:(e,t,s)=>{s.d(t,{y:()=>o});var a=s(6285),i=s(953);function o(e){const t=(0,i.BA)(e);return""===t||null==t?"":a.c9.fromISO(t).toLocaleString(a.c9.DATETIME_MED)}},9581:(e,t,s)=>{s.d(t,{p:()=>o});var a=s(953),i=s(7413);function o(e){return"dark"===(0,a.BA)(e)?i.a:null}}}]);