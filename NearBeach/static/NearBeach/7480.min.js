"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7480],{706:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(641);const n={class:"icon"},i=["width","height"],d=[(0,a.Lk)("path",{fill:"currentColor",d:"M16 4L6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14z"},null,-1)],s={name:"CarbonArrowUp",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},l=(0,o(6262).A)(s,[["render",function(e,t,o,s,l,r){return(0,a.uX)(),(0,a.CE)("span",n,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.width,height:o.height,viewBox:"0 0 32 32"},d,8,i))])}]])},5457:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(641);const n={class:"icon"},i=["width","height"],d=[(0,a.Lk)("path",{fill:"currentColor",d:"m25.7 9.3l-7-7c-.2-.2-.4-.3-.7-.3H8c-1.1 0-2 .9-2 2v24c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-.3-.1-.5-.3-.7M18 4.4l5.6 5.6H18zM24 28H8V4h8v6c0 1.1.9 2 2 2h6z"},null,-1),(0,a.Lk)("path",{fill:"currentColor",d:"M10 22h12v2H10zm0-6h12v2H10z"},null,-1)],s={name:"CarbonDocument",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},l=(0,o(6262).A)(s,[["render",function(e,t,o,s,l,r){return(0,a.uX)(),(0,a.CE)("span",n,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.width,height:o.height,viewBox:"0 0 32 32"},d,8,i))])}]])},6842:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(641);const n={class:"icon"},i=["width","height"],d=[(0,a.Lk)("path",{fill:"currentColor",d:"M30 18v-2h-6v10h2v-4h3v-2h-3v-2zm-11 8h-4V16h4a3.003 3.003 0 0 1 3 3v4a3.003 3.003 0 0 1-3 3m-2-2h2a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-2zm-6-8H6v10h2v-3h3a2.003 2.003 0 0 0 2-2v-3a2 2 0 0 0-2-2m-3 5v-3h3l.001 3z"},null,-1),(0,a.Lk)("path",{fill:"currentColor",d:"M22 14v-4a.91.91 0 0 0-.3-.7l-7-7A.9.9 0 0 0 14 2H4a2.006 2.006 0 0 0-2 2v24a2 2 0 0 0 2 2h16v-2H4V4h8v6a2.006 2.006 0 0 0 2 2h6v2Zm-8-4V4.4l5.6 5.6Z"},null,-1)],s={name:"CarbonDocumentPdf",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},l=(0,o(6262).A)(s,[["render",function(e,t,o,s,l,r){return(0,a.uX)(),(0,a.CE)("span",n,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.width,height:o.height,viewBox:"0 0 32 32"},d,8,i))])}]])},7187:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(641);const n={class:"icon"},i=["width","height"],d=[(0,a.Lk)("path",{fill:"currentColor",d:"m11.17 6l3.42 3.41l.58.59H28v16H4V6zm0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4"},null,-1)],s={name:"CarbonFolder",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},l=(0,o(6262).A)(s,[["render",function(e,t,o,s,l,r){return(0,a.uX)(),(0,a.CE)("span",n,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.width,height:o.height,viewBox:"0 0 32 32"},d,8,i))])}]])},1599:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(641);const n={class:"icon"},i=["width","height"],d=[(0,a.Lk)("path",{fill:"currentColor",d:"M19 14a3 3 0 1 0-3-3a3 3 0 0 0 3 3m0-4a1 1 0 1 1-1 1a1 1 0 0 1 1-1"},null,-1),(0,a.Lk)("path",{fill:"currentColor",d:"M26 4H6a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h20a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2m0 22H6v-6l5-5l5.59 5.59a2 2 0 0 0 2.82 0L21 19l5 5Zm0-4.83l-3.59-3.59a2 2 0 0 0-2.82 0L18 19.17l-5.59-5.59a2 2 0 0 0-2.82 0L6 17.17V6h20Z"},null,-1)],s={name:"CarbonImage",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},l=(0,o(6262).A)(s,[["render",function(e,t,o,s,l,r){return(0,a.uX)(),(0,a.CE)("span",n,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.width,height:o.height,viewBox:"0 0 32 32"},d,8,i))])}]])},8035:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(641);const n={class:"icon"},i=["width","height"],d=[(0,a.Lk)("path",{fill:"currentColor",d:"M21.17 3.25q.33 0 .59.25q.24.24.24.58v15.84q0 .34-.24.58q-.26.25-.59.25H7.83q-.33 0-.59-.25q-.24-.24-.24-.58V17H2.83q-.33 0-.59-.24Q2 16.5 2 16.17V7.83q0-.33.24-.59Q2.5 7 2.83 7H7V4.08q0-.34.24-.58q.26-.25.59-.25M7 13.06l1.18 2.22h1.79L8 12.06l1.93-3.17H8.22L7.13 10.9l-.04.06l-.03.07q-.26-.53-.56-1.07q-.25-.53-.53-1.07H4.16l1.89 3.19L4 15.28h1.78m8.1 4.22V17H8.25v2.5m5.63-3.75v-3.12H12v3.12m1.88-4.37V8.25H12v3.13M13.88 7V4.5H8.25V7m12.5 12.5V17h-5.62v2.5m5.62-3.75v-3.12h-5.62v3.12m5.62-4.37V8.25h-5.62v3.13M20.75 7V4.5h-5.62V7Z"},null,-1)],s={name:"MdiMicrosoftExcel",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},l=(0,o(6262).A)(s,[["render",function(e,t,o,s,l,r){return(0,a.uX)(),(0,a.CE)("span",n,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.width,height:o.height,viewBox:"0 0 32 32"},d,8,i))])}]])},8799:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(641);const n={class:"icon"},i=["width","height"],d=[(0,a.Lk)("path",{fill:"currentColor",d:"M13.25 3.25q1.21 0 2.33.31q1.12.32 2.09.89q.97.55 1.77 1.36q.79.8 1.36 1.77q.58.97.89 2.09T22 12t-.31 2.33t-.89 2.09q-.57.97-1.36 1.77q-.8.81-1.77 1.36q-.97.58-2.09.89t-2.33.31q-1.07 0-2.1-.25q-1.03-.26-1.95-.74q-.92-.49-1.7-1.18q-.81-.7-1.43-1.58H2.83q-.33 0-.59-.24Q2 16.5 2 16.17V7.83q0-.33.24-.58Q2.5 7 2.83 7h3.24q.62-.88 1.43-1.58q.78-.7 1.7-1.18q.93-.48 1.95-.74q1.03-.25 2.1-.25m.63 1.28v6.84h6.84q-.12-1.37-.69-2.56T18.55 6.7q-.91-.91-2.12-1.48q-1.2-.57-2.55-.69M9.5 10.84q0-.57-.2-.97q-.19-.41-.52-.66q-.33-.26-.78-.37q-.45-.12-1-.12H4.37v6.55h1.54V13h1.03q.48 0 .93-.16q.46-.14.82-.41q.36-.26.58-.67q.23-.4.23-.92m3.75 8.66q.98 0 1.89-.24q.9-.26 1.71-.68q.81-.45 1.48-1.08q.67-.61 1.17-1.37q.5-.77.83-1.66q.31-.89.39-1.85h-8.08V4.53q-1.45.12-2.73.76T7.67 7h3.5q.33 0 .59.25q.24.25.24.58v8.34q0 .33-.24.59q-.26.24-.59.24h-3.5q.53.6 1.17 1.06q.66.44 1.35.78q.72.33 1.49.49q.77.17 1.57.17M6.85 10q.47 0 .76.19q.28.19.28.7q0 .22-.1.36t-.26.25q-.16.07-.35.1q-.18.04-.38.04h-.89V10z"},null,-1)],s={name:"MdiMicrosoftPowerPoint",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},l=(0,o(6262).A)(s,[["render",function(e,t,o,s,l,r){return(0,a.uX)(),(0,a.CE)("span",n,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.width,height:o.height,viewBox:"0 0 32 32"},d,8,i))])}]])},5194:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var a=o(641);const n={class:"icon"},i=["width","height"],d=[(0,a.Lk)("path",{fill:"currentColor",d:"M21.17 3.25q.33 0 .59.25q.24.24.24.58v15.84q0 .34-.24.58q-.26.25-.59.25H7.83q-.33 0-.59-.25q-.24-.24-.24-.58V17H2.83q-.33 0-.59-.24Q2 16.5 2 16.17V7.83q0-.33.24-.59Q2.5 7 2.83 7H7V4.08q0-.34.24-.58q.26-.25.59-.25m-.8 8.09l1.2 3.94H9.6l1.31-6.56H9.53l-.78 3.88l-1.11-3.75H6.5l-1.19 3.77l-.78-3.9H3.09l1.31 6.56h1.37m14.98 4.22V17H8.25v2.5m12.5-3.75v-3.12H12v3.12m8.75-4.37V8.25H12v3.13M20.75 7V4.5H8.25V7Z"},null,-1)],s={name:"MdiMicrosoftWord",props:{height:{type:String,default:"20px"},width:{type:String,default:"20px"}}},l=(0,o(6262).A)(s,[["render",function(e,t,o,s,l,r){return(0,a.uX)(),(0,a.CE)("span",n,[((0,a.uX)(),(0,a.CE)("svg",{xmlns:"http://www.w3.org/2000/svg",width:o.width,height:o.height,viewBox:"0 0 32 32"},d,8,i))])}]])},2806:(e,t,o)=>{o.d(t,{A:()=>A});var a=o(641),n=o(33),i=o(3751);const d=(0,a.Lk)("h2",null," Documents ",-1),s={class:"text-instructions"},l={key:0,class:"module-spacer"},r=[(0,a.Lk)("div",{class:"alert alert-dark"}," Sorry - there are no documents or folders uploaded. ",-1)],c={key:1,class:"document--widget"},u=(0,a.Lk)("p",{class:"text-instructions"},"Go to Parent Directory...",-1),m=["id","onDragover","onDragleave","onDrop","onDragstart"],h=["onClick"],p={class:"text-instructions"},g={key:0,class:"document--remove"},b=["onDragstart"],v=["href"],k={class:"text-instructions"},f={key:0,class:"document--remove"},y={key:2},L={key:3,class:"btn-group save-changes"},D={key:0,class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},w={class:"dropdown-menu"};var C=o(9336),_=o(706),F=o(5457),M=o(6842),x=o(7187),E=o(1599),I=o(8035),$=o(8799),T=o(5194),U=o(2124),N=o(3980);const S={name:"DocumentsModule",components:{CarbonArrowUp:_.default,CarbonDocument:F.default,CarbonDocumentPdf:M.default,CarbonFolder:x.default,CarbonImage:E.default,CarbonTrashCan:N.dA,MdiMicrosoftExcel:I.default,MdiMicrosoftPowerPoint:$.default,MdiMicrosoftWord:T.default},props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0},readOnly:{type:Boolean,default:!1}},computed:{...(0,U.L8)({currentFolder:"getCurrentFolder",currentParentFolder:"getCurrentParentFolder",destination:"getDestination",documentFilteredList:"getDocumentFilteredList",documentObjectCount:"getDocumentObjectCount",folderFilteredList:"getFolderFilteredList",locationId:"getLocationId",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"}),...(0,U.L8)(["getUserExtraPermission"]),hasDocumentPermission(){return this.getUserExtraPermission("document")}},watch:{overrideLocationId(){this.getDocumentList(),this.getFolderList()}},methods:{addFolder(){const e=document.getElementById("cardInformationModalCloseButton");null!==e&&e.click(),new C.aF(document.getElementById("addFolderModal")).show()},addLink(){const e=document.getElementById("cardInformationModalCloseButton");null!==e&&e.click(),new C.aF(document.getElementById("addLinkModal")).show()},confirmFileDelete(e){this.$store.commit({type:"updateDocumentRemoveKey",documentRemoveKey:e});const t=document.getElementById("cardInformationModalCloseButton");null!==t&&t.click(),new C.aF(document.getElementById("confirmFileDeleteModal")).show()},confirmFolderDelete(e){this.$store.commit({type:"updateFolderRemoveId",folderRemoveId:e});const t=document.getElementById("cardInformationModalCloseButton");null!==t&&t.click(),new C.aF(document.getElementById("confirmFolderDeleteModal")).show()},dragDocumentStart(e,t){this.userLevel<=1||(e.dataTransfer.setData("moving_document_id",t),e.dataTransfer.setData("object_type","document"))},dragleaveFolder(e,t){this.userLevel<=1||(e.preventDefault(),document.getElementById(t).style.backgroundColor="")},dragFolderStart(e,t){this.userLevel<=1||(e.dataTransfer.setData("moving_folder_id",t),e.dataTransfer.setData("object_type","folder"))},dragoverFolder(e,t){e.preventDefault(),this.userLevel<=1||(document.getElementById(t).style.backgroundColor="rgba(150, 150, 150, 0.5)")},drop(e,t){if(e.preventDefault(),this.userLevel<=1)return;const o=e.dataTransfer.getData("object_type");"folder"===o?this.handleFolderMove(e,t):"document"===o&&this.handleDocumentMove(e,t);const a=document.getElementById("folder_parent_directory"),n=document.getElementById(`folder_${t}`);null!=a&&(a.style.backgroundColor=""),null!=n&&(n.style.backgroundColor="")},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getDocumentList(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/files/`).then((e=>{this.$store.commit({type:"updateDocumentList",documentList:e.data})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error getting Document List",message:`Can not retrieve document list. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getFolderList(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/folders/`).then((e=>{this.$store.commit({type:"updateFolderList",folderList:e.data})}))},getIcon(e){if(""!==e.document_key__document_url_location&&null!==e.document_key__document_url_location)return N.wX;const t=e.document_key__document.split(".");switch(t[t.length-1]){case"jpg":case"png":case"bmp":return E.default;case"doc":case"docx":return T.default;case"xls":case"xlsx":return I.default;case"ppt":case"pptx":return $.default;case"pdf":return M.default;default:return F.default}},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},goToParentDirectory(){this.$store.commit("updateCurrentFolder",{currentFolder:this.currentParentFolder})},handleDocumentMove(e,t){const o=e.dataTransfer.getData("moving_document_id");if(void 0===o)return;0===parseInt(t)&&(t=null),this.$store.dispatch("updateDocumentFolder",{document_key_id:o,parent_folder_id:t});const a=new FormData;a.set("document_key",o),null!=t&&a.set("parent_folder",t),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/update_document/`,a).catch((e=>{this.$store.dispatch("newToast",{header:"Error Moving Document",message:`Sorry, there was an error moving your document. Please refresh page. Error -> ${e}`,delay:0,extra_classes:"bg-danger"})}))},handleFolderMove(e,t){const o=e.dataTransfer.getData("moving_folder_id");if(void 0===o)return;0===parseInt(t)&&(t=null),this.$store.dispatch("updateFolderParentFolder",{moving_folder_id:o,parent_folder_id:t});const a=new FormData;a.set("moving_folder",o),null!=t&&0!==parseInt(t)&&a.set("parent_folder",t),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/update_folder/`,a).catch((e=>{this.$store.dispatch("newToast",{header:"Error Moving Folder",message:`Sorry, there was an error moving your folder. Please refresh page. Error -> ${e}`,delay:0,extra_classes:"bg-danger"})}))},shortName:e=>e.length<=50?e:`${e.substring(0,47)}...`,updateCurrentFolder(e){this.$store.commit({type:"updateCurrentFolder",currentFolder:e})},uploadDocument(){const e=document.getElementById("cardInformationModalCloseButton");null!==e&&e.click(),new C.aF(document.getElementById("uploadDocumentModal")).show()}},mounted(){this.$nextTick((()=>{this.getDocumentList(),this.getFolderList()}))}},A=(0,o(6262).A)(S,[["render",function(e,t,o,C,_,F){const M=(0,a.g2)("carbon-arrow-up"),x=(0,a.g2)("carbon-folder"),E=(0,a.g2)("carbon-trash-can");return(0,a.uX)(),(0,a.CE)("div",null,[d,(0,a.Lk)("p",s," The following is a folder structure of all documents uploaded to this "+(0,n.toDisplayString)(this.getDestination()),1),(0,a.Q3)(" DOCUMENT FOLDER TREE "),0===parseInt(e.documentObjectCount)?((0,a.uX)(),(0,a.CE)("div",l,r)):((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Q3)(" GO TO PARENT DIRECTORY "),0!==this.currentFolder?((0,a.uX)(),(0,a.CE)("div",{key:0,id:"folder_parent_directory",onClick:t[0]||(t[0]=e=>F.goToParentDirectory()),class:"document--child",onDragenter:t[1]||(t[1]=(0,i.withModifiers)((()=>{}),["prevent"])),onDragover:t[2]||(t[2]=e=>F.dragoverFolder(e,"folder_parent_directory")),onDragleave:t[3]||(t[3]=e=>F.dragleaveFolder(e,"folder_parent_directory")),onDrop:t[4]||(t[4]=t=>F.drop(t,e.currentParentFolder))},[(0,a.bF)(M,{height:"80px",width:"80px"}),u],32)):(0,a.Q3)("v-if",!0),(0,a.Q3)(" RENDER THE FOLDERS "),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.folderFilteredList,(o=>((0,a.uX)(),(0,a.CE)("div",{id:`folder_${o.pk}`,key:o.pk,class:"document--child",onDragenter:t[5]||(t[5]=(0,i.withModifiers)((()=>{}),["prevent"])),onDragover:e=>F.dragoverFolder(e,`folder_${o.pk}`),onDragleave:e=>F.dragleaveFolder(e,`folder_${o.pk}`),onDrop:e=>F.drop(e,o.pk),onDragstart:e=>F.dragFolderStart(e,o.pk),draggable:"true"},[(0,a.Lk)("a",{href:"javascript:void(0)",onClick:e=>F.updateCurrentFolder(o.pk)},[(0,a.bF)(x,{width:"80px",height:"80px"}),(0,a.Lk)("p",p,(0,n.toDisplayString)(F.shortName(o.fields.folder_description)),1)],8,h),(0,a.Q3)(" REMOVE FOLDER "),e.userLevel>=2?((0,a.uX)(),(0,a.CE)("div",g,[(0,a.bF)(E,{onClick:e=>F.confirmFolderDelete(o.pk)},null,8,["onClick"])])):(0,a.Q3)("v-if",!0)],40,m)))),128)),(0,a.Q3)(" RENDER THE FILES "),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.documentFilteredList,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.document_key_id,class:"document--child",onDragstart:e=>F.dragDocumentStart(e,t.document_key_id),draggable:"true"},[(0,a.Lk)("a",{href:`/private/${t.document_key_id}/`,rel:"noopener noreferrer",target:"_blank"},[((0,a.uX)(),(0,a.Wv)((0,a.$y)(F.getIcon(t)),{width:"80px",height:"80px"})),(0,a.Lk)("p",k,(0,n.toDisplayString)(F.shortName(t.document_key__document_description)),1)],8,v),(0,a.Q3)(" REMOVE DOCUMENT "),e.userLevel>=2?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.bF)(E,{onClick:e=>F.confirmFileDelete(t.document_key_id)},null,8,["onClick"])])):(0,a.Q3)("v-if",!0)],40,b)))),128))])),(0,a.Q3)(" ADD DOCUMENTS AND FOLDER BUTTON "),e.userLevel>1||F.hasDocumentPermission?((0,a.uX)(),(0,a.CE)("hr",y)):(0,a.Q3)("v-if",!0),!1===o.readOnly?((0,a.uX)(),(0,a.CE)("div",L,[e.userLevel>1||F.hasDocumentPermission?((0,a.uX)(),(0,a.CE)("button",D," New Document/File ")):(0,a.Q3)("v-if",!0),(0,a.Lk)("ul",w,[(0,a.Lk)("li",null,[(0,a.Lk)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[6]||(t[6]=(...e)=>F.uploadDocument&&F.uploadDocument(...e))}," Upload Document ")]),(0,a.Lk)("li",null,[(0,a.Lk)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[7]||(t[7]=(...e)=>F.addLink&&F.addLink(...e))}," Add Link ")]),(0,a.Lk)("li",null,[(0,a.Lk)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[8]||(t[8]=(...e)=>F.addFolder&&F.addFolder(...e))}," Add Folder ")])])])):(0,a.Q3)("v-if",!0)])}]])},5665:(e,t,o)=>{o.d(t,{A:()=>L});var a=o(641),n=o(33);const i={key:0,class:"module-spacer"},d={class:"alert alert-dark"},s={key:1,class:"note-history"},l={class:"note-history--profile"},r=["src"],c={class:"note-history--username"},u={class:"note-history--date"},m={key:0,class:"note-history--edit-button"},h=["onClick"],p=["onClick"],g={class:"note-history--note"};var b=o(8838),v=o(9336),k=o(2124),f=o(246);const y={name:"ListNotes",components:{editor:b.A},props:{destination:{type:String,default:""}},computed:{...(0,k.L8)({contentCss:"getContentCss",noteList:"getNoteList",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",skin:"getSkin"})},methods:{useNiceDatetime:f.y,deleteNote(e){if(this.$store.dispatch({type:"updateNoteId",noteId:e}),new v.aF(document.getElementById("confirmNoteDeleteModal")).show(),"card"===this.destination){const e=document.getElementById("cardInformationModalCloseButton");void 0!==e&&e.click()}},editNote(e){if(this.$store.dispatch({type:"updateNoteId",noteId:e}),new v.aF(document.getElementById("editNoteModal")).show(),"card"===this.destination){const e=document.getElementById("cardInformationModalCloseButton");void 0!==e&&e.click()}},profilePicture(e){return null!==e&&""!==e?`${this.rootUrl}private/${e}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`}}},L=(0,o(6262).A)(y,[["render",function(e,t,o,b,v,k){const f=(0,a.g2)("editor");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Q3)(" NOTE HISTORY "),0===e.noteList.length?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",d," Sorry - but there are no notes for this "+(0,n.toDisplayString)(o.destination)+". ",1)])):((0,a.uX)(),(0,a.CE)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.noteList,(e=>((0,a.uX)(),(0,a.CE)("div",{class:"note-history--row",key:e.object_note_id},[(0,a.Lk)("div",l,[(0,a.Lk)("img",{src:k.profilePicture(e.profile_picture),alt:"default profile",class:"note-history--profile-picture"},null,8,r),(0,a.Lk)("div",c,(0,n.toDisplayString)(e.first_name)+" "+(0,n.toDisplayString)(e.last_name),1),(0,a.Lk)("div",u,(0,n.toDisplayString)(k.useNiceDatetime(e.date_modified)),1),"true"===e.can_edit?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t=>k.editNote(e.object_note_id)}," Edit Note ",8,h),(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:t=>k.deleteNote(e.object_note_id)}," Delete Note ",8,p)])):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("div",g,[(0,a.bF)(f,{"license-key":"gpl",init:{license_key:"gpl",height:250,menubar:!1,plugins:["lists","image","codesample","table"],toolbar:[],skin:`${this.skin}`,content_css:`${this.contentCss}`,relative_urls:!1},modelValue:e.object_note,"onUpdate:modelValue":t=>e.object_note=t,disabled:!0},null,8,["init","modelValue","onUpdate:modelValue"])])])))),128))]))])}]])},9142:(e,t,o)=>{o.d(t,{A:()=>p});var a=o(641),n=o(33);const i=(0,a.Lk)("h2",null,"Assigned Tags",-1),d={class:"text-instructions"},s={class:"tag-list"},l=["onClick"],r={class:"row submit-row"},c={class:"col-md-12"};var u=o(9336),m=o(2124);const h={name:"ListTagsModule",components:{CarbonCloseOutline:o(3980).wo},props:{closeModalBefore:{type:String,default:""},overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},watch:{overrideLocationId(){this.getAssignedTags()}},computed:{...(0,m.L8)({assignedTags:"getAssignedTags",destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{getAssignedTags(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}object_data/${this.getDestination()}/${this.getLocationId()}/tag_list/`).then((e=>{this.$store.commit({type:"updateAssignedTags",assignedTags:e.data})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Getting Assigned Tags",message:`Error getting assigned tags. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},openNewTagModal(){""!==this.closeModalBefore&&document.getElementById(this.closeModalBefore).click(),new u.aF(document.getElementById("addTagModal")).show()},removeTag(e){if(this.userLevel<=1)return;const t=new FormData;t.set("tag",e),this.axios.post(`${this.rootUrl}object_data/${this.getDestination()}/${this.getLocationId()}/delete_tag/`,t).then((()=>{this.$store.dispatch("removeAssignedTag",{tag_id:e}),"kanban_card"===this.getDestination()&&this.$store.commit({type:"updateKanbanCard",card_id:this.getLocationId(),tag_list:this.assignedTags})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Removing Tag",message:`Sorry, we could not remove the tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){this.$nextTick((()=>{this.getAssignedTags()}))}},p=(0,o(6262).A)(h,[["render",function(e,t,o,u,m,h){const p=(0,a.g2)("carbon-close-outline");return(0,a.uX)(),(0,a.CE)("div",null,[i,(0,a.Lk)("p",d," Here are all tags associated with this "+(0,n.toDisplayString)(h.getDestination())+'. You can add more tags by clicking on the "Add Tag" button. ',1),(0,a.Lk)("div",s,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.assignedTags,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.tag_id,class:"single-tag",style:(0,n.normalizeStyle)(`background-color: ${t.tag_colour};color: ${t.tag_text_colour};`)},[(0,a.eW)((0,n.toDisplayString)(t.tag_name)+" ",1),(0,a.Lk)("span",{onClick:e=>h.removeTag(t.tag_id)},[e.userLevel>1?((0,a.uX)(),(0,a.Wv)(p,{key:0})):(0,a.Q3)("v-if",!0)],8,l)],4)))),128))]),(0,a.Q3)(" ADD TAG BUTTON "),(0,a.Lk)("div",r,[(0,a.Lk)("div",c,[e.userLevel>1?((0,a.uX)(),(0,a.CE)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>h.openNewTagModal&&h.openNewTagModal(...e))},"Add Tag to "+(0,n.toDisplayString)(h.getDestination()),1)):(0,a.Q3)("v-if",!0)])])])}]])},9981:(e,t,o)=>{o.d(t,{A:()=>L});var a=o(641),n=o(3751);const i={class:"modal fade",id:"addFolderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},d={class:"modal-dialog modal-lg"},s={class:"modal-content"},l=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h2",null," Add Folder Wizard "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addFolderCloseButton"},[(0,a.Lk)("span",{"aria-hidden":"true"})])],-1),r={class:"modal-body"},c={class:"row"},u=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Creating a folder"),(0,a.Lk)("p",{class:"text-instructions"},' Give the folder an appropriate name. When done, click on the "Save" button. It will be added to the current folder. ')],-1),m={class:"col-md-8"},h={class:"form-group"},p=(0,a.Lk)("label",{for:"folder_description"},"Folder Name",-1),g={class:"modal-footer"},b=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),v=["disabled"];var k=o(2124),f=o(8721);const y={name:"AddFolderWizard",components:{},props:{destination:{type:String,default:"/"},locationId:{type:Number,default:0}},data:()=>({disableAddFolderButton:!0,folderDescriptionModel:""}),computed:{...(0,k.L8)({existingFolders:"getFolderFilteredList",currentFolder:"getCurrentFolder",rootUrl:"getRootUrl"})},methods:{useReopenCardInformation:f.f,addFolder(){const e=new FormData;e.set("folder_description",this.folderDescriptionModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_folder/`,e).then((e=>{this.$store.dispatch("appendFolderList",{folderList:e.data[0]}),this.folderDescriptionModel="",document.getElementById("addFolderCloseButton").click(),(0,f.f)()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to add folder",message:`Failed to add folder. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},updated(){const e=this.existingFolders.filter((e=>e.fields.folder_description===this.folderDescriptionModel));this.disableAddFolderButton=e.length>0||""===this.folderDescriptionModel||null===this.folderDescriptionModel}},L=(0,o(6262).A)(y,[["render",function(e,t,o,k,f,y){return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",d,[(0,a.Lk)("div",s,[l,(0,a.Lk)("div",r,[(0,a.Lk)("div",c,[u,(0,a.Lk)("div",m,[(0,a.Lk)("div",h,[p,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>f.folderDescriptionModel=e),class:"form-control",id:"folder_description",maxlength:"50"},null,512),[[n.vModelText,f.folderDescriptionModel]])])])])]),(0,a.Lk)("div",g,[b,(0,a.Lk)("button",{type:"button",class:"btn btn-primary",disabled:f.disableAddFolderButton,onClick:t[1]||(t[1]=(...e)=>y.addFolder&&y.addFolder(...e))}," Add Folder ",8,v)])])])])}]])},6191:(e,t,o)=>{o.d(t,{A:()=>M});var a=o(641),n=o(3751);const i={class:"modal fade",id:"addLinkModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},d={class:"modal-dialog modal-lg"},s={class:"modal-content"},l=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h2",null," Add Link Wizard "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addLinkCloseButton"},[(0,a.Lk)("span",{"aria-hidden":"true"})])],-1),r={class:"modal-body"},c={class:"row"},u=(0,a.Lk)("div",{class:"col-md-4"},[(0,a.Lk)("strong",null,"Add Link"),(0,a.Lk)("p",{class:"text-instruction"}," Add hyperlinks to other documents and sources located in on the internet/cloud. ")],-1),m={class:"col-md-8"},h={class:"form-group"},p={for:"document_description"},g={key:0,class:"error"},b={class:"form-group"},v={for:"document_url_location"},k={class:"modal-footer"},f=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),y=["disabled"];var L=o(2124),D=o(9639),w=o(3855),C=o(404),_=o(8721);const F={name:"AddLinkWizard",setup:()=>({v$:(0,D.Ay)()}),components:{ValidationRendering:C.A},props:{destination:{type:String,default:"/"},locationId:{type:Number,default:0}},data:()=>({linkModel:"",disableAddButton:!0,documentDescriptionModel:"",documentUrlLocationModel:"",duplicateDescription:!1}),validations:{documentDescriptionModel:{required:w.mw},documentUrlLocationModel:{required:w.mw,url:w.OZ}},computed:{...(0,L.L8)({currentFolder:"getCurrentFolder",excludeDocuments:"getDocumentFilteredList",rootUrl:"getRootUrl"})},methods:{useReopenCardInformation:_.f,addLink(){const e=new FormData;e.set("document_description",this.documentDescriptionModel),e.set("document_url_location",this.documentUrlLocationModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_link/`,e).then((e=>{this.$store.dispatch("appendDocumentList",{documentList:e.data[0]}),this.documentDescriptionModel="",this.documentUrlLocationModel="",document.getElementById("addLinkCloseButton").click(),(0,_.f)()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Adding Link",message:`Sorry, could not add the link for you. Error - ${e}`,extra_classes:"bg-danger",delay:0})}))}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.duplicateDescription=e.length>0,this.v$.$touch(),this.disableAddButton=this.v$.$invalid||e.length>0}},M=(0,o(6262).A)(F,[["render",function(e,t,o,L,D,w){const C=(0,a.g2)("validation-rendering");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",d,[(0,a.Lk)("div",s,[l,(0,a.Lk)("div",r,[(0,a.Lk)("div",c,[u,(0,a.Lk)("div",m,[(0,a.Lk)("div",h,[(0,a.Lk)("label",p,[(0,a.eW)(" Document Description "),(0,a.bF)(C,{"error-list":L.v$.documentDescriptionModel.$errors},null,8,["error-list"]),D.duplicateDescription?((0,a.uX)(),(0,a.CE)("span",g," Sorry - but this is a duplicated description.")):(0,a.Q3)("v-if",!0)]),(0,a.bo)((0,a.Lk)("input",{id:"document_description","onUpdate:modelValue":t[0]||(t[0]=e=>D.documentDescriptionModel=e),class:"form-control",maxlength:"50",placeholder:"NearBeach Homepage"},null,512),[[n.vModelText,D.documentDescriptionModel]])]),(0,a.Lk)("div",b,[(0,a.Lk)("label",v,[(0,a.eW)(" Document URL "),(0,a.bF)(C,{"error-list":L.v$.documentUrlLocationModel.$errors},null,8,["error-list"])]),(0,a.bo)((0,a.Lk)("input",{id:"document_url_location","onUpdate:modelValue":t[1]||(t[1]=e=>D.documentUrlLocationModel=e),class:"form-control",placeholder:"https://nearbeach.org"},null,512),[[n.vModelText,D.documentUrlLocationModel]])])])])]),(0,a.Lk)("div",k,[f,(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>w.addLink&&w.addLink(...e)),disabled:D.disableAddButton}," Add Link ",8,y)])])])])}]])},1367:(e,t,o)=>{o.d(t,{A:()=>D});var a=o(641),n=o(33);const i={class:"modal fade",id:"addTagModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},d={class:"modal-dialog"},s={class:"modal-content"},l=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h2",null," Add Tags Wizard "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addTagsCloseButton"},[(0,a.Lk)("span",{"aria-hidden":"true"})])],-1),r={class:"modal-body"},c={class:"row"},u={class:"col-md-4"},m=(0,a.Lk)("strong",null,"Add Tag",-1),h={class:"text-instructions"},p={class:"col-md-8"},g=(0,a.Lk)("label",null,"All Tag List",-1),b={class:"modal-footer"},v=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var k=o(1080),f=o(9336),y=o(2124);const L={name:"AddTagWizard",components:{NSelect:k.A},props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0},reopenModal:{type:String,default:""}},data:()=>({tagModel:[]}),computed:{...(0,y.L8)({allTagList:"getAllTagList",availableTagList:"getAvailableTagList",assignedTags:"getAssignedTags",destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{addTag(){if(0===this.getLocationId())return;const e=new FormData;this.tagModel.forEach((t=>{e.append("tag_id",t)})),this.axios.post(`${this.rootUrl}object_data/${this.getDestination()}/${this.getLocationId()}/add_tags/`,e).then((e=>{this.$store.commit({type:"updateAssignedTags",assignedTags:e.data}),document.getElementById("addTagsCloseButton").click(),this.tagModel=[],""!==this.reopenModal&&new f.aF(document.getElementById(this.reopenModal)).show(),"kanban_card"===this.getDestination()&&this.$store.commit({type:"updateKanbanCard",card_id:this.getLocationId(),tag_list:e.data})})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to add tag",message:`Sorry, we could not add tag. Errors -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},getTagList(){this.axios.post(`${this.rootUrl}object_data/tag_list_all/`).then((e=>{this.$store.commit({type:"updateAllTagList",allTagList:e.data})})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to get tag list",message:`Sorry, we could not get the tag list. Errors -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},mounted(){["requirement_item"].indexOf(this.getDestination())>=0||this.$nextTick((()=>{this.getTagList()}))}},D=(0,o(6262).A)(L,[["render",function(e,t,o,k,f,y){const L=(0,a.g2)("n-select");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",d,[(0,a.Lk)("div",s,[l,(0,a.Lk)("div",r,[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[m,(0,a.Lk)("p",h," Use the dropdown to select one or many lables to add to the "+(0,n.toDisplayString)(y.getDestination())+". ",1)]),(0,a.Lk)("div",p,[g,(0,a.bF)(L,{label:"tag",multiple:"",options:e.availableTagList,value:f.tagModel,"onUpdate:value":t[0]||(t[0]=e=>f.tagModel=e)},null,8,["options","value"])])])]),(0,a.Lk)("div",b,[v,(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>y.addTag&&y.addTag(...e))}," Add Tag ")])])])])}]])},310:(e,t,o)=>{o.d(t,{A:()=>h});var a=o(641);const n={class:"modal fade",id:"confirmFileDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmFileDelete","aria-hidden":"true"},i={class:"modal-dialog"},d={class:"modal-content"},s=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"confirmFileDelete"}," Please confirm File Deletion "),(0,a.Q3)(" TASK INFORMATION "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmFileDeleteButton"})],-1),l=(0,a.Lk)("div",{class:"modal-body"}," Are you sure you want to delete the file? ",-1),r={class:"modal-footer"};var c=o(2124),u=o(8721);const m={name:"ConfirmFileDelete",computed:{...(0,c.L8)({destination:"getDestination",documentRemoveKey:"getDocumentRemoveKey",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{useReopenCardInformation:u.f,deleteFile(){if(""===this.documentRemoveKey)return;const e=this.documentRemoveKey,t=new FormData;t.set("document_key",this.documentRemoveKey),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove/`,t).then((()=>{this.$store.dispatch("removeDocument",{document_key:e}),this.closeModal()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing file",message:`We could not remove your file. Error - ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){this.$store.commit({type:"updateDocumentRemoveKey",documentRemoveKey:""}),document.getElementById("confirmFileDeleteButton").click(),(0,u.f)()}}},h=(0,o(6262).A)(m,[["render",function(e,t,o,c,u,m){return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[s,l,(0,a.Lk)("div",r,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>m.closeModal&&m.closeModal(...e))}," No "),(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>m.deleteFile&&m.deleteFile(...e))}," Yes ")])])])])}]])},6434:(e,t,o)=>{o.d(t,{A:()=>h});var a=o(641);const n={class:"modal fade",id:"confirmNoteDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmLinkDelete","aria-hidden":"true"},i={class:"modal-dialog"},d={class:"modal-content"},s=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h5",{class:"modal-title",id:"confirmNoteDelete"}," Please confirm Note Deletion "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmNoteDeleteButton"})],-1),l=(0,a.Lk)("div",{class:"modal-body"}," Are you sure you want to delete the note? ",-1),r={class:"modal-footer"};var c=o(2124),u=o(8721);const m={name:"ConfirmNoteDelete",props:{},computed:{...(0,c.L8)({destination:"getDestination",noteId:"getSingleNoteId",rootUrl:"getRootUrl"})},methods:{useReopenCardInformation:u.f,deleteNote(){this.$store.dispatch("newToast",{header:"Deleting Note",message:"Currently deleting note",extra_classes:"bg-warning text-dark",delay:0,unique_type:"delete_note"});let e=`${this.rootUrl}note/delete/${this.noteId}/`;"organisation"===this.destination&&(e=`${this.rootUrl}note/organisation/delete/${this.noteId}/`),this.axios.post(e).then((()=>{this.$store.dispatch("newToast",{header:"Note is deleted",message:"Successfully Deleted Note",extra_classes:"bg-success",unique_type:"delete_note"}),this.$store.commit({type:"removeNote",noteId:this.noteId}),this.closeModal(),(0,u.f)()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to Delete Note",message:`Sorry, we failed to delete the note. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"delete_note"})}))},closeModal(){document.getElementById("confirmNoteDeleteButton").click(),(0,u.f)()}}},h=(0,o(6262).A)(m,[["render",function(e,t,o,c,u,m){return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[s,l,(0,a.Lk)("div",r,[(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>m.closeModal&&m.closeModal(...e))}," No "),(0,a.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>m.deleteNote&&m.deleteNote(...e))}," Yes ")])])])])}]])},2899:(e,t,o)=>{o.d(t,{A:()=>b});var a=o(641);const n={class:"modal fade",id:"editNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},i={class:"modal-dialog modal-lg modal-fullscreen-lg-down",role:"document"},d={class:"modal-content"},s=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h2",null," Edit Note "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"editNoteCloseButton"},[(0,a.Lk)("span",{"aria-hidden":"true"})])],-1),l={class:"modal-body"},r=(0,a.Lk)("p",{class:"text-instructions"},' Use the text editor to edit your note. Click on the "Update" button to submit the changes. ',-1),c={class:"modal-footer"},u=["disabled"];var m=o(8838),h=o(2124),p=o(8721);const g={name:"EditHistoryNoteWizard",components:{editor:m.A},data:()=>({noteModel:""}),computed:{...(0,h.L8)({description:"getSingleNoteDescription",destination:"getDestination",contentCss:"getContentCss",noteDescription:"getSingleNoteDescription",noteId:"getSingleNoteId",rootUrl:"getRootUrl",skin:"getSkin"})},watch:{noteDescription(){this.noteModel=this.noteDescription}},methods:{useReopenCardInformation:p.f,closeModal(){document.getElementById("editNoteCloseButton").click(),(0,p.f)()},updateNote(){const e=new FormData;e.set("object_note_id",`${this.noteId}`),e.set("object_note",this.noteModel),this.$store.dispatch("newToast",{header:"Updating Note",message:"Please wait - updating your note",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_note"});let t=`${this.rootUrl}note/update/${this.noteId}/`;"organisation"===this.destination&&(t=`${this.rootUrl}note/organisation/update/${this.noteId}/`),this.axios.post(t,e).then((()=>{this.$store.dispatch("newToast",{header:"Updated Note",message:"The note updated successfully.",extra_classes:"bg-success",unique_type:"save_note"}),this.$store.dispatch({type:"editSingleNote",noteId:this.noteId,noteDescription:this.noteModel}),document.getElementById("editNoteCloseButton").click(),(0,p.f)()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed Updating Note",message:`Failed to update note - Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"save_note"})}))}}},b=(0,o(6262).A)(g,[["render",function(e,t,o,m,h,p){const g=(0,a.g2)("editor");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Q3)(" EDIT HISTORY NOTE "),(0,a.Lk)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[s,(0,a.Lk)("div",l,[r,(0,a.bF)(g,{"license-key":"gpl",init:{license_key:"gpl",height:300,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`,relative_urls:!1},modelValue:h.noteModel,"onUpdate:modelValue":t[0]||(t[0]=e=>h.noteModel=e)},null,8,["init","modelValue"])]),(0,a.Lk)("div",c,[(0,a.Lk)("button",{type:"button",class:"btn btn-primary",disabled:""==h.noteModel,onClick:t[1]||(t[1]=(...e)=>p.updateNote&&p.updateNote(...e))}," Update Note ",8,u),(0,a.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=(...e)=>p.closeModal&&p.closeModal(...e))}," Close ")])])])])],2112)}]])},2787:(e,t,o)=>{o.d(t,{A:()=>b});var a=o(641);const n={class:"modal fade",id:"newNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},i={class:"modal-dialog modal-lg modal-fullscreen-lg-down",role:"document"},d={class:"modal-content"},s=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h2",null," New Note "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newNoteCloseButton"},[(0,a.Lk)("span",{"aria-hidden":"true"})])],-1),l={class:"modal-body"},r=(0,a.Lk)("p",{class:"text-instructions"}," Use the text editor to type out your note. Click on the submit button to submit the note. ",-1),c={class:"modal-footer"},u=["disabled"],m=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var h=o(8838),p=o(2124);const g={name:"NewHistoryNoteWizard",components:{editor:h.A},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},data:()=>({newNoteModel:""}),computed:{...(0,p.L8)({contentCss:"getContentCss",rootUrl:"getRootUrl",skin:"getSkin"})},methods:{submitNote(){this.$store.dispatch("newToast",{header:"Submitting new note",message:"Please wait. Submitting new note",extra_classes:"bg-warning text-dark",delay:0,unique_type:"submit_note"});const e=new FormData;e.set("destination",this.destination),e.set("location_id",`${this.locationId}`),e.set("note",this.newNoteModel);let t="add_notes";"organisation"===this.destination&&(t="organisation_add_notes"),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/${t}/`,e).then((e=>{this.$store.dispatch("newToast",{header:"New Note Submitted",message:"The new note submitted successfully.",extra_classes:"bg-success",unique_type:"submit_note"}),this.$store.commit({type:"addNote",newNote:e.data[0]}),this.newNoteModel="",document.getElementById("newNoteCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Submitting Note",message:`Sorry, the note did not submit. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"submit_note"})}))}}},b=(0,o(6262).A)(g,[["render",function(e,t,o,h,p,g){const b=(0,a.g2)("editor");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Q3)(" NEW HISTORY NOTE "),(0,a.Lk)("div",n,[(0,a.Lk)("div",i,[(0,a.Lk)("div",d,[s,(0,a.Lk)("div",l,[r,(0,a.bF)(b,{"license-key":"gpl",init:{license_key:"gpl",height:300,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`,relative_urls:!1},modelValue:p.newNoteModel,"onUpdate:modelValue":t[0]||(t[0]=e=>p.newNoteModel=e)},null,8,["init","modelValue"])]),(0,a.Lk)("div",c,[(0,a.Lk)("button",{type:"button",class:"btn btn-primary",disabled:""==p.newNoteModel,onClick:t[1]||(t[1]=(...e)=>g.submitNote&&g.submitNote(...e))}," Submit Note ",8,u),m])])])])],2112)}]])},1614:(e,t,o)=>{o.d(t,{A:()=>X});var a=o(641),n=o(33),i=o(3751);const d={class:"modal fade",id:"uploadDocumentModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},s={class:"modal-dialog modal-lg"},l={class:"modal-content"},r=(0,a.Lk)("div",{class:"modal-header"},[(0,a.Lk)("h2",null," Upload Document Wizard "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"uploadDocumentCloseButton"},[(0,a.Lk)("span",{"aria-hidden":"true"})])],-1),c={class:"modal-body"},u={class:"row"},m={class:"col-md-4"},h=(0,a.Lk)("strong",null,"Uploading File",-1),p={class:"text-instructions"},g={key:0},b={key:1},v={key:2},k={class:"col-md-8"},f={key:0,class:"form-file"},y={class:"mb-3"},L={for:"document",class:"form-label"},D=(0,a.Lk)("br",null,null,-1),w={key:0,class:"alert alert-warning"},C=["accept"],_={key:1,class:"form-group"},F={class:"form-group"},M=(0,a.Lk)("label",{for:"documentDescription"},"Document Description",-1),x={class:"form-row mt-4"},E={key:2},I={key:0,class:"alert alert-warning"},$=(0,a.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,a.Lk)("span",{class:"sr-only"})],-1),T=(0,a.Lk)("div",{class:"alert alert-success"}," The document has been uploaded. The server is currently writing the file to disk. Please be patient - this modal will close automatically. Thank you ",-1),U={class:"modal-footer"},N=(0,a.Lk)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),S=["disabled"];var A=o(2124),B=o(8721);const q={name:"UploadDocumentWizard",props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},data:()=>({disableUploadButton:!0,documentModel:[],documentDescriptionModel:"",uploadPercentage:"",maxUploadSize:0,maxUploadString:"No Upload Limit",maxUploadWarning:!1}),computed:{...(0,A.L8)({acceptedDocuments:"getAcceptedDocuments",currentFolder:"getCurrentFolder",destination:"getDestination",excludeDocuments:"getDocumentFilteredList",locationId:"getLocationId",staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},methods:{useReopenCardInformation:B.f,getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},handleFileUploads(e){e[0].size*(0!==this.maxUploadSize)>this.maxUploadSize?this.maxUploadWarning=!0:(this.maxUploadWarning=!1,this.documentModel=e[0],this.documentDescriptionModel=e[0].name)},resetForm(){this.documentModel="",this.documentDescriptionModel="",this.uploadPercentage=""},uploadFile(){const e=new FormData;e.set("document",this.documentModel,this.documentDescriptionModel),e.set("document_description",this.documentDescriptionModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder);const t={onUploadProgress:e=>{this.uploadPercentage=parseFloat(e.loaded)/parseFloat(e.total)}};this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/upload/`,e,t).then((e=>{this.$store.dispatch("appendDocumentList",{documentList:e.data[0]}),document.getElementById("uploadDocumentCloseButton").click(),this.resetForm(),(0,B.f)()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to upload documentation",message:`Can not upload the documentation. ${e}`,extra_classes:"bg-danger",delay:0})}))}},watch:{maxUploadSize(){if(0===this.maxUploadSize)return"No Upload Limit";const e=Math.floor(Math.log(this.maxUploadSize)/Math.log(1024));return this.maxUploadString=`Max Upload Size: ${parseFloat((this.maxUploadSize/Math.pow(1024,e)).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}`,""}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.disableUploadButton=""===this.documentModel||0===this.documentDescriptionModel.length||e.length>0},mounted(){this.$nextTick((()=>{this.axios.post(`${this.rootUrl}documentation/get/max_upload/`).then((e=>{this.maxUploadSize=e.data.max_upload_size})).catch((()=>{this.$store.dispatch("newToast",{header:"Failed to get the max upload size",message:`Had an issue getting data from backend. ${this.maxUploadString}`,extra_classes:"bg-danger",delay:0})}))}))}},X=(0,o(6262).A)(q,[["render",function(e,t,o,A,B,q){return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",s,[(0,a.Lk)("div",l,[r,(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.Lk)("div",m,[h,(0,a.Lk)("p",p," You will be able to upload a file against this "+(0,n.toDisplayString)(q.getDestination)+". It will appear in the current folder. ",1),0===B.documentModel.length?((0,a.uX)(),(0,a.CE)("p",g,' 1. Please click on "Upload File" button to upload a file ')):""===B.uploadPercentage?((0,a.uX)(),(0,a.CE)("p",b,' 2. Please modify the document descript to be more human readable. Or click the "Reset" button to remove the uploaded file. ')):((0,a.uX)(),(0,a.CE)("p",v," 3. Document is currently uploading. Please be patient. "))]),(0,a.Lk)("div",k,[0===B.documentModel.length?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("div",y,[(0,a.Lk)("label",L,[(0,a.eW)(" Please upload a file"),D,(0,a.eW)(" "+(0,n.toDisplayString)(B.maxUploadString)+" ",1),B.maxUploadWarning?((0,a.uX)(),(0,a.CE)("div",w," Sorry - file too large ")):(0,a.Q3)("v-if",!0)]),(0,a.Lk)("input",{type:"file",class:"form-control",id:"document",accept:e.acceptedDocuments,onChange:t[0]||(t[0]=e=>q.handleFileUploads(e.target.files))},null,40,C)])])):""==B.uploadPercentage?((0,a.uX)(),(0,a.CE)("div",_,[(0,a.Q3)(" DOCUMENT DESCRIPTION "),(0,a.Lk)("div",F,[M,(0,a.bo)((0,a.Lk)("input",{id:"documentDescription","onUpdate:modelValue":t[1]||(t[1]=e=>B.documentDescriptionModel=e),type:"text",class:"form-control"},null,512),[[i.vModelText,B.documentDescriptionModel]])]),(0,a.Q3)(" RESET FORM BUTTON "),(0,a.Lk)("div",x,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>q.resetForm&&q.resetForm(...e)),class:"btn btn-warning"}," Reset Form ")])])):((0,a.uX)(),(0,a.CE)("div",E,[(0,a.Q3)(" THE UPLOAD SPINNER "),parseFloat(B.uploadPercentage).toFixed(0)<1?((0,a.uX)(),(0,a.CE)("div",I,[(0,a.eW)(" Uploading "+(0,n.toDisplayString)((100*parseFloat(B.uploadPercentage)).toFixed(2))+"% ",1),$])):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.Q3)(" THE FINAL WRITING "),T],2112))]))])])]),(0,a.Lk)("div",U,[N,(0,a.Lk)("button",{type:"button",class:"btn btn-primary",disabled:B.disableUploadButton,onClick:t[3]||(t[3]=(...e)=>q.uploadFile&&q.uploadFile(...e))}," Upload File ",8,S)])])])])}]])},404:(e,t,o)=>{o.d(t,{A:()=>d});var a=o(641),n=o(33);const i={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},d=(0,o(6262).A)(i,[["render",function(e,t,o,i,d,s){return(0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.errorList,(e=>((0,a.uX)(),(0,a.CE)("span",{class:"error",key:e.$uid},(0,n.toDisplayString)(e.$message),1)))),128)}]])},8721:(e,t,o)=>{o.d(t,{f:()=>n});var a=o(9336);function n(){let e=document.getElementById("cardInformationModal");null!==e&&(e=new a.aF(e),e.show()),setTimeout((()=>{const e=document.getElementsByClassName("modal-backdrop fade show");e.length>1&&e[0].remove()}),200)}},246:(e,t,o)=>{o.d(t,{y:()=>i});var a=o(6285),n=o(953);function i(e){const t=(0,n.BA)(e);return""===t||null==t?"":a.c9.fromISO(t).toLocaleString(a.c9.DATETIME_MED)}},9581:(e,t,o)=>{o.d(t,{p:()=>i});var a=o(953),n=o(7413);function i(e){return"dark"===(0,a.BA)(e)?n.a:null}}}]);