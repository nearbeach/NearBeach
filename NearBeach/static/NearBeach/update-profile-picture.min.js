"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[2649],{3122:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var o=r(641);const i={class:"card"},a={class:"card-body"},s={class:"row"},l={class:"col-md-3"},n=["src"];var c=r(2601),u=r(2819),p=r(2124),d=r(9581),f=r(5740);const h={name:"UpdateProfilePicture",components:{NButton:c.Ay,NUpload:u.A},props:{theme:{type:String,default:""},userProfile:{type:Array,default:()=>[]}},data:()=>({fileList:[],profilePicture:""}),computed:{...(0,p.L8)({staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},methods:{useToken:f.r,useNBTheme:d.p,setProfilePicture(){if(this.profilePicture=`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,0===this.userProfile.length)return;const e=this.userProfile[0].fields.document;null!=e&&""!==e&&(this.profilePicture=`${this.rootUrl}private/${e}`)},showErrorToast(e){this.$store.dispatch("newToast",{header:"Can not update profile picture",message:e.event.target.responseText,extra_classes:"bg-danger",delay:0})},updateProfilePicture(){this.axios.get("get_profile_picture/",{}).then((e=>{this.profilePicture=`${this.rootUrl}private/${e.data.profile_picture}`,document.getElementsByClassName("n-button__icon")[0].click()})).catch((()=>{this.profilePicture=`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`}))}},mounted(){this.setProfilePicture()}},g=(0,r(6262).A)(h,[["render",function(e,t,r,c,u,p){const d=(0,o.g2)("n-button"),f=(0,o.g2)("n-upload"),h=(0,o.g2)("n-config-provider");return(0,o.uX)(),(0,o.Wv)(h,{theme:p.useNBTheme(r.theme)},{default:(0,o.k6)((()=>[(0,o.Lk)("div",i,[(0,o.Lk)("div",a,[(0,o.Lk)("div",s,[t[2]||(t[2]=(0,o.Lk)("div",{class:"col-md-4"},[(0,o.Lk)("strong",null,"Update Profile Picture"),(0,o.Lk)("p",{class:"text-instructions"},' Click on "Update Picture" to update your profile picture ')],-1)),(0,o.Lk)("div",l,[(0,o.Lk)("img",{src:e.profilePicture,alt:"Profile Picture",class:"organisation-profile-image"},null,8,n),t[1]||(t[1]=(0,o.Lk)("br",null,null,-1)),(0,o.bF)(f,{action:`${e.rootUrl}profile_information/update_profile/`,headers:{"X-CSRFTOKEN":p.useToken("csrftoken")},data:{},max:1,onError:p.showErrorToast,onFinish:p.updateProfilePicture,accept:".jpg, .jpeg, .png, *.webp"},{default:(0,o.k6)((()=>[(0,o.bF)(d,null,{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Update Profile Picture")]))),_:1})])),_:1},8,["action","headers","onError","onFinish"])])])])])])),_:1},8,["theme"])}]])},5740:(e,t,r)=>{r.d(t,{r:()=>i});var o=r(953);function i(e){const t=(0,o.BA)(e),r=new RegExp(`${t}=([^;]+)`).exec(document.cookie);return null!==r?encodeURIComponent(r[1]):null}},9581:(e,t,r)=>{r.d(t,{p:()=>a});var o=r(953),i=r(166);function a(e){return"dark"===(0,o.BA)(e)?i.a:null}}}]);