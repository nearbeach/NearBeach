"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[107],{8481:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var o=r(6252);const i={class:"card"},l={class:"card-body"},n={class:"row"},a=(0,o._)("div",{class:"col-md-4"},[(0,o._)("strong",null,"Update Profile Picture"),(0,o._)("p",{class:"text-instructions"},' Click on "Update Picture" to update your profile picture ')],-1),u={class:"col-md-3"},s=["src"],c=(0,o._)("br",null,null,-1);var d=r(9729),p=r(4344),h=r(989),f=r(3058),m=r(106),g=r(624);const P=r(9669),_={name:"UpdateProfilePicture",components:{NButton:d.ZP,NUpload:p.Z},props:{theme:{type:String,default:""},userProfile:{type:Array,default:()=>[]}},data:()=>({profilePicture:""}),computed:{...(0,h.Se)({staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},mixins:[f.Z,m.Z,g.Z],methods:{setProfilePicture(){if(this.profilePicture=`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`,0===this.userProfile.length)return;let e=this.userProfile[0].fields.document;null!=e&&""!==e&&(this.profilePicture=`${this.rootUrl}private/${e}`)},updateProfilePicture(){P.get("get_profile_picture/",{}).then((e=>{this.profilePicture=`${this.rootUrl}private/${e.data.profile_picture}`})).catch((()=>{this.profilePicture=`${this.staticUrl}/NearBeach/images/placeholder/product_tour.svg`}))}},mounted(){this.setProfilePicture()}},w=(0,r(3744).Z)(_,[["render",function(e,t,r,d,p,h){const f=(0,o.up)("n-button"),m=(0,o.up)("n-upload"),g=(0,o.up)("n-config-provider");return(0,o.wg)(),(0,o.j4)(g,{theme:e.getTheme(r.theme)},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o._)("div",l,[(0,o._)("div",n,[a,(0,o._)("div",u,[(0,o._)("img",{src:e.profilePicture,alt:"Profile Picture",class:"organisation-profile-image"},null,8,s),c,(0,o.Wm)(m,{action:`${e.rootUrl}profile_information/update_profile/`,headers:{"X-CSRFTOKEN":e.getToken("csrftoken")},data:{},max:1,onError:t[0]||(t[0]=t=>e.showErrorModal("Profile Picture was not updated","Profile Picture","")),onFinish:h.updateProfilePicture},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Update Profile Picture")])),_:1})])),_:1},8,["action","headers","onFinish"])])])])])])),_:1},8,["theme"])}]])},3058:(e,t,r)=>{r.d(t,{Z:()=>i});var o=r(3138);const i={methods:{showErrorModal(e,t,r){const i=document.getElementById("loadingModal");if(null===i)return;new o.u_(i).hide();const l=document.getElementById("errorModalContent");if(void 0===l)return;if(l.innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${t}-${r}<hr>${e}`,null===document.getElementById("errorModal"))return;const n=new o.u_(n);n.show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new o.u_(document.getElementById("errorModal")).show()}}}},624:(e,t,r)=>{r.d(t,{Z:()=>i});var o=r(8458);const i={data:()=>({darkTheme:o.$}),methods:{getTheme:e=>"dark"===e?o.$:null}}},106:(e,t,r)=>{r.d(t,{Z:()=>o});const o={methods:{getToken(e){const t=new RegExp(`${e}=([^;]+)`).exec(document.cookie);return null!==t?encodeURIComponent(t[1]):null}}}}}]);