"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1055],{9612:(e,r,o)=>{o.r(r),o.d(r,{default:()=>q});var t=o(6252),a=o(9963);const n={class:"card"},s={class:"card-body"},u=(0,t._)("h1",null,"New Group",-1),l=(0,t._)("hr",null,null,-1),i={class:"row"},d=(0,t._)("div",{class:"col-md-4"},[(0,t._)("strong",null,"Create a new group"),(0,t._)("p",{class:"text-instructional"}," Each group should contain a unique name. If the name already exists then we won't be able to create the group. ")],-1),c={class:"col-md-8"},p={class:"form-group"},h={key:0,class:"error"},m={key:1,class:"error"},g={class:"form-group"},w=(0,t._)("label",null," Parent Group (optional) ",-1),v=(0,t._)("hr",null,null,-1),f={class:"row submit-row"},_={class:"col-md-12"};var M=o(9669),N=o.n(M),G=o(2001),k=o(5705),y=o(760),T=o(7939),b=o(3058),$=o(624),E=o(9113);const Z={name:"NewGroup",setup:()=>({v$:(0,k.ZP)()}),components:{NSelect:G.Z,ValidationRendering:T.Z},props:{groupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},data:()=>({checkingGroupName:!1,groupNameModel:"",groupResultsFixList:[],parentGroupModel:"",uniqueGroupName:!0}),mixins:[b.Z,$.Z,E.Z],validations:{groupNameModel:{required:y.C1}},watch:{groupNameModel(){this.checkingGroupName=!0,this.searchTrigger({return_function:this.checkGroupName,searchTimeout:this.searchTimeout})}},methods:{addNewGroup(){if(this.v$.$touch(),this.v$.$invalid||!this.uniqueGroupName)return void this.showValidationErrorModal();const e=new FormData;e.set("group_name",this.groupNameModel),void 0!==this.parentGroupModel&&e.set("parent_group",this.parentGroupModel),N().post(`${this.rootUrl}new_group/save/`,e).then((e=>{window.location.href=e.data})).catch((e=>{this.showErrorModal(e,"New Group","")}))},checkGroupName(){const e=new FormData;e.set("search",this.groupNameModel),N().post(`${this.rootUrl}group_information/check_group_name/`,e).then((e=>{this.uniqueGroupName=0==e.data.length,this.checkingGroupName=!1})).catch((e=>{this.showErrorModal(e,"New Group","")}))}},mounted(){this.groupResultsFixList=this.groupResults.map((e=>({label:e.fields.group_name,value:e.pk})))}},q=(0,o(3744).Z)(Z,[["render",function(e,r,o,M,N,G){const k=(0,t.up)("validation-rendering"),y=(0,t.up)("n-select"),T=(0,t.up)("n-config-provider");return(0,t.wg)(),(0,t.j4)(T,{theme:e.getTheme(o.theme)},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t._)("div",s,[u,l,(0,t._)("div",i,[d,(0,t._)("div",c,[(0,t._)("div",p,[(0,t._)("label",null,[(0,t.Uk)(" Group Name "),(0,t.Wm)(k,{"error-list":M.v$.groupNameModel.$errors},null,8,["error-list"]),N.uniqueGroupName?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("span",h," Please supply a unique name")),N.checkingGroupName?((0,t.wg)(),(0,t.iD)("span",m," Checking group name...")):(0,t.kq)("v-if",!0)]),(0,t.wy)((0,t._)("input",{class:"form-control","onUpdate:modelValue":r[0]||(r[0]=e=>N.groupNameModel=e)},null,512),[[a.vModelText,N.groupNameModel]])]),(0,t._)("div",g,[w,(0,t.Wm)(y,{options:N.groupResultsFixList,value:N.parentGroupModel,"onUpdate:value":r[1]||(r[1]=e=>N.parentGroupModel=e),label:"group_name",class:"form-control"},null,8,["options","value"])])])]),(0,t.kq)(" Submit Button "),v,(0,t._)("div",f,[(0,t._)("div",_,[(0,t._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:r[2]||(r[2]=(...e)=>G.addNewGroup&&G.addNewGroup(...e))},"Create new Group")])])])])])),_:1},8,["theme"])}]])},7939:(e,r,o)=>{o.d(r,{Z:()=>s});var t=o(6252),a=o(3577);const n={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},s=(0,o(3744).Z)(n,[["render",function(e,r,o,n,s,u){return(0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.errorList,(e=>((0,t.wg)(),(0,t.iD)("span",{class:"error",key:e.$uid},(0,a.toDisplayString)(e.$message),1)))),128)}]])},3058:(e,r,o)=>{o.d(r,{Z:()=>a});var t=o(3138);const a={methods:{showErrorModal(e,r,o){const a=document.getElementById("loadingModal");if(null===a)return;new t.u_(a).hide();const n=document.getElementById("errorModalContent");if(void 0===n)return;if(n.innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${r}-${o}<hr>${e}`,null===document.getElementById("errorModal"))return;const s=new t.u_(s);s.show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new t.u_(document.getElementById("errorModal")).show()}}}},624:(e,r,o)=>{o.d(r,{Z:()=>a});var t=o(8458);const a={data:()=>({darkTheme:t.$}),methods:{getTheme:e=>"dark"===e?t.$:null}}},9113:(e,r,o)=>{o.d(r,{Z:()=>t});const t={methods:{searchTrigger(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);