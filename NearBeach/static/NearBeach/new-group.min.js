"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1055],{7583:(e,o,r)=>{r.r(o),r.d(o,{default:()=>$});var t=r(6252),n=r(9963);const a={class:"card"},s={class:"card-body"},u=(0,t._)("h1",null,"New Group",-1),i=(0,t._)("hr",null,null,-1),l={class:"row"},c=(0,t._)("div",{class:"col-md-4"},[(0,t._)("strong",null,"Create a new group"),(0,t._)("p",{class:"text-instructional"}," Each group should contain a unique name. If the name already exists then we won't be able to create the group. ")],-1),d={class:"col-md-8"},p={class:"form-group"},h=(0,t.Uk)(" Group Name "),m={key:0,class:"error"},g={key:1,class:"error"},w={key:2,class:"error"},f={class:"form-group"},v=(0,t._)("label",null," Parent Group (optional) ",-1),_=(0,t._)("hr",null,null,-1),M={class:"row submit-row"},N={class:"col-md-12"};var G=r(9669),k=r.n(G),y=r(967),b=r(3766),T=r(2587),E=r(3058),q=r(9113);const U={name:"NewGroup",setup:()=>({v$:(0,b.ZP)()}),components:{NSelect:y.Z},props:{groupResults:{type:Array,default:function(){return[]}},rootUrl:{type:String,default:"/"}},data:()=>({checkingGroupName:!1,groupNameModel:"",groupResultsFixList:[],parentGroupModel:"",uniqueGroupName:!0}),mixins:[E.Z,q.Z],validations:{groupNameModel:{required:T.C1}},watch:{groupNameModel:function(){this.checkingGroupName=!0,this.searchTrigger({return_function:this.checkGroupName,searchTimeout:this.searchTimeout})}},methods:{addNewGroup:function(){if(this.v$.$touch(),this.v$.$invalid||!this.uniqueGroupName)return void this.showValidationErrorModal();const e=new FormData;e.set("group_name",this.groupNameModel),void 0!==this.parentGroupModel&&e.set("parent_group",this.parentGroupModel),k().post(`${this.rootUrl}new_group/save/`,e).then((e=>{window.location.href=e.data})).catch((e=>{this.showErrorModal(e,"New Group","")}))},checkGroupName:function(){const e=new FormData;e.set("search",this.groupNameModel),k().post(`${this.rootUrl}group_information/check_group_name/`,e).then((e=>{this.uniqueGroupName=0==e.data.length,this.checkingGroupName=!1})).catch((e=>{this.showErrorModal(e,"New Group","")}))}},mounted(){this.groupResultsFixList=this.groupResults.map((e=>({label:e.fields.group_name,value:e.pk})))}},$=(0,r(3744).Z)(U,[["render",function(e,o,r,G,k,y){const b=(0,t.up)("n-select");return(0,t.wg)(),(0,t.iD)("div",a,[(0,t._)("div",s,[u,i,(0,t._)("div",l,[c,(0,t._)("div",d,[(0,t._)("div",p,[(0,t._)("label",null,[h,G.v$.groupNameModel.$errors.length>0?((0,t.wg)(),(0,t.iD)("span",m," Please suppy a title. ")):(0,t.kq)("v-if",!0),k.uniqueGroupName?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("span",g," Please supply a unique name")),k.checkingGroupName?((0,t.wg)(),(0,t.iD)("span",w," Checking group name...")):(0,t.kq)("v-if",!0)]),(0,t.wy)((0,t._)("input",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=e=>k.groupNameModel=e)},null,512),[[n.vModelText,k.groupNameModel]])]),(0,t._)("div",f,[v,(0,t.Wm)(b,{options:k.groupResultsFixList,value:k.parentGroupModel,"onUpdate:value":o[1]||(o[1]=e=>k.parentGroupModel=e),label:"group_name",class:"form-control"},null,8,["options","value"])])])]),(0,t.kq)(" Submit Button "),_,(0,t._)("div",M,[(0,t._)("div",N,[(0,t._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:o[2]||(o[2]=(...e)=>y.addNewGroup&&y.addNewGroup(...e))},"Create new Group")])])])])}]])},3058:(e,o,r)=>{r.d(o,{Z:()=>n});var t=r(5169);const n={methods:{showErrorModal:function(e,o,r){new t.u_(document.getElementById("loadingModal")).hide(),document.getElementById("errorModalContent").innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new requirement<hr>${e}`,new t.u_(document.getElementById("errorModal")).show()},showValidationErrorModal:function(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new t.u_(document.getElementById("errorModal")).show()}}}},9113:(e,o,r)=>{r.d(o,{Z:()=>t});const t={methods:{searchTrigger:function(e){""!=e.searchTimeout&&clearTimeout(e.searchTimeout),void 0===e.search?this.searchUndefined(e):this.searchDefined(e)},searchDefined:function(e){e.search.length>=3&&(e.searchTimeout=setTimeout(e.return_function,500,e.search,e.loading))},searchUndefined:function(e){e.searchTimeout=setTimeout(e.return_function,500)}}}}}]);