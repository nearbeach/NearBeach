"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6113],{8737:(e,t,o)=>{o.d(t,{Z:()=>F});var n=o(6252),i=o(3577);const d={class:"text-instructions"},s={key:0,class:"module-spacer"},l=[(0,n._)("div",{class:"alert alert-dark"}," Sorry - there are no documents or folders uploaded. ",-1)],a={key:1,class:"document--widget"},r=(0,n._)("p",{class:"text-instructions"},"Go to Parent Directory...",-1),c=["onClick"],u={class:"text-instructions"},m={key:0,class:"document--remove"},p=["href"],h={class:"text-instructions"},g={key:0,class:"document--remove"},b=(0,n._)("hr",null,null,-1),_={key:2,class:"btn-group save-changes"},y={key:0,class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},D={class:"dropdown-menu"};var f=o(3138),v=o(6542),k=o(5808),w=o(989);const I={name:"DocumentsModule",components:{Icon:v.JO},props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0},readOnly:{type:Boolean,default:!1}},mixins:[k.Z],computed:{...(0,w.Se)({currentFolder:"getCurrentFolder",destination:"getDestination",documentFilteredList:"getDocumentFilteredList",documentObjectCount:"getDocumentObjectCount",folderFilteredList:"getFolderFilteredList",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},watch:{overrideLocationId(){this.getDocumentList(),this.getFolderList()}},methods:{addFolder(){const e=document.getElementById("cardInformationModalCloseButton");null!==e&&e.click(),new f.u_(document.getElementById("addFolderModal")).show()},addLink(){const e=document.getElementById("cardInformationModalCloseButton");null!==e&&e.click(),new f.u_(document.getElementById("addLinkModal")).show()},confirmFileDelete(e){this.$store.commit({type:"updateDocumentRemoveKey",documentRemoveKey:e});const t=document.getElementById("cardInformationModalCloseButton");null!==t&&t.click(),new f.u_(document.getElementById("confirmFileDeleteModal")).show()},confirmFolderDelete(e){this.$store.commit({type:"updateFolderRemoveId",folderRemoveId:e});const t=document.getElementById("cardInformationModalCloseButton");null!==t&&t.click(),new f.u_(document.getElementById("confirmFolderDeleteModal")).show()},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getDocumentList(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/files/`).then((e=>{this.$store.commit({type:"updateDocumentList",documentList:e.data})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error getting Document List",message:`Can not retrieve document list. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getFolderList(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/folders/`).then((e=>{this.$store.commit({type:"updateFolderList",folderList:e.data})}))},getIcon(e){if(""!==e.document_key__document_url_location&&null!==e.document_key__document_url_location)return this.icons.linkOut;const t=e.document_key__document.split(".");switch(t[t.length-1]){case"jpg":case"png":case"bmp":return this.icons.imageIcon;case"doc":case"docx":return this.icons.microsoftWord;case"xls":case"xlsx":return this.icons.microsoftExcel;case"ppt":case"pptx":return this.icons.microsoftPowerpoint;case"pdf":return this.icons.documentPdf;default:return this.icons.documentText}},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},goToParentDirectory(){this.$store.dispatch("goToParentDirectory",{})},shortName:e=>e.length<=50?e:`${e.substring(0,47)}...`,updateCurrentFolder(e){this.$store.commit({type:"updateCurrentFolder",currentFolder:e})},uploadDocument(){const e=document.getElementById("cardInformationModalCloseButton");null!==e&&e.click(),new f.u_(document.getElementById("uploadDocumentModal")).show()}},mounted(){this.$nextTick((()=>{this.getDocumentList(),this.getFolderList()}))}},F=(0,o(3744).Z)(I,[["render",function(e,t,o,f,v,k){const w=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h2",null,[(0,n.Wm)(w,{icon:e.icons.bxBriefcase},null,8,["icon"]),(0,n.Uk)(" Documents ")]),(0,n._)("p",d," The following is a folder structure of all documents uploaded to this "+(0,i.toDisplayString)(this.getDestination()),1),(0,n.kq)(" DOCUMENT FOLDER TREE "),0===parseInt(e.documentObjectCount)?((0,n.wg)(),(0,n.iD)("div",s,l)):((0,n.wg)(),(0,n.iD)("div",a,[(0,n.kq)(" GO TO PARENT DIRECTORY "),0!==this.currentFolder?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:t[0]||(t[0]=e=>k.goToParentDirectory()),class:"document--child"},[(0,n.Wm)(w,{icon:e.icons.arrowUp,width:"80px",height:"80px"},null,8,["icon"]),r])):(0,n.kq)("v-if",!0),(0,n.kq)(" RENDER THE FOLDERS "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.folderFilteredList,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.pk,class:"document--child"},[(0,n._)("a",{href:"javascript:void(0)",onClick:e=>k.updateCurrentFolder(t.pk)},[(0,n.Wm)(w,{icon:e.icons.folderIcon,width:"80px",height:"80px"},null,8,["icon"]),(0,n._)("p",u,(0,i.toDisplayString)(k.shortName(t.fields.folder_description)),1)],8,c),(0,n.kq)(" REMOVE FOLDER "),e.userLevel>=2?((0,n.wg)(),(0,n.iD)("div",m,[(0,n.Wm)(w,{icon:e.icons.trashCan,onClick:e=>k.confirmFolderDelete(t.pk)},null,8,["icon","onClick"])])):(0,n.kq)("v-if",!0)])))),128)),(0,n.kq)(" RENDER THE FILES "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.documentFilteredList,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.document_key_id,class:"document--child"},[(0,n._)("a",{href:`/private/${t.document_key_id}/`,rel:"noopener noreferrer",target:"_blank"},[(0,n.Wm)(w,{icon:k.getIcon(t),width:"80px",height:"80px"},null,8,["icon"]),(0,n._)("p",h,(0,i.toDisplayString)(k.shortName(t.document_key__document_description)),1)],8,p),(0,n.kq)(" REMOVE DOCUMENT "),e.userLevel>=2?((0,n.wg)(),(0,n.iD)("div",g,[(0,n.Wm)(w,{icon:e.icons.trashCan,onClick:e=>k.confirmFileDelete(t.document_key_id)},null,8,["icon","onClick"])])):(0,n.kq)("v-if",!0)])))),128))])),(0,n.kq)(" ADD DOCUMENTS AND FOLDER BUTTON "),b,!1===o.readOnly?((0,n.wg)(),(0,n.iD)("div",_,[e.userLevel>1?((0,n.wg)(),(0,n.iD)("button",y," New Document/File ")):(0,n.kq)("v-if",!0),(0,n._)("ul",D,[(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[1]||(t[1]=(...e)=>k.uploadDocument&&k.uploadDocument(...e))}," Upload Document ")]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[2]||(t[2]=(...e)=>k.addLink&&k.addLink(...e))}," Add Link ")]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[3]||(t[3]=(...e)=>k.addFolder&&k.addFolder(...e))}," Add Folder ")])])])):(0,n.kq)("v-if",!0)])}]])},709:(e,t,o)=>{o.d(t,{Z:()=>C});var n=o(6252),i=o(3577);const d={key:0,class:"module-spacer"},s={class:"alert alert-dark"},l={key:1,class:"note-history"},a={class:"note-history--profile"},r=["src"],c={class:"note-history--username"},u={class:"note-history--date"},m={key:0,class:"note-history--edit-button"},p=["onClick"],h=["onClick"],g={class:"note-history--note"};var b=o(7267),_=o(3138);const y={class:"modal fade",id:"confirmNoteDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmLinkDelete","aria-hidden":"true"},D={class:"modal-dialog"},f={class:"modal-content"},v=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title",id:"confirmNoteDelete"}," Please confirm Note Deletion "),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmNoteDeleteButton"})],-1),k=(0,n._)("div",{class:"modal-body"}," Are you sure you want to delete the note? ",-1),w={class:"modal-footer"};var I=o(989);const F={name:"ConfirmNoteDelete",props:{},computed:{...(0,I.Se)({destination:"getDestination",noteId:"getSingleNoteId",rootUrl:"getRootUrl"})},methods:{deleteNote(){this.$store.dispatch("newToast",{header:"Deleting Note",message:"Currently deleting note",extra_classes:"bg-warning",delay:0,unique_type:"delete_note"});let e=`${this.rootUrl}note/delete/${this.noteId}/`;this.destination&&(e=`${this.rootUrl}note/organisation/delete/${this.noteId}/`),this.axios.post(e).then((()=>{this.$store.dispatch("newToast",{header:"Note is deleted",message:"Successfully Deleted Note",extra_classes:"bg-success",unique_type:"delete_note"}),this.$store.commit({type:"removeNote",noteId:this.noteId}),this.closeModal()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to Delete Note",message:`Sorry, we failed to delete the note. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"delete_note"})}))},closeModal(){document.getElementById("confirmNoteDeleteButton").click()}}};var x=o(3744);const U=(0,x.Z)(F,[["render",function(e,t,o,i,d,s){return(0,n.wg)(),(0,n.iD)("div",y,[(0,n._)("div",D,[(0,n._)("div",f,[v,k,(0,n._)("div",w,[(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e))}," No "),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>s.deleteNote&&s.deleteNote(...e))}," Yes ")])])])])}]]);var M=o(431);const L={name:"ListNotes",components:{ConfirmNoteDelete:U,editor:b.Z},mixins:[M.Z],props:{destination:{type:String,default:""}},computed:{...(0,I.Se)({contentCss:"getContentCss",noteList:"getNoteList",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",skin:"getSkin"})},methods:{deleteNote(e){this.$store.dispatch({type:"updateNoteId",noteId:e}),new _.u_(document.getElementById("confirmNoteDeleteModal")).show()},editNote(e){this.$store.dispatch({type:"updateNoteId",noteId:e}),new _.u_(document.getElementById("editNoteModal")).show()},profilePicture(e){return null!==e&&""!==e?`${this.rootUrl}private/${e}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`}}},C=(0,x.Z)(L,[["render",function(e,t,o,b,_,y){const D=(0,n.up)("editor"),f=(0,n.up)("confirm-note-delete");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.kq)(" NOTE HISTORY "),0===e.noteList.length?((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",s," Sorry - but there are no notes for this "+(0,i.toDisplayString)(o.destination)+". ",1)])):((0,n.wg)(),(0,n.iD)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.noteList,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"note-history--row",key:t.object_note_id},[(0,n._)("div",a,[(0,n._)("img",{src:y.profilePicture(t.profile_picture),alt:"default profile",class:"note-history--profile-picture"},null,8,r),(0,n._)("div",c,(0,i.toDisplayString)(t.first_name)+" "+(0,i.toDisplayString)(t.last_name),1),(0,n._)("div",u,(0,i.toDisplayString)(e.getNiceDatetime(t.date_modified)),1),"true"===t.can_edit?((0,n.wg)(),(0,n.iD)("div",m,[(0,n._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e=>y.editNote(t.object_note_id)}," Edit Note ",8,p),(0,n._)("button",{type:"button",class:"btn btn-outline-danger",onClick:e=>y.deleteNote(t.object_note_id)}," Delete Note ",8,h)])):(0,n.kq)("v-if",!0)]),(0,n._)("div",g,[(0,n.Wm)(D,{init:{height:250,menubar:!1,plugins:["lists","image","codesample","table"],toolbar:[],skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:t.object_note,"onUpdate:modelValue":e=>t.object_note=e,disabled:!0},null,8,["init","modelValue","onUpdate:modelValue"])])])))),128))])),(0,n.Wm)(f)])}]])},203:(e,t,o)=>{o.d(t,{Z:()=>I});var n=o(6252),i=o(9963);const d={class:"modal fade",id:"addFolderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},s={class:"modal-dialog modal-lg"},l={class:"modal-content"},a={class:"modal-header"},r=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addFolderCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),c={class:"modal-body"},u={class:"row"},m=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Creating a folder"),(0,n._)("p",{class:"text-instructions"},' Give the folder an appropriate name. When done, click on the "Save" button. It will be added to the current folder. ')],-1),p={class:"col-md-8"},h={class:"form-group"},g=(0,n._)("label",{for:"folder_description"},"Folder Name",-1),b={class:"modal-footer"},_=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),y=["disabled"];var D=o(6542),f=o(989),v=o(5808),k=o(3138);const w={name:"AddFolderWizard",components:{Icon:D.JO},props:{destination:{type:String,default:"/"},locationId:{type:Number,default:0}},mixins:[v.Z],data:()=>({disableAddFolderButton:!0,folderDescriptionModel:""}),computed:{...(0,f.Se)({existingFolders:"getFolderFilteredList",currentFolder:"getCurrentFolder",rootUrl:"getRootUrl"})},methods:{addFolder(){const e=new FormData;e.set("folder_description",this.folderDescriptionModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_folder/`,e).then((e=>{this.$store.dispatch("appendFolderList",{folderList:e.data[0]}),this.folderDescriptionModel="",document.getElementById("addFolderCloseButton").click();let t=document.getElementById("cardInformationModal");null!==t&&(t=new k.u_(t),t.show())})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to add folder",message:`Failed to add folder. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},updated(){const e=this.existingFolders.filter((e=>e.fields.folder_description===this.folderDescriptionModel));this.disableAddFolderButton=e.length>0||""===this.folderDescriptionModel||null===this.folderDescriptionModel}},I=(0,o(3744).Z)(w,[["render",function(e,t,o,D,f,v){const k=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",s,[(0,n._)("div",l,[(0,n._)("div",a,[(0,n._)("h2",null,[(0,n.Wm)(k,{icon:e.icons.userIcon},null,8,["icon"]),(0,n.Uk)(" Add Folder Wizard ")]),r]),(0,n._)("div",c,[(0,n._)("div",u,[m,(0,n._)("div",p,[(0,n._)("div",h,[g,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>f.folderDescriptionModel=e),class:"form-control",id:"folder_description",maxlength:"50"},null,512),[[i.vModelText,f.folderDescriptionModel]])])])])]),(0,n._)("div",b,[_,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:f.disableAddFolderButton,onClick:t[1]||(t[1]=(...e)=>v.addFolder&&v.addFolder(...e))}," Add Folder ",8,y)])])])])}]])},6200:(e,t,o)=>{o.d(t,{Z:()=>C});var n=o(6252),i=o(9963);const d={class:"modal fade",id:"addLinkModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},s={class:"modal-dialog modal-lg"},l={class:"modal-content"},a={class:"modal-header"},r=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addLinkCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),c={class:"modal-body"},u={class:"row"},m=(0,n._)("div",{class:"col-md-4"},[(0,n._)("strong",null,"Add Link"),(0,n._)("p",{class:"text-instruction"}," Add hyperlinks to other documents and sources located in on the internet/cloud. ")],-1),p={class:"col-md-8"},h={class:"form-group"},g={for:"document_description"},b={key:0,class:"error"},_={class:"form-group"},y={for:"document_url_location"},D={class:"modal-footer"},f=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),v=["disabled"];var k=o(6542),w=o(989),I=o(5808),F=o(5705),x=o(760),U=o(7939),M=o(3138);const L={name:"AddLinkWizard",setup:()=>({v$:(0,F.ZP)()}),components:{Icon:k.JO,ValidationRendering:U.Z},props:{destination:{type:String,default:"/"},locationId:{type:Number,default:0}},mixins:[I.Z],data:()=>({linkModel:"",disableAddButton:!0,documentDescriptionModel:"",documentUrlLocationModel:"",duplicateDescription:!1}),validations:{documentDescriptionModel:{required:x.C1},documentUrlLocationModel:{required:x.C1,url:x.HQ}},computed:{...(0,w.Se)({currentFolder:"getCurrentFolder",excludeDocuments:"getDocumentFilteredList",rootUrl:"getRootUrl"})},methods:{addLink(){const e=new FormData;e.set("document_description",this.documentDescriptionModel),e.set("document_url_location",this.documentUrlLocationModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_link/`,e).then((e=>{this.$store.dispatch("appendDocumentList",{documentList:e.data[0]}),this.documentDescriptionModel="",this.documentUrlLocationModel="",document.getElementById("addLinkCloseButton").click();let t=document.getElementById("cardInformationModal");null!==t&&(t=new M.u_(t),t.show())})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Adding Link",message:`Sorry, could not add the link for you. Error - ${e}`,extra_classes:"bg-danger",delay:0})}))}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.duplicateDescription=e.length>0,this.v$.$touch(),this.disableAddButton=this.v$.$invalid||e.length>0}},C=(0,o(3744).Z)(L,[["render",function(e,t,o,k,w,I){const F=(0,n.up)("Icon"),x=(0,n.up)("validation-rendering");return(0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("div",s,[(0,n._)("div",l,[(0,n._)("div",a,[(0,n._)("h2",null,[(0,n.Wm)(F,{icon:e.icons.userIcon},null,8,["icon"]),(0,n.Uk)(" Add Link Wizard ")]),r]),(0,n._)("div",c,[(0,n._)("div",u,[m,(0,n._)("div",p,[(0,n._)("div",h,[(0,n._)("label",g,[(0,n.Uk)(" Document Description "),(0,n.Wm)(x,{"error-list":k.v$.documentDescriptionModel.$errors},null,8,["error-list"]),w.duplicateDescription?((0,n.wg)(),(0,n.iD)("span",b," Sorry - but this is a duplicated description.")):(0,n.kq)("v-if",!0)]),(0,n.wy)((0,n._)("input",{id:"document_description","onUpdate:modelValue":t[0]||(t[0]=e=>w.documentDescriptionModel=e),class:"form-control",maxlength:"50",placeholder:"NearBeach Homepage"},null,512),[[i.vModelText,w.documentDescriptionModel]])]),(0,n._)("div",_,[(0,n._)("label",y,[(0,n.Uk)(" Document URL "),(0,n.Wm)(x,{"error-list":k.v$.documentUrlLocationModel.$errors},null,8,["error-list"])]),(0,n.wy)((0,n._)("input",{id:"document_url_location","onUpdate:modelValue":t[1]||(t[1]=e=>w.documentUrlLocationModel=e),class:"form-control",placeholder:"https://nearbeach.org"},null,512),[[i.vModelText,w.documentUrlLocationModel]])])])])]),(0,n._)("div",D,[f,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>I.addLink&&I.addLink(...e)),disabled:w.disableAddButton}," Add Link ",8,v)])])])])}]])},2551:(e,t,o)=>{o.d(t,{Z:()=>p});var n=o(6252);const i={class:"modal fade",id:"confirmFileDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmFileDelete","aria-hidden":"true"},d={class:"modal-dialog"},s={class:"modal-content"},l=(0,n._)("div",{class:"modal-header"},[(0,n._)("h5",{class:"modal-title",id:"confirmFileDelete"}," Please confirm File Deletion "),(0,n.kq)(" TASK INFORMATION "),(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmFileDeleteButton"})],-1),a=(0,n._)("div",{class:"modal-body"}," Are you sure you want to delete the file? ",-1),r={class:"modal-footer"};var c=o(989),u=o(3138);const m={name:"ConfirmFileDelete",computed:{...(0,c.Se)({destination:"getDestination",documentRemoveKey:"getDocumentRemoveKey",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{deleteFile(){if(""===this.documentRemoveKey)return;const e=this.documentRemoveKey,t=new FormData;t.set("document_key",this.documentRemoveKey),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove/`,t).then((()=>{this.$store.dispatch("removeDocument",{document_key:e}),this.closeModal()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing file",message:`We could not remove your file. Error - ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){this.$store.commit({type:"updateDocumentRemoveKey",documentRemoveKey:""}),document.getElementById("confirmFileDeleteButton").click();let e=document.getElementById("cardInformationModal");null!==e&&(e=new u.u_(e),e.show()),setTimeout((()=>{const e=document.getElementsByClassName("modal-backdrop fade show");e.length>1&&e[0].remove()}),200)}}},p=(0,o(3744).Z)(m,[["render",function(e,t,o,c,u,m){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",d,[(0,n._)("div",s,[l,a,(0,n._)("div",r,[(0,n._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>m.closeModal&&m.closeModal(...e))}," No "),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>m.deleteFile&&m.deleteFile(...e))}," Yes ")])])])])}]])},5475:(e,t,o)=>{o.d(t,{Z:()=>D});var n=o(6252);const i={class:"modal fade",id:"editNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},d={class:"modal-dialog modal-lg",role:"document"},s={class:"modal-content"},l={class:"modal-header"},a=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"editNoteCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),r={class:"modal-body"},c=(0,n._)("p",{class:"text-instructions"},' Use the text editor to edit your note. Click on the "Update" button to submit the changes. ',-1),u={class:"modal-footer"},m=["disabled"],p=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var h=o(5808),g=o(6542),b=o(7267),_=o(989);const y={name:"EditHistoryNoteWizard",components:{editor:b.Z,Icon:g.JO},mixins:[h.Z],data:()=>({noteModel:""}),computed:{...(0,_.Se)({description:"getSingleNoteDescription",destination:"getDestination",contentCss:"getContentCss",noteDescription:"getSingleNoteDescription",noteId:"getSingleNoteId",rootUrl:"getRootUrl",skin:"getSkin"})},watch:{noteDescription(){this.noteModel=this.noteDescription}},methods:{updateNote(){const e=new FormData;e.set("object_note_id",`${this.noteId}`),e.set("object_note",this.noteModel),this.$store.dispatch("newToast",{header:"Updating Note",message:"Please wait - updating your note",extra_classes:"bg-warning",delay:0,unique_type:"save_note"});let t=`${this.rootUrl}note/update/${this.noteId}/`;"organisation"===this.destination&&(t=`${this.rootUrl}note/organisation/update/${this.noteId}/`),this.axios.post(t,e).then((()=>{this.$store.dispatch("newToast",{header:"Updated Note",message:"The note updated successfully.",extra_classes:"bg-success",unique_type:"save_note"}),this.$store.dispatch({type:"editSingleNote",noteId:this.noteId,noteDescription:this.noteModel}),document.getElementById("editNoteCloseButton").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed Updating Note",message:`Failed to update note - Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"save_note"})}))}}},D=(0,o(3744).Z)(y,[["render",function(e,t,o,h,g,b){const _=(0,n.up)("Icon"),y=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.kq)(" EDIT HISTORY NOTE "),(0,n._)("div",i,[(0,n._)("div",d,[(0,n._)("div",s,[(0,n._)("div",l,[(0,n._)("h2",null,[(0,n.Wm)(_,{icon:e.icons.noteAdd},null,8,["icon"]),(0,n.Uk)(" Edit Note ")]),a]),(0,n._)("div",r,[c,(0,n.Wm)(y,{init:{height:300,menubar:!1,plugins:["lists","codesample","table"],toolbar:"undo redo | blocks | bold italic strikethrough underline backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | table image codesample",skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:g.noteModel,"onUpdate:modelValue":t[0]||(t[0]=e=>g.noteModel=e)},null,8,["init","modelValue"])]),(0,n._)("div",u,[(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:""==g.noteModel,onClick:t[1]||(t[1]=(...e)=>b.updateNote&&b.updateNote(...e))}," Update Note ",8,m),p])])])])],2112)}]])},9586:(e,t,o)=>{o.d(t,{Z:()=>q});var n=o(6252),i=o(3577),d=o(9963);const s={class:"modal fade",id:"uploadDocumentModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},l={class:"modal-dialog modal-lg"},a={class:"modal-content"},r={class:"modal-header"},c=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"uploadDocumentCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),u={class:"modal-body"},m={class:"row"},p={class:"col-md-4"},h=(0,n._)("strong",null,"Uploading File",-1),g={class:"text-instructions"},b={key:0},_={key:1},y={key:2},D={class:"col-md-8"},f={key:0,class:"form-file"},v={class:"mb-3"},k={for:"document",class:"form-label"},w=(0,n._)("br",null,null,-1),I={key:0,class:"alert alert-warning"},F=["accept"],x={key:1,class:"form-group"},U={class:"form-group"},M=(0,n._)("label",{for:"documentDescription"},"Document Description",-1),L=(0,n._)("br",null,null,-1),C={class:"form-row"},$={key:2},N={key:0,class:"alert alert-warning"},E=(0,n._)("div",{class:"spinner-border text-primary",role:"status"},[(0,n._)("span",{class:"sr-only"},"Loading...")],-1),S=(0,n._)("div",{class:"alert alert-success"}," The document has been uploaded. The server is currently writing the file to disk. Please be patient - this modal will close automatically. Thank you ",-1),B={class:"modal-footer"},T=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Z=["disabled"];var R=o(6542),O=o(989),A=o(5808),P=o(3138);const W={name:"UploadDocumentWizard",components:{Icon:R.JO},props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},mixins:[A.Z],data:()=>({disableUploadButton:!0,documentModel:[],documentDescriptionModel:"",uploadPercentage:"",maxUploadSize:0,maxUploadString:"No Upload Limit",maxUploadWarning:!1}),computed:{...(0,O.Se)({acceptedDocuments:"getAcceptedDocuments",currentFolder:"getCurrentFolder",destination:"getDestination",excludeDocuments:"getDocumentFilteredList",locationId:"getLocationId",staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},methods:{getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},handleFileUploads(e){e[0].size*(0!==this.maxUploadSize)>this.maxUploadSize?this.maxUploadWarning=!0:(this.maxUploadWarning=!1,this.documentModel=e[0],this.documentDescriptionModel=e[0].name)},resetForm(){this.documentModel="",this.documentDescriptionModel="",this.uploadPercentage=""},uploadFile(){const e=new FormData;e.set("document",this.documentModel,this.documentDescriptionModel),e.set("document_description",this.documentDescriptionModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder);const t={onUploadProgress:e=>{this.uploadPercentage=parseFloat(e.loaded)/parseFloat(e.total)}};this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/upload/`,e,t).then((e=>{this.$store.dispatch("appendDocumentList",{documentList:e.data[0]}),document.getElementById("uploadDocumentCloseButton").click(),this.resetForm();let t=document.getElementById("cardInformationModal");null!==t&&(t=new P.u_(t),t.show())})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to upload documentation",message:`Can not upload the documentation. ${e}`,extra_classes:"bg-danger",delay:0})}))}},watch:{maxUploadSize(){if(0===this.maxUploadSize)return"No Upload Limit";const e=Math.floor(Math.log(this.maxUploadSize)/Math.log(1024));this.maxUploadString=`Max Upload Size: ${parseFloat((this.maxUploadSize/Math.pow(1024,e)).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}`}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.disableUploadButton=""===this.documentModel||0===this.documentDescriptionModel.length||e.length>0},mounted(){this.$nextTick((()=>{this.axios.post(`${this.rootUrl}documentation/get/max_upload/`).then((e=>{this.maxUploadSize=e.data.max_upload_size})).catch((()=>{this.$store.dispatch("newToast",{header:"Failed to get the max upload size",message:`Had an issue getting data from backend. ${this.maxUploadString}`,extra_classes:"bg-danger",delay:0})}))}))}},q=(0,o(3744).Z)(W,[["render",function(e,t,o,R,O,A){const P=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",l,[(0,n._)("div",a,[(0,n._)("div",r,[(0,n._)("h2",null,[(0,n.Wm)(P,{icon:e.icons.userIcon},null,8,["icon"]),(0,n.Uk)(" Upload Document Wizard ")]),c]),(0,n._)("div",u,[(0,n._)("div",m,[(0,n._)("div",p,[h,(0,n._)("p",g," You will be able to upload a file against this "+(0,i.toDisplayString)(A.getDestination)+". It will appear in the current folder. ",1),0===O.documentModel.length?((0,n.wg)(),(0,n.iD)("p",b,' 1. Please click on "Upload File" button to upload a file ')):""===O.uploadPercentage?((0,n.wg)(),(0,n.iD)("p",_,' 2. Please modify the document descript to be more human readable. Or click the "Reset" button to remove the uploaded file. ')):((0,n.wg)(),(0,n.iD)("p",y," 3. Document is currently uploading. Please be patient. "))]),(0,n._)("div",D,[0===O.documentModel.length?((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("div",v,[(0,n._)("label",k,[(0,n.Uk)(" Please upload a file"),w,(0,n.Uk)(" "+(0,i.toDisplayString)(O.maxUploadString)+" ",1),O.maxUploadWarning?((0,n.wg)(),(0,n.iD)("div",I," Sorry - file too large ")):(0,n.kq)("v-if",!0)]),(0,n._)("input",{type:"file",class:"form-control",id:"document",accept:e.acceptedDocuments,onChange:t[0]||(t[0]=e=>A.handleFileUploads(e.target.files))},null,40,F)])])):""==O.uploadPercentage?((0,n.wg)(),(0,n.iD)("div",x,[(0,n.kq)(" DOCUMENT DESCRIPTION "),(0,n._)("div",U,[M,(0,n.wy)((0,n._)("input",{id:"documentDescription","onUpdate:modelValue":t[1]||(t[1]=e=>O.documentDescriptionModel=e),type:"text",class:"form-control"},null,512),[[d.vModelText,O.documentDescriptionModel]])]),(0,n.kq)(" RESET FORM BUTTON "),L,(0,n._)("div",C,[(0,n._)("button",{onClick:t[2]||(t[2]=(...e)=>A.resetForm&&A.resetForm(...e)),class:"btn btn-warning"}," Reset Form ")])])):((0,n.wg)(),(0,n.iD)("div",$,[(0,n.kq)(" THE UPLOAD SPINNER "),parseFloat(O.uploadPercentage).toFixed(0)<1?((0,n.wg)(),(0,n.iD)("div",N,[(0,n.Uk)(" Uploading "+(0,i.toDisplayString)((100*parseFloat(O.uploadPercentage)).toFixed(2))+"% ",1),E])):((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n.kq)(" THE FINAL WRITING "),S],2112))]))])])]),(0,n._)("div",B,[T,(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:O.disableUploadButton,onClick:t[3]||(t[3]=(...e)=>A.uploadFile&&A.uploadFile(...e))}," Upload File ",8,Z)])])])])}]])},7939:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(6252),i=o(3577);const d={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},s=(0,o(3744).Z)(d,[["render",function(e,t,o,d,s,l){return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.errorList,(e=>((0,n.wg)(),(0,n.iD)("span",{class:"error",key:e.$uid},(0,i.toDisplayString)(e.$message),1)))),128)}]])},431:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(7126);const i={methods:{getNiceDatetime:e=>""===e||null==e?"":n.ou.fromISO(e).toLocaleString(n.ou.DATETIME_MED),getNiceDate:e=>""===e||null==e?"":n.ou.fromISO(e).toLocaleString(n.ou.DATE_MED_WITH_WEEKDAY),disableDate(e){const t=new Date;return t.setMilliseconds(0),t.setSeconds(0),t.setHours(0),e<=t.getTime()-36e5}}}},624:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(7449);const i={data:()=>({darkTheme:n.$}),methods:{getTheme:e=>"dark"===e?n.$:null}}},5808:(e,t,o)=>{o.d(t,{Z:()=>M});var n=o(3985),i=o(5555),d=o(1826),s=o(6443),l=o(1327),a=o(8521),r=o(1056),c=o(4324),u=o(9672),m=o(9867),p=o(1239),h=o(5004),g=o(1321),b=o(1216),_=o(5550),y=o(7702),D=o(7903),f=o(2606),v=o(3843),k=o(2393),w=o(3360),I=o(9714),F=o(1323),x=o(2610),U=o(5968);const M={data:()=>({icons:{arrowUp:n.Z,bugIcon:i.Z,bxBriefcase:d.Z,cardChecklist:s.Z,clipboardIcon:l.Z,documentPdf:a.Z,documentText:r.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:m.Z,infoCircle:p.Z,linkIcon:h.Z,linkIcon2:g.Z,linkOut:b.Z,mailIcon:_.Z,microsoftExcel:y.Z,microsoftPowerpoint:D.Z,microsoftWord:f.Z,noteAdd:v.Z,objectStorage:k.Z,passwordIcon:w.Z,trashCan:I.Z,userIcon:F.Z,usersIcon:x.Z,xCircle:U.Z}})}}}]);