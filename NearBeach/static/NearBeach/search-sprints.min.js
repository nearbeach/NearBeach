"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1373,3531],{246:(e,t,a)=>{a.d(t,{y:()=>i});var s=a(6285),r=a(953);function i(e){const t=(0,r.BA)(e);return""===t||null==t?"":s.c9.fromISO(t).toLocaleString(s.c9.DATETIME_MED)}},3781:(e,t,a)=>{function s(e,t){return 0===t?[]:t<=7?Array.from({length:t},((e,t)=>({destinationPage:t+1,text:`${t+1}`}))):e<=4?[{destinationPage:1,text:"1"},{destinationPage:2,text:"2"},{destinationPage:3,text:"3"},{destinationPage:4,text:"4"},{destinationPage:5,text:"5"},{destinationPage:6,text:">"},{destinationPage:t,text:">>"}]:e>t-4?[{destinationPage:1,text:"<<"},{destinationPage:t-5,text:"<"},{destinationPage:t-4,text:""+(t-4)},{destinationPage:t-3,text:""+(t-3)},{destinationPage:t-2,text:""+(t-2)},{destinationPage:t-1,text:""+(t-1)},{destinationPage:t,text:`${t}`}]:[{destinationPage:1,text:"<<"},{destinationPage:e-2,text:"<"},{destinationPage:e-1,text:""+(e-1)},{destinationPage:e,text:`${e}`},{destinationPage:e+1,text:`${e+1}`},{destinationPage:e+2,text:">"},{destinationPage:t,text:">>"}]}a.d(t,{k:()=>s})},6262:(e,t)=>{t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,s]of t)a[e]=s;return a}},6703:(e,t,a)=>{a.d(t,{A:()=>P});var s=a(641),r=a(33);const i={class:"object-card-list"},n={key:0},l={class:"object-card--detail"},o=["href","target"],c={class:"object-card--detail--link"},d={class:"object-card--detail--description"},u={class:"object-card--status"},h=["href","target"],g={class:"object-card--status--status"},p={class:"small-text"},m={key:2,class:"object-card"};var b=a(2124);const f={name:"RenderObjectCard",methods:{useNiceDatetime:a(246).y,tempTranslate:e=>"kanban_board"===e?"kanban":e},props:{destination:{type:String,default:""},importVariables:{type:Object,default:()=>({header:"",prefix:"",id:0,title:"",status:""})},searchResults:{type:Array,default:()=>[]},target:{type:String,default:""}},computed:{...(0,b.L8)({rootUrl:"getRootUrl"})}},P=(0,a(6262).A)(f,[["render",function(e,t,a,b,f,P){return(0,s.uX)(),(0,s.CE)("div",i,[""!==a.importVariables.header?((0,s.uX)(),(0,s.CE)("h2",n,(0,r.toDisplayString)(a.importVariables.header),1)):(0,s.Q3)("v-if",!0),a.searchResults.length>0?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(a.searchResults,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"object-card",key:t.pk},[(0,s.Lk)("div",l,[(0,s.Lk)("a",{href:`${e.rootUrl}${P.tempTranslate(a.destination)}_information/${t[a.importVariables.id]}/`,target:a.target},[(0,s.Lk)("div",c,(0,r.toDisplayString)(a.importVariables.prefix)+(0,r.toDisplayString)(t[a.importVariables.id]),1),(0,s.Lk)("div",d,(0,r.toDisplayString)(t[a.importVariables.title]),1)],8,o)]),(0,s.Lk)("div",u,[(0,s.Lk)("a",{href:`${e.rootUrl}${a.destination}_information/${t[a.importVariables.id]}/`,target:a.target},[(0,s.Lk)("div",g,(0,r.toDisplayString)(t[a.importVariables.status]),1),(0,s.Lk)("p",p,(0,r.toDisplayString)(P.useNiceDatetime(t[a.importVariables.end_date])),1)],8,h)])])))),128)):(0,s.Q3)("v-if",!0),(0,s.Q3)(" Loading state "),0===a.searchResults.length?((0,s.uX)(),(0,s.CE)("div",m,t[0]||(t[0]=[(0,s.Fv)('<div class="object-card--detail"><p class="card-text placeholder-glow"><span class="placeholder col-1"></span><span class="placeholder col-12"></span></p></div><div class="object-card--status"></div>',2)]))):(0,s.Q3)("v-if",!0)])}]])},7105:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(641),r=a(33);const i={class:"card-header"},n={class:"card-body"},l={class:"card-footer"},o=["aria-label"],c={class:"pagination justify-content-center m-0"},d=["onClick"],u={key:1,class:"page-link"};var h=a(6703),g=a(3781);const p={name:"ListSearchResults",components:{RenderObjectCard:h.A},emits:["get_search_results"],props:{currentPage:{type:Number,default:0},destination:{type:String,default:""},importVariables:{type:Object,default:()=>({header:"",prefix:"",id:0,title:"",status:""})},numberOfPages:{type:Number,default:0},searchResults:{type:Array,default:()=>[]}},watch:{searchResults:{handler(e){this.localSearchResults=e,this.cardClass=""},deep:!0}},data(){return{cardClass:"",localSearchResults:this.searchResults,setOfPages:[]}},methods:{getSetOfPages:g.k,changePage(e){this.cardClass=`height: ${this.$refs.searchCard.offsetHeight}px`,this.localSearchResults=[],this.$emit("get_search_results",{array_of_objects:[this.destination],destination_page:e}),this.setOfPages=this.getSetOfPages(e,this.numberOfPages)},getClasses(e){return parseInt(e)===this.currentPage?"page-item active":"page-item"}},mounted(){this.setOfPages=(0,g.k)(1,this.numberOfPages)}},m=(0,a(6262).A)(p,[["render",function(e,t,a,h,g,p){const m=(0,s.g2)("render-object-card");return(0,s.uX)(),(0,s.CE)("div",{class:"card search-card",style:(0,r.normalizeStyle)(g.cardClass),ref:"searchCard"},[(0,s.Lk)("div",i,[(0,s.Lk)("h2",null,(0,r.toDisplayString)(a.importVariables.header)+" Search Results",1)]),(0,s.Lk)("div",n,[(0,s.bF)(m,{"search-results":g.localSearchResults,"import-variables":a.importVariables,destination:a.destination},null,8,["search-results","import-variables","destination"])]),(0,s.Lk)("div",l,[g.setOfPages.length>1?((0,s.uX)(),(0,s.CE)("nav",{key:0,"aria-label":`Pagination for ${a.importVariables.header}`},[(0,s.Lk)("ul",c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.setOfPages,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e.destinationPage,class:(0,r.normalizeClass)(p.getClasses(e.destinationPage))},[parseInt(e.destinationPage)!==parseInt(a.currentPage)?((0,s.uX)(),(0,s.CE)("a",{key:0,class:"page-link",href:"javascript:void(0)",onClick:t=>p.changePage(e.destinationPage)},(0,r.toDisplayString)(e.text),9,d)):((0,s.uX)(),(0,s.CE)("span",u,(0,r.toDisplayString)(e.text),1))],2)))),128))])],8,o)):(0,s.Q3)("v-if",!0)])],4)}]])},8348:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(641),r=a(3751);const i={class:"card"},n={class:"card-body"},l={class:"form-row"},o={class:"form-group"},c={class:"form-group"},d={key:1,class:"alert alert-warning"},u={name:"SearchObjects",components:{ListSearchResults:a(7105).default},props:{rootUrl:{type:String,default:"/"}},data(){return{currentPage:1,includeClosedObjectsModel:this.includeClosed,numberOfPages:1,sprintVariables:{header:"Sprint",prefix:"spr",id:"sprint_id",title:"sprint_name",status:"sprint_status"},searchModel:"",searchResults:[],searchTimeout:""}},methods:{changePage(e){this.currentPage=e.destination_page,this.getSearchResults()},getClasses(e){return parseInt(e)===this.currentPage?"page-item active":"page-item"},getSearchResults(){const e=new FormData;e.set("search",this.searchModel),e.set("include_closed",this.includeClosedObjectsModel),e.set("array_of_objects","sprint"),e.set("destination_page",this.currentPage),this.axios.post(`${this.rootUrl}search/sprint/data/`,e).then((e=>{this.searchResults=e.data.sprint,this.numberOfPages=e.data.sprint_number_of_pages,this.currentPage=e.data.sprint_current_page})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to get search results",message:`Sorry, we failed to get your search results. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}},watch:{includeClosedObjectsModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.getSearchResults()},searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(this.getSearchResults,500)}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl}),void 0===this.includeClosed&&(this.includeClosedObjectsModel=!1)}},h=(0,a(6262).A)(u,[["render",function(e,t,a,u,h,g){const p=(0,s.g2)("list-search-results");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",i,[(0,s.Lk)("div",n,[(0,s.Q3)(" HEADING "),t[4]||(t[4]=(0,s.Lk)("h1",null,"Search Sprints",-1)),t[5]||(t[5]=(0,s.Lk)("hr",null,null,-1)),(0,s.Q3)(" SEARCH FIELD "),(0,s.Lk)("div",l,[(0,s.Lk)("div",o,[t[2]||(t[2]=(0,s.Lk)("label",null,"Search:",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>h.searchModel=e),maxlength:"250"},null,512),[[r.vModelText,h.searchModel]])]),(0,s.Lk)("div",c,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox",id:"inlcudeClosedObjects","onUpdate:modelValue":t[1]||(t[1]=e=>h.includeClosedObjectsModel=e)},null,512),[[r.vModelCheckbox,h.includeClosedObjectsModel]]),t[3]||(t[3]=(0,s.Lk)("label",{for:"inlcudeClosedObjects"}," Include Closed Objects",-1))])])])]),t[6]||(t[6]=(0,s.Lk)("br",null,null,-1)),(0,s.Q3)(" SPRINTS "),h.searchResults.length>0?((0,s.uX)(),(0,s.Wv)(p,{key:0,"search-results":h.searchResults,"import-variables":h.sprintVariables,"number-of-pages":h.numberOfPages,"current-page":h.currentPage,onGet_search_results:g.changePage,destination:"sprint"},null,8,["search-results","import-variables","number-of-pages","current-page","onGet_search_results"])):(0,s.Q3)("v-if",!0),(0,s.Q3)(" WHEN THERE ARE NO RESULTS "),0===h.searchResults.length?((0,s.uX)(),(0,s.CE)("div",d," Sorry - but there are currently no sprints matching the search terms ")):(0,s.Q3)("v-if",!0)])}]])}}]);