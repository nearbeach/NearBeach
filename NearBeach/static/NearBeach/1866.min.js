"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1866],{1866:(t,s,e)=>{e.d(s,{Z:()=>xt});var o=e(6252),i=e(3577);const a={class:"text-instructions"},r={key:0,class:"alert alert-dark"},d={key:1,class:"group-card-list"},l={class:"group-card--details"},n={key:0,class:"group-card--remove"},u={key:0,class:"group-card"},c=[(0,o._)("div",{class:"group-card--details"},"++ Adding New Group ++",-1)],p=(0,o._)("div",{class:"spacer"},null,-1),g={class:"row submit-row"},h={class:"col-md-12"},m=(0,o._)("hr",null,null,-1),_={class:"text-instructions"},b={key:2,class:"alert alert-dark"},v={key:3,class:"user-card-list"},U=["src"],w={class:"user-card--details"},G={class:"user-card--name"},L={class:"user-card--email"},y={key:0,class:"user-card--remove"},k={key:0,class:"user-card"},D=[(0,o._)("div",{class:"user-card--details"},"++ Adding User(s) ++",-1)],S=(0,o._)("div",{class:"spacer"},null,-1),j={class:"row submit-row"},f={class:"col-md-12"};var A=e(3058),$=e(5808),x=e(6542),I=e(9669),M=e.n(I),C=e(3138);const W={class:"modal fade",id:"addGroupModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},q={class:"modal-dialog modal-lg"},T={class:"modal-content"},F={class:"modal-header"},E=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addGroupCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),N={class:"modal-body"},O={key:0,class:"row"},Z={class:"col-md-4"},B=(0,o._)("strong",null,"Add Groups",-1),P={class:"text-instructions"},z={class:"text-instructions"},R={class:"col-md-8"},J={key:1,class:"row"},H=(0,o._)("div",{class:"col-md-6"},[(0,o._)("strong",null,"Sorry - no results"),(0,o._)("p",{class:"text-instructions"}," This could be because "),(0,o._)("ul",{class:"text-instructions"},[(0,o._)("li",null,"There are no more groups left to add")])],-1),K={class:"col-md-6 no-search"},Y=["src"],Q={class:"modal-footer"},V=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),X=["disabled"];var tt=e(2001),st=e(989);const et=e(9669),ot={name:"AddGroupWizard",components:{Icon:x.JO,NSelect:tt.Z},inject:["nextTick"],computed:{...(0,st.Se)({destination:"getDestination",locationId:"getLocationId",potentialGroupList:"getPotentialGroupList",rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},watch:{potentialGroupList(t){void 0!==t&&(this.groupFixList=t.map((t=>({value:t.group_id,label:t.group_name}))))}},mixins:[A.Z,$.Z],data:()=>({groupFixList:[],groupModel:[]}),methods:{addGroup(){this.$store.commit("updateAddingGroupStatus",{addingGroupStatus:!0});const t=new FormData;this.groupModel.forEach((s=>{t.append("group_list",s)})),et.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_group/`,t).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list}),this.$store.commit("updateAddingGroupStatus",{addingGroupStatus:!1}),document.getElementById("addGroupCloseButton").click()})).catch((t=>{this.showErrorModal(t,this.destination)}))}}};var it=e(3744);const at=(0,it.Z)(ot,[["render",function(t,s,e,a,r,d){const l=(0,o.up)("Icon"),n=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",W,[(0,o._)("div",q,[(0,o._)("div",T,[(0,o._)("div",F,[(0,o._)("h2",null,[(0,o.Wm)(l,{icon:t.icons.groupPresentation},null,8,["icon"]),(0,o.Uk)(" Add Group Wizard ")]),E]),(0,o._)("div",N,[r.groupFixList.length>0?((0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("div",Z,[B,(0,o._)("p",P," Use the following multiple select to select which groups you want to add to this "+(0,i.toDisplayString)(t.destination)+". ",1),(0,o._)("p",z," Please note: A user's group has to be added to the "+(0,i.toDisplayString)(t.destination)+" before the user can be added. ",1)]),(0,o._)("div",R,[(0,o.Wm)(n,{options:r.groupFixList,value:r.groupModel,"onUpdate:value":s[0]||(s[0]=t=>r.groupModel=t),multiple:""},null,8,["options","value"])])])):((0,o.wg)(),(0,o.iD)("div",J,[H,(0,o._)("div",K,[(0,o._)("img",{src:`${t.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,Y)])]))]),(0,o._)("div",Q,[V,(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:0==r.groupModel.length,onClick:s[1]||(s[1]=(...t)=>d.addGroup&&d.addGroup(...t))}," Add Group(s) ",8,X)])])])])}]]),rt={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},dt={class:"modal-dialog modal-lg"},lt={class:"modal-content"},nt={class:"modal-header"},ut=(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,o._)("span",{"aria-hidden":"true"})],-1),ct={class:"modal-body"},pt={key:0,class:"row"},gt={class:"col-md-4"},ht=(0,o._)("strong",null,"Add Users",-1),mt={class:"text-instructions"},_t={class:"text-instructions"},bt={class:"col-md-8"},vt={key:1,class:"row"},Ut={class:"col-md-6"},wt=(0,o._)("strong",null,"Sorry - no results",-1),Gt=(0,o._)("p",{class:"text-instructions"}," This could be because ",-1),Lt={class:"text-instructions"},yt=(0,o._)("li",null,"There are no more users left to add",-1),kt={class:"col-md-6 no-search"},Dt=["src"],St={class:"modal-footer"},jt=(0,o._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),ft=["disabled"],At={name:"AddUserWizard",components:{Icon:x.JO,NSelect:tt.Z},inject:["nextTick"],mixins:[A.Z,$.Z],computed:{...(0,st.Se)({destination:"getDestination",locationId:"getLocationId",potentialUserList:"getPotentialUserList",rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),watch:{potentialUserList(t){void 0!==t&&(this.userFixList=t.map((t=>({value:t.id,label:`${t.username}: ${t.first_name} ${t.last_name}`}))))}},methods:{addUser(){this.$store.commit("updateAddingUserStatus",{addingUserStatus:!0});const t=new FormData;this.userModel.forEach((s=>{t.append("user_list",s)})),M().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_user/`,t).then((t=>{document.getElementById("addUserCloseButton").click(),this.userModel=[],this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list}),this.$store.commit("updateAddingUserStatus",{addingUserStatus:!1})})).catch((t=>{this.showErrorModal(t,this.destination)}))}}},$t={name:"GroupsAndUsersModule",components:{AddGroupWizard:at,AddUserWizard:(0,it.Z)(At,[["render",function(t,s,e,a,r,d){const l=(0,o.up)("Icon"),n=(0,o.up)("n-select");return(0,o.wg)(),(0,o.iD)("div",rt,[(0,o._)("div",dt,[(0,o._)("div",lt,[(0,o._)("div",nt,[(0,o._)("h2",null,[(0,o.Wm)(l,{icon:t.icons.userIcon},null,8,["icon"]),(0,o.Uk)(" Add User Wizard ")]),ut]),(0,o._)("div",ct,[r.userFixList.length>0?((0,o.wg)(),(0,o.iD)("div",pt,[(0,o._)("div",gt,[ht,(0,o._)("p",mt," Use the following multiple select to select which users you want to add to this "+(0,i.toDisplayString)(t.destination)+". ",1),(0,o._)("p",_t," Please note: A user's group has to be added to the "+(0,i.toDisplayString)(t.destination)+" before the user can be added. ",1)]),(0,o._)("div",bt,[(0,o.Wm)(n,{options:r.userFixList,value:r.userModel,"onUpdate:value":s[0]||(s[0]=t=>r.userModel=t),multiple:""},null,8,["options","value"])])])):((0,o.wg)(),(0,o.iD)("div",vt,[(0,o._)("div",Ut,[wt,Gt,(0,o._)("ul",Lt,[yt,(0,o._)("li",null," The user you are after is in a group not current added to this "+(0,i.toDisplayString)(t.destination),1)])]),(0,o._)("div",kt,[(0,o._)("img",{src:`${t.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,Dt)])]))]),(0,o._)("div",St,[jt,(0,o._)("button",{type:"button",class:"btn btn-primary",disabled:0===r.userModel.length,onClick:s[1]||(s[1]=(...t)=>d.addUser&&d.addUser(...t))}," Add User(s) ",8,ft)])])])])}]]),Icon:x.JO},inject:["nextTick"],computed:{...(0,st.Se)({addingGroupStatus:"getAddingGroupStatus",addingUserStatus:"getAddingUserStatus",destination:"getDestination",locationId:"getLocationId",objectGroupList:"getObjectGroupList",objectUserList:"getObjectUserList",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},mixins:[A.Z,$.Z],methods:{addNewGroup(){new C.u_(document.getElementById("addGroupModal")).show()},addNewUser(){new C.u_(document.getElementById("addUserModal")).show()},getGroupAndUserData(){M().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_and_user_data/`).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.showErrorModal(t,"Fetching Group and Users data")}))},profilePicture(t){return null!==t&&""!==t?`${this.rootUrl}private/${t}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`},removeGroup(t){this.$store.commit("updateGroupsAndUsers",{objectGroupList:this.objectGroupList.filter((s=>s.group_id!==t))});const s=new FormData;s.set("group_id",t),M().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_group/`,s).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.showErrorModal(t,this.destination)}))},removeUser(t){this.$store.commit("updateGroupsAndUsers",{objectUserList:this.objectUserList.filter((s=>s.username!==t))});const s=new FormData;s.set("username",t),M().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_user/`,s).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.showErrorModal(t,this.destination)}))}},mounted(){this.$nextTick((()=>{0!==this.locationId?this.getGroupAndUserData():setTimeout((()=>{this.getGroupAndUserData()}),100)}))}},xt=(0,it.Z)($t,[["render",function(t,s,e,A,$,x){const I=(0,o.up)("Icon"),M=(0,o.up)("add-group-wizard"),C=(0,o.up)("add-user-wizard");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.kq)(" GROUPS "),(0,o._)("h2",null,[(0,o.Wm)(I,{icon:t.icons.groupPresentation},null,8,["icon"]),(0,o.Uk)(" Groups ")]),(0,o._)("p",a," The following list are all the Groups connected to this "+(0,i.toDisplayString)(t.destination)+". Users will have to be included in these groups to be added to this "+(0,i.toDisplayString)(t.destination),1),0!=t.objectGroupList.length||t.addingGroupStatus?((0,o.wg)(),(0,o.iD)("div",d,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.objectGroupList,(s=>((0,o.wg)(),(0,o.iD)("div",{key:s.group_id,class:"group-card"},[(0,o._)("div",l,(0,i.toDisplayString)(s.group_name),1),t.userLevel>=3&&t.objectGroupList.length>1?((0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(I,{icon:t.icons.trashCan,onClick:t=>x.removeGroup(s.group_id)},null,8,["icon","onClick"])])):(0,o.kq)("v-if",!0)])))),128)),t.addingGroupStatus?((0,o.wg)(),(0,o.iD)("div",u,c)):(0,o.kq)("v-if",!0)])):((0,o.wg)(),(0,o.iD)("div",r," Sorry - there are no groups active. ")),p,(0,o.kq)(" ADD GROUP "),(0,o.kq)(" TO DO - limit it to certain users "),(0,o._)("div",g,[(0,o._)("div",h,[t.userLevel>1?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:s[0]||(s[0]=(...t)=>x.addNewGroup&&x.addNewGroup(...t))},"Add Group to "+(0,i.toDisplayString)(t.destination),1)):(0,o.kq)("v-if",!0)])]),m,(0,o.kq)(" USERS "),(0,o._)("h2",null,[(0,o.Wm)(I,{icon:t.icons.userIcon},null,8,["icon"]),(0,o.Uk)(" Users ")]),(0,o._)("p",_," The following are a list of users who are connected to this "+(0,i.toDisplayString)(t.destination)+". Please note - users have to be a part of the groups list above. ",1),0!==t.objectUserList.length||t.addingUserStatus?((0,o.wg)(),(0,o.iD)("div",v,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.objectUserList,(s=>((0,o.wg)(),(0,o.iD)("div",{key:s.username,class:"user-card"},[(0,o._)("img",{src:x.profilePicture(s.profile_picture),alt:"default profile",class:"user-card--profile"},null,8,U),(0,o._)("div",w,[(0,o._)("div",G,(0,i.toDisplayString)(s.first_name)+" "+(0,i.toDisplayString)(s.last_name),1),(0,o._)("div",L,(0,i.toDisplayString)(s.email),1)]),t.userLevel>=3?((0,o.wg)(),(0,o.iD)("div",y,[(0,o.Wm)(I,{icon:t.icons.trashCan,onClick:t=>x.removeUser(s.username)},null,8,["icon","onClick"])])):(0,o.kq)("v-if",!0)])))),128)),t.addingUserStatus?((0,o.wg)(),(0,o.iD)("div",k,D)):(0,o.kq)("v-if",!0)])):((0,o.wg)(),(0,o.iD)("div",b," Sorry - there are no current users active. ")),S,(0,o.kq)(" TO DO - limit it to certain users "),(0,o._)("div",j,[(0,o._)("div",f,[t.userLevel>1?((0,o.wg)(),(0,o.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:s[1]||(s[1]=(...t)=>x.addNewUser&&x.addNewUser(...t))},"Add User to "+(0,i.toDisplayString)(t.destination),1)):(0,o.kq)("v-if",!0)])]),(0,o.kq)(" MODALS "),(0,o.Wm)(M),(0,o.Wm)(C)])}]])}}]);