"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8146],{7267:(t,e,o)=>{o.d(e,{Z:()=>v});var n,i=o(6252),a=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],s=function(t){return-1!==a.map((function(t){return t.toLowerCase()})).indexOf(t.toLowerCase())},l=0,r=function(t){var e=Date.now();return t+"_"+Math.floor(1e9*Math.random())+ ++l+String(e)},d=function(t){return void 0===t||""===t?[]:Array.isArray(t)?t:t.split(" ")},c=function(){return{listeners:[],scriptId:r("tiny-script"),scriptLoaded:!1}},u=(n=c(),{load:function(t,e,o){n.scriptLoaded?o():(n.listeners.push(o),t.getElementById(n.scriptId)||function(t,e,o,i){var a=e.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=t,a.src=o;var s=function(){a.removeEventListener("load",s),n.listeners.forEach((function(t){return t()})),n.scriptLoaded=!0};a.addEventListener("load",s),e.head&&e.head.appendChild(a)}(n.scriptId,t,e))},reinitialize:function(){n=c()}}),m=function(){var t="undefined"!=typeof window?window:o.g;return t&&t.tinymce?t.tinymce:null},g={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(t){return"html"===t||"text"===t}}},p=o(2262),h=function(){return h=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},h.apply(this,arguments)};const v=(0,i.aZ)({props:g,setup:function(t,e){var o=t.init?h({},t.init):{},n=(0,p.BK)(t),a=n.disabled,l=n.modelValue,c=n.tagName,g=(0,p.iH)(null),v=null,f=t.id||r("tiny-vue"),y=t.init&&t.init.inline||t.inline,b=!!e.attrs["onUpdate:modelValue"],_=!0,w=t.initialValue?t.initialValue:"",k="",C=function(){var n,a,r,c=(n=_,b?function(){return(null==l?void 0:l.value)?l.value:""}:function(){return n?w:k}),u=h(h({},o),{readonly:t.disabled,target:g.value,plugins:(a=o.plugins,r=t.plugins,d(a).concat(d(r))),toolbar:t.toolbar||o.toolbar,inline:y,setup:function(n){v=n,n.on("init",(function(o){return function(t,e,o,n,a,l){n.setContent(l()),o.attrs["onUpdate:modelValue"]&&function(t,e,o,n){var a=t.modelEvents?t.modelEvents:null,s=Array.isArray(a)?a.join(" "):a;(0,i.YP)(n,(function(e,n){o&&"string"==typeof e&&e!==n&&e!==o.getContent({format:t.outputFormat})&&o.setContent(e)})),o.on(s||"change input undo redo",(function(){e.emit("update:modelValue",o.getContent({format:t.outputFormat}))}))}(e,o,n,a),function(t,e,o){Object.keys(e).filter(s).forEach((function(n){var i=e[n];"function"==typeof i&&("onInit"===n?i(t,o):o.on(n.substring(2),(function(t){return i(t,o)})))}))}(t,o.attrs,n)}(o,t,e,n,l,c)})),"function"==typeof o.setup&&o.setup(n)}});(function(t){return null!==t&&"textarea"===t.tagName.toLowerCase()})(g.value)&&(g.value.style.visibility=""),m().init(u),_=!1};return(0,i.YP)(a,(function(t){var e;null!==v&&("function"==typeof(null===(e=v.mode)||void 0===e?void 0:e.set)?v.mode.set(t?"readonly":"design"):v.setMode(t?"readonly":"design"))})),(0,i.YP)(c,(function(t){var e;b||(k=v.getContent()),null===(e=m())||void 0===e||e.remove(v),(0,i.Y3)((function(){return C()}))})),(0,i.bv)((function(){if(null!==m())C();else if(g.value&&g.value.ownerDocument){var e=t.cloudChannel?t.cloudChannel:"6",o=t.apiKey?t.apiKey:"no-api-key",n=null==t.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(o,"/tinymce/").concat(e,"/tinymce.min.js"):t.tinymceScriptSrc;u.load(g.value.ownerDocument,n,C)}})),(0,i.Jd)((function(){null!==m()&&m().remove(v)})),y||((0,i.dl)((function(){_||C()})),(0,i.se)((function(){var t;b||(k=v.getContent()),null===(t=m())||void 0===t||t.remove(v)}))),e.expose({rerender:function(t){var e;k=v.getContent(),null===(e=m())||void 0===e||e.remove(v),o=h(h({},o),t),(0,i.Y3)((function(){return C()}))},getEditor:function(){return v}}),function(){return y?function(t,e,o,n){return t(n||"div",{id:e,ref:o})}(i.h,f,g,t.tagName):(0,i.h)("textarea",{id:f,visibility:"hidden",ref:g})}}})},1624:(t,e,o)=>{o.d(e,{Z:()=>f});var n=o(6252),i=o(3577);const a={class:"customer-list"},s=["src"],l={class:"customer-card--details"},r={class:"customer-card--name"},d=["href"],c={class:"customer-card--email"},u={key:0,class:"customer-card--remove"};var m=o(6542),g=o(5808),p=o(989);const h=o(9669),v={name:"CustomersListModule",components:{Icon:m.JO},props:{customerResults:{type:Array,default:()=>[]}},computed:{...(0,p.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"}),defaultCustomerImage(){return`${this.staticUrl}/NearBeach/images/placeholder/people_tax.svg`}},mixins:[g.Z],data:()=>({}),methods:{getCustomerImage(t){const e=t.fields.customer_profile_picture;return""===e||null===e?this.defaultCustomerImage:`${this.rootUrl}private/${e}`},removeCustomer(t){const e=new FormData;e.set("customer_id",t),h.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_customer/`,e).then((()=>{this.$emit("remove_customer",t)}))}}},f=(0,o(3744).Z)(v,[["render",function(t,e,o,m,g,p){const h=(0,n.up)("Icon");return(0,n.wg)(),(0,n.iD)("div",a,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.customerResults,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.pk,class:"customer-card"},[(0,n.kq)(" CUSOMER PROFILE "),(0,n._)("img",{src:p.getCustomerImage(e),alt:"default profile picture"},null,8,s),(0,n.kq)(" CUSTOMER DETAILS "),(0,n._)("div",l,[(0,n._)("div",r,[(0,n._)("a",{href:`${t.rootUrl}customer_information/${e.pk}/`},(0,i.toDisplayString)(e.fields.customer_first_name)+" "+(0,i.toDisplayString)(e.fields.customer_last_name),9,d)]),(0,n._)("div",c,[(0,n.Wm)(h,{icon:t.icons.mailIcon},null,8,["icon"]),(0,n.Uk)(" "+(0,i.toDisplayString)(e.fields.customer_email),1)])]),t.userLevel>=2?((0,n.wg)(),(0,n.iD)("div",u,[(0,n.Wm)(h,{icon:t.icons.trashCan,onClick:t=>p.removeCustomer(e.pk)},null,8,["icon","onClick"])])):(0,n.kq)("v-if",!0)])))),128))])}]])},9926:(t,e,o)=>{o.d(e,{Z:()=>B});var n=o(6252),i=o(3577);const a=(0,n._)("h2",null,"Assigned Tags",-1),s={class:"text-instructions"},l={class:"tag-list"},r=["onClick"],d=(0,n._)("hr",null,null,-1),c={class:"row submit-row"},u={class:"col-md-12"};var m=o(3138),g=o(6542),p=o(5808);const h={class:"modal fade",id:"addTagModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},v={class:"modal-dialog"},f={class:"modal-content"},y={class:"modal-header"},b=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addTagsCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),_={class:"modal-body"},w={class:"row"},k={class:"col-md-4"},C=(0,n._)("strong",null,"Add Tag",-1),S={class:"text-instructions"},D={class:"col-md-8"},I=(0,n._)("label",null,"All Tag List",-1),N={class:"modal-footer"},T=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var U=o(3058),L=o(9669),M=o.n(L),A=o(2001),x=o(989);const O={name:"AddTagWizard",components:{Icon:g.JO,NSelect:A.Z},inject:["nextTick"],props:{assignedTags:{type:Array,default:()=>[]},destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[U.Z,p.Z],data:()=>({allTagList:[],tagModel:[]}),computed:{...(0,x.Se)({rootUrl:"getRootUrl"}),tagList(){return this.allTagList.filter((t=>this.assignedTags.findIndex((e=>e.pk===parseInt(t.value)))<0))}},methods:{addTag(){const t=new FormData;this.tagModel.forEach((e=>{t.append("tag_id",e)})),M().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_tags/`,t).then((t=>{this.$emit("add_tags",t.data),document.getElementById("addTagsCloseButton").click(),this.tagModel=[]}))},getTagList(){M().post(`${this.rootUrl}object_data/tag_list_all/`).then((t=>{this.allTagList=t.data.map((t=>({value:t.pk,label:t.fields.tag_name})))})).catch((t=>{}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.getTagList()}))}};var $=o(3744);const E=(0,$.Z)(O,[["render",function(t,e,o,a,s,l){const r=(0,n.up)("Icon"),d=(0,n.up)("n-select");return(0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",v,[(0,n._)("div",f,[(0,n._)("div",y,[(0,n._)("h2",null,[(0,n.Wm)(r,{icon:t.icons.usersIcon},null,8,["icon"]),(0,n.Uk)(" Add Tags Wizard ")]),b]),(0,n._)("div",_,[(0,n._)("div",w,[(0,n._)("div",k,[C,(0,n._)("p",S," Use the dropdown to select one or many lables to add to the "+(0,i.toDisplayString)(o.destination)+". ",1)]),(0,n._)("div",D,[I,(0,n.Wm)(d,{label:"tag",multiple:"",options:l.tagList,value:s.tagModel,"onUpdate:value":e[0]||(e[0]=t=>s.tagModel=t)},null,8,["options","value"])])])]),(0,n._)("div",N,[T,(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>l.addTag&&l.addTag(...t))}," Add Tag ")])])])])}]]),R=o(9669),j={name:"ListTagsModule",components:{AddTagWizard:E,Icon:g.JO},inject:["nextTick"],data:()=>({tagList:[]}),mixins:[p.Z],computed:{...(0,x.Se)({destination:"getDestination",locationId:"getLocationId",rootUrl:"getRootUrl",userLevel:"getUserLevel"})},methods:{addTags(t){this.tagList=t},createNewTag(){new m.u_(document.getElementById("addTagModal")).show()},getAssignedTags(){R.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/tag_list/`).then((t=>{this.tagList=t.data})).catch((t=>{}))},removeTag(t){const e=new FormData;e.set("tag",t),e.set("object_enum",this.destination),e.set("object_id",this.locationId),R.post(`${this.rootUrl}object_data/delete_tag/`,e).then((e=>{this.tagList=this.tagList.filter((e=>e.pk!==t))})).catch((t=>{}))}},mounted(){["requirement_item"].indexOf(this.destination)>=0||this.$nextTick((()=>{this.getAssignedTags()}))}},B=(0,$.Z)(j,[["render",function(t,e,o,m,g,p){const h=(0,n.up)("Icon"),v=(0,n.up)("add-tag-wizard");return(0,n.wg)(),(0,n.iD)("div",null,[a,(0,n._)("p",s," Here are all tags associated with this "+(0,i.toDisplayString)(t.destination)+'. You can add more tags by clicking on the "Add Tag" button. ',1),(0,n._)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(g.tagList,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.pk,class:"single-tag",style:(0,i.normalizeStyle)(`background-color: ${e.fields.tag_colour};`)},[(0,n.Uk)((0,i.toDisplayString)(e.fields.tag_name)+" ",1),t.userLevel>1?((0,n.wg)(),(0,n.iD)("span",{key:0,onClick:t=>p.removeTag(e.pk)},[(0,n.Wm)(h,{icon:t.icons.xCircle},null,8,["icon"])],8,r)):(0,n.kq)("v-if",!0)],4)))),128))]),(0,n.kq)(" ADD TAG BUTTON "),d,(0,n._)("div",c,[(0,n._)("div",u,[t.userLevel>1?((0,n.wg)(),(0,n.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>p.createNewTag&&p.createNewTag(...t))},"Add Tag to "+(0,i.toDisplayString)(t.destination),1)):(0,n.kq)("v-if",!0)])]),(0,n.kq)(" ADD TAG MODULE "),(0,n.Wm)(v,{destination:t.destination,"location-id":t.locationId,"assigned-tags":g.tagList,onAdd_tags:e[1]||(e[1]=t=>p.addTags(t))},null,8,["destination","location-id","assigned-tags"])])}]])},4840:(t,e,o)=>{o.d(e,{Z:()=>A});var n=o(6252),i=o(3577);const a={class:"text-instructions"},s=(0,n._)("hr",null,null,-1),l={class:"row submit-row"},r={class:"col-md-12"};var d=o(3138),c=o(3058),u=o(5808),m=o(9669),g=o.n(m),p=o(6542),h=o(6255);const v={class:"modal fade",id:"newNoteModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},f={class:"modal-dialog modal-lg",role:"document"},y={class:"modal-content"},b={class:"modal-header"},_=(0,n._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"newNoteCloseButton"},[(0,n._)("span",{"aria-hidden":"true"})],-1),w={class:"modal-body"},k=(0,n._)("p",{class:"text-instructions"}," Use the text editor to type out your note. Click on the submit button to submit the note. ",-1),C={class:"modal-footer"},S=["disabled"],D=(0,n._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1);var I=o(7267),N=o(989);const T={name:"NewHistoryNoteWizard",components:{editor:I.Z,Icon:p.JO},props:{destination:{type:String,default:""},locationId:{type:Number,default:0}},mixins:[c.Z,u.Z],data:()=>({newNoteModel:""}),computed:{...(0,N.Se)({contentCss:"getContentCss",rootUrl:"getRootUrl",skin:"getSkin"})},methods:{submitNote(){const t=new FormData;t.set("destination",this.destination),t.set("location_id",this.locationId),t.set("note",this.newNoteModel),g().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_notes/`,t).then((t=>{this.$emit("update_note_history_results",t.data),document.getElementById("newNoteCloseButton").click(),this.newNoteModel=""})).catch((t=>{this.showErrorModal(t,this.destination)}))}}};var U=o(3744);const L=(0,U.Z)(T,[["render",function(t,e,o,i,a,s){const l=(0,n.up)("Icon"),r=(0,n.up)("editor");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.kq)(" NEW HISTORY NOTE "),(0,n._)("div",v,[(0,n._)("div",f,[(0,n._)("div",y,[(0,n._)("div",b,[(0,n._)("h2",null,[(0,n.Wm)(l,{icon:t.icons.noteAdd},null,8,["icon"]),(0,n.Uk)(" New Note ")]),_]),(0,n._)("div",w,[k,(0,n.Wm)(r,{init:{height:300,menubar:!1,plugins:["lists","codesample","table"],toolbar:["undo redo | formatselect | alignleft aligncenter alignright alignjustify","bold italic strikethrough underline backcolor | table | bullist numlist outdent indent | removeformat | codesample"],skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:a.newNoteModel,"onUpdate:modelValue":e[0]||(e[0]=t=>a.newNoteModel=t)},null,8,["init","modelValue"])]),(0,n._)("div",C,[(0,n._)("button",{type:"button",class:"btn btn-primary",disabled:""==a.newNoteModel,onClick:e[1]||(e[1]=(...t)=>s.submitNote&&s.submitNote(...t))}," Submit Note ",8,S),D])])])])],2112)}]]),M={name:"NotesModule",components:{Icon:p.JO,ListNotes:h.Z,NewHistoryNoteWizard:L},inject:["nextTick"],mixins:[c.Z,u.Z],data:()=>({noteHistoryResults:[]}),computed:{...(0,N.Se)({destination:"getDestination",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},methods:{createNewNote(){new d.u_(document.getElementById("newNoteModal")).show()},getNoteHistoryResults(){g().post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/note_list/`).then((t=>{this.noteHistoryResults=t.data})).catch((t=>{this.showErrorModal(t,this.destination)}))},updateNoteHistoryResults(t){this.noteHistoryResults.push(t[0])}},mounted(){this.$nextTick((()=>{this.getNoteHistoryResults()}))}},A=(0,U.Z)(M,[["render",function(t,e,o,d,c,u){const m=(0,n.up)("Icon"),g=(0,n.up)("list-notes"),p=(0,n.up)("new-history-note-wizard");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("h2",null,[(0,n.Wm)(m,{icon:t.icons.noteAdd},null,8,["icon"]),(0,n.Uk)(" Note History ")]),(0,n._)("p",a," The following are saved notes against this "+(0,i.toDisplayString)(t.destination)+". Add notes by clicking on the button below. ",1),(0,n.Wm)(g,{"note-history-results":c.noteHistoryResults,destination:t.destination},null,8,["note-history-results","destination"]),(0,n.kq)(" ADD NOTE HISTORY "),(0,n.kq)(" TO DO - limit it to certain users "),s,(0,n._)("div",l,[(0,n._)("div",r,[t.userLevel>1?((0,n.wg)(),(0,n.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>u.createNewNote&&u.createNewNote(...t))},"Add Note to "+(0,i.toDisplayString)(t.destination),1)):(0,n.kq)("v-if",!0)])]),(0,n.kq)(" Modals for Notes section "),(0,n.Wm)(p,{"location-id":t.locationId,destination:t.destination,onUpdate_note_history_results:e[1]||(e[1]=t=>u.updateNoteHistoryResults(t))},null,8,["location-id","destination"])])}]])}}]);