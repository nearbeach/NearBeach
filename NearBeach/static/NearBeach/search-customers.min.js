"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[3350],{3744:(e,t)=>{t.Z=(e,t)=>{const s=e.__vccOpts||e;for(const[e,r]of t)s[e]=r;return s}},2696:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var r=s(6252),o=s(9963);const a={class:"card"},l={class:"card-body"},c=(0,r._)("h1",null,"Search Customers",-1),i=(0,r._)("br",null,null,-1),n={class:"form-group"},u=(0,r._)("label",null,"Search:",-1),m=(0,r._)("hr",null,null,-1),h={key:0,class:"alert alert-warning"},d=(0,r._)("hr",null,null,-1),p={class:"row submit-row"},f={class:"col-md-12"},g=["href"];var Z=s(3577);const _=["src"],S={class:"customer-name"},U=["href"],v={class:"customer-email"},w=["href"];var y=s(5808),k=s(6542),I=s(989);const C={name:"ListCustomers",components:{Icon:k.JO},props:{customerResults:{type:Array,default:()=>[]}},computed:{...(0,I.Se)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},mixins:[y.Z],methods:{getProfilePicture(e){const t=e.fields.customer_profile_picture;return""===t||null===t?`${this.staticUrl}NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${t}`}}};var b=s(3744);const R={name:"SearchCustomers",components:{ListCustomers:(0,b.Z)(C,[["render",function(e,t,s,o,a,l){const c=(0,r.up)("Icon");return(0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.customerResults,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.pk,class:"customer-details"},[(0,r._)("img",{src:l.getProfilePicture(t),alt:"Stakeholder Logo",class:"customer-image"},null,8,_),(0,r._)("div",S,[(0,r._)("a",{href:`${e.rootUrl}customer_information/${t.pk}/`},(0,Z.toDisplayString)(t.fields.customer_first_name)+" "+(0,Z.toDisplayString)(t.fields.customer_last_name),9,U)]),(0,r._)("div",v,[(0,r.Wm)(c,{icon:e.icons.mailIcon},null,8,["icon"]),(0,r.Uk)(" Email: "),(0,r._)("a",{href:`mailto:${t.fields.customer_email}`},(0,Z.toDisplayString)(t.fields.customer_email),9,w)])])))),128)}]])},props:{customerResults:{type:Array,default:()=>[]},staticUrl:{type:String,default:"/"},rootUrl:{type:String,default:"/"}},data(){return{localCustomerResults:this.customerResults,searchModel:"",searchTimeout:""}},methods:{getSearchResults(){const e=new FormData;e.set("search",this.searchModel),this.axios.post(`${this.rootUrl}search/customer/data/`,e).then((e=>{this.localCustomerResults=e.data})).catch((e=>{this.$store.dispatch("newToast",{header:"Error getting search results",message:"Sorry, we could not retrieve your search results",extra_classes:"bg-warning",delay:0})}))}},watch:{searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchModel.length>=3&&(this.searchTimeout=setTimeout((()=>{this.getSearchResults()}),500))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},T=(0,b.Z)(R,[["render",function(e,t,s,Z,_,S){const U=(0,r.up)("list-customers");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",l,[(0,r.kq)(" HEADING "),c,i,(0,r.kq)(" SEARCH FIELD "),(0,r._)("div",n,[u,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>_.searchModel=e)},null,512),[[o.vModelText,_.searchModel]])]),(0,r.kq)(" LIST OUT RESULTS "),m,(0,r.Wm)(U,{"customer-results":_.localCustomerResults},null,8,["customer-results"]),(0,r.kq)(" SHOW IF NO RESULTS "),0==_.localCustomerResults.length?((0,r.wg)(),(0,r.iD)("div",h," There are no customers with the search parameters used. Please try again. ")):(0,r.kq)("v-if",!0),d,(0,r._)("div",p,[(0,r._)("div",f,[(0,r._)("a",{href:`${s.rootUrl}new_customer/`,class:"btn btn-primary save-changes"}," Add new Customer ",8,g)])])])])}]])},5808:(e,t,s)=>{s.d(t,{Z:()=>R});var r=s(3985),o=s(5555),a=s(1826),l=s(6443),c=s(1327),i=s(8521),n=s(1056),u=s(4324),m=s(9672),h=s(9867),d=s(1239),p=s(5004),f=s(1321),g=s(1216),Z=s(5550),_=s(7702),S=s(7903),U=s(2606),v=s(3843),w=s(2393),y=s(3360),k=s(9714),I=s(1323),C=s(2610),b=s(5968);const R={data:()=>({icons:{arrowUp:r.Z,bugIcon:o.Z,bxBriefcase:a.Z,cardChecklist:l.Z,clipboardIcon:c.Z,documentPdf:i.Z,documentText:n.Z,folderIcon:u.Z,groupPresentation:m.Z,imageIcon:h.Z,infoCircle:d.Z,linkIcon:p.Z,linkIcon2:f.Z,linkOut:g.Z,mailIcon:Z.Z,microsoftExcel:_.Z,microsoftPowerpoint:S.Z,microsoftWord:U.Z,noteAdd:v.Z,objectStorage:w.Z,passwordIcon:y.Z,trashCan:k.Z,userIcon:I.Z,usersIcon:C.Z,xCircle:b.Z}})}}}]);