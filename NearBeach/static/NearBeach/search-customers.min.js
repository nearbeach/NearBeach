"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7735],{6262:(e,t)=>{t.A=(e,t)=>{const s=e.__vccOpts||e;for(const[e,r]of t)s[e]=r;return s}},8529:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var r=s(641),a=s(3751);const o={class:"card"},l={class:"card-body"},c={class:"form-group mt-4"},u={key:0,class:"alert alert-warning"},i={class:"row submit-row"},n={class:"col-md-12"},h=["href"];var m=s(33);const d=["src"],p={class:"customer-name"},g=["href"],f={class:"customer-email"},k=["href"];var L=s(2124);const v={name:"ListCustomers",components:{CarbonEmail:s(3980).G2},props:{customerResults:{type:Array,default:()=>[]}},computed:{...(0,L.L8)({rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},methods:{getProfilePicture(e){const t=e.fields.customer_profile_picture;return""===t||null===t?`${this.staticUrl}NearBeach/images/placeholder/product_tour.svg`:`${this.rootUrl}private/${t}`}}};var S=s(6262);const U={name:"SearchCustomers",components:{ListCustomers:(0,S.A)(v,[["render",function(e,t,s,a,o,l){const c=(0,r.g2)("carbon-email");return(0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.customerResults,(s=>((0,r.uX)(),(0,r.CE)("div",{key:s.pk,class:"customer-details"},[(0,r.Lk)("img",{src:l.getProfilePicture(s),alt:"Stakeholder Logo",class:"customer-image"},null,8,d),(0,r.Lk)("div",p,[(0,r.Lk)("a",{href:`${e.rootUrl}customer_information/${s.pk}/`},(0,m.toDisplayString)(s.fields.customer_first_name)+" "+(0,m.toDisplayString)(s.fields.customer_last_name),9,g)]),(0,r.Lk)("div",f,[(0,r.bF)(c),t[0]||(t[0]=(0,r.eW)(" Email: ")),(0,r.Lk)("a",{href:`mailto:${s.fields.customer_email}`},(0,m.toDisplayString)(s.fields.customer_email),9,k)])])))),128)}]])},props:{customerResults:{type:Array,default:()=>[]},staticUrl:{type:String,default:"/"},rootUrl:{type:String,default:"/"}},data(){return{localCustomerResults:this.customerResults,searchModel:"",searchTimeout:""}},methods:{getSearchResults(){const e=new FormData;e.set("search",this.searchModel),this.axios.post(`${this.rootUrl}search/customer/data/`,e).then((e=>{this.localCustomerResults=e.data})).catch((()=>{this.$store.dispatch("newToast",{header:"Error getting search results",message:"Sorry, we could not retrieve your search results",extra_classes:"bg-warning text-dark",delay:0})}))}},watch:{searchModel(){""!==this.searchTimeout&&clearTimeout(this.searchTimeout),(this.searchModel.length>=3||0===this.searchModel.length)&&(this.searchTimeout=setTimeout((()=>{this.getSearchResults()}),500))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},y=(0,S.A)(U,[["render",function(e,t,s,m,d,p){const g=(0,r.g2)("list-customers");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.Lk)("div",l,[(0,r.Q3)(" HEADING "),t[2]||(t[2]=(0,r.Lk)("h1",null,"Search Customers",-1)),(0,r.Q3)(" SEARCH FIELD "),(0,r.Lk)("div",c,[t[1]||(t[1]=(0,r.Lk)("label",null,"Search:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control search-organisation","onUpdate:modelValue":t[0]||(t[0]=e=>d.searchModel=e)},null,512),[[a.vModelText,d.searchModel]])]),(0,r.Q3)(" LIST OUT RESULTS "),t[3]||(t[3]=(0,r.Lk)("hr",null,null,-1)),(0,r.bF)(g,{"customer-results":d.localCustomerResults},null,8,["customer-results"]),(0,r.Q3)(" SHOW IF NO RESULTS "),0==d.localCustomerResults.length?((0,r.uX)(),(0,r.CE)("div",u," There are no customers with the search parameters used. Please try again. ")):(0,r.Q3)("v-if",!0),t[4]||(t[4]=(0,r.Lk)("hr",null,null,-1)),(0,r.Lk)("div",i,[(0,r.Lk)("div",n,[(0,r.Lk)("a",{href:`${s.rootUrl}new_customer/`,class:"btn btn-primary save-changes"}," Add new Customer ",8,h)])])])])}]])}}]);